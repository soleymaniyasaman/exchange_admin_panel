{"ast":null,"code":"import { debounce, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as EVENTS from './../../common/constant';\n/**\n * `Undo` module is used to handle undo actions.\n */\n\nvar UndoRedoCommands =\n/** @class */\nfunction () {\n  function UndoRedoCommands(parent, options) {\n    this.undoRedoStack = [];\n    this.parent = parent;\n    this.undoRedoSteps = !isNullOrUndefined(options) ? options.undoRedoSteps : 30;\n    this.undoRedoTimer = !isNullOrUndefined(options) ? options.undoRedoTimer : 300;\n    this.selection = this.parent.markdownSelection;\n    this.addEventListener();\n  }\n\n  UndoRedoCommands.prototype.addEventListener = function () {\n    var debounceListener = debounce(this.keyUp, this.undoRedoTimer);\n    this.parent.observer.on(EVENTS.KEY_UP_HANDLER, debounceListener, this);\n    this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.keyDown, this);\n    this.parent.observer.on(EVENTS.ACTION, this.onAction, this);\n    this.parent.observer.on(EVENTS.MODEL_CHANGED_PLUGIN, this.onPropertyChanged, this);\n  };\n\n  UndoRedoCommands.prototype.onPropertyChanged = function (props) {\n    for (var _i = 0, _a = Object.keys(props.newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      switch (prop) {\n        case 'undoRedoSteps':\n          this.undoRedoSteps = props.newProp.undoRedoSteps;\n          break;\n\n        case 'undoRedoTimer':\n          this.undoRedoTimer = props.newProp.undoRedoTimer;\n          break;\n      }\n    }\n  };\n\n  UndoRedoCommands.prototype.removeEventListener = function () {\n    var debounceListener = debounce(this.keyUp, 300);\n    this.parent.observer.off(EVENTS.KEY_UP_HANDLER, debounceListener);\n    this.parent.observer.off(EVENTS.KEY_DOWN_HANDLER, this.keyDown);\n    this.parent.observer.off(EVENTS.ACTION, this.onAction);\n    this.parent.observer.off(EVENTS.MODEL_CHANGED_PLUGIN, this.onPropertyChanged);\n  };\n  /**\n   * Destroys the ToolBar.\n   *\n   * @function destroy\n   * @returns {void}\n   * @hidden\n    */\n\n\n  UndoRedoCommands.prototype.destroy = function () {\n    this.removeEventListener();\n  };\n  /**\n   * onAction method\n   *\n   * @param {IMarkdownSubCommands} e - specifies the sub commands\n   * @returns {void}\n   * @hidden\n    */\n\n\n  UndoRedoCommands.prototype.onAction = function (e) {\n    if (e.subCommand === 'Undo') {\n      this.undo(e);\n    } else {\n      this.redo(e);\n    }\n  };\n\n  UndoRedoCommands.prototype.keyDown = function (e) {\n    var event = e.event; // eslint-disable-next-line\n\n    var proxy = this;\n\n    switch (event.action) {\n      case 'undo':\n        event.preventDefault();\n        proxy.undo(e);\n        break;\n\n      case 'redo':\n        event.preventDefault();\n        proxy.redo(e);\n        break;\n    }\n  };\n\n  UndoRedoCommands.prototype.keyUp = function (e) {\n    if (e.event.keyCode !== 17 && !e.event.ctrlKey) {\n      this.saveData(e);\n    }\n  };\n  /**\n   * MD collection stored string format.\n   *\n   * @param {KeyboardEvent} e - specifies the key board event\n   * @function saveData\n   * @returns {void}\n   * @hidden\n    */\n\n\n  UndoRedoCommands.prototype.saveData = function (e) {\n    var textArea = this.parent.element;\n    this.selection.save(textArea.selectionStart, textArea.selectionEnd);\n    var start = textArea.selectionStart;\n    var end = textArea.selectionEnd;\n    var textValue = this.parent.element.value;\n    var changEle = {\n      text: textValue,\n      start: start,\n      end: end\n    };\n\n    if (this.undoRedoStack.length >= this.steps) {\n      this.undoRedoStack = this.undoRedoStack.slice(0, this.steps + 1);\n    }\n\n    if (this.undoRedoStack.length > 1 && this.undoRedoStack[this.undoRedoStack.length - 1].start === start && this.undoRedoStack[this.undoRedoStack.length - 1].end === end) {\n      return;\n    }\n\n    this.undoRedoStack.push(changEle);\n    this.steps = this.undoRedoStack.length - 1;\n\n    if (this.steps > this.undoRedoSteps) {\n      this.undoRedoStack.shift();\n      this.steps--;\n    }\n\n    if (e && e.callBack) {\n      e.callBack();\n    }\n  };\n  /**\n   * Undo the editable text.\n   *\n   * @param {IMarkdownSubCommands} e - specifies the sub commands\n   * @function undo\n   * @returns {void}\n   * @hidden\n    */\n\n\n  UndoRedoCommands.prototype.undo = function (e) {\n    if (this.steps > 0) {\n      this.currentAction = 'Undo';\n      var start = this.undoRedoStack[this.steps - 1].start;\n      var end = this.undoRedoStack[this.steps - 1].end;\n      var removedContent = this.undoRedoStack[this.steps - 1].text;\n      this.parent.element.value = removedContent;\n      this.parent.element.focus();\n      this.steps--;\n      this.restore(this.parent.element, start, end, e);\n    }\n  };\n  /**\n   * Redo the editable text.\n   *\n   * @param {IMarkdownSubCommands} e - specifies the sub commands\n   * @function redo\n   * @returns {void}\n   * @hidden\n    */\n\n\n  UndoRedoCommands.prototype.redo = function (e) {\n    if (this.undoRedoStack[this.steps + 1] != null) {\n      this.currentAction = 'Redo';\n      var start = this.undoRedoStack[this.steps + 1].start;\n      var end = this.undoRedoStack[this.steps + 1].end;\n      this.parent.element.value = this.undoRedoStack[this.steps + 1].text;\n      this.parent.element.focus();\n      this.steps++;\n      this.restore(this.parent.element, start, end, e);\n    }\n  };\n\n  UndoRedoCommands.prototype.restore = function (textArea, start, end, event) {\n    this.selection.save(start, end);\n    this.selection.restore(textArea);\n\n    if (event && event.callBack) {\n      event.callBack({\n        requestType: this.currentAction,\n        selectedText: this.selection.getSelectedText(textArea),\n        editorMode: 'Markdown',\n        event: event.event\n      });\n    }\n  };\n  /**\n   * getUndoStatus method\n   *\n   * @returns {boolean} - returns the boolean value\n   * @hidden\n    */\n\n\n  UndoRedoCommands.prototype.getUndoStatus = function () {\n    var status = {\n      undo: false,\n      redo: false\n    };\n\n    if (this.steps > 0) {\n      status.undo = true;\n    }\n\n    if (this.undoRedoStack[this.steps + 1] != null) {\n      status.redo = true;\n    }\n\n    return status;\n  };\n\n  return UndoRedoCommands;\n}();\n\nexport { UndoRedoCommands };","map":{"version":3,"sources":["/Users/yasaman/Documents/moj_adminpanel/adminpanel/node_modules/@syncfusion/ej2-richtexteditor/src/markdown-parser/plugin/undo.js"],"names":["debounce","isNullOrUndefined","EVENTS","UndoRedoCommands","parent","options","undoRedoStack","undoRedoSteps","undoRedoTimer","selection","markdownSelection","addEventListener","prototype","debounceListener","keyUp","observer","on","KEY_UP_HANDLER","KEY_DOWN_HANDLER","keyDown","ACTION","onAction","MODEL_CHANGED_PLUGIN","onPropertyChanged","props","_i","_a","Object","keys","newProp","length","prop","removeEventListener","off","destroy","e","subCommand","undo","redo","event","proxy","action","preventDefault","keyCode","ctrlKey","saveData","textArea","element","save","selectionStart","selectionEnd","start","end","textValue","value","changEle","text","steps","slice","push","shift","callBack","currentAction","removedContent","focus","restore","requestType","selectedText","getSelectedText","editorMode","getUndoStatus","status"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,iBAAnB,QAA4C,sBAA5C;AACA,OAAO,KAAKC,MAAZ,MAAwB,yBAAxB;AACA;AACA;AACA;;AACA,IAAIC,gBAAgB;AAAG;AAAe,YAAY;AAC9C,WAASA,gBAAT,CAA0BC,MAA1B,EAAkCC,OAAlC,EAA2C;AACvC,SAAKC,aAAL,GAAqB,EAArB;AACA,SAAKF,MAAL,GAAcA,MAAd;AACA,SAAKG,aAAL,GAAqB,CAACN,iBAAiB,CAACI,OAAD,CAAlB,GAA8BA,OAAO,CAACE,aAAtC,GAAsD,EAA3E;AACA,SAAKC,aAAL,GAAqB,CAACP,iBAAiB,CAACI,OAAD,CAAlB,GAA8BA,OAAO,CAACG,aAAtC,GAAsD,GAA3E;AACA,SAAKC,SAAL,GAAiB,KAAKL,MAAL,CAAYM,iBAA7B;AACA,SAAKC,gBAAL;AACH;;AACDR,EAAAA,gBAAgB,CAACS,SAAjB,CAA2BD,gBAA3B,GAA8C,YAAY;AACtD,QAAIE,gBAAgB,GAAGb,QAAQ,CAAC,KAAKc,KAAN,EAAa,KAAKN,aAAlB,CAA/B;AACA,SAAKJ,MAAL,CAAYW,QAAZ,CAAqBC,EAArB,CAAwBd,MAAM,CAACe,cAA/B,EAA+CJ,gBAA/C,EAAiE,IAAjE;AACA,SAAKT,MAAL,CAAYW,QAAZ,CAAqBC,EAArB,CAAwBd,MAAM,CAACgB,gBAA/B,EAAiD,KAAKC,OAAtD,EAA+D,IAA/D;AACA,SAAKf,MAAL,CAAYW,QAAZ,CAAqBC,EAArB,CAAwBd,MAAM,CAACkB,MAA/B,EAAuC,KAAKC,QAA5C,EAAsD,IAAtD;AACA,SAAKjB,MAAL,CAAYW,QAAZ,CAAqBC,EAArB,CAAwBd,MAAM,CAACoB,oBAA/B,EAAqD,KAAKC,iBAA1D,EAA6E,IAA7E;AACH,GAND;;AAOApB,EAAAA,gBAAgB,CAACS,SAAjB,CAA2BW,iBAA3B,GAA+C,UAAUC,KAAV,EAAiB;AAC5D,SAAK,IAAIC,EAAE,GAAG,CAAT,EAAYC,EAAE,GAAGC,MAAM,CAACC,IAAP,CAAYJ,KAAK,CAACK,OAAlB,CAAtB,EAAkDJ,EAAE,GAAGC,EAAE,CAACI,MAA1D,EAAkEL,EAAE,EAApE,EAAwE;AACpE,UAAIM,IAAI,GAAGL,EAAE,CAACD,EAAD,CAAb;;AACA,cAAQM,IAAR;AACI,aAAK,eAAL;AACI,eAAKxB,aAAL,GAAqBiB,KAAK,CAACK,OAAN,CAActB,aAAnC;AACA;;AACJ,aAAK,eAAL;AACI,eAAKC,aAAL,GAAqBgB,KAAK,CAACK,OAAN,CAAcrB,aAAnC;AACA;AANR;AAQH;AACJ,GAZD;;AAaAL,EAAAA,gBAAgB,CAACS,SAAjB,CAA2BoB,mBAA3B,GAAiD,YAAY;AACzD,QAAInB,gBAAgB,GAAGb,QAAQ,CAAC,KAAKc,KAAN,EAAa,GAAb,CAA/B;AACA,SAAKV,MAAL,CAAYW,QAAZ,CAAqBkB,GAArB,CAAyB/B,MAAM,CAACe,cAAhC,EAAgDJ,gBAAhD;AACA,SAAKT,MAAL,CAAYW,QAAZ,CAAqBkB,GAArB,CAAyB/B,MAAM,CAACgB,gBAAhC,EAAkD,KAAKC,OAAvD;AACA,SAAKf,MAAL,CAAYW,QAAZ,CAAqBkB,GAArB,CAAyB/B,MAAM,CAACkB,MAAhC,EAAwC,KAAKC,QAA7C;AACA,SAAKjB,MAAL,CAAYW,QAAZ,CAAqBkB,GAArB,CAAyB/B,MAAM,CAACoB,oBAAhC,EAAsD,KAAKC,iBAA3D;AACH,GAND;AAOA;AACJ;AACA;AACA;AACA;AACA;AACA;;;AAEIpB,EAAAA,gBAAgB,CAACS,SAAjB,CAA2BsB,OAA3B,GAAqC,YAAY;AAC7C,SAAKF,mBAAL;AACH,GAFD;AAGA;AACJ;AACA;AACA;AACA;AACA;AACA;;;AAEI7B,EAAAA,gBAAgB,CAACS,SAAjB,CAA2BS,QAA3B,GAAsC,UAAUc,CAAV,EAAa;AAC/C,QAAIA,CAAC,CAACC,UAAF,KAAiB,MAArB,EAA6B;AACzB,WAAKC,IAAL,CAAUF,CAAV;AACH,KAFD,MAGK;AACD,WAAKG,IAAL,CAAUH,CAAV;AACH;AACJ,GAPD;;AAQAhC,EAAAA,gBAAgB,CAACS,SAAjB,CAA2BO,OAA3B,GAAqC,UAAUgB,CAAV,EAAa;AAC9C,QAAII,KAAK,GAAGJ,CAAC,CAACI,KAAd,CAD8C,CAE9C;;AACA,QAAIC,KAAK,GAAG,IAAZ;;AACA,YAAQD,KAAK,CAACE,MAAd;AACI,WAAK,MAAL;AACIF,QAAAA,KAAK,CAACG,cAAN;AACAF,QAAAA,KAAK,CAACH,IAAN,CAAWF,CAAX;AACA;;AACJ,WAAK,MAAL;AACII,QAAAA,KAAK,CAACG,cAAN;AACAF,QAAAA,KAAK,CAACF,IAAN,CAAWH,CAAX;AACA;AARR;AAUH,GAdD;;AAeAhC,EAAAA,gBAAgB,CAACS,SAAjB,CAA2BE,KAA3B,GAAmC,UAAUqB,CAAV,EAAa;AAC5C,QAAIA,CAAC,CAACI,KAAF,CAAQI,OAAR,KAAoB,EAApB,IAA0B,CAACR,CAAC,CAACI,KAAF,CAAQK,OAAvC,EAAgD;AAC5C,WAAKC,QAAL,CAAcV,CAAd;AACH;AACJ,GAJD;AAKA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEIhC,EAAAA,gBAAgB,CAACS,SAAjB,CAA2BiC,QAA3B,GAAsC,UAAUV,CAAV,EAAa;AAC/C,QAAIW,QAAQ,GAAG,KAAK1C,MAAL,CAAY2C,OAA3B;AACA,SAAKtC,SAAL,CAAeuC,IAAf,CAAoBF,QAAQ,CAACG,cAA7B,EAA6CH,QAAQ,CAACI,YAAtD;AACA,QAAIC,KAAK,GAAGL,QAAQ,CAACG,cAArB;AACA,QAAIG,GAAG,GAAGN,QAAQ,CAACI,YAAnB;AACA,QAAIG,SAAS,GAAG,KAAKjD,MAAL,CAAY2C,OAAZ,CAAoBO,KAApC;AACA,QAAIC,QAAQ,GAAG;AAAEC,MAAAA,IAAI,EAAEH,SAAR;AAAmBF,MAAAA,KAAK,EAAEA,KAA1B;AAAiCC,MAAAA,GAAG,EAAEA;AAAtC,KAAf;;AACA,QAAI,KAAK9C,aAAL,CAAmBwB,MAAnB,IAA6B,KAAK2B,KAAtC,EAA6C;AACzC,WAAKnD,aAAL,GAAqB,KAAKA,aAAL,CAAmBoD,KAAnB,CAAyB,CAAzB,EAA4B,KAAKD,KAAL,GAAa,CAAzC,CAArB;AACH;;AACD,QAAI,KAAKnD,aAAL,CAAmBwB,MAAnB,GAA4B,CAA5B,IAAkC,KAAKxB,aAAL,CAAmB,KAAKA,aAAL,CAAmBwB,MAAnB,GAA4B,CAA/C,EAAkDqB,KAAlD,KAA4DA,KAA9F,IACC,KAAK7C,aAAL,CAAmB,KAAKA,aAAL,CAAmBwB,MAAnB,GAA4B,CAA/C,EAAkDsB,GAAlD,KAA0DA,GAD/D,EACqE;AACjE;AACH;;AACD,SAAK9C,aAAL,CAAmBqD,IAAnB,CAAwBJ,QAAxB;AACA,SAAKE,KAAL,GAAa,KAAKnD,aAAL,CAAmBwB,MAAnB,GAA4B,CAAzC;;AACA,QAAI,KAAK2B,KAAL,GAAa,KAAKlD,aAAtB,EAAqC;AACjC,WAAKD,aAAL,CAAmBsD,KAAnB;AACA,WAAKH,KAAL;AACH;;AACD,QAAItB,CAAC,IAAIA,CAAC,CAAC0B,QAAX,EAAqB;AACjB1B,MAAAA,CAAC,CAAC0B,QAAF;AACH;AACJ,GAvBD;AAwBA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEI1D,EAAAA,gBAAgB,CAACS,SAAjB,CAA2ByB,IAA3B,GAAkC,UAAUF,CAAV,EAAa;AAC3C,QAAI,KAAKsB,KAAL,GAAa,CAAjB,EAAoB;AAChB,WAAKK,aAAL,GAAqB,MAArB;AACA,UAAIX,KAAK,GAAG,KAAK7C,aAAL,CAAmB,KAAKmD,KAAL,GAAa,CAAhC,EAAmCN,KAA/C;AACA,UAAIC,GAAG,GAAG,KAAK9C,aAAL,CAAmB,KAAKmD,KAAL,GAAa,CAAhC,EAAmCL,GAA7C;AACA,UAAIW,cAAc,GAAG,KAAKzD,aAAL,CAAmB,KAAKmD,KAAL,GAAa,CAAhC,EAAmCD,IAAxD;AACA,WAAKpD,MAAL,CAAY2C,OAAZ,CAAoBO,KAApB,GAA4BS,cAA5B;AACA,WAAK3D,MAAL,CAAY2C,OAAZ,CAAoBiB,KAApB;AACA,WAAKP,KAAL;AACA,WAAKQ,OAAL,CAAa,KAAK7D,MAAL,CAAY2C,OAAzB,EAAkCI,KAAlC,EAAyCC,GAAzC,EAA8CjB,CAA9C;AACH;AACJ,GAXD;AAYA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEIhC,EAAAA,gBAAgB,CAACS,SAAjB,CAA2B0B,IAA3B,GAAkC,UAAUH,CAAV,EAAa;AAC3C,QAAI,KAAK7B,aAAL,CAAmB,KAAKmD,KAAL,GAAa,CAAhC,KAAsC,IAA1C,EAAgD;AAC5C,WAAKK,aAAL,GAAqB,MAArB;AACA,UAAIX,KAAK,GAAG,KAAK7C,aAAL,CAAmB,KAAKmD,KAAL,GAAa,CAAhC,EAAmCN,KAA/C;AACA,UAAIC,GAAG,GAAG,KAAK9C,aAAL,CAAmB,KAAKmD,KAAL,GAAa,CAAhC,EAAmCL,GAA7C;AACA,WAAKhD,MAAL,CAAY2C,OAAZ,CAAoBO,KAApB,GAA4B,KAAKhD,aAAL,CAAmB,KAAKmD,KAAL,GAAa,CAAhC,EAAmCD,IAA/D;AACA,WAAKpD,MAAL,CAAY2C,OAAZ,CAAoBiB,KAApB;AACA,WAAKP,KAAL;AACA,WAAKQ,OAAL,CAAa,KAAK7D,MAAL,CAAY2C,OAAzB,EAAkCI,KAAlC,EAAyCC,GAAzC,EAA8CjB,CAA9C;AACH;AACJ,GAVD;;AAWAhC,EAAAA,gBAAgB,CAACS,SAAjB,CAA2BqD,OAA3B,GAAqC,UAAUnB,QAAV,EAAoBK,KAApB,EAA2BC,GAA3B,EAAgCb,KAAhC,EAAuC;AACxE,SAAK9B,SAAL,CAAeuC,IAAf,CAAoBG,KAApB,EAA2BC,GAA3B;AACA,SAAK3C,SAAL,CAAewD,OAAf,CAAuBnB,QAAvB;;AACA,QAAIP,KAAK,IAAIA,KAAK,CAACsB,QAAnB,EAA6B;AACzBtB,MAAAA,KAAK,CAACsB,QAAN,CAAe;AACXK,QAAAA,WAAW,EAAE,KAAKJ,aADP;AAEXK,QAAAA,YAAY,EAAE,KAAK1D,SAAL,CAAe2D,eAAf,CAA+BtB,QAA/B,CAFH;AAGXuB,QAAAA,UAAU,EAAE,UAHD;AAIX9B,QAAAA,KAAK,EAAEA,KAAK,CAACA;AAJF,OAAf;AAMH;AACJ,GAXD;AAYA;AACJ;AACA;AACA;AACA;AACA;;;AAEIpC,EAAAA,gBAAgB,CAACS,SAAjB,CAA2B0D,aAA3B,GAA2C,YAAY;AACnD,QAAIC,MAAM,GAAG;AAAElC,MAAAA,IAAI,EAAE,KAAR;AAAeC,MAAAA,IAAI,EAAE;AAArB,KAAb;;AACA,QAAI,KAAKmB,KAAL,GAAa,CAAjB,EAAoB;AAChBc,MAAAA,MAAM,CAAClC,IAAP,GAAc,IAAd;AACH;;AACD,QAAI,KAAK/B,aAAL,CAAmB,KAAKmD,KAAL,GAAa,CAAhC,KAAsC,IAA1C,EAAgD;AAC5Cc,MAAAA,MAAM,CAACjC,IAAP,GAAc,IAAd;AACH;;AACD,WAAOiC,MAAP;AACH,GATD;;AAUA,SAAOpE,gBAAP;AACH,CA3LqC,EAAtC;;AA4LA,SAASA,gBAAT","sourcesContent":["import { debounce, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as EVENTS from './../../common/constant';\n/**\n * `Undo` module is used to handle undo actions.\n */\nvar UndoRedoCommands = /** @class */ (function () {\n    function UndoRedoCommands(parent, options) {\n        this.undoRedoStack = [];\n        this.parent = parent;\n        this.undoRedoSteps = !isNullOrUndefined(options) ? options.undoRedoSteps : 30;\n        this.undoRedoTimer = !isNullOrUndefined(options) ? options.undoRedoTimer : 300;\n        this.selection = this.parent.markdownSelection;\n        this.addEventListener();\n    }\n    UndoRedoCommands.prototype.addEventListener = function () {\n        var debounceListener = debounce(this.keyUp, this.undoRedoTimer);\n        this.parent.observer.on(EVENTS.KEY_UP_HANDLER, debounceListener, this);\n        this.parent.observer.on(EVENTS.KEY_DOWN_HANDLER, this.keyDown, this);\n        this.parent.observer.on(EVENTS.ACTION, this.onAction, this);\n        this.parent.observer.on(EVENTS.MODEL_CHANGED_PLUGIN, this.onPropertyChanged, this);\n    };\n    UndoRedoCommands.prototype.onPropertyChanged = function (props) {\n        for (var _i = 0, _a = Object.keys(props.newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'undoRedoSteps':\n                    this.undoRedoSteps = props.newProp.undoRedoSteps;\n                    break;\n                case 'undoRedoTimer':\n                    this.undoRedoTimer = props.newProp.undoRedoTimer;\n                    break;\n            }\n        }\n    };\n    UndoRedoCommands.prototype.removeEventListener = function () {\n        var debounceListener = debounce(this.keyUp, 300);\n        this.parent.observer.off(EVENTS.KEY_UP_HANDLER, debounceListener);\n        this.parent.observer.off(EVENTS.KEY_DOWN_HANDLER, this.keyDown);\n        this.parent.observer.off(EVENTS.ACTION, this.onAction);\n        this.parent.observer.off(EVENTS.MODEL_CHANGED_PLUGIN, this.onPropertyChanged);\n    };\n    /**\n     * Destroys the ToolBar.\n     *\n     * @function destroy\n     * @returns {void}\n     * @hidden\n\n     */\n    UndoRedoCommands.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    /**\n     * onAction method\n     *\n     * @param {IMarkdownSubCommands} e - specifies the sub commands\n     * @returns {void}\n     * @hidden\n\n     */\n    UndoRedoCommands.prototype.onAction = function (e) {\n        if (e.subCommand === 'Undo') {\n            this.undo(e);\n        }\n        else {\n            this.redo(e);\n        }\n    };\n    UndoRedoCommands.prototype.keyDown = function (e) {\n        var event = e.event;\n        // eslint-disable-next-line\n        var proxy = this;\n        switch (event.action) {\n            case 'undo':\n                event.preventDefault();\n                proxy.undo(e);\n                break;\n            case 'redo':\n                event.preventDefault();\n                proxy.redo(e);\n                break;\n        }\n    };\n    UndoRedoCommands.prototype.keyUp = function (e) {\n        if (e.event.keyCode !== 17 && !e.event.ctrlKey) {\n            this.saveData(e);\n        }\n    };\n    /**\n     * MD collection stored string format.\n     *\n     * @param {KeyboardEvent} e - specifies the key board event\n     * @function saveData\n     * @returns {void}\n     * @hidden\n\n     */\n    UndoRedoCommands.prototype.saveData = function (e) {\n        var textArea = this.parent.element;\n        this.selection.save(textArea.selectionStart, textArea.selectionEnd);\n        var start = textArea.selectionStart;\n        var end = textArea.selectionEnd;\n        var textValue = this.parent.element.value;\n        var changEle = { text: textValue, start: start, end: end };\n        if (this.undoRedoStack.length >= this.steps) {\n            this.undoRedoStack = this.undoRedoStack.slice(0, this.steps + 1);\n        }\n        if (this.undoRedoStack.length > 1 && (this.undoRedoStack[this.undoRedoStack.length - 1].start === start) &&\n            (this.undoRedoStack[this.undoRedoStack.length - 1].end === end)) {\n            return;\n        }\n        this.undoRedoStack.push(changEle);\n        this.steps = this.undoRedoStack.length - 1;\n        if (this.steps > this.undoRedoSteps) {\n            this.undoRedoStack.shift();\n            this.steps--;\n        }\n        if (e && e.callBack) {\n            e.callBack();\n        }\n    };\n    /**\n     * Undo the editable text.\n     *\n     * @param {IMarkdownSubCommands} e - specifies the sub commands\n     * @function undo\n     * @returns {void}\n     * @hidden\n\n     */\n    UndoRedoCommands.prototype.undo = function (e) {\n        if (this.steps > 0) {\n            this.currentAction = 'Undo';\n            var start = this.undoRedoStack[this.steps - 1].start;\n            var end = this.undoRedoStack[this.steps - 1].end;\n            var removedContent = this.undoRedoStack[this.steps - 1].text;\n            this.parent.element.value = removedContent;\n            this.parent.element.focus();\n            this.steps--;\n            this.restore(this.parent.element, start, end, e);\n        }\n    };\n    /**\n     * Redo the editable text.\n     *\n     * @param {IMarkdownSubCommands} e - specifies the sub commands\n     * @function redo\n     * @returns {void}\n     * @hidden\n\n     */\n    UndoRedoCommands.prototype.redo = function (e) {\n        if (this.undoRedoStack[this.steps + 1] != null) {\n            this.currentAction = 'Redo';\n            var start = this.undoRedoStack[this.steps + 1].start;\n            var end = this.undoRedoStack[this.steps + 1].end;\n            this.parent.element.value = this.undoRedoStack[this.steps + 1].text;\n            this.parent.element.focus();\n            this.steps++;\n            this.restore(this.parent.element, start, end, e);\n        }\n    };\n    UndoRedoCommands.prototype.restore = function (textArea, start, end, event) {\n        this.selection.save(start, end);\n        this.selection.restore(textArea);\n        if (event && event.callBack) {\n            event.callBack({\n                requestType: this.currentAction,\n                selectedText: this.selection.getSelectedText(textArea),\n                editorMode: 'Markdown',\n                event: event.event\n            });\n        }\n    };\n    /**\n     * getUndoStatus method\n     *\n     * @returns {boolean} - returns the boolean value\n     * @hidden\n\n     */\n    UndoRedoCommands.prototype.getUndoStatus = function () {\n        var status = { undo: false, redo: false };\n        if (this.steps > 0) {\n            status.undo = true;\n        }\n        if (this.undoRedoStack[this.steps + 1] != null) {\n            status.redo = true;\n        }\n        return status;\n    };\n    return UndoRedoCommands;\n}());\nexport { UndoRedoCommands };\n"]},"metadata":{},"sourceType":"module"}