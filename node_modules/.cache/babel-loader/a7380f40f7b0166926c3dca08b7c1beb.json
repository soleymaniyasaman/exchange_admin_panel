{"ast":null,"code":"import { EventHandler, closest, Browser, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { remove } from '@syncfusion/ej2-base';\nimport { ContextMenu as Menu } from '@syncfusion/ej2-navigations';\nimport { parentsUntil, applyBiggerTheme } from '../base/util';\nimport * as events from '../base/constant';\nimport { calculatePosition } from '@syncfusion/ej2-popups';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { Group } from '../actions/group';\nimport { Sort } from '../actions/sort';\nimport { Filter } from '../actions/filter';\nimport { Resize } from '../actions/resize';\nimport * as literals from '../base/string-literals';\n/**\n * 'column menu module used to handle column menu actions'\n *\n * @hidden\n */\n\nvar ColumnMenu =\n/** @class */\nfunction () {\n  function ColumnMenu(parent, serviceLocator) {\n    this.defaultItems = {};\n    this.localeText = this.setLocaleKey();\n    this.disableItems = [];\n    this.hiddenItems = [];\n    this.isOpen = false; // default class names\n\n    this.GROUP = 'e-icon-group';\n    this.UNGROUP = 'e-icon-ungroup';\n    this.ASCENDING = 'e-icon-ascending';\n    this.DESCENDING = 'e-icon-descending';\n    this.ROOT = 'e-columnmenu';\n    this.FILTER = 'e-icon-filter';\n    this.POP = 'e-filter-popup';\n    this.WRAP = 'e-col-menu';\n    this.CHOOSER = '_chooser_';\n    this.parent = parent;\n    this.gridID = parent.element.id;\n    this.serviceLocator = serviceLocator;\n    this.addEventListener();\n  }\n\n  ColumnMenu.prototype.wireEvents = function () {\n    var elements = this.getColumnMenuHandlers();\n\n    for (var i = 0; i < elements.length; i++) {\n      EventHandler.add(elements[i], 'mousedown', this.columnMenuHandlerDown, this);\n    }\n  };\n\n  ColumnMenu.prototype.unwireEvents = function () {\n    var elements = this.getColumnMenuHandlers();\n\n    for (var i = 0; i < elements.length; i++) {\n      EventHandler.remove(elements[i], 'mousedown', this.columnMenuHandlerDown);\n    }\n  };\n  /**\n   * To destroy the resize\n   *\n   * @returns {void}\n   * @hidden\n   */\n\n\n  ColumnMenu.prototype.destroy = function () {\n    var gridElement = this.parent.element;\n\n    if (!gridElement || !gridElement.querySelector('.' + literals.gridHeader) && !gridElement.querySelector('.' + literals.gridContent)) {\n      return;\n    }\n\n    this.columnMenu.destroy();\n    this.removeEventListener();\n    this.unwireFilterEvents();\n    this.unwireEvents();\n\n    if (this.element.parentNode) {\n      remove(this.element);\n    }\n  };\n\n  ColumnMenu.prototype.columnMenuHandlerClick = function (e) {\n    if (e.target.classList.contains('e-columnmenu')) {\n      this.columnMenu.items = this.getItems();\n      this.columnMenu.dataBind();\n\n      if (this.isOpen && this.headerCell !== this.getHeaderCell(e) || document.querySelector('.e-grid-menu .e-menu-parent.e-ul')) {\n        this.columnMenu.close();\n        this.openColumnMenu(e);\n      } else if (!this.isOpen) {\n        this.openColumnMenu(e);\n      } else {\n        this.columnMenu.close();\n      }\n    }\n  };\n  /**\n   * @param {string} field - specifies the field name\n   * @returns {void}\n   * @hidden\n   */\n\n\n  ColumnMenu.prototype.openColumnMenuByField = function (field) {\n    this.openColumnMenu({\n      target: this.parent.getColumnHeaderByField(field).querySelector('.e-columnmenu')\n    });\n  };\n\n  ColumnMenu.prototype.openColumnMenu = function (e) {\n    var pos = {\n      top: 0,\n      left: 0\n    };\n    this.element.style.cssText = 'display:block;visibility:hidden';\n    var elePos = this.element.getBoundingClientRect();\n    this.element.style.cssText = 'display:none;visibility:visible';\n    this.headerCell = this.getHeaderCell(e);\n\n    if (Browser.isDevice) {\n      pos.top = window.innerHeight / 2 - elePos.height / 2;\n      pos.left = window.innerWidth / 2 - elePos.width / 2;\n    } else {\n      if (this.parent.enableRtl) {\n        pos = calculatePosition(this.headerCell, 'left', 'bottom');\n      } else {\n        pos = calculatePosition(this.headerCell, 'right', 'bottom');\n        pos.left -= elePos.width;\n      }\n    }\n\n    this.columnMenu.open(pos.top, pos.left);\n\n    if (e.preventDefault) {\n      e.preventDefault();\n    }\n\n    applyBiggerTheme(this.parent.element, this.columnMenu.element.parentElement);\n  };\n\n  ColumnMenu.prototype.columnMenuHandlerDown = function () {\n    this.isOpen = !(this.element.style.display === 'none' || this.element.style.display === '');\n  };\n\n  ColumnMenu.prototype.getColumnMenuHandlers = function () {\n    return [].slice.call(this.parent.getHeaderTable().getElementsByClassName(this.ROOT));\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n\n\n  ColumnMenu.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.on(events.headerRefreshed, this.wireEvents, this);\n    this.parent.on(events.uiUpdate, this.enableAfterRenderMenu, this);\n    this.parent.on(events.initialEnd, this.render, this);\n\n    if (this.isFilterItemAdded()) {\n      this.parent.on(events.filterDialogCreated, this.filterPosition, this);\n    }\n\n    this.parent.on(events.click, this.columnMenuHandlerClick, this);\n    this.parent.on(events.keyPressed, this.keyPressHandler, this);\n    this.parent.on(events.destroy, this.destroy, this);\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n\n\n  ColumnMenu.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.off(events.headerRefreshed, this.unwireEvents);\n    this.parent.off(events.uiUpdate, this.enableAfterRenderMenu);\n    this.parent.off(events.initialEnd, this.render);\n\n    if (this.isFilterItemAdded()) {\n      this.parent.off(events.filterDialogCreated, this.filterPosition);\n    }\n\n    this.parent.off(events.click, this.columnMenuHandlerClick);\n    this.parent.off(events.keyPressed, this.keyPressHandler);\n    this.parent.off(events.destroy, this.destroy);\n  };\n\n  ColumnMenu.prototype.keyPressHandler = function (e) {\n    var gObj = this.parent;\n\n    if (e.action === 'altDownArrow') {\n      var element = gObj.focusModule.currentInfo.element;\n\n      if (element && element.classList.contains('e-headercell')) {\n        var column = gObj.getColumnByUid(element.firstElementChild.getAttribute('e-mappinguid'));\n        this.openColumnMenuByField(column.field);\n      }\n    }\n  };\n\n  ColumnMenu.prototype.enableAfterRenderMenu = function (e) {\n    if (e.module === this.getModuleName() && e.enable) {\n      if (this.columnMenu) {\n        this.columnMenu.destroy();\n        remove(this.element);\n      }\n\n      this.render();\n    }\n  };\n\n  ColumnMenu.prototype.render = function () {\n    this.l10n = this.serviceLocator.getService('localization');\n    this.element = this.parent.createElement('ul', {\n      id: this.gridID + '_columnmenu',\n      className: 'e-colmenu'\n    });\n    this.element.setAttribute('aria-label', this.l10n.getConstant('ColumnMenuDialogARIA'));\n    this.parent.element.appendChild(this.element);\n    this.columnMenu = new Menu({\n      cssClass: 'e-grid-menu',\n      enableRtl: this.parent.enableRtl,\n      enablePersistence: this.parent.enablePersistence,\n      locale: this.parent.locale,\n      items: this.getItems(),\n      select: this.columnMenuItemClick.bind(this),\n      beforeOpen: this.columnMenuBeforeOpen.bind(this),\n      onOpen: this.columnMenuOnOpen.bind(this),\n      onClose: this.columnMenuOnClose.bind(this),\n      beforeItemRender: this.beforeMenuItemRender.bind(this),\n      beforeClose: this.columnMenuBeforeClose.bind(this)\n    });\n    this.columnMenu.appendTo(this.element);\n    this.wireFilterEvents();\n  };\n\n  ColumnMenu.prototype.wireFilterEvents = function () {\n    if (!Browser.isDevice && this.isFilterItemAdded()) {\n      EventHandler.add(this.element, 'mouseover', this.appendFilter, this);\n    }\n  };\n\n  ColumnMenu.prototype.unwireFilterEvents = function () {\n    if (!Browser.isDevice && this.isFilterItemAdded()) {\n      EventHandler.remove(this.element, 'mouseover', this.appendFilter);\n    }\n  };\n\n  ColumnMenu.prototype.beforeMenuItemRender = function (args) {\n    if (this.isChooserItem(args.item)) {\n      var field_1 = this.getKeyFromId(args.item.id, this.CHOOSER);\n      var column = this.parent.columnModel.filter(function (col) {\n        return col.field === field_1;\n      });\n      var check = createCheckBox(this.parent.createElement, false, {\n        label: args.item.text,\n        checked: column[0].visible\n      });\n\n      if (this.parent.enableRtl) {\n        check.classList.add('e-rtl');\n      }\n\n      args.element.innerHTML = '';\n      args.element.appendChild(check);\n    } else if (args.item.id && this.getKeyFromId(args.item.id) === 'Filter') {\n      args.element.appendChild(this.parent.createElement('span', {\n        className: 'e-icons e-caret'\n      }));\n      args.element.className += 'e-filter-item e-menu-caret-icon';\n    }\n  };\n\n  ColumnMenu.prototype.columnMenuBeforeClose = function (args) {\n    var colChooser = args.event ? closest(args.event.target, '.e-menu-item') : null;\n\n    if (!isNullOrUndefined(args.parentItem) && this.getKeyFromId(args.parentItem.id) === 'ColumnChooser' && colChooser && this.isChooserItem(colChooser)) {\n      args.cancel = true;\n    } else if (args.event && (closest(args.event.target, '.' + this.POP) || args.event.currentTarget && args.event.currentTarget.activeElement && parentsUntil(args.event.currentTarget.activeElement, 'e-filter-popup') || parentsUntil(args.event.target, 'e-popup') || parentsUntil(args.event.target, 'e-popup-wrapper')) && !Browser.isDevice) {\n      args.cancel = true;\n    }\n  };\n\n  ColumnMenu.prototype.isChooserItem = function (item) {\n    return item.id && item.id.indexOf('_colmenu_') >= 0 && this.getKeyFromId(item.id, this.CHOOSER).indexOf('_colmenu_') === -1;\n  };\n\n  ColumnMenu.prototype.columnMenuBeforeOpen = function (args) {\n    args.column = this.targetColumn = this.getColumn();\n    this.parent.trigger(events.columnMenuOpen, args);\n\n    for (var _i = 0, _a = args.items; _i < _a.length; _i++) {\n      var item = _a[_i];\n      var key = this.getKeyFromId(item.id);\n      var dItem = this.defaultItems[key];\n\n      if (this.getDefaultItems().indexOf(key) !== -1 && this.ensureDisabledStatus(key) && !dItem.hide) {\n        this.disableItems.push(item.text);\n      }\n\n      if (item.hide) {\n        this.hiddenItems.push(item.text);\n      }\n    }\n\n    this.columnMenu.enableItems(this.disableItems, false);\n    this.columnMenu.hideItems(this.hiddenItems);\n  };\n\n  ColumnMenu.prototype.columnMenuOnOpen = function (args) {\n    if (args.element.className === 'e-menu-parent e-ul ') {\n      if (args.element.offsetHeight > window.innerHeight || this.parent.element.offsetHeight > window.innerHeight) {\n        args.element.style.maxHeight = window.innerHeight * 0.8 + 'px';\n        args.element.style.overflowY = 'auto';\n      }\n    }\n  };\n\n  ColumnMenu.prototype.ensureDisabledStatus = function (item) {\n    var status = false;\n\n    switch (item) {\n      case 'Group':\n        if (!this.parent.allowGrouping || this.parent.ensureModuleInjected(Group) && this.targetColumn && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) >= 0 || this.targetColumn && !this.targetColumn.allowGrouping) {\n          status = true;\n        }\n\n        break;\n\n      case 'AutoFitAll':\n      case 'AutoFit':\n        status = !this.parent.ensureModuleInjected(Resize);\n        break;\n\n      case 'Ungroup':\n        if (!this.parent.ensureModuleInjected(Group) || this.parent.ensureModuleInjected(Group) && this.targetColumn && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) < 0) {\n          status = true;\n        }\n\n        break;\n\n      case 'SortDescending':\n      case 'SortAscending':\n        if (this.parent.allowSorting && this.parent.ensureModuleInjected(Sort) && this.parent.sortSettings.columns.length > 0 && this.targetColumn && this.targetColumn.allowSorting) {\n          var sortColumns = this.parent.sortSettings.columns;\n\n          for (var i = 0; i < sortColumns.length; i++) {\n            if (sortColumns[i].field === this.targetColumn.field && sortColumns[i].direction.toLocaleLowerCase() === item.toLocaleLowerCase().replace('sort', '')) {\n              status = true;\n            }\n          }\n        } else if (!this.parent.allowSorting || !this.parent.ensureModuleInjected(Sort) || this.parent.allowSorting && this.targetColumn && !this.targetColumn.allowSorting) {\n          status = true;\n        }\n\n        break;\n\n      case 'Filter':\n        if (this.parent.allowFiltering && this.parent.filterSettings.type !== 'FilterBar' && this.parent.ensureModuleInjected(Filter) && this.targetColumn && this.targetColumn.allowFiltering) {\n          status = false;\n        } else if (this.parent.ensureModuleInjected(Filter) && this.parent.allowFiltering && this.targetColumn && (!this.targetColumn.allowFiltering || this.parent.filterSettings.type === 'FilterBar')) {\n          status = true;\n        }\n\n    }\n\n    return status;\n  };\n\n  ColumnMenu.prototype.columnMenuItemClick = function (args) {\n    var item = this.isChooserItem(args.item) ? 'ColumnChooser' : this.getKeyFromId(args.item.id);\n\n    switch (item) {\n      case 'AutoFit':\n        this.parent.autoFitColumns(this.targetColumn.field);\n        break;\n\n      case 'AutoFitAll':\n        this.parent.autoFitColumns([]);\n        break;\n\n      case 'Ungroup':\n        this.parent.ungroupColumn(this.targetColumn.field);\n        break;\n\n      case 'Group':\n        this.parent.groupColumn(this.targetColumn.field);\n        break;\n\n      case 'SortAscending':\n        this.parent.sortColumn(this.targetColumn.field, 'Ascending');\n        break;\n\n      case 'SortDescending':\n        this.parent.sortColumn(this.targetColumn.field, 'Descending');\n        break;\n\n      case 'ColumnChooser':\n        // eslint-disable-next-line no-case-declarations\n        var key = this.getKeyFromId(args.item.id, this.CHOOSER); // eslint-disable-next-line no-case-declarations\n\n        var checkbox = args.element.querySelector('.e-checkbox-wrapper .e-frame');\n\n        if (checkbox && checkbox.classList.contains('e-check')) {\n          checkbox.classList.remove('e-check');\n          this.parent.hideColumns(key, 'field');\n        } else if (checkbox) {\n          this.parent.showColumns(key, 'field');\n          checkbox.classList.add('e-check');\n        }\n\n        break;\n\n      case 'Filter':\n        this.getFilter(args.element, args.item.id);\n        break;\n    }\n\n    args.column = this.targetColumn;\n    this.parent.trigger(events.columnMenuClick, args);\n  };\n\n  ColumnMenu.prototype.columnMenuOnClose = function (args) {\n    var parent = 'parentObj';\n\n    if (args.items.length > 0 && args.items[0][parent] instanceof Menu) {\n      this.columnMenu.enableItems(this.disableItems, false);\n      this.disableItems = [];\n      this.columnMenu.showItems(this.hiddenItems);\n      this.hiddenItems = [];\n\n      if (this.isFilterPopupOpen()) {\n        this.getFilter(args.element, args.element.id, true);\n      }\n    }\n\n    if (!this.parent.isFrozenGrid()) {\n      this.parent.notify(events.restoreFocus, {});\n    }\n  };\n\n  ColumnMenu.prototype.getDefaultItems = function () {\n    return ['AutoFitAll', 'AutoFit', 'SortAscending', 'SortDescending', 'Group', 'Ungroup', 'ColumnChooser', 'Filter'];\n  };\n\n  ColumnMenu.prototype.getItems = function () {\n    var items = [];\n    var defultItems = this.parent.columnMenuItems ? this.parent.columnMenuItems : this.getDefault();\n\n    for (var _i = 0, defultItems_1 = defultItems; _i < defultItems_1.length; _i++) {\n      var item = defultItems_1[_i];\n\n      if (typeof item === 'string') {\n        if (item === 'ColumnChooser') {\n          var col = this.getDefaultItem(item);\n          col.items = this.createChooserItems();\n          items.push(col);\n        } else {\n          items.push(this.getDefaultItem(item));\n        }\n      } else {\n        items.push(item);\n      }\n    }\n\n    return items;\n  };\n\n  ColumnMenu.prototype.getDefaultItem = function (item) {\n    var menuItem = {};\n\n    switch (item) {\n      case 'SortAscending':\n        menuItem = {\n          iconCss: this.ASCENDING\n        };\n        break;\n\n      case 'SortDescending':\n        menuItem = {\n          iconCss: this.DESCENDING\n        };\n        break;\n\n      case 'Group':\n        menuItem = {\n          iconCss: this.GROUP\n        };\n        break;\n\n      case 'Ungroup':\n        menuItem = {\n          iconCss: this.UNGROUP\n        };\n        break;\n\n      case 'Filter':\n        menuItem = {\n          iconCss: this.FILTER\n        };\n        break;\n    }\n\n    this.defaultItems[item] = {\n      text: this.getLocaleText(item),\n      id: this.generateID(item),\n      iconCss: menuItem.iconCss ? 'e-icons ' + menuItem.iconCss : null\n    };\n    return this.defaultItems[item];\n  };\n\n  ColumnMenu.prototype.getLocaleText = function (item) {\n    return this.l10n.getConstant(this.localeText[item]);\n  };\n\n  ColumnMenu.prototype.generateID = function (item, append) {\n    return this.gridID + '_colmenu_' + (append ? append + item : item);\n  };\n\n  ColumnMenu.prototype.getKeyFromId = function (id, append) {\n    return id.indexOf('_colmenu_') > 0 && id.replace(this.gridID + '_colmenu_' + (append ? append : ''), '');\n  };\n  /**\n   * @returns {HTMLElement} returns the HTMLElement\n   * @hidden\n   */\n\n\n  ColumnMenu.prototype.getColumnMenu = function () {\n    return this.element;\n  };\n\n  ColumnMenu.prototype.getModuleName = function () {\n    return 'columnMenu';\n  };\n\n  ColumnMenu.prototype.setLocaleKey = function () {\n    var localeKeys = {\n      'AutoFitAll': 'autoFitAll',\n      'AutoFit': 'autoFit',\n      'Group': 'Group',\n      'Ungroup': 'Ungroup',\n      'SortAscending': 'SortAscending',\n      'SortDescending': 'SortDescending',\n      'ColumnChooser': 'Columnchooser',\n      'Filter': 'FilterMenu'\n    };\n    return localeKeys;\n  };\n\n  ColumnMenu.prototype.getHeaderCell = function (e) {\n    return closest(e.target, 'th.e-headercell');\n  };\n\n  ColumnMenu.prototype.getColumn = function () {\n    if (this.headerCell) {\n      var uid = this.headerCell.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n      return this.parent.getColumnByUid(uid);\n    }\n\n    return null;\n  };\n\n  ColumnMenu.prototype.createChooserItems = function () {\n    var items = [];\n\n    for (var _i = 0, _a = this.parent.columnModel; _i < _a.length; _i++) {\n      var col = _a[_i];\n\n      if (col.showInColumnChooser && col.field) {\n        items.push({\n          id: this.generateID(col.field, this.CHOOSER),\n          text: col.headerText ? col.headerText : col.field\n        });\n      }\n    }\n\n    return items;\n  };\n\n  ColumnMenu.prototype.appendFilter = function (e) {\n    var filter = 'Filter';\n\n    if (!this.defaultItems[filter]) {\n      return;\n    } else {\n      var key = this.defaultItems[filter].id;\n\n      if (closest(e.target, '#' + key) && !this.isFilterPopupOpen()) {\n        this.getFilter(e.target, key);\n      } else if (!closest(e.target, '#' + key) && this.isFilterPopupOpen()) {\n        this.getFilter(e.target, key, true);\n      }\n    }\n  };\n\n  ColumnMenu.prototype.getFilter = function (target, id, isClose) {\n    var filterPopup = this.getFilterPop();\n\n    if (filterPopup) {\n      filterPopup.style.display = !Browser.isDevice && isClose ? 'none' : 'block';\n    } else {\n      this.parent.notify(events.filterOpen, {\n        col: this.targetColumn,\n        target: target,\n        isClose: isClose,\n        id: id\n      });\n    }\n  };\n\n  ColumnMenu.prototype.setPosition = function (li, ul) {\n    var gridPos = this.parent.element.getBoundingClientRect();\n    var liPos = li.getBoundingClientRect();\n    var left = liPos.left - gridPos.left;\n    var top = liPos.top - gridPos.top;\n\n    if (gridPos.height < top) {\n      top = top - ul.offsetHeight + liPos.height;\n    } else if (gridPos.height < top + ul.offsetHeight) {\n      top = gridPos.height - ul.offsetHeight;\n    }\n\n    if (window.innerHeight < ul.offsetHeight + top + gridPos.top) {\n      top = window.innerHeight - ul.offsetHeight - gridPos.top;\n    }\n\n    if (top + gridPos.top < 0) {\n      top = 0;\n    }\n\n    left += this.parent.enableRtl ? -ul.offsetWidth : liPos.width;\n\n    if (gridPos.width <= left + ul.offsetWidth) {\n      left -= liPos.width + ul.offsetWidth;\n\n      if (liPos.left < ul.offsetWidth) {\n        left = liPos.left + ul.offsetWidth / 2;\n      }\n    } else if (left < 0) {\n      left += ul.offsetWidth + liPos.width;\n    }\n\n    ul.style.top = top + 'px';\n    ul.style.left = left + 'px';\n  };\n\n  ColumnMenu.prototype.filterPosition = function () {\n    var filterPopup = this.getFilterPop();\n    filterPopup.classList.add(this.WRAP);\n\n    if (!Browser.isDevice) {\n      var disp = filterPopup.style.display;\n      filterPopup.style.cssText += 'display:block;visibility:hidden';\n      var li = this.element.querySelector('.' + this.FILTER);\n\n      if (li) {\n        this.setPosition(li.parentElement, filterPopup);\n        filterPopup.style.cssText += 'display:' + disp + ';visibility:visible';\n      }\n    }\n  };\n\n  ColumnMenu.prototype.getDefault = function () {\n    var items = [];\n\n    if (this.parent.ensureModuleInjected(Resize)) {\n      items.push('AutoFitAll');\n      items.push('AutoFit');\n    }\n\n    if (this.parent.allowGrouping && this.parent.ensureModuleInjected(Group)) {\n      items.push('Group');\n      items.push('Ungroup');\n    }\n\n    if (this.parent.allowSorting && this.parent.ensureModuleInjected(Sort)) {\n      items.push('SortAscending');\n      items.push('SortDescending');\n    }\n\n    items.push('ColumnChooser');\n\n    if (this.parent.allowFiltering && this.parent.filterSettings.type !== 'FilterBar' && this.parent.ensureModuleInjected(Filter)) {\n      items.push('Filter');\n    }\n\n    return items;\n  };\n\n  ColumnMenu.prototype.isFilterPopupOpen = function () {\n    var filterPopup = this.getFilterPop();\n    return filterPopup && filterPopup.style.display !== 'none';\n  };\n\n  ColumnMenu.prototype.getFilterPop = function () {\n    if (Browser.isDevice && this.targetColumn !== null && this.parent.filterSettings.type === 'Menu') {\n      return document.getElementById(this.targetColumn.uid + '-flmdlg');\n    }\n\n    return this.parent.element.querySelector('.' + this.POP);\n  };\n\n  ColumnMenu.prototype.isFilterItemAdded = function () {\n    return this.parent.columnMenuItems && this.parent.columnMenuItems.indexOf('Filter') >= 0 || !this.parent.columnMenuItems;\n  };\n\n  return ColumnMenu;\n}();\n\nexport { ColumnMenu };","map":{"version":3,"sources":["/Users/yasaman/Documents/moj_adminpanel/adminpanel/node_modules/@syncfusion/ej2-grids/src/grid/actions/column-menu.js"],"names":["EventHandler","closest","Browser","isNullOrUndefined","remove","ContextMenu","Menu","parentsUntil","applyBiggerTheme","events","calculatePosition","createCheckBox","Group","Sort","Filter","Resize","literals","ColumnMenu","parent","serviceLocator","defaultItems","localeText","setLocaleKey","disableItems","hiddenItems","isOpen","GROUP","UNGROUP","ASCENDING","DESCENDING","ROOT","FILTER","POP","WRAP","CHOOSER","gridID","element","id","addEventListener","prototype","wireEvents","elements","getColumnMenuHandlers","i","length","add","columnMenuHandlerDown","unwireEvents","destroy","gridElement","querySelector","gridHeader","gridContent","columnMenu","removeEventListener","unwireFilterEvents","parentNode","columnMenuHandlerClick","e","target","classList","contains","items","getItems","dataBind","headerCell","getHeaderCell","document","close","openColumnMenu","openColumnMenuByField","field","getColumnHeaderByField","pos","top","left","style","cssText","elePos","getBoundingClientRect","isDevice","window","innerHeight","height","innerWidth","width","enableRtl","open","preventDefault","parentElement","display","slice","call","getHeaderTable","getElementsByClassName","isDestroyed","on","headerRefreshed","uiUpdate","enableAfterRenderMenu","initialEnd","render","isFilterItemAdded","filterDialogCreated","filterPosition","click","keyPressed","keyPressHandler","off","gObj","action","focusModule","currentInfo","column","getColumnByUid","firstElementChild","getAttribute","module","getModuleName","enable","l10n","getService","createElement","className","setAttribute","getConstant","appendChild","cssClass","enablePersistence","locale","select","columnMenuItemClick","bind","beforeOpen","columnMenuBeforeOpen","onOpen","columnMenuOnOpen","onClose","columnMenuOnClose","beforeItemRender","beforeMenuItemRender","beforeClose","columnMenuBeforeClose","appendTo","wireFilterEvents","appendFilter","args","isChooserItem","item","field_1","getKeyFromId","columnModel","filter","col","check","label","text","checked","visible","innerHTML","colChooser","event","parentItem","cancel","currentTarget","activeElement","indexOf","targetColumn","getColumn","trigger","columnMenuOpen","_i","_a","key","dItem","getDefaultItems","ensureDisabledStatus","hide","push","enableItems","hideItems","offsetHeight","maxHeight","overflowY","status","allowGrouping","ensureModuleInjected","groupSettings","columns","allowSorting","sortSettings","sortColumns","direction","toLocaleLowerCase","replace","allowFiltering","filterSettings","type","autoFitColumns","ungroupColumn","groupColumn","sortColumn","checkbox","hideColumns","showColumns","getFilter","columnMenuClick","showItems","isFilterPopupOpen","isFrozenGrid","notify","restoreFocus","defultItems","columnMenuItems","getDefault","defultItems_1","getDefaultItem","createChooserItems","menuItem","iconCss","getLocaleText","generateID","append","getColumnMenu","localeKeys","uid","showInColumnChooser","headerText","isClose","filterPopup","getFilterPop","filterOpen","setPosition","li","ul","gridPos","liPos","offsetWidth","disp","getElementById"],"mappings":"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","sourcesContent":["import { EventHandler, closest, Browser, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { remove } from '@syncfusion/ej2-base';\nimport { ContextMenu as Menu } from '@syncfusion/ej2-navigations';\nimport { parentsUntil, applyBiggerTheme } from '../base/util';\nimport * as events from '../base/constant';\nimport { calculatePosition } from '@syncfusion/ej2-popups';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { Group } from '../actions/group';\nimport { Sort } from '../actions/sort';\nimport { Filter } from '../actions/filter';\nimport { Resize } from '../actions/resize';\nimport * as literals from '../base/string-literals';\n/**\n * 'column menu module used to handle column menu actions'\n *\n * @hidden\n */\nvar ColumnMenu = /** @class */ (function () {\n    function ColumnMenu(parent, serviceLocator) {\n        this.defaultItems = {};\n        this.localeText = this.setLocaleKey();\n        this.disableItems = [];\n        this.hiddenItems = [];\n        this.isOpen = false;\n        // default class names\n        this.GROUP = 'e-icon-group';\n        this.UNGROUP = 'e-icon-ungroup';\n        this.ASCENDING = 'e-icon-ascending';\n        this.DESCENDING = 'e-icon-descending';\n        this.ROOT = 'e-columnmenu';\n        this.FILTER = 'e-icon-filter';\n        this.POP = 'e-filter-popup';\n        this.WRAP = 'e-col-menu';\n        this.CHOOSER = '_chooser_';\n        this.parent = parent;\n        this.gridID = parent.element.id;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    ColumnMenu.prototype.wireEvents = function () {\n        var elements = this.getColumnMenuHandlers();\n        for (var i = 0; i < elements.length; i++) {\n            EventHandler.add(elements[i], 'mousedown', this.columnMenuHandlerDown, this);\n        }\n    };\n    ColumnMenu.prototype.unwireEvents = function () {\n        var elements = this.getColumnMenuHandlers();\n        for (var i = 0; i < elements.length; i++) {\n            EventHandler.remove(elements[i], 'mousedown', this.columnMenuHandlerDown);\n        }\n    };\n    /**\n     * To destroy the resize\n     *\n     * @returns {void}\n     * @hidden\n     */\n    ColumnMenu.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.' + literals.gridHeader) && !gridElement.querySelector('.' + literals.gridContent))) {\n            return;\n        }\n        this.columnMenu.destroy();\n        this.removeEventListener();\n        this.unwireFilterEvents();\n        this.unwireEvents();\n        if (this.element.parentNode) {\n            remove(this.element);\n        }\n    };\n    ColumnMenu.prototype.columnMenuHandlerClick = function (e) {\n        if (e.target.classList.contains('e-columnmenu')) {\n            this.columnMenu.items = this.getItems();\n            this.columnMenu.dataBind();\n            if ((this.isOpen && this.headerCell !== this.getHeaderCell(e)) || document.querySelector('.e-grid-menu .e-menu-parent.e-ul')) {\n                this.columnMenu.close();\n                this.openColumnMenu(e);\n            }\n            else if (!this.isOpen) {\n                this.openColumnMenu(e);\n            }\n            else {\n                this.columnMenu.close();\n            }\n        }\n    };\n    /**\n     * @param {string} field - specifies the field name\n     * @returns {void}\n     * @hidden\n     */\n    ColumnMenu.prototype.openColumnMenuByField = function (field) {\n        this.openColumnMenu({ target: this.parent.getColumnHeaderByField(field).querySelector('.e-columnmenu') });\n    };\n    ColumnMenu.prototype.openColumnMenu = function (e) {\n        var pos = { top: 0, left: 0 };\n        this.element.style.cssText = 'display:block;visibility:hidden';\n        var elePos = this.element.getBoundingClientRect();\n        this.element.style.cssText = 'display:none;visibility:visible';\n        this.headerCell = this.getHeaderCell(e);\n        if (Browser.isDevice) {\n            pos.top = ((window.innerHeight / 2) - (elePos.height / 2));\n            pos.left = ((window.innerWidth / 2) - (elePos.width / 2));\n        }\n        else {\n            if (this.parent.enableRtl) {\n                pos = calculatePosition(this.headerCell, 'left', 'bottom');\n            }\n            else {\n                pos = calculatePosition(this.headerCell, 'right', 'bottom');\n                pos.left -= elePos.width;\n            }\n        }\n        this.columnMenu.open(pos.top, pos.left);\n        if (e.preventDefault) {\n            e.preventDefault();\n        }\n        applyBiggerTheme(this.parent.element, this.columnMenu.element.parentElement);\n    };\n    ColumnMenu.prototype.columnMenuHandlerDown = function () {\n        this.isOpen = !(this.element.style.display === 'none' || this.element.style.display === '');\n    };\n    ColumnMenu.prototype.getColumnMenuHandlers = function () {\n        return [].slice.call(this.parent.getHeaderTable().getElementsByClassName(this.ROOT));\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    ColumnMenu.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.headerRefreshed, this.wireEvents, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRenderMenu, this);\n        this.parent.on(events.initialEnd, this.render, this);\n        if (this.isFilterItemAdded()) {\n            this.parent.on(events.filterDialogCreated, this.filterPosition, this);\n        }\n        this.parent.on(events.click, this.columnMenuHandlerClick, this);\n        this.parent.on(events.keyPressed, this.keyPressHandler, this);\n        this.parent.on(events.destroy, this.destroy, this);\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    ColumnMenu.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.headerRefreshed, this.unwireEvents);\n        this.parent.off(events.uiUpdate, this.enableAfterRenderMenu);\n        this.parent.off(events.initialEnd, this.render);\n        if (this.isFilterItemAdded()) {\n            this.parent.off(events.filterDialogCreated, this.filterPosition);\n        }\n        this.parent.off(events.click, this.columnMenuHandlerClick);\n        this.parent.off(events.keyPressed, this.keyPressHandler);\n        this.parent.off(events.destroy, this.destroy);\n    };\n    ColumnMenu.prototype.keyPressHandler = function (e) {\n        var gObj = this.parent;\n        if (e.action === 'altDownArrow') {\n            var element = gObj.focusModule.currentInfo.element;\n            if (element && element.classList.contains('e-headercell')) {\n                var column = gObj.getColumnByUid(element.firstElementChild.getAttribute('e-mappinguid'));\n                this.openColumnMenuByField(column.field);\n            }\n        }\n    };\n    ColumnMenu.prototype.enableAfterRenderMenu = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            if (this.columnMenu) {\n                this.columnMenu.destroy();\n                remove(this.element);\n            }\n            this.render();\n        }\n    };\n    ColumnMenu.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        this.element = this.parent.createElement('ul', { id: this.gridID + '_columnmenu', className: 'e-colmenu' });\n        this.element.setAttribute('aria-label', this.l10n.getConstant('ColumnMenuDialogARIA'));\n        this.parent.element.appendChild(this.element);\n        this.columnMenu = new Menu({\n            cssClass: 'e-grid-menu',\n            enableRtl: this.parent.enableRtl,\n            enablePersistence: this.parent.enablePersistence,\n            locale: this.parent.locale,\n            items: this.getItems(),\n            select: this.columnMenuItemClick.bind(this),\n            beforeOpen: this.columnMenuBeforeOpen.bind(this),\n            onOpen: this.columnMenuOnOpen.bind(this),\n            onClose: this.columnMenuOnClose.bind(this),\n            beforeItemRender: this.beforeMenuItemRender.bind(this),\n            beforeClose: this.columnMenuBeforeClose.bind(this)\n        });\n        this.columnMenu.appendTo(this.element);\n        this.wireFilterEvents();\n    };\n    ColumnMenu.prototype.wireFilterEvents = function () {\n        if (!Browser.isDevice && this.isFilterItemAdded()) {\n            EventHandler.add(this.element, 'mouseover', this.appendFilter, this);\n        }\n    };\n    ColumnMenu.prototype.unwireFilterEvents = function () {\n        if (!Browser.isDevice && this.isFilterItemAdded()) {\n            EventHandler.remove(this.element, 'mouseover', this.appendFilter);\n        }\n    };\n    ColumnMenu.prototype.beforeMenuItemRender = function (args) {\n        if (this.isChooserItem(args.item)) {\n            var field_1 = this.getKeyFromId(args.item.id, this.CHOOSER);\n            var column = this.parent.columnModel.filter(function (col) { return col.field === field_1; });\n            var check = createCheckBox(this.parent.createElement, false, {\n                label: args.item.text,\n                checked: column[0].visible\n            });\n            if (this.parent.enableRtl) {\n                check.classList.add('e-rtl');\n            }\n            args.element.innerHTML = '';\n            args.element.appendChild(check);\n        }\n        else if (args.item.id && this.getKeyFromId(args.item.id) === 'Filter') {\n            args.element.appendChild(this.parent.createElement('span', { className: 'e-icons e-caret' }));\n            args.element.className += 'e-filter-item e-menu-caret-icon';\n        }\n    };\n    ColumnMenu.prototype.columnMenuBeforeClose = function (args) {\n        var colChooser = args.event ? closest(args.event.target, '.e-menu-item') : null;\n        if (!isNullOrUndefined(args.parentItem) &&\n            this.getKeyFromId(args.parentItem.id) === 'ColumnChooser' &&\n            colChooser && this.isChooserItem(colChooser)) {\n            args.cancel = true;\n        }\n        else if (args.event && (closest(args.event.target, '.' + this.POP)\n            || (args.event.currentTarget && args.event.currentTarget.activeElement &&\n                parentsUntil(args.event.currentTarget.activeElement, 'e-filter-popup'))\n            || parentsUntil(args.event.target, 'e-popup') ||\n            (parentsUntil(args.event.target, 'e-popup-wrapper'))) && !Browser.isDevice) {\n            args.cancel = true;\n        }\n    };\n    ColumnMenu.prototype.isChooserItem = function (item) {\n        return item.id && item.id.indexOf('_colmenu_') >= 0 &&\n            this.getKeyFromId(item.id, this.CHOOSER).indexOf('_colmenu_') === -1;\n    };\n    ColumnMenu.prototype.columnMenuBeforeOpen = function (args) {\n        args.column = this.targetColumn = this.getColumn();\n        this.parent.trigger(events.columnMenuOpen, args);\n        for (var _i = 0, _a = args.items; _i < _a.length; _i++) {\n            var item = _a[_i];\n            var key = this.getKeyFromId(item.id);\n            var dItem = this.defaultItems[key];\n            if (this.getDefaultItems().indexOf(key) !== -1 && this.ensureDisabledStatus(key) && !dItem.hide) {\n                this.disableItems.push(item.text);\n            }\n            if (item.hide) {\n                this.hiddenItems.push(item.text);\n            }\n        }\n        this.columnMenu.enableItems(this.disableItems, false);\n        this.columnMenu.hideItems(this.hiddenItems);\n    };\n    ColumnMenu.prototype.columnMenuOnOpen = function (args) {\n        if (args.element.className === 'e-menu-parent e-ul ') {\n            if (args.element.offsetHeight > window.innerHeight || this.parent.element.offsetHeight > window.innerHeight) {\n                args.element.style.maxHeight = (window.innerHeight) * 0.8 + 'px';\n                args.element.style.overflowY = 'auto';\n            }\n        }\n    };\n    ColumnMenu.prototype.ensureDisabledStatus = function (item) {\n        var status = false;\n        switch (item) {\n            case 'Group':\n                if (!this.parent.allowGrouping || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                    && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) >= 0 ||\n                    this.targetColumn && !this.targetColumn.allowGrouping)) {\n                    status = true;\n                }\n                break;\n            case 'AutoFitAll':\n            case 'AutoFit':\n                status = !this.parent.ensureModuleInjected(Resize);\n                break;\n            case 'Ungroup':\n                if (!this.parent.ensureModuleInjected(Group) || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                    && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) < 0)) {\n                    status = true;\n                }\n                break;\n            case 'SortDescending':\n            case 'SortAscending':\n                if (this.parent.allowSorting && this.parent.ensureModuleInjected(Sort)\n                    && this.parent.sortSettings.columns.length > 0 && this.targetColumn && this.targetColumn.allowSorting) {\n                    var sortColumns = this.parent.sortSettings.columns;\n                    for (var i = 0; i < sortColumns.length; i++) {\n                        if (sortColumns[i].field === this.targetColumn.field\n                            && sortColumns[i].direction.toLocaleLowerCase() === item.toLocaleLowerCase().replace('sort', '')) {\n                            status = true;\n                        }\n                    }\n                }\n                else if (!this.parent.allowSorting || !this.parent.ensureModuleInjected(Sort) ||\n                    this.parent.allowSorting && this.targetColumn && !this.targetColumn.allowSorting) {\n                    status = true;\n                }\n                break;\n            case 'Filter':\n                if (this.parent.allowFiltering && (this.parent.filterSettings.type !== 'FilterBar')\n                    && this.parent.ensureModuleInjected(Filter) && this.targetColumn && this.targetColumn.allowFiltering) {\n                    status = false;\n                }\n                else if (this.parent.ensureModuleInjected(Filter) && this.parent.allowFiltering\n                    && this.targetColumn && (!this.targetColumn.allowFiltering || this.parent.filterSettings.type === 'FilterBar')) {\n                    status = true;\n                }\n        }\n        return status;\n    };\n    ColumnMenu.prototype.columnMenuItemClick = function (args) {\n        var item = this.isChooserItem(args.item) ? 'ColumnChooser' : this.getKeyFromId(args.item.id);\n        switch (item) {\n            case 'AutoFit':\n                this.parent.autoFitColumns(this.targetColumn.field);\n                break;\n            case 'AutoFitAll':\n                this.parent.autoFitColumns([]);\n                break;\n            case 'Ungroup':\n                this.parent.ungroupColumn(this.targetColumn.field);\n                break;\n            case 'Group':\n                this.parent.groupColumn(this.targetColumn.field);\n                break;\n            case 'SortAscending':\n                this.parent.sortColumn(this.targetColumn.field, 'Ascending');\n                break;\n            case 'SortDescending':\n                this.parent.sortColumn(this.targetColumn.field, 'Descending');\n                break;\n            case 'ColumnChooser':\n                // eslint-disable-next-line no-case-declarations\n                var key = this.getKeyFromId(args.item.id, this.CHOOSER);\n                // eslint-disable-next-line no-case-declarations\n                var checkbox = args.element.querySelector('.e-checkbox-wrapper .e-frame');\n                if (checkbox && checkbox.classList.contains('e-check')) {\n                    checkbox.classList.remove('e-check');\n                    this.parent.hideColumns(key, 'field');\n                }\n                else if (checkbox) {\n                    this.parent.showColumns(key, 'field');\n                    checkbox.classList.add('e-check');\n                }\n                break;\n            case 'Filter':\n                this.getFilter(args.element, args.item.id);\n                break;\n        }\n        args.column = this.targetColumn;\n        this.parent.trigger(events.columnMenuClick, args);\n    };\n    ColumnMenu.prototype.columnMenuOnClose = function (args) {\n        var parent = 'parentObj';\n        if (args.items.length > 0 && args.items[0][parent] instanceof Menu) {\n            this.columnMenu.enableItems(this.disableItems, false);\n            this.disableItems = [];\n            this.columnMenu.showItems(this.hiddenItems);\n            this.hiddenItems = [];\n            if (this.isFilterPopupOpen()) {\n                this.getFilter(args.element, args.element.id, true);\n            }\n        }\n        if (!this.parent.isFrozenGrid()) {\n            this.parent.notify(events.restoreFocus, {});\n        }\n    };\n    ColumnMenu.prototype.getDefaultItems = function () {\n        return ['AutoFitAll', 'AutoFit', 'SortAscending', 'SortDescending', 'Group', 'Ungroup', 'ColumnChooser', 'Filter'];\n    };\n    ColumnMenu.prototype.getItems = function () {\n        var items = [];\n        var defultItems = this.parent.columnMenuItems ? this.parent.columnMenuItems : this.getDefault();\n        for (var _i = 0, defultItems_1 = defultItems; _i < defultItems_1.length; _i++) {\n            var item = defultItems_1[_i];\n            if (typeof item === 'string') {\n                if (item === 'ColumnChooser') {\n                    var col = this.getDefaultItem(item);\n                    col.items = this.createChooserItems();\n                    items.push(col);\n                }\n                else {\n                    items.push(this.getDefaultItem(item));\n                }\n            }\n            else {\n                items.push(item);\n            }\n        }\n        return items;\n    };\n    ColumnMenu.prototype.getDefaultItem = function (item) {\n        var menuItem = {};\n        switch (item) {\n            case 'SortAscending':\n                menuItem = { iconCss: this.ASCENDING };\n                break;\n            case 'SortDescending':\n                menuItem = { iconCss: this.DESCENDING };\n                break;\n            case 'Group':\n                menuItem = { iconCss: this.GROUP };\n                break;\n            case 'Ungroup':\n                menuItem = { iconCss: this.UNGROUP };\n                break;\n            case 'Filter':\n                menuItem = { iconCss: this.FILTER };\n                break;\n        }\n        this.defaultItems[item] = {\n            text: this.getLocaleText(item), id: this.generateID(item),\n            iconCss: menuItem.iconCss ? 'e-icons ' + menuItem.iconCss : null\n        };\n        return this.defaultItems[item];\n    };\n    ColumnMenu.prototype.getLocaleText = function (item) {\n        return this.l10n.getConstant(this.localeText[item]);\n    };\n    ColumnMenu.prototype.generateID = function (item, append) {\n        return this.gridID + '_colmenu_' + (append ? append + item : item);\n    };\n    ColumnMenu.prototype.getKeyFromId = function (id, append) {\n        return id.indexOf('_colmenu_') > 0 &&\n            id.replace(this.gridID + '_colmenu_' + (append ? append : ''), '');\n    };\n    /**\n     * @returns {HTMLElement} returns the HTMLElement\n     * @hidden\n     */\n    ColumnMenu.prototype.getColumnMenu = function () {\n        return this.element;\n    };\n    ColumnMenu.prototype.getModuleName = function () {\n        return 'columnMenu';\n    };\n    ColumnMenu.prototype.setLocaleKey = function () {\n        var localeKeys = {\n            'AutoFitAll': 'autoFitAll',\n            'AutoFit': 'autoFit',\n            'Group': 'Group',\n            'Ungroup': 'Ungroup',\n            'SortAscending': 'SortAscending',\n            'SortDescending': 'SortDescending',\n            'ColumnChooser': 'Columnchooser',\n            'Filter': 'FilterMenu'\n        };\n        return localeKeys;\n    };\n    ColumnMenu.prototype.getHeaderCell = function (e) {\n        return closest(e.target, 'th.e-headercell');\n    };\n    ColumnMenu.prototype.getColumn = function () {\n        if (this.headerCell) {\n            var uid = this.headerCell.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n            return this.parent.getColumnByUid(uid);\n        }\n        return null;\n    };\n    ColumnMenu.prototype.createChooserItems = function () {\n        var items = [];\n        for (var _i = 0, _a = this.parent.columnModel; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.showInColumnChooser && col.field) {\n                items.push({ id: this.generateID(col.field, this.CHOOSER), text: col.headerText ? col.headerText : col.field });\n            }\n        }\n        return items;\n    };\n    ColumnMenu.prototype.appendFilter = function (e) {\n        var filter = 'Filter';\n        if (!this.defaultItems[filter]) {\n            return;\n        }\n        else {\n            var key = this.defaultItems[filter].id;\n            if (closest(e.target, '#' + key) && !this.isFilterPopupOpen()) {\n                this.getFilter(e.target, key);\n            }\n            else if (!closest(e.target, '#' + key) && this.isFilterPopupOpen()) {\n                this.getFilter(e.target, key, true);\n            }\n        }\n    };\n    ColumnMenu.prototype.getFilter = function (target, id, isClose) {\n        var filterPopup = this.getFilterPop();\n        if (filterPopup) {\n            filterPopup.style.display = !Browser.isDevice && isClose ? 'none' : 'block';\n        }\n        else {\n            this.parent.notify(events.filterOpen, {\n                col: this.targetColumn, target: target, isClose: isClose, id: id\n            });\n        }\n    };\n    ColumnMenu.prototype.setPosition = function (li, ul) {\n        var gridPos = this.parent.element.getBoundingClientRect();\n        var liPos = li.getBoundingClientRect();\n        var left = liPos.left - gridPos.left;\n        var top = liPos.top - gridPos.top;\n        if (gridPos.height < top) {\n            top = top - ul.offsetHeight + liPos.height;\n        }\n        else if (gridPos.height < top + ul.offsetHeight) {\n            top = gridPos.height - ul.offsetHeight;\n        }\n        if (window.innerHeight < ul.offsetHeight + top + gridPos.top) {\n            top = window.innerHeight - ul.offsetHeight - gridPos.top;\n        }\n        if (top + gridPos.top < 0) {\n            top = 0;\n        }\n        left += (this.parent.enableRtl ? -ul.offsetWidth : liPos.width);\n        if (gridPos.width <= left + ul.offsetWidth) {\n            left -= liPos.width + ul.offsetWidth;\n            if (liPos.left < ul.offsetWidth) {\n                left = liPos.left + ul.offsetWidth / 2;\n            }\n        }\n        else if (left < 0) {\n            left += ul.offsetWidth + liPos.width;\n        }\n        ul.style.top = top + 'px';\n        ul.style.left = left + 'px';\n    };\n    ColumnMenu.prototype.filterPosition = function () {\n        var filterPopup = this.getFilterPop();\n        filterPopup.classList.add(this.WRAP);\n        if (!Browser.isDevice) {\n            var disp = filterPopup.style.display;\n            filterPopup.style.cssText += 'display:block;visibility:hidden';\n            var li = this.element.querySelector('.' + this.FILTER);\n            if (li) {\n                this.setPosition(li.parentElement, filterPopup);\n                filterPopup.style.cssText += 'display:' + disp + ';visibility:visible';\n            }\n        }\n    };\n    ColumnMenu.prototype.getDefault = function () {\n        var items = [];\n        if (this.parent.ensureModuleInjected(Resize)) {\n            items.push('AutoFitAll');\n            items.push('AutoFit');\n        }\n        if (this.parent.allowGrouping && this.parent.ensureModuleInjected(Group)) {\n            items.push('Group');\n            items.push('Ungroup');\n        }\n        if (this.parent.allowSorting && this.parent.ensureModuleInjected(Sort)) {\n            items.push('SortAscending');\n            items.push('SortDescending');\n        }\n        items.push('ColumnChooser');\n        if (this.parent.allowFiltering && (this.parent.filterSettings.type !== 'FilterBar') &&\n            this.parent.ensureModuleInjected(Filter)) {\n            items.push('Filter');\n        }\n        return items;\n    };\n    ColumnMenu.prototype.isFilterPopupOpen = function () {\n        var filterPopup = this.getFilterPop();\n        return filterPopup && filterPopup.style.display !== 'none';\n    };\n    ColumnMenu.prototype.getFilterPop = function () {\n        if (Browser.isDevice && this.targetColumn !== null && this.parent.filterSettings.type === 'Menu') {\n            return document.getElementById(this.targetColumn.uid + '-flmdlg');\n        }\n        return this.parent.element.querySelector('.' + this.POP);\n    };\n    ColumnMenu.prototype.isFilterItemAdded = function () {\n        return (this.parent.columnMenuItems &&\n            this.parent.columnMenuItems.indexOf('Filter') >= 0) || !this.parent.columnMenuItems;\n    };\n    return ColumnMenu;\n}());\nexport { ColumnMenu };\n"]},"metadata":{},"sourceType":"module"}