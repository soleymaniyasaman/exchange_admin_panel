{"ast":null,"code":"import { addClass, Browser, EventHandler, detach, removeClass, select, selectAll, KeyboardEvents } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined as isNOU, closest, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, extend } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { RenderType, ToolbarType } from '../base/enum';\nimport { setToolbarStatus, updateUndoRedoStatus, getTBarItemsIndex, getCollection, toObjectLowerCase, isIDevice } from '../base/util';\nimport { updateDropDownFontFormatLocale } from '../base/util';\nimport * as model from '../models/items';\nimport { ToolbarRenderer } from '../renderer/toolbar-renderer';\nimport { BaseToolbar } from './base-toolbar';\nimport { DropDownButtons } from './dropdown-buttons';\nimport { ToolbarAction } from './toolbar-action';\n/**\n * `Toolbar` module is used to handle Toolbar actions.\n */\n\nvar Toolbar =\n/** @class */\nfunction () {\n  function Toolbar(parent, serviceLocator) {\n    this.parent = parent;\n    this.isToolbar = false;\n    this.locator = serviceLocator;\n    this.isTransformChild = false;\n    this.renderFactory = this.locator.getService('rendererFactory');\n    model.updateDropDownLocale(this.parent);\n    updateDropDownFontFormatLocale(this.parent);\n    this.renderFactory.addRenderer(RenderType.Toolbar, new ToolbarRenderer(this.parent));\n    this.toolbarRenderer = this.renderFactory.getRenderer(RenderType.Toolbar);\n    this.baseToolbar = new BaseToolbar(this.parent, this.locator);\n    this.addEventListener();\n\n    if (this.parent.toolbarSettings && Object.keys(this.parent.toolbarSettings.itemConfigs).length > 0) {\n      extend(this.tools, model.tools, toObjectLowerCase(this.parent.toolbarSettings.itemConfigs), true);\n    } else {\n      this.tools = model.tools;\n    }\n  }\n\n  Toolbar.prototype.initializeInstance = function () {\n    this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n    this.editableElement = this.contentRenderer.getEditPanel();\n    this.editPanel = this.contentRenderer.getPanel();\n  };\n\n  Toolbar.prototype.toolbarBindEvent = function () {\n    if (!this.parent.inlineMode.enable) {\n      this.keyBoardModule = new KeyboardEvents(this.getToolbarElement(), {\n        keyAction: this.toolBarKeyDown.bind(this),\n        keyConfigs: this.parent.formatter.keyConfig,\n        eventName: 'keydown'\n      });\n    }\n  };\n\n  Toolbar.prototype.toolBarKeyDown = function (e) {\n    switch (e.action) {\n      case 'escape':\n        this.parent.contentModule.getEditPanel().focus();\n        break;\n    }\n  };\n\n  Toolbar.prototype.createToolbarElement = function () {\n    this.tbElement = this.parent.createElement('div', {\n      id: this.parent.getID() + '_toolbar'\n    });\n\n    if (!Browser.isDevice && this.parent.inlineMode.enable && isIDevice()) {\n      return;\n    } else {\n      if (this.parent.toolbarSettings.enableFloating && !this.parent.inlineMode.enable) {\n        this.tbWrapper = this.parent.createElement('div', {\n          id: this.parent.getID() + '_toolbar_wrapper',\n          innerHTML: this.tbElement.outerHTML,\n          className: classes.CLS_TB_WRAP\n        });\n        this.tbElement = this.tbWrapper.firstElementChild;\n        this.parent.element.insertBefore(this.tbWrapper, this.editPanel);\n      } else {\n        this.parent.element.insertBefore(this.tbElement, this.editPanel);\n      }\n    }\n  };\n\n  Toolbar.prototype.getToolbarMode = function () {\n    var tbMode;\n\n    switch (this.parent.toolbarSettings.type) {\n      case ToolbarType.Expand:\n        tbMode = 'Extended';\n        break;\n\n      case ToolbarType.Scrollable:\n        tbMode = 'Scrollable';\n        break;\n\n      default:\n        tbMode = 'MultiRow';\n    }\n\n    if (isIDevice() && this.parent.toolbarSettings.type === ToolbarType.Expand) {\n      tbMode = ToolbarType.Scrollable;\n    }\n\n    return tbMode;\n  };\n\n  Toolbar.prototype.checkToolbarResponsive = function (ele) {\n    if (!Browser.isDevice || isIDevice()) {\n      return false;\n    }\n\n    var tBarMode;\n\n    if (this.parent.toolbarSettings.type === ToolbarType.Expand) {\n      tBarMode = ToolbarType.MultiRow;\n    } else {\n      tBarMode = this.parent.toolbarSettings.type;\n    }\n\n    this.baseToolbar.render({\n      container: this.parent.inlineMode.enable ? 'quick' : 'toolbar',\n      items: this.parent.toolbarSettings.items,\n      mode: tBarMode,\n      target: ele\n    });\n\n    if (this.parent.toolbarSettings.type === ToolbarType.Expand) {\n      addClass([ele], ['e-rte-tb-mobile']);\n\n      if (this.parent.inlineMode.enable) {\n        this.addFixedTBarClass();\n      } else {\n        addClass([ele], [classes.CLS_TB_STATIC]);\n      }\n    }\n\n    this.wireEvents();\n    this.dropDownModule.renderDropDowns({\n      container: ele,\n      containerType: this.parent.inlineMode.enable ? 'quick' : 'toolbar',\n      items: this.parent.toolbarSettings.items\n    });\n    this.parent.notify(events.renderColorPicker, {\n      container: this.tbElement,\n      containerType: this.parent.inlineMode.enable ? 'quick' : 'toolbar',\n      items: this.parent.toolbarSettings.items\n    });\n    return true;\n  };\n\n  Toolbar.prototype.checkIsTransformChild = function () {\n    this.isTransformChild = false;\n    var transformElements = selectAll('[style*=\"transform\"]', document);\n\n    for (var i = 0; i < transformElements.length; i++) {\n      if (!isNullOrUndefined(transformElements[i].contains) && transformElements[i].contains(this.parent.element)) {\n        this.isTransformChild = true;\n        break;\n      }\n    }\n  };\n\n  Toolbar.prototype.toggleFloatClass = function (e) {\n    var topValue;\n    var isBody = false;\n    var isFloat = false;\n    var scrollParent;\n    var floatOffset = this.parent.floatingToolbarOffset;\n\n    if (e && this.parent.iframeSettings.enable && this.parent.inputElement.ownerDocument === e.target) {\n      scrollParent = e.target.body;\n    } else if (e && e.target !== document) {\n      scrollParent = e.target;\n    } else {\n      isBody = true;\n      scrollParent = document.body;\n    }\n\n    var tbHeight = this.getToolbarHeight() + this.getExpandTBarPopHeight();\n\n    if (this.isTransformChild) {\n      topValue = 0;\n      var scrollParentRelativeTop = 0;\n      var trgHeight = this.parent.element.offsetHeight;\n\n      if (isBody) {\n        var bodyStyle = window.getComputedStyle(scrollParent);\n        scrollParentRelativeTop = parseFloat(bodyStyle.marginTop.split('px')[0]) + parseFloat(bodyStyle.paddingTop.split('px')[0]);\n      }\n\n      var targetTop = this.parent.element.getBoundingClientRect().top;\n      var scrollParentYOffset = Browser.isMSPointer && isBody ? window.pageYOffset : scrollParent.parentElement.scrollTop;\n      var scrollParentRect = scrollParent.getBoundingClientRect();\n      var scrollParentTop = !isBody ? scrollParentRect.top : scrollParentRect.top + scrollParentYOffset;\n      var outOfRange = targetTop - (!isBody ? scrollParentTop : 0) + trgHeight > tbHeight + floatOffset ? false : true;\n\n      if (targetTop > scrollParentTop + floatOffset || targetTop < -trgHeight || (targetTop < 0 ? outOfRange : false)) {\n        isFloat = false;\n        removeClass([this.tbElement], [classes.CLS_TB_ABS_FLOAT]);\n      } else if (targetTop < scrollParentTop + floatOffset) {\n        if (targetTop < 0) {\n          topValue = -targetTop + scrollParentTop;\n        } else {\n          topValue = scrollParentTop - targetTop;\n        }\n\n        topValue = isBody ? topValue - scrollParentRelativeTop : topValue;\n        addClass([this.tbElement], [classes.CLS_TB_ABS_FLOAT]);\n        isFloat = true;\n      }\n    } else {\n      var parent_1 = this.parent.element.getBoundingClientRect();\n\n      if (window.innerHeight < parent_1.top) {\n        return;\n      }\n\n      topValue = e && e.target !== document ? scrollParent.getBoundingClientRect().top : 0;\n\n      if (parent_1.bottom < floatOffset + tbHeight + topValue || parent_1.bottom < 0 || parent_1.top > floatOffset + topValue) {\n        isFloat = false;\n      } else if (parent_1.top < floatOffset) {\n        isFloat = true;\n      }\n    }\n\n    if (!isFloat) {\n      removeClass([this.tbElement], [classes.CLS_TB_FLOAT]);\n      setStyleAttribute(this.tbElement, {\n        top: 0 + 'px',\n        width: '100%'\n      });\n    } else {\n      addClass([this.tbElement], [classes.CLS_TB_FLOAT]);\n      setStyleAttribute(this.tbElement, {\n        width: this.parent.element.offsetWidth + 'px',\n        top: floatOffset + topValue + 'px'\n      });\n    }\n  };\n\n  Toolbar.prototype.renderToolbar = function () {\n    this.initializeInstance();\n    this.createToolbarElement();\n\n    if (this.checkToolbarResponsive(this.tbElement)) {\n      return;\n    }\n\n    if (this.parent.inlineMode.enable) {\n      this.parent.notify(events.renderInlineToolbar, {});\n    } else {\n      this.baseToolbar.render({\n        container: 'toolbar',\n        items: this.parent.toolbarSettings.items,\n        mode: this.getToolbarMode(),\n        target: this.tbElement\n      });\n\n      if (!this.parent.inlineMode.enable) {\n        if (this.parent.toolbarSettings.enableFloating) {\n          this.checkIsTransformChild();\n          this.toggleFloatClass();\n        }\n\n        addClass([this.parent.element], [classes.CLS_RTE_TB_ENABLED]);\n\n        if (this.parent.toolbarSettings.type === ToolbarType.Expand) {\n          addClass([this.parent.element], [classes.CLS_RTE_EXPAND_TB]);\n        }\n      }\n    }\n\n    this.wireEvents();\n\n    if (this.parent.inlineMode.enable && !isIDevice()) {\n      this.addFixedTBarClass();\n    }\n\n    if (!this.parent.inlineMode.enable) {\n      this.dropDownModule.renderDropDowns({\n        container: this.tbElement,\n        containerType: 'toolbar',\n        items: this.parent.toolbarSettings.items\n      });\n      this.parent.notify(events.renderColorPicker, {\n        container: this.tbElement,\n        containerType: 'toolbar',\n        items: this.parent.toolbarSettings.items\n      });\n      this.refreshToolbarOverflow();\n    }\n\n    var divEle = this.parent.element.querySelector('.e-rte-srctextarea');\n    var iframeEle = this.parent.element.querySelector('.e-source-content');\n\n    if (!this.parent.iframeSettings.enable && !isNOU(divEle) && divEle.style.display === 'block' || this.parent.iframeSettings.enable && !isNOU(iframeEle) && iframeEle.style.display === 'block') {\n      this.parent.notify(events.updateToolbarItem, {\n        targetItem: 'SourceCode',\n        updateItem: 'Preview',\n        baseToolbar: this.parent.getBaseToolbarObject()\n      });\n      this.parent.disableToolbarItem(this.parent.toolbarSettings.items);\n    }\n  };\n  /**\n   * addFixedTBarClass method\n   *\n   * @returns {void}\n   * @hidden\n    */\n\n\n  Toolbar.prototype.addFixedTBarClass = function () {\n    addClass([this.tbElement], [classes.CLS_TB_FIXED]);\n  };\n  /**\n   * removeFixedTBarClass method\n   *\n   * @returns {void}\n   * @hidden\n    */\n\n\n  Toolbar.prototype.removeFixedTBarClass = function () {\n    removeClass([this.tbElement], [classes.CLS_TB_FIXED]);\n  };\n\n  Toolbar.prototype.showFixedTBar = function () {\n    addClass([this.tbElement], [classes.CLS_SHOW]);\n\n    if (Browser.isIos) {\n      addClass([this.tbElement], [classes.CLS_TB_IOS_FIX]);\n    }\n  };\n\n  Toolbar.prototype.hideFixedTBar = function () {\n    // eslint-disable-next-line\n    !this.isToolbar ? removeClass([this.tbElement], [classes.CLS_SHOW, classes.CLS_TB_IOS_FIX]) : this.isToolbar = false;\n  };\n  /**\n   * updateItem method\n   *\n   * @param {IUpdateItemsModel} args - specifies the arguments.\n   * @returns {void}\n   * @hidden\n    */\n\n\n  Toolbar.prototype.updateItem = function (args) {\n    var item = this.tools[args.updateItem.toLocaleLowerCase()];\n    var trgItem = this.tools[args.targetItem.toLocaleLowerCase()];\n    var index = getTBarItemsIndex(getCollection(trgItem.subCommand), args.baseToolbar.toolbarObj.items)[0];\n\n    if (!isNOU(index)) {\n      var prefixId = this.parent.inlineMode.enable ? '_quick_' : '_toolbar_';\n      args.baseToolbar.toolbarObj.items[index].id = this.parent.getID() + prefixId + item.id;\n      args.baseToolbar.toolbarObj.items[index].prefixIcon = item.icon;\n      args.baseToolbar.toolbarObj.items[index].tooltipText = item.tooltip;\n      args.baseToolbar.toolbarObj.items[index].subCommand = item.subCommand;\n      args.baseToolbar.toolbarObj.dataBind();\n    } else {\n      this.addTBarItem(args, 0);\n    }\n  };\n\n  Toolbar.prototype.updateToolbarStatus = function (args) {\n    if (!this.tbElement || this.parent.inlineMode.enable && (isIDevice() || !Browser.isDevice)) {\n      return;\n    }\n\n    var options = {\n      args: args,\n      dropDownModule: this.dropDownModule,\n      parent: this.parent,\n      tbElements: selectAll('.' + classes.CLS_TB_ITEM, this.tbElement),\n      tbItems: this.baseToolbar.toolbarObj.items\n    };\n    setToolbarStatus(options, this.parent.inlineMode.enable ? true : false, this.parent);\n  };\n\n  Toolbar.prototype.fullScreen = function (e) {\n    this.parent.fullScreenModule.showFullScreen(e);\n  };\n\n  Toolbar.prototype.hideScreen = function (e) {\n    this.parent.fullScreenModule.hideFullScreen(e);\n  };\n  /**\n   * getBaseToolbar method\n   *\n   * @returns {void}\n   * @hidden\n    */\n\n\n  Toolbar.prototype.getBaseToolbar = function () {\n    return this.baseToolbar;\n  };\n  /**\n   * addTBarItem method\n   *\n   * @param {IUpdateItemsModel} args - specifies the arguments.\n   * @param {number} index - specifies the index value.\n   * @returns {void}\n   * @hidden\n    */\n\n\n  Toolbar.prototype.addTBarItem = function (args, index) {\n    args.baseToolbar.toolbarObj.addItems([args.baseToolbar.getObject(args.updateItem, 'toolbar')], index);\n  };\n  /**\n   * enableTBarItems method\n   *\n   * @param {BaseToolbar} baseToolbar - specifies the toolbar.\n   * @param {string} items - specifies the string value.\n   * @param {boolean} isEnable - specifies the boolean value.\n   * @param {boolean} muteToolbarUpdate - specifies the toolbar.\n   * @returns {void}\n   * @hidden\n    */\n\n\n  Toolbar.prototype.enableTBarItems = function (baseToolbar, items, isEnable, muteToolbarUpdate) {\n    var trgItems = getTBarItemsIndex(getCollection(items), baseToolbar.toolbarObj.items);\n    this.tbItems = selectAll('.' + classes.CLS_TB_ITEM, baseToolbar.toolbarObj.element);\n\n    for (var i = 0; i < trgItems.length; i++) {\n      var item = this.tbItems[trgItems[i]];\n\n      if (item) {\n        baseToolbar.toolbarObj.enableItems(item, isEnable);\n      }\n    }\n\n    if (!select('.e-rte-srctextarea', this.parent.element) && !muteToolbarUpdate) {\n      updateUndoRedoStatus(baseToolbar, this.parent.formatter.editorManager.undoRedoManager.getUndoStatus());\n    }\n  };\n  /**\n   * removeTBarItems method\n   *\n   * @param {string} items - specifies the string value.\n   * @returns {void}\n   * @hidden\n    */\n\n\n  Toolbar.prototype.removeTBarItems = function (items) {\n    if (isNullOrUndefined(this.baseToolbar.toolbarObj)) {\n      this.baseToolbar = this.parent.getBaseToolbarObject();\n    }\n\n    var trgItems = getTBarItemsIndex(getCollection(items), this.baseToolbar.toolbarObj.items);\n    this.tbItems = this.parent.inlineMode.enable ? selectAll('.' + classes.CLS_TB_ITEM, this.baseToolbar.toolbarObj.element) : selectAll('.' + classes.CLS_TB_ITEM, this.parent.element);\n\n    for (var i = 0; i < trgItems.length; i++) {\n      this.baseToolbar.toolbarObj.removeItems(this.tbItems[trgItems[i]]);\n    }\n  };\n  /**\n   * getExpandTBarPopHeight method\n   *\n   * @returns {void}\n   * @hidden\n    */\n\n\n  Toolbar.prototype.getExpandTBarPopHeight = function () {\n    var popHeight = 0;\n\n    if (this.parent.toolbarSettings.type === ToolbarType.Expand && this.tbElement.classList.contains('e-extended-toolbar')) {\n      var expandPopup = select('.e-toolbar-extended', this.tbElement);\n\n      if (expandPopup && this.tbElement.classList.contains('e-expand-open') || expandPopup && expandPopup.classList.contains('e-popup-open')) {\n        addClass([expandPopup], [classes.CLS_VISIBLE]);\n        popHeight = popHeight + expandPopup.offsetHeight;\n        removeClass([expandPopup], [classes.CLS_VISIBLE]);\n      } else {\n        removeClass([this.tbElement], [classes.CLS_EXPAND_OPEN]);\n      }\n    }\n\n    return popHeight;\n  };\n  /**\n   * getToolbarHeight method\n   *\n   * @returns {void}\n   * @hidden\n    */\n\n\n  Toolbar.prototype.getToolbarHeight = function () {\n    return this.tbElement.offsetHeight;\n  };\n  /**\n   * getToolbarElement method\n   *\n   * @returns {void}\n   * @hidden\n    */\n\n\n  Toolbar.prototype.getToolbarElement = function () {\n    return select('.' + classes.CLS_TOOLBAR, this.parent.element);\n  };\n  /**\n   * refreshToolbarOverflow method\n   *\n   * @returns {void}\n   * @hidden\n    */\n\n\n  Toolbar.prototype.refreshToolbarOverflow = function () {\n    this.baseToolbar.toolbarObj.refreshOverflow();\n  };\n\n  Toolbar.prototype.isToolbarDestroyed = function () {\n    return this.baseToolbar.toolbarObj && !this.baseToolbar.toolbarObj.isDestroyed;\n  };\n\n  Toolbar.prototype.destroyToolbar = function () {\n    if (this.isToolbarDestroyed()) {\n      this.parent.unWireScrollElementsEvents();\n      this.unWireEvents();\n      this.parent.notify(events.destroyColorPicker, {});\n      this.dropDownModule.destroyDropDowns();\n      this.baseToolbar.toolbarObj.destroy();\n      this.removeEventListener();\n      removeClass([this.parent.element], [classes.CLS_RTE_TB_ENABLED]);\n      removeClass([this.parent.element], [classes.CLS_RTE_EXPAND_TB]);\n      var tbWrapper = select('.' + classes.CLS_TB_WRAP, this.parent.element);\n      var tbElement = select('.' + classes.CLS_TOOLBAR, this.parent.element);\n\n      if (!isNullOrUndefined(tbWrapper)) {\n        detach(tbWrapper);\n      } else if (!isNullOrUndefined(tbElement)) {\n        detach(tbElement);\n      }\n    }\n  };\n  /**\n   * Destroys the ToolBar.\n   *\n   * @function destroy\n   * @returns {void}\n   * @hidden\n    */\n\n\n  Toolbar.prototype.destroy = function () {\n    if (this.isToolbarDestroyed()) {\n      this.destroyToolbar();\n\n      if (this.keyBoardModule) {\n        this.keyBoardModule.destroy();\n      }\n    }\n  };\n\n  Toolbar.prototype.scrollHandler = function (e) {\n    if (!this.parent.inlineMode.enable) {\n      if (this.parent.toolbarSettings.enableFloating && this.getDOMVisibility(this.tbElement)) {\n        this.toggleFloatClass(e.args);\n      }\n    }\n  };\n\n  Toolbar.prototype.getDOMVisibility = function (el) {\n    if (!el.offsetParent && el.offsetWidth === 0 && el.offsetHeight === 0) {\n      return false;\n    }\n\n    return true;\n  };\n\n  Toolbar.prototype.mouseDownHandler = function () {\n    if (Browser.isDevice && this.parent.inlineMode.enable && !isIDevice()) {\n      this.showFixedTBar();\n    }\n  };\n\n  Toolbar.prototype.focusChangeHandler = function () {\n    if (Browser.isDevice && this.parent.inlineMode.enable && !isIDevice()) {\n      this.isToolbar = false;\n      this.hideFixedTBar();\n    }\n  };\n\n  Toolbar.prototype.dropDownBeforeOpenHandler = function () {\n    this.isToolbar = true;\n  }; // eslint-disable-next-line\n\n\n  Toolbar.prototype.tbFocusHandler = function (e) {\n    var activeElm = document.activeElement;\n    var isToolbaractive = closest(activeElm, '.e-rte-toolbar');\n\n    if (activeElm === this.parent.getToolbarElement() || isToolbaractive === this.parent.getToolbarElement()) {\n      var toolbarItem = this.parent.getToolbarElement().querySelectorAll('.e-expended-nav');\n\n      for (var i = 0; i < toolbarItem.length; i++) {\n        if (isNOU(this.parent.getToolbarElement().querySelector('.e-insert-table-btn'))) {\n          toolbarItem[i].setAttribute('tabindex', '0');\n        } else {\n          toolbarItem[i].setAttribute('tabindex', '1');\n        }\n      }\n    }\n  };\n\n  Toolbar.prototype.tbKeydownHandler = function (e) {\n    if (e.target.classList.contains('e-dropdown-btn') || e.target.getAttribute('id') === this.parent.getID() + '_toolbar_CreateTable') {\n      e.target.setAttribute('tabindex', '0');\n    }\n  };\n\n  Toolbar.prototype.toolbarClickHandler = function (e) {\n    var trg = closest(e.originalEvent.target, '.e-hor-nav');\n\n    if (trg && this.parent.toolbarSettings.type === ToolbarType.Expand && !isNOU(trg)) {\n      if (!trg.classList.contains('e-nav-active')) {\n        removeClass([this.tbElement], [classes.CLS_EXPAND_OPEN]);\n        this.parent.setContentHeight('toolbar', false);\n      } else {\n        addClass([this.tbElement], [classes.CLS_EXPAND_OPEN]);\n        this.parent.setContentHeight('toolbar', true);\n      }\n    } else if (Browser.isDevice || this.parent.inlineMode.enable) {\n      this.isToolbar = true;\n    }\n\n    if (isNOU(trg) && this.parent.toolbarSettings.type === ToolbarType.Expand) {\n      removeClass([this.tbElement], [classes.CLS_EXPAND_OPEN]);\n    }\n  };\n\n  Toolbar.prototype.wireEvents = function () {\n    if (this.parent.inlineMode.enable && isIDevice()) {\n      return;\n    }\n\n    EventHandler.add(this.tbElement, 'focusin', this.tbFocusHandler, this);\n    EventHandler.add(this.tbElement, 'keydown', this.tbKeydownHandler, this);\n  };\n\n  Toolbar.prototype.unWireEvents = function () {\n    EventHandler.remove(this.tbElement, 'focusin', this.tbFocusHandler);\n    EventHandler.remove(this.tbElement, 'keydown', this.tbKeydownHandler);\n  };\n\n  Toolbar.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.dropDownModule = new DropDownButtons(this.parent, this.locator);\n    this.toolbarActionModule = new ToolbarAction(this.parent);\n    this.parent.on(events.initialEnd, this.renderToolbar, this);\n    this.parent.on(events.scroll, this.scrollHandler, this);\n    this.parent.on(events.bindOnEnd, this.toolbarBindEvent, this);\n    this.parent.on(events.toolbarUpdated, this.updateToolbarStatus, this);\n    this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n    this.parent.on(events.refreshBegin, this.onRefresh, this);\n    this.parent.on(events.destroy, this.destroy, this);\n    this.parent.on(events.enableFullScreen, this.fullScreen, this);\n    this.parent.on(events.disableFullScreen, this.hideScreen, this);\n    this.parent.on(events.updateToolbarItem, this.updateItem, this);\n    this.parent.on(events.beforeDropDownOpen, this.dropDownBeforeOpenHandler, this);\n    this.parent.on(events.expandPopupClick, this.parent.setContentHeight, this.parent);\n    this.parent.on(events.focusChange, this.focusChangeHandler, this);\n    this.parent.on(events.mouseDown, this.mouseDownHandler, this);\n    this.parent.on(events.sourceCodeMouseDown, this.mouseDownHandler, this);\n\n    if (!this.parent.inlineMode.enable && !isIDevice()) {\n      this.parent.on(events.toolbarClick, this.toolbarClickHandler, this);\n    }\n  };\n\n  Toolbar.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.off(events.initialEnd, this.renderToolbar);\n    this.parent.off(events.scroll, this.scrollHandler);\n    this.parent.off(events.bindOnEnd, this.toolbarBindEvent);\n    this.parent.off(events.toolbarUpdated, this.updateToolbarStatus);\n    this.parent.off(events.modelChanged, this.onPropertyChanged);\n    this.parent.off(events.refreshBegin, this.onRefresh);\n    this.parent.off(events.destroy, this.destroy);\n    this.parent.off(events.enableFullScreen, this.parent.fullScreenModule.showFullScreen);\n    this.parent.off(events.disableFullScreen, this.parent.fullScreenModule.hideFullScreen);\n    this.parent.off(events.updateToolbarItem, this.updateItem);\n    this.parent.off(events.beforeDropDownOpen, this.dropDownBeforeOpenHandler);\n    this.parent.off(events.expandPopupClick, this.parent.setContentHeight);\n    this.parent.off(events.focusChange, this.focusChangeHandler);\n    this.parent.off(events.mouseDown, this.mouseDownHandler);\n    this.parent.off(events.sourceCodeMouseDown, this.mouseDownHandler);\n\n    if (!this.parent.inlineMode.enable && !isIDevice()) {\n      this.parent.off(events.toolbarClick, this.toolbarClickHandler);\n    }\n  };\n\n  Toolbar.prototype.onRefresh = function () {\n    this.refreshToolbarOverflow();\n    this.parent.setContentHeight('', true);\n  };\n  /**\n   * Called internally if any of the property value changed.\n   *\n   * @param {RichTextEditorModel} e - specifies the string value\n   * @returns {void}\n   * @hidden\n    */\n\n\n  Toolbar.prototype.onPropertyChanged = function (e) {\n    if (!isNullOrUndefined(e.newProp.inlineMode)) {\n      for (var _i = 0, _a = Object.keys(e.newProp.inlineMode); _i < _a.length; _i++) {\n        var prop = _a[_i];\n\n        switch (prop) {\n          case 'enable':\n            this.refreshToolbar();\n            break;\n        }\n      }\n    }\n\n    if (e.module !== this.getModuleName()) {\n      return;\n    }\n\n    this.refreshToolbar();\n  };\n\n  Toolbar.prototype.refreshToolbar = function () {\n    if (isNullOrUndefined(this.baseToolbar.toolbarObj)) {\n      this.baseToolbar = this.parent.getBaseToolbarObject();\n    }\n\n    var tbWrapper = select('.' + classes.CLS_TB_WRAP, this.parent.element);\n    var tbElement = select('.' + classes.CLS_TOOLBAR, this.parent.element);\n\n    if (tbElement || tbWrapper) {\n      this.destroyToolbar();\n    }\n\n    if (this.parent.toolbarSettings.enable) {\n      this.addEventListener();\n      this.renderToolbar();\n      this.parent.wireScrollElementsEvents();\n\n      if (!select('.e-rte-srctextarea', this.parent.element)) {\n        updateUndoRedoStatus(this.baseToolbar, this.parent.formatter.editorManager.undoRedoManager.getUndoStatus());\n      }\n\n      this.parent.notify(events.dynamicModule, {});\n    }\n  };\n  /**\n   * For internal use only - Get the module name.\n   *\n   * @returns {void}\n   * @hidden\n   */\n\n\n  Toolbar.prototype.getModuleName = function () {\n    return 'toolbar';\n  };\n\n  return Toolbar;\n}();\n\nexport { Toolbar };","map":{"version":3,"sources":["/Users/yasaman/Documents/moj_adminpanel/adminpanel/node_modules/@syncfusion/ej2-richtexteditor/src/rich-text-editor/actions/toolbar.js"],"names":["addClass","Browser","EventHandler","detach","removeClass","select","selectAll","KeyboardEvents","isNullOrUndefined","isNOU","closest","setStyleAttribute","extend","events","classes","RenderType","ToolbarType","setToolbarStatus","updateUndoRedoStatus","getTBarItemsIndex","getCollection","toObjectLowerCase","isIDevice","updateDropDownFontFormatLocale","model","ToolbarRenderer","BaseToolbar","DropDownButtons","ToolbarAction","Toolbar","parent","serviceLocator","isToolbar","locator","isTransformChild","renderFactory","getService","updateDropDownLocale","addRenderer","toolbarRenderer","getRenderer","baseToolbar","addEventListener","toolbarSettings","Object","keys","itemConfigs","length","tools","prototype","initializeInstance","contentRenderer","Content","editableElement","getEditPanel","editPanel","getPanel","toolbarBindEvent","inlineMode","enable","keyBoardModule","getToolbarElement","keyAction","toolBarKeyDown","bind","keyConfigs","formatter","keyConfig","eventName","e","action","contentModule","focus","createToolbarElement","tbElement","createElement","id","getID","isDevice","enableFloating","tbWrapper","innerHTML","outerHTML","className","CLS_TB_WRAP","firstElementChild","element","insertBefore","getToolbarMode","tbMode","type","Expand","Scrollable","checkToolbarResponsive","ele","tBarMode","MultiRow","render","container","items","mode","target","addFixedTBarClass","CLS_TB_STATIC","wireEvents","dropDownModule","renderDropDowns","containerType","notify","renderColorPicker","checkIsTransformChild","transformElements","document","i","contains","toggleFloatClass","topValue","isBody","isFloat","scrollParent","floatOffset","floatingToolbarOffset","iframeSettings","inputElement","ownerDocument","body","tbHeight","getToolbarHeight","getExpandTBarPopHeight","scrollParentRelativeTop","trgHeight","offsetHeight","bodyStyle","window","getComputedStyle","parseFloat","marginTop","split","paddingTop","targetTop","getBoundingClientRect","top","scrollParentYOffset","isMSPointer","pageYOffset","parentElement","scrollTop","scrollParentRect","scrollParentTop","outOfRange","CLS_TB_ABS_FLOAT","parent_1","innerHeight","bottom","CLS_TB_FLOAT","width","offsetWidth","renderToolbar","renderInlineToolbar","CLS_RTE_TB_ENABLED","CLS_RTE_EXPAND_TB","refreshToolbarOverflow","divEle","querySelector","iframeEle","style","display","updateToolbarItem","targetItem","updateItem","getBaseToolbarObject","disableToolbarItem","CLS_TB_FIXED","removeFixedTBarClass","showFixedTBar","CLS_SHOW","isIos","CLS_TB_IOS_FIX","hideFixedTBar","args","item","toLocaleLowerCase","trgItem","index","subCommand","toolbarObj","prefixId","prefixIcon","icon","tooltipText","tooltip","dataBind","addTBarItem","updateToolbarStatus","options","tbElements","CLS_TB_ITEM","tbItems","fullScreen","fullScreenModule","showFullScreen","hideScreen","hideFullScreen","getBaseToolbar","addItems","getObject","enableTBarItems","isEnable","muteToolbarUpdate","trgItems","enableItems","editorManager","undoRedoManager","getUndoStatus","removeTBarItems","removeItems","popHeight","classList","expandPopup","CLS_VISIBLE","CLS_EXPAND_OPEN","CLS_TOOLBAR","refreshOverflow","isToolbarDestroyed","isDestroyed","destroyToolbar","unWireScrollElementsEvents","unWireEvents","destroyColorPicker","destroyDropDowns","destroy","removeEventListener","scrollHandler","getDOMVisibility","el","offsetParent","mouseDownHandler","focusChangeHandler","dropDownBeforeOpenHandler","tbFocusHandler","activeElm","activeElement","isToolbaractive","toolbarItem","querySelectorAll","setAttribute","tbKeydownHandler","getAttribute","toolbarClickHandler","trg","originalEvent","setContentHeight","add","remove","toolbarActionModule","on","initialEnd","scroll","bindOnEnd","toolbarUpdated","modelChanged","onPropertyChanged","refreshBegin","onRefresh","enableFullScreen","disableFullScreen","beforeDropDownOpen","expandPopupClick","focusChange","mouseDown","sourceCodeMouseDown","toolbarClick","off","newProp","_i","_a","prop","refreshToolbar","module","getModuleName","wireScrollElementsEvents","dynamicModule"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,OAAnB,EAA4BC,YAA5B,EAA0CC,MAA1C,EAAkDC,WAAlD,EAA+DC,MAA/D,EAAuEC,SAAvE,EAAkFC,cAAlF,QAAwG,sBAAxG;AACA,SAASC,iBAAiB,IAAIC,KAA9B,EAAqCC,OAArC,EAA8CF,iBAA9C,QAAuE,sBAAvE;AACA,SAASG,iBAAT,EAA4BC,MAA5B,QAA0C,sBAA1C;AACA,OAAO,KAAKC,MAAZ,MAAwB,kBAAxB;AACA,OAAO,KAAKC,OAAZ,MAAyB,iBAAzB;AACA,SAASC,UAAT,EAAqBC,WAArB,QAAwC,cAAxC;AACA,SAASC,gBAAT,EAA2BC,oBAA3B,EAAiDC,iBAAjD,EAAoEC,aAApE,EAAmFC,iBAAnF,EAAsGC,SAAtG,QAAuH,cAAvH;AACA,SAASC,8BAAT,QAA+C,cAA/C;AACA,OAAO,KAAKC,KAAZ,MAAuB,iBAAvB;AACA,SAASC,eAAT,QAAgC,8BAAhC;AACA,SAASC,WAAT,QAA4B,gBAA5B;AACA,SAASC,eAAT,QAAgC,oBAAhC;AACA,SAASC,aAAT,QAA8B,kBAA9B;AACA;AACA;AACA;;AACA,IAAIC,OAAO;AAAG;AAAe,YAAY;AACrC,WAASA,OAAT,CAAiBC,MAAjB,EAAyBC,cAAzB,EAAyC;AACrC,SAAKD,MAAL,GAAcA,MAAd;AACA,SAAKE,SAAL,GAAiB,KAAjB;AACA,SAAKC,OAAL,GAAeF,cAAf;AACA,SAAKG,gBAAL,GAAwB,KAAxB;AACA,SAAKC,aAAL,GAAqB,KAAKF,OAAL,CAAaG,UAAb,CAAwB,iBAAxB,CAArB;AACAZ,IAAAA,KAAK,CAACa,oBAAN,CAA2B,KAAKP,MAAhC;AACAP,IAAAA,8BAA8B,CAAC,KAAKO,MAAN,CAA9B;AACA,SAAKK,aAAL,CAAmBG,WAAnB,CAA+BvB,UAAU,CAACc,OAA1C,EAAmD,IAAIJ,eAAJ,CAAoB,KAAKK,MAAzB,CAAnD;AACA,SAAKS,eAAL,GAAuB,KAAKJ,aAAL,CAAmBK,WAAnB,CAA+BzB,UAAU,CAACc,OAA1C,CAAvB;AACA,SAAKY,WAAL,GAAmB,IAAIf,WAAJ,CAAgB,KAAKI,MAArB,EAA6B,KAAKG,OAAlC,CAAnB;AACA,SAAKS,gBAAL;;AACA,QAAI,KAAKZ,MAAL,CAAYa,eAAZ,IAA+BC,MAAM,CAACC,IAAP,CAAY,KAAKf,MAAL,CAAYa,eAAZ,CAA4BG,WAAxC,EAAqDC,MAArD,GAA8D,CAAjG,EAAoG;AAChGnC,MAAAA,MAAM,CAAC,KAAKoC,KAAN,EAAaxB,KAAK,CAACwB,KAAnB,EAA0B3B,iBAAiB,CAAC,KAAKS,MAAL,CAAYa,eAAZ,CAA4BG,WAA7B,CAA3C,EAAsF,IAAtF,CAAN;AACH,KAFD,MAGK;AACD,WAAKE,KAAL,GAAaxB,KAAK,CAACwB,KAAnB;AACH;AACJ;;AACDnB,EAAAA,OAAO,CAACoB,SAAR,CAAkBC,kBAAlB,GAAuC,YAAY;AAC/C,SAAKC,eAAL,GAAuB,KAAKhB,aAAL,CAAmBK,WAAnB,CAA+BzB,UAAU,CAACqC,OAA1C,CAAvB;AACA,SAAKC,eAAL,GAAuB,KAAKF,eAAL,CAAqBG,YAArB,EAAvB;AACA,SAAKC,SAAL,GAAiB,KAAKJ,eAAL,CAAqBK,QAArB,EAAjB;AACH,GAJD;;AAKA3B,EAAAA,OAAO,CAACoB,SAAR,CAAkBQ,gBAAlB,GAAqC,YAAY;AAC7C,QAAI,CAAC,KAAK3B,MAAL,CAAY4B,UAAZ,CAAuBC,MAA5B,EAAoC;AAChC,WAAKC,cAAL,GAAsB,IAAIrD,cAAJ,CAAmB,KAAKsD,iBAAL,EAAnB,EAA6C;AAC/DC,QAAAA,SAAS,EAAE,KAAKC,cAAL,CAAoBC,IAApB,CAAyB,IAAzB,CADoD;AACpBC,QAAAA,UAAU,EAAE,KAAKnC,MAAL,CAAYoC,SAAZ,CAAsBC,SADd;AACyBC,QAAAA,SAAS,EAAE;AADpC,OAA7C,CAAtB;AAGH;AACJ,GAND;;AAOAvC,EAAAA,OAAO,CAACoB,SAAR,CAAkBc,cAAlB,GAAmC,UAAUM,CAAV,EAAa;AAC5C,YAAQA,CAAC,CAACC,MAAV;AACI,WAAK,QAAL;AACI,aAAKxC,MAAL,CAAYyC,aAAZ,CAA0BjB,YAA1B,GAAyCkB,KAAzC;AACA;AAHR;AAKH,GAND;;AAOA3C,EAAAA,OAAO,CAACoB,SAAR,CAAkBwB,oBAAlB,GAAyC,YAAY;AACjD,SAAKC,SAAL,GAAiB,KAAK5C,MAAL,CAAY6C,aAAZ,CAA0B,KAA1B,EAAiC;AAAEC,MAAAA,EAAE,EAAE,KAAK9C,MAAL,CAAY+C,KAAZ,KAAsB;AAA5B,KAAjC,CAAjB;;AACA,QAAI,CAAC5E,OAAO,CAAC6E,QAAT,IAAqB,KAAKhD,MAAL,CAAY4B,UAAZ,CAAuBC,MAA5C,IAAsDrC,SAAS,EAAnE,EAAuE;AACnE;AACH,KAFD,MAGK;AACD,UAAI,KAAKQ,MAAL,CAAYa,eAAZ,CAA4BoC,cAA5B,IAA8C,CAAC,KAAKjD,MAAL,CAAY4B,UAAZ,CAAuBC,MAA1E,EAAkF;AAC9E,aAAKqB,SAAL,GAAiB,KAAKlD,MAAL,CAAY6C,aAAZ,CAA0B,KAA1B,EAAiC;AAC9CC,UAAAA,EAAE,EAAE,KAAK9C,MAAL,CAAY+C,KAAZ,KAAsB,kBADoB;AAE9CI,UAAAA,SAAS,EAAE,KAAKP,SAAL,CAAeQ,SAFoB;AAG9CC,UAAAA,SAAS,EAAErE,OAAO,CAACsE;AAH2B,SAAjC,CAAjB;AAKA,aAAKV,SAAL,GAAiB,KAAKM,SAAL,CAAeK,iBAAhC;AACA,aAAKvD,MAAL,CAAYwD,OAAZ,CAAoBC,YAApB,CAAiC,KAAKP,SAAtC,EAAiD,KAAKzB,SAAtD;AACH,OARD,MASK;AACD,aAAKzB,MAAL,CAAYwD,OAAZ,CAAoBC,YAApB,CAAiC,KAAKb,SAAtC,EAAiD,KAAKnB,SAAtD;AACH;AACJ;AACJ,GAnBD;;AAoBA1B,EAAAA,OAAO,CAACoB,SAAR,CAAkBuC,cAAlB,GAAmC,YAAY;AAC3C,QAAIC,MAAJ;;AACA,YAAQ,KAAK3D,MAAL,CAAYa,eAAZ,CAA4B+C,IAApC;AACI,WAAK1E,WAAW,CAAC2E,MAAjB;AACIF,QAAAA,MAAM,GAAG,UAAT;AACA;;AACJ,WAAKzE,WAAW,CAAC4E,UAAjB;AACIH,QAAAA,MAAM,GAAG,YAAT;AACA;;AACJ;AACIA,QAAAA,MAAM,GAAG,UAAT;AARR;;AAUA,QAAInE,SAAS,MAAM,KAAKQ,MAAL,CAAYa,eAAZ,CAA4B+C,IAA5B,KAAqC1E,WAAW,CAAC2E,MAApE,EAA4E;AACxEF,MAAAA,MAAM,GAAGzE,WAAW,CAAC4E,UAArB;AACH;;AACD,WAAOH,MAAP;AACH,GAhBD;;AAiBA5D,EAAAA,OAAO,CAACoB,SAAR,CAAkB4C,sBAAlB,GAA2C,UAAUC,GAAV,EAAe;AACtD,QAAI,CAAC7F,OAAO,CAAC6E,QAAT,IAAqBxD,SAAS,EAAlC,EAAsC;AAClC,aAAO,KAAP;AACH;;AACD,QAAIyE,QAAJ;;AACA,QAAI,KAAKjE,MAAL,CAAYa,eAAZ,CAA4B+C,IAA5B,KAAqC1E,WAAW,CAAC2E,MAArD,EAA6D;AACzDI,MAAAA,QAAQ,GAAG/E,WAAW,CAACgF,QAAvB;AACH,KAFD,MAGK;AACDD,MAAAA,QAAQ,GAAG,KAAKjE,MAAL,CAAYa,eAAZ,CAA4B+C,IAAvC;AACH;;AACD,SAAKjD,WAAL,CAAiBwD,MAAjB,CAAwB;AACpBC,MAAAA,SAAS,EAAI,KAAKpE,MAAL,CAAY4B,UAAZ,CAAuBC,MAAxB,GAAkC,OAAlC,GAA4C,SADpC;AAEpBwC,MAAAA,KAAK,EAAE,KAAKrE,MAAL,CAAYa,eAAZ,CAA4BwD,KAFf;AAGpBC,MAAAA,IAAI,EAAEL,QAHc;AAIpBM,MAAAA,MAAM,EAAEP;AAJY,KAAxB;;AAMA,QAAI,KAAKhE,MAAL,CAAYa,eAAZ,CAA4B+C,IAA5B,KAAqC1E,WAAW,CAAC2E,MAArD,EAA6D;AACzD3F,MAAAA,QAAQ,CAAC,CAAC8F,GAAD,CAAD,EAAQ,CAAC,iBAAD,CAAR,CAAR;;AACA,UAAI,KAAKhE,MAAL,CAAY4B,UAAZ,CAAuBC,MAA3B,EAAmC;AAC/B,aAAK2C,iBAAL;AACH,OAFD,MAGK;AACDtG,QAAAA,QAAQ,CAAC,CAAC8F,GAAD,CAAD,EAAQ,CAAChF,OAAO,CAACyF,aAAT,CAAR,CAAR;AACH;AACJ;;AACD,SAAKC,UAAL;AACA,SAAKC,cAAL,CAAoBC,eAApB,CAAoC;AAChCR,MAAAA,SAAS,EAAEJ,GADqB;AAEhCa,MAAAA,aAAa,EAAI,KAAK7E,MAAL,CAAY4B,UAAZ,CAAuBC,MAAxB,GAAkC,OAAlC,GAA4C,SAF5B;AAGhCwC,MAAAA,KAAK,EAAE,KAAKrE,MAAL,CAAYa,eAAZ,CAA4BwD;AAHH,KAApC;AAKA,SAAKrE,MAAL,CAAY8E,MAAZ,CAAmB/F,MAAM,CAACgG,iBAA1B,EAA6C;AACzCX,MAAAA,SAAS,EAAE,KAAKxB,SADyB;AAEzCiC,MAAAA,aAAa,EAAI,KAAK7E,MAAL,CAAY4B,UAAZ,CAAuBC,MAAxB,GAAkC,OAAlC,GAA4C,SAFnB;AAGzCwC,MAAAA,KAAK,EAAE,KAAKrE,MAAL,CAAYa,eAAZ,CAA4BwD;AAHM,KAA7C;AAKA,WAAO,IAAP;AACH,GAtCD;;AAuCAtE,EAAAA,OAAO,CAACoB,SAAR,CAAkB6D,qBAAlB,GAA0C,YAAY;AAClD,SAAK5E,gBAAL,GAAwB,KAAxB;AACA,QAAI6E,iBAAiB,GAAGzG,SAAS,CAAC,sBAAD,EAAyB0G,QAAzB,CAAjC;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,iBAAiB,CAAChE,MAAtC,EAA8CkE,CAAC,EAA/C,EAAmD;AAC/C,UAAI,CAACzG,iBAAiB,CAACuG,iBAAiB,CAACE,CAAD,CAAjB,CAAqBC,QAAtB,CAAlB,IAAqDH,iBAAiB,CAACE,CAAD,CAAjB,CAAqBC,QAArB,CAA8B,KAAKpF,MAAL,CAAYwD,OAA1C,CAAzD,EAA6G;AACzG,aAAKpD,gBAAL,GAAwB,IAAxB;AACA;AACH;AACJ;AACJ,GATD;;AAUAL,EAAAA,OAAO,CAACoB,SAAR,CAAkBkE,gBAAlB,GAAqC,UAAU9C,CAAV,EAAa;AAC9C,QAAI+C,QAAJ;AACA,QAAIC,MAAM,GAAG,KAAb;AACA,QAAIC,OAAO,GAAG,KAAd;AACA,QAAIC,YAAJ;AACA,QAAIC,WAAW,GAAG,KAAK1F,MAAL,CAAY2F,qBAA9B;;AACA,QAAIpD,CAAC,IAAI,KAAKvC,MAAL,CAAY4F,cAAZ,CAA2B/D,MAAhC,IAA0C,KAAK7B,MAAL,CAAY6F,YAAZ,CAAyBC,aAAzB,KAA2CvD,CAAC,CAACgC,MAA3F,EAAmG;AAC/FkB,MAAAA,YAAY,GAAGlD,CAAC,CAACgC,MAAF,CAASwB,IAAxB;AACH,KAFD,MAGK,IAAIxD,CAAC,IAAIA,CAAC,CAACgC,MAAF,KAAaW,QAAtB,EAAgC;AACjCO,MAAAA,YAAY,GAAGlD,CAAC,CAACgC,MAAjB;AACH,KAFI,MAGA;AACDgB,MAAAA,MAAM,GAAG,IAAT;AACAE,MAAAA,YAAY,GAAGP,QAAQ,CAACa,IAAxB;AACH;;AACD,QAAIC,QAAQ,GAAG,KAAKC,gBAAL,KAA0B,KAAKC,sBAAL,EAAzC;;AACA,QAAI,KAAK9F,gBAAT,EAA2B;AACvBkF,MAAAA,QAAQ,GAAG,CAAX;AACA,UAAIa,uBAAuB,GAAG,CAA9B;AACA,UAAIC,SAAS,GAAG,KAAKpG,MAAL,CAAYwD,OAAZ,CAAoB6C,YAApC;;AACA,UAAId,MAAJ,EAAY;AACR,YAAIe,SAAS,GAAGC,MAAM,CAACC,gBAAP,CAAwBf,YAAxB,CAAhB;AACAU,QAAAA,uBAAuB,GAAGM,UAAU,CAACH,SAAS,CAACI,SAAV,CAAoBC,KAApB,CAA0B,IAA1B,EAAgC,CAAhC,CAAD,CAAV,GAAiDF,UAAU,CAACH,SAAS,CAACM,UAAV,CAAqBD,KAArB,CAA2B,IAA3B,EAAiC,CAAjC,CAAD,CAArF;AACH;;AACD,UAAIE,SAAS,GAAG,KAAK7G,MAAL,CAAYwD,OAAZ,CAAoBsD,qBAApB,GAA4CC,GAA5D;AACA,UAAIC,mBAAmB,GAAI7I,OAAO,CAAC8I,WAAR,IAAuB1B,MAAxB,GAAkCgB,MAAM,CAACW,WAAzC,GAAuDzB,YAAY,CAAC0B,aAAb,CAA2BC,SAA5G;AACA,UAAIC,gBAAgB,GAAG5B,YAAY,CAACqB,qBAAb,EAAvB;AACA,UAAIQ,eAAe,GAAI,CAAC/B,MAAF,GAAY8B,gBAAgB,CAACN,GAA7B,GAAoCM,gBAAgB,CAACN,GAAjB,GAAuBC,mBAAjF;AACA,UAAIO,UAAU,GAAKV,SAAS,IAAK,CAACtB,MAAF,GAAY+B,eAAZ,GAA8B,CAAlC,CAAV,GACZlB,SADY,GACAJ,QAAQ,GAAGN,WADZ,GAC2B,KAD3B,GACmC,IADpD;;AAEA,UAAImB,SAAS,GAAIS,eAAe,GAAG5B,WAA/B,IAA+CmB,SAAS,GAAG,CAACT,SAA5D,KAA2ES,SAAS,GAAG,CAAb,GAAkBU,UAAlB,GAA+B,KAAzG,CAAJ,EAAqH;AACjH/B,QAAAA,OAAO,GAAG,KAAV;AACAlH,QAAAA,WAAW,CAAC,CAAC,KAAKsE,SAAN,CAAD,EAAmB,CAAC5D,OAAO,CAACwI,gBAAT,CAAnB,CAAX;AACH,OAHD,MAIK,IAAIX,SAAS,GAAIS,eAAe,GAAG5B,WAAnC,EAAiD;AAClD,YAAImB,SAAS,GAAG,CAAhB,EAAmB;AACfvB,UAAAA,QAAQ,GAAI,CAACuB,SAAF,GAAeS,eAA1B;AACH,SAFD,MAGK;AACDhC,UAAAA,QAAQ,GAAGgC,eAAe,GAAGT,SAA7B;AACH;;AACDvB,QAAAA,QAAQ,GAAIC,MAAD,GAAWD,QAAQ,GAAGa,uBAAtB,GAAgDb,QAA3D;AACApH,QAAAA,QAAQ,CAAC,CAAC,KAAK0E,SAAN,CAAD,EAAmB,CAAC5D,OAAO,CAACwI,gBAAT,CAAnB,CAAR;AACAhC,QAAAA,OAAO,GAAG,IAAV;AACH;AACJ,KA7BD,MA8BK;AACD,UAAIiC,QAAQ,GAAG,KAAKzH,MAAL,CAAYwD,OAAZ,CAAoBsD,qBAApB,EAAf;;AACA,UAAIP,MAAM,CAACmB,WAAP,GAAqBD,QAAQ,CAACV,GAAlC,EAAuC;AACnC;AACH;;AACDzB,MAAAA,QAAQ,GAAI/C,CAAC,IAAIA,CAAC,CAACgC,MAAF,KAAaW,QAAnB,GAA+BO,YAAY,CAACqB,qBAAb,GAAqCC,GAApE,GAA0E,CAArF;;AACA,UAAKU,QAAQ,CAACE,MAAT,GAAmBjC,WAAW,GAAGM,QAAd,GAAyBV,QAA7C,IAA2DmC,QAAQ,CAACE,MAAT,GAAkB,CAA7E,IAAkFF,QAAQ,CAACV,GAAT,GAAerB,WAAW,GAAGJ,QAAnH,EAA6H;AACzHE,QAAAA,OAAO,GAAG,KAAV;AACH,OAFD,MAGK,IAAIiC,QAAQ,CAACV,GAAT,GAAerB,WAAnB,EAAgC;AACjCF,QAAAA,OAAO,GAAG,IAAV;AACH;AACJ;;AACD,QAAI,CAACA,OAAL,EAAc;AACVlH,MAAAA,WAAW,CAAC,CAAC,KAAKsE,SAAN,CAAD,EAAmB,CAAC5D,OAAO,CAAC4I,YAAT,CAAnB,CAAX;AACA/I,MAAAA,iBAAiB,CAAC,KAAK+D,SAAN,EAAiB;AAAEmE,QAAAA,GAAG,EAAE,IAAI,IAAX;AAAiBc,QAAAA,KAAK,EAAE;AAAxB,OAAjB,CAAjB;AACH,KAHD,MAIK;AACD3J,MAAAA,QAAQ,CAAC,CAAC,KAAK0E,SAAN,CAAD,EAAmB,CAAC5D,OAAO,CAAC4I,YAAT,CAAnB,CAAR;AACA/I,MAAAA,iBAAiB,CAAC,KAAK+D,SAAN,EAAiB;AAAEiF,QAAAA,KAAK,EAAE,KAAK7H,MAAL,CAAYwD,OAAZ,CAAoBsE,WAApB,GAAkC,IAA3C;AAAiDf,QAAAA,GAAG,EAAGrB,WAAW,GAAGJ,QAAf,GAA2B;AAAjF,OAAjB,CAAjB;AACH;AACJ,GApED;;AAqEAvF,EAAAA,OAAO,CAACoB,SAAR,CAAkB4G,aAAlB,GAAkC,YAAY;AAC1C,SAAK3G,kBAAL;AACA,SAAKuB,oBAAL;;AACA,QAAI,KAAKoB,sBAAL,CAA4B,KAAKnB,SAAjC,CAAJ,EAAiD;AAC7C;AACH;;AACD,QAAI,KAAK5C,MAAL,CAAY4B,UAAZ,CAAuBC,MAA3B,EAAmC;AAC/B,WAAK7B,MAAL,CAAY8E,MAAZ,CAAmB/F,MAAM,CAACiJ,mBAA1B,EAA+C,EAA/C;AACH,KAFD,MAGK;AACD,WAAKrH,WAAL,CAAiBwD,MAAjB,CAAwB;AACpBC,QAAAA,SAAS,EAAE,SADS;AAEpBC,QAAAA,KAAK,EAAE,KAAKrE,MAAL,CAAYa,eAAZ,CAA4BwD,KAFf;AAGpBC,QAAAA,IAAI,EAAE,KAAKZ,cAAL,EAHc;AAIpBa,QAAAA,MAAM,EAAE,KAAK3B;AAJO,OAAxB;;AAMA,UAAI,CAAC,KAAK5C,MAAL,CAAY4B,UAAZ,CAAuBC,MAA5B,EAAoC;AAChC,YAAI,KAAK7B,MAAL,CAAYa,eAAZ,CAA4BoC,cAAhC,EAAgD;AAC5C,eAAK+B,qBAAL;AACA,eAAKK,gBAAL;AACH;;AACDnH,QAAAA,QAAQ,CAAC,CAAC,KAAK8B,MAAL,CAAYwD,OAAb,CAAD,EAAwB,CAACxE,OAAO,CAACiJ,kBAAT,CAAxB,CAAR;;AACA,YAAI,KAAKjI,MAAL,CAAYa,eAAZ,CAA4B+C,IAA5B,KAAqC1E,WAAW,CAAC2E,MAArD,EAA6D;AACzD3F,UAAAA,QAAQ,CAAC,CAAC,KAAK8B,MAAL,CAAYwD,OAAb,CAAD,EAAwB,CAACxE,OAAO,CAACkJ,iBAAT,CAAxB,CAAR;AACH;AACJ;AACJ;;AACD,SAAKxD,UAAL;;AACA,QAAI,KAAK1E,MAAL,CAAY4B,UAAZ,CAAuBC,MAAvB,IAAiC,CAACrC,SAAS,EAA/C,EAAmD;AAC/C,WAAKgF,iBAAL;AACH;;AACD,QAAI,CAAC,KAAKxE,MAAL,CAAY4B,UAAZ,CAAuBC,MAA5B,EAAoC;AAChC,WAAK8C,cAAL,CAAoBC,eAApB,CAAoC;AAChCR,QAAAA,SAAS,EAAE,KAAKxB,SADgB;AAEhCiC,QAAAA,aAAa,EAAE,SAFiB;AAGhCR,QAAAA,KAAK,EAAE,KAAKrE,MAAL,CAAYa,eAAZ,CAA4BwD;AAHH,OAApC;AAKA,WAAKrE,MAAL,CAAY8E,MAAZ,CAAmB/F,MAAM,CAACgG,iBAA1B,EAA6C;AACzCX,QAAAA,SAAS,EAAE,KAAKxB,SADyB;AAEzCiC,QAAAA,aAAa,EAAE,SAF0B;AAGzCR,QAAAA,KAAK,EAAE,KAAKrE,MAAL,CAAYa,eAAZ,CAA4BwD;AAHM,OAA7C;AAKA,WAAK8D,sBAAL;AACH;;AACD,QAAIC,MAAM,GAAG,KAAKpI,MAAL,CAAYwD,OAAZ,CAAoB6E,aAApB,CAAkC,oBAAlC,CAAb;AACA,QAAIC,SAAS,GAAG,KAAKtI,MAAL,CAAYwD,OAAZ,CAAoB6E,aAApB,CAAkC,mBAAlC,CAAhB;;AACA,QAAK,CAAC,KAAKrI,MAAL,CAAY4F,cAAZ,CAA2B/D,MAA5B,IAAuC,CAAClD,KAAK,CAACyJ,MAAD,CAAN,IAAkBA,MAAM,CAACG,KAAP,CAAaC,OAAb,KAAyB,OAAnF,IACC,KAAKxI,MAAL,CAAY4F,cAAZ,CAA2B/D,MAA3B,IAAsC,CAAClD,KAAK,CAAC2J,SAAD,CAAN,IAAqBA,SAAS,CAACC,KAAV,CAAgBC,OAAhB,KAA4B,OAD5F,EACuG;AACnG,WAAKxI,MAAL,CAAY8E,MAAZ,CAAmB/F,MAAM,CAAC0J,iBAA1B,EAA6C;AACzCC,QAAAA,UAAU,EAAE,YAD6B;AACfC,QAAAA,UAAU,EAAE,SADG;AAEzChI,QAAAA,WAAW,EAAE,KAAKX,MAAL,CAAY4I,oBAAZ;AAF4B,OAA7C;AAIA,WAAK5I,MAAL,CAAY6I,kBAAZ,CAA+B,KAAK7I,MAAL,CAAYa,eAAZ,CAA4BwD,KAA3D;AACH;AACJ,GAtDD;AAuDA;AACJ;AACA;AACA;AACA;AACA;;;AAEItE,EAAAA,OAAO,CAACoB,SAAR,CAAkBqD,iBAAlB,GAAsC,YAAY;AAC9CtG,IAAAA,QAAQ,CAAC,CAAC,KAAK0E,SAAN,CAAD,EAAmB,CAAC5D,OAAO,CAAC8J,YAAT,CAAnB,CAAR;AACH,GAFD;AAGA;AACJ;AACA;AACA;AACA;AACA;;;AAEI/I,EAAAA,OAAO,CAACoB,SAAR,CAAkB4H,oBAAlB,GAAyC,YAAY;AACjDzK,IAAAA,WAAW,CAAC,CAAC,KAAKsE,SAAN,CAAD,EAAmB,CAAC5D,OAAO,CAAC8J,YAAT,CAAnB,CAAX;AACH,GAFD;;AAGA/I,EAAAA,OAAO,CAACoB,SAAR,CAAkB6H,aAAlB,GAAkC,YAAY;AAC1C9K,IAAAA,QAAQ,CAAC,CAAC,KAAK0E,SAAN,CAAD,EAAmB,CAAC5D,OAAO,CAACiK,QAAT,CAAnB,CAAR;;AACA,QAAI9K,OAAO,CAAC+K,KAAZ,EAAmB;AACfhL,MAAAA,QAAQ,CAAC,CAAC,KAAK0E,SAAN,CAAD,EAAmB,CAAC5D,OAAO,CAACmK,cAAT,CAAnB,CAAR;AACH;AACJ,GALD;;AAMApJ,EAAAA,OAAO,CAACoB,SAAR,CAAkBiI,aAAlB,GAAkC,YAAY;AAC1C;AACC,KAAC,KAAKlJ,SAAP,GAAoB5B,WAAW,CAAC,CAAC,KAAKsE,SAAN,CAAD,EAAmB,CAAC5D,OAAO,CAACiK,QAAT,EAAmBjK,OAAO,CAACmK,cAA3B,CAAnB,CAA/B,GAAgG,KAAKjJ,SAAL,GAAiB,KAAjH;AACH,GAHD;AAIA;AACJ;AACA;AACA;AACA;AACA;AACA;;;AAEIH,EAAAA,OAAO,CAACoB,SAAR,CAAkBwH,UAAlB,GAA+B,UAAUU,IAAV,EAAgB;AAC3C,QAAIC,IAAI,GAAG,KAAKpI,KAAL,CAAWmI,IAAI,CAACV,UAAL,CAAgBY,iBAAhB,EAAX,CAAX;AACA,QAAIC,OAAO,GAAG,KAAKtI,KAAL,CAAWmI,IAAI,CAACX,UAAL,CAAgBa,iBAAhB,EAAX,CAAd;AACA,QAAIE,KAAK,GAAGpK,iBAAiB,CAACC,aAAa,CAACkK,OAAO,CAACE,UAAT,CAAd,EAAoCL,IAAI,CAAC1I,WAAL,CAAiBgJ,UAAjB,CAA4BtF,KAAhE,CAAjB,CAAwF,CAAxF,CAAZ;;AACA,QAAI,CAAC1F,KAAK,CAAC8K,KAAD,CAAV,EAAmB;AACf,UAAIG,QAAQ,GAAG,KAAK5J,MAAL,CAAY4B,UAAZ,CAAuBC,MAAvB,GAAgC,SAAhC,GAA4C,WAA3D;AACAwH,MAAAA,IAAI,CAAC1I,WAAL,CAAiBgJ,UAAjB,CAA4BtF,KAA5B,CAAkCoF,KAAlC,EAAyC3G,EAAzC,GAA8C,KAAK9C,MAAL,CAAY+C,KAAZ,KAAsB6G,QAAtB,GAAiCN,IAAI,CAACxG,EAApF;AACAuG,MAAAA,IAAI,CAAC1I,WAAL,CAAiBgJ,UAAjB,CAA4BtF,KAA5B,CAAkCoF,KAAlC,EAAyCI,UAAzC,GAAsDP,IAAI,CAACQ,IAA3D;AACAT,MAAAA,IAAI,CAAC1I,WAAL,CAAiBgJ,UAAjB,CAA4BtF,KAA5B,CAAkCoF,KAAlC,EAAyCM,WAAzC,GAAuDT,IAAI,CAACU,OAA5D;AACAX,MAAAA,IAAI,CAAC1I,WAAL,CAAiBgJ,UAAjB,CAA4BtF,KAA5B,CAAkCoF,KAAlC,EAAyCC,UAAzC,GAAsDJ,IAAI,CAACI,UAA3D;AACAL,MAAAA,IAAI,CAAC1I,WAAL,CAAiBgJ,UAAjB,CAA4BM,QAA5B;AACH,KAPD,MAQK;AACD,WAAKC,WAAL,CAAiBb,IAAjB,EAAuB,CAAvB;AACH;AACJ,GAfD;;AAgBAtJ,EAAAA,OAAO,CAACoB,SAAR,CAAkBgJ,mBAAlB,GAAwC,UAAUd,IAAV,EAAgB;AACpD,QAAI,CAAC,KAAKzG,SAAN,IAAoB,KAAK5C,MAAL,CAAY4B,UAAZ,CAAuBC,MAAvB,KAAkCrC,SAAS,MAAM,CAACrB,OAAO,CAAC6E,QAA1D,CAAxB,EAA8F;AAC1F;AACH;;AACD,QAAIoH,OAAO,GAAG;AACVf,MAAAA,IAAI,EAAEA,IADI;AAEV1E,MAAAA,cAAc,EAAE,KAAKA,cAFX;AAGV3E,MAAAA,MAAM,EAAE,KAAKA,MAHH;AAIVqK,MAAAA,UAAU,EAAE7L,SAAS,CAAC,MAAMQ,OAAO,CAACsL,WAAf,EAA4B,KAAK1H,SAAjC,CAJX;AAKV2H,MAAAA,OAAO,EAAE,KAAK5J,WAAL,CAAiBgJ,UAAjB,CAA4BtF;AAL3B,KAAd;AAOAlF,IAAAA,gBAAgB,CAACiL,OAAD,EAAW,KAAKpK,MAAL,CAAY4B,UAAZ,CAAuBC,MAAvB,GAAgC,IAAhC,GAAuC,KAAlD,EAA0D,KAAK7B,MAA/D,CAAhB;AACH,GAZD;;AAaAD,EAAAA,OAAO,CAACoB,SAAR,CAAkBqJ,UAAlB,GAA+B,UAAUjI,CAAV,EAAa;AACxC,SAAKvC,MAAL,CAAYyK,gBAAZ,CAA6BC,cAA7B,CAA4CnI,CAA5C;AACH,GAFD;;AAGAxC,EAAAA,OAAO,CAACoB,SAAR,CAAkBwJ,UAAlB,GAA+B,UAAUpI,CAAV,EAAa;AACxC,SAAKvC,MAAL,CAAYyK,gBAAZ,CAA6BG,cAA7B,CAA4CrI,CAA5C;AACH,GAFD;AAGA;AACJ;AACA;AACA;AACA;AACA;;;AAEIxC,EAAAA,OAAO,CAACoB,SAAR,CAAkB0J,cAAlB,GAAmC,YAAY;AAC3C,WAAO,KAAKlK,WAAZ;AACH,GAFD;AAGA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEIZ,EAAAA,OAAO,CAACoB,SAAR,CAAkB+I,WAAlB,GAAgC,UAAUb,IAAV,EAAgBI,KAAhB,EAAuB;AACnDJ,IAAAA,IAAI,CAAC1I,WAAL,CAAiBgJ,UAAjB,CAA4BmB,QAA5B,CAAqC,CAACzB,IAAI,CAAC1I,WAAL,CAAiBoK,SAAjB,CAA2B1B,IAAI,CAACV,UAAhC,EAA4C,SAA5C,CAAD,CAArC,EAA+Fc,KAA/F;AACH,GAFD;AAGA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEI1J,EAAAA,OAAO,CAACoB,SAAR,CAAkB6J,eAAlB,GAAoC,UAAUrK,WAAV,EAAuB0D,KAAvB,EAA8B4G,QAA9B,EAAwCC,iBAAxC,EAA2D;AAC3F,QAAIC,QAAQ,GAAG9L,iBAAiB,CAACC,aAAa,CAAC+E,KAAD,CAAd,EAAuB1D,WAAW,CAACgJ,UAAZ,CAAuBtF,KAA9C,CAAhC;AACA,SAAKkG,OAAL,GAAe/L,SAAS,CAAC,MAAMQ,OAAO,CAACsL,WAAf,EAA4B3J,WAAW,CAACgJ,UAAZ,CAAuBnG,OAAnD,CAAxB;;AACA,SAAK,IAAI2B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGgG,QAAQ,CAAClK,MAA7B,EAAqCkE,CAAC,EAAtC,EAA0C;AACtC,UAAImE,IAAI,GAAG,KAAKiB,OAAL,CAAaY,QAAQ,CAAChG,CAAD,CAArB,CAAX;;AACA,UAAImE,IAAJ,EAAU;AACN3I,QAAAA,WAAW,CAACgJ,UAAZ,CAAuByB,WAAvB,CAAmC9B,IAAnC,EAAyC2B,QAAzC;AACH;AACJ;;AACD,QAAI,CAAC1M,MAAM,CAAC,oBAAD,EAAuB,KAAKyB,MAAL,CAAYwD,OAAnC,CAAP,IAAsD,CAAC0H,iBAA3D,EAA8E;AAC1E9L,MAAAA,oBAAoB,CAACuB,WAAD,EAAc,KAAKX,MAAL,CAAYoC,SAAZ,CAAsBiJ,aAAtB,CAAoCC,eAApC,CAAoDC,aAApD,EAAd,CAApB;AACH;AACJ,GAZD;AAaA;AACJ;AACA;AACA;AACA;AACA;AACA;;;AAEIxL,EAAAA,OAAO,CAACoB,SAAR,CAAkBqK,eAAlB,GAAoC,UAAUnH,KAAV,EAAiB;AACjD,QAAI3F,iBAAiB,CAAC,KAAKiC,WAAL,CAAiBgJ,UAAlB,CAArB,EAAoD;AAChD,WAAKhJ,WAAL,GAAmB,KAAKX,MAAL,CAAY4I,oBAAZ,EAAnB;AACH;;AACD,QAAIuC,QAAQ,GAAG9L,iBAAiB,CAACC,aAAa,CAAC+E,KAAD,CAAd,EAAuB,KAAK1D,WAAL,CAAiBgJ,UAAjB,CAA4BtF,KAAnD,CAAhC;AACA,SAAKkG,OAAL,GAAgB,KAAKvK,MAAL,CAAY4B,UAAZ,CAAuBC,MAAxB,GAAkCrD,SAAS,CAAC,MAAMQ,OAAO,CAACsL,WAAf,EAA4B,KAAK3J,WAAL,CAAiBgJ,UAAjB,CAA4BnG,OAAxD,CAA3C,GACThF,SAAS,CAAC,MAAMQ,OAAO,CAACsL,WAAf,EAA4B,KAAKtK,MAAL,CAAYwD,OAAxC,CADf;;AAEA,SAAK,IAAI2B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGgG,QAAQ,CAAClK,MAA7B,EAAqCkE,CAAC,EAAtC,EAA0C;AACtC,WAAKxE,WAAL,CAAiBgJ,UAAjB,CAA4B8B,WAA5B,CAAwC,KAAKlB,OAAL,CAAaY,QAAQ,CAAChG,CAAD,CAArB,CAAxC;AACH;AACJ,GAVD;AAWA;AACJ;AACA;AACA;AACA;AACA;;;AAEIpF,EAAAA,OAAO,CAACoB,SAAR,CAAkB+E,sBAAlB,GAA2C,YAAY;AACnD,QAAIwF,SAAS,GAAG,CAAhB;;AACA,QAAI,KAAK1L,MAAL,CAAYa,eAAZ,CAA4B+C,IAA5B,KAAqC1E,WAAW,CAAC2E,MAAjD,IAA2D,KAAKjB,SAAL,CAAe+I,SAAf,CAAyBvG,QAAzB,CAAkC,oBAAlC,CAA/D,EAAwH;AACpH,UAAIwG,WAAW,GAAGrN,MAAM,CAAC,qBAAD,EAAwB,KAAKqE,SAA7B,CAAxB;;AACA,UAAIgJ,WAAW,IAAI,KAAKhJ,SAAL,CAAe+I,SAAf,CAAyBvG,QAAzB,CAAkC,eAAlC,CAAf,IACGwG,WAAW,IAAIA,WAAW,CAACD,SAAZ,CAAsBvG,QAAtB,CAA+B,cAA/B,CADtB,EACsE;AAClElH,QAAAA,QAAQ,CAAC,CAAC0N,WAAD,CAAD,EAAgB,CAAC5M,OAAO,CAAC6M,WAAT,CAAhB,CAAR;AACAH,QAAAA,SAAS,GAAGA,SAAS,GAAGE,WAAW,CAACvF,YAApC;AACA/H,QAAAA,WAAW,CAAC,CAACsN,WAAD,CAAD,EAAgB,CAAC5M,OAAO,CAAC6M,WAAT,CAAhB,CAAX;AACH,OALD,MAMK;AACDvN,QAAAA,WAAW,CAAC,CAAC,KAAKsE,SAAN,CAAD,EAAmB,CAAC5D,OAAO,CAAC8M,eAAT,CAAnB,CAAX;AACH;AACJ;;AACD,WAAOJ,SAAP;AACH,GAfD;AAgBA;AACJ;AACA;AACA;AACA;AACA;;;AAEI3L,EAAAA,OAAO,CAACoB,SAAR,CAAkB8E,gBAAlB,GAAqC,YAAY;AAC7C,WAAO,KAAKrD,SAAL,CAAeyD,YAAtB;AACH,GAFD;AAGA;AACJ;AACA;AACA;AACA;AACA;;;AAEItG,EAAAA,OAAO,CAACoB,SAAR,CAAkBY,iBAAlB,GAAsC,YAAY;AAC9C,WAAOxD,MAAM,CAAC,MAAMS,OAAO,CAAC+M,WAAf,EAA4B,KAAK/L,MAAL,CAAYwD,OAAxC,CAAb;AACH,GAFD;AAGA;AACJ;AACA;AACA;AACA;AACA;;;AAEIzD,EAAAA,OAAO,CAACoB,SAAR,CAAkBgH,sBAAlB,GAA2C,YAAY;AACnD,SAAKxH,WAAL,CAAiBgJ,UAAjB,CAA4BqC,eAA5B;AACH,GAFD;;AAGAjM,EAAAA,OAAO,CAACoB,SAAR,CAAkB8K,kBAAlB,GAAuC,YAAY;AAC/C,WAAO,KAAKtL,WAAL,CAAiBgJ,UAAjB,IAA+B,CAAC,KAAKhJ,WAAL,CAAiBgJ,UAAjB,CAA4BuC,WAAnE;AACH,GAFD;;AAGAnM,EAAAA,OAAO,CAACoB,SAAR,CAAkBgL,cAAlB,GAAmC,YAAY;AAC3C,QAAI,KAAKF,kBAAL,EAAJ,EAA+B;AAC3B,WAAKjM,MAAL,CAAYoM,0BAAZ;AACA,WAAKC,YAAL;AACA,WAAKrM,MAAL,CAAY8E,MAAZ,CAAmB/F,MAAM,CAACuN,kBAA1B,EAA8C,EAA9C;AACA,WAAK3H,cAAL,CAAoB4H,gBAApB;AACA,WAAK5L,WAAL,CAAiBgJ,UAAjB,CAA4B6C,OAA5B;AACA,WAAKC,mBAAL;AACAnO,MAAAA,WAAW,CAAC,CAAC,KAAK0B,MAAL,CAAYwD,OAAb,CAAD,EAAwB,CAACxE,OAAO,CAACiJ,kBAAT,CAAxB,CAAX;AACA3J,MAAAA,WAAW,CAAC,CAAC,KAAK0B,MAAL,CAAYwD,OAAb,CAAD,EAAwB,CAACxE,OAAO,CAACkJ,iBAAT,CAAxB,CAAX;AACA,UAAIhF,SAAS,GAAG3E,MAAM,CAAC,MAAMS,OAAO,CAACsE,WAAf,EAA4B,KAAKtD,MAAL,CAAYwD,OAAxC,CAAtB;AACA,UAAIZ,SAAS,GAAGrE,MAAM,CAAC,MAAMS,OAAO,CAAC+M,WAAf,EAA4B,KAAK/L,MAAL,CAAYwD,OAAxC,CAAtB;;AACA,UAAI,CAAC9E,iBAAiB,CAACwE,SAAD,CAAtB,EAAmC;AAC/B7E,QAAAA,MAAM,CAAC6E,SAAD,CAAN;AACH,OAFD,MAGK,IAAI,CAACxE,iBAAiB,CAACkE,SAAD,CAAtB,EAAmC;AACpCvE,QAAAA,MAAM,CAACuE,SAAD,CAAN;AACH;AACJ;AACJ,GAnBD;AAoBA;AACJ;AACA;AACA;AACA;AACA;AACA;;;AAEI7C,EAAAA,OAAO,CAACoB,SAAR,CAAkBqL,OAAlB,GAA4B,YAAY;AACpC,QAAI,KAAKP,kBAAL,EAAJ,EAA+B;AAC3B,WAAKE,cAAL;;AACA,UAAI,KAAKrK,cAAT,EAAyB;AACrB,aAAKA,cAAL,CAAoB0K,OAApB;AACH;AACJ;AACJ,GAPD;;AAQAzM,EAAAA,OAAO,CAACoB,SAAR,CAAkBuL,aAAlB,GAAkC,UAAUnK,CAAV,EAAa;AAC3C,QAAI,CAAC,KAAKvC,MAAL,CAAY4B,UAAZ,CAAuBC,MAA5B,EAAoC;AAChC,UAAI,KAAK7B,MAAL,CAAYa,eAAZ,CAA4BoC,cAA5B,IAA8C,KAAK0J,gBAAL,CAAsB,KAAK/J,SAA3B,CAAlD,EAAyF;AACrF,aAAKyC,gBAAL,CAAsB9C,CAAC,CAAC8G,IAAxB;AACH;AACJ;AACJ,GAND;;AAOAtJ,EAAAA,OAAO,CAACoB,SAAR,CAAkBwL,gBAAlB,GAAqC,UAAUC,EAAV,EAAc;AAC/C,QAAI,CAACA,EAAE,CAACC,YAAJ,IAAoBD,EAAE,CAAC9E,WAAH,KAAmB,CAAvC,IAA4C8E,EAAE,CAACvG,YAAH,KAAoB,CAApE,EAAuE;AACnE,aAAO,KAAP;AACH;;AACD,WAAO,IAAP;AACH,GALD;;AAMAtG,EAAAA,OAAO,CAACoB,SAAR,CAAkB2L,gBAAlB,GAAqC,YAAY;AAC7C,QAAI3O,OAAO,CAAC6E,QAAR,IAAoB,KAAKhD,MAAL,CAAY4B,UAAZ,CAAuBC,MAA3C,IAAqD,CAACrC,SAAS,EAAnE,EAAuE;AACnE,WAAKwJ,aAAL;AACH;AACJ,GAJD;;AAKAjJ,EAAAA,OAAO,CAACoB,SAAR,CAAkB4L,kBAAlB,GAAuC,YAAY;AAC/C,QAAI5O,OAAO,CAAC6E,QAAR,IAAoB,KAAKhD,MAAL,CAAY4B,UAAZ,CAAuBC,MAA3C,IAAqD,CAACrC,SAAS,EAAnE,EAAuE;AACnE,WAAKU,SAAL,GAAiB,KAAjB;AACA,WAAKkJ,aAAL;AACH;AACJ,GALD;;AAMArJ,EAAAA,OAAO,CAACoB,SAAR,CAAkB6L,yBAAlB,GAA8C,YAAY;AACtD,SAAK9M,SAAL,GAAiB,IAAjB;AACH,GAFD,CAvfqC,CA0frC;;;AACAH,EAAAA,OAAO,CAACoB,SAAR,CAAkB8L,cAAlB,GAAmC,UAAU1K,CAAV,EAAa;AAC5C,QAAI2K,SAAS,GAAGhI,QAAQ,CAACiI,aAAzB;AACA,QAAIC,eAAe,GAAGxO,OAAO,CAACsO,SAAD,EAAY,gBAAZ,CAA7B;;AACA,QAAIA,SAAS,KAAK,KAAKlN,MAAL,CAAY+B,iBAAZ,EAAd,IAAiDqL,eAAe,KAAK,KAAKpN,MAAL,CAAY+B,iBAAZ,EAAzE,EAA0G;AACtG,UAAIsL,WAAW,GAAG,KAAKrN,MAAL,CAAY+B,iBAAZ,GAAgCuL,gBAAhC,CAAiD,iBAAjD,CAAlB;;AACA,WAAK,IAAInI,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkI,WAAW,CAACpM,MAAhC,EAAwCkE,CAAC,EAAzC,EAA6C;AACzC,YAAIxG,KAAK,CAAC,KAAKqB,MAAL,CAAY+B,iBAAZ,GAAgCsG,aAAhC,CAA8C,qBAA9C,CAAD,CAAT,EAAiF;AAC7EgF,UAAAA,WAAW,CAAClI,CAAD,CAAX,CAAeoI,YAAf,CAA4B,UAA5B,EAAwC,GAAxC;AACH,SAFD,MAGK;AACDF,UAAAA,WAAW,CAAClI,CAAD,CAAX,CAAeoI,YAAf,CAA4B,UAA5B,EAAwC,GAAxC;AACH;AACJ;AACJ;AACJ,GAdD;;AAeAxN,EAAAA,OAAO,CAACoB,SAAR,CAAkBqM,gBAAlB,GAAqC,UAAUjL,CAAV,EAAa;AAC9C,QAAIA,CAAC,CAACgC,MAAF,CAASoH,SAAT,CAAmBvG,QAAnB,CAA4B,gBAA5B,KACA7C,CAAC,CAACgC,MAAF,CAASkJ,YAAT,CAAsB,IAAtB,MAAgC,KAAKzN,MAAL,CAAY+C,KAAZ,KAAsB,sBAD1D,EACkF;AAC9ER,MAAAA,CAAC,CAACgC,MAAF,CAASgJ,YAAT,CAAsB,UAAtB,EAAkC,GAAlC;AACH;AACJ,GALD;;AAMAxN,EAAAA,OAAO,CAACoB,SAAR,CAAkBuM,mBAAlB,GAAwC,UAAUnL,CAAV,EAAa;AACjD,QAAIoL,GAAG,GAAG/O,OAAO,CAAC2D,CAAC,CAACqL,aAAF,CAAgBrJ,MAAjB,EAAyB,YAAzB,CAAjB;;AACA,QAAIoJ,GAAG,IAAI,KAAK3N,MAAL,CAAYa,eAAZ,CAA4B+C,IAA5B,KAAqC1E,WAAW,CAAC2E,MAAxD,IAAkE,CAAClF,KAAK,CAACgP,GAAD,CAA5E,EAAmF;AAC/E,UAAI,CAACA,GAAG,CAAChC,SAAJ,CAAcvG,QAAd,CAAuB,cAAvB,CAAL,EAA6C;AACzC9G,QAAAA,WAAW,CAAC,CAAC,KAAKsE,SAAN,CAAD,EAAmB,CAAC5D,OAAO,CAAC8M,eAAT,CAAnB,CAAX;AACA,aAAK9L,MAAL,CAAY6N,gBAAZ,CAA6B,SAA7B,EAAwC,KAAxC;AACH,OAHD,MAIK;AACD3P,QAAAA,QAAQ,CAAC,CAAC,KAAK0E,SAAN,CAAD,EAAmB,CAAC5D,OAAO,CAAC8M,eAAT,CAAnB,CAAR;AACA,aAAK9L,MAAL,CAAY6N,gBAAZ,CAA6B,SAA7B,EAAwC,IAAxC;AACH;AACJ,KATD,MAUK,IAAI1P,OAAO,CAAC6E,QAAR,IAAoB,KAAKhD,MAAL,CAAY4B,UAAZ,CAAuBC,MAA/C,EAAuD;AACxD,WAAK3B,SAAL,GAAiB,IAAjB;AACH;;AACD,QAAIvB,KAAK,CAACgP,GAAD,CAAL,IAAc,KAAK3N,MAAL,CAAYa,eAAZ,CAA4B+C,IAA5B,KAAqC1E,WAAW,CAAC2E,MAAnE,EAA2E;AACvEvF,MAAAA,WAAW,CAAC,CAAC,KAAKsE,SAAN,CAAD,EAAmB,CAAC5D,OAAO,CAAC8M,eAAT,CAAnB,CAAX;AACH;AACJ,GAlBD;;AAmBA/L,EAAAA,OAAO,CAACoB,SAAR,CAAkBuD,UAAlB,GAA+B,YAAY;AACvC,QAAI,KAAK1E,MAAL,CAAY4B,UAAZ,CAAuBC,MAAvB,IAAiCrC,SAAS,EAA9C,EAAkD;AAC9C;AACH;;AACDpB,IAAAA,YAAY,CAAC0P,GAAb,CAAiB,KAAKlL,SAAtB,EAAiC,SAAjC,EAA4C,KAAKqK,cAAjD,EAAiE,IAAjE;AACA7O,IAAAA,YAAY,CAAC0P,GAAb,CAAiB,KAAKlL,SAAtB,EAAiC,SAAjC,EAA4C,KAAK4K,gBAAjD,EAAmE,IAAnE;AACH,GAND;;AAOAzN,EAAAA,OAAO,CAACoB,SAAR,CAAkBkL,YAAlB,GAAiC,YAAY;AACzCjO,IAAAA,YAAY,CAAC2P,MAAb,CAAoB,KAAKnL,SAAzB,EAAoC,SAApC,EAA+C,KAAKqK,cAApD;AACA7O,IAAAA,YAAY,CAAC2P,MAAb,CAAoB,KAAKnL,SAAzB,EAAoC,SAApC,EAA+C,KAAK4K,gBAApD;AACH,GAHD;;AAIAzN,EAAAA,OAAO,CAACoB,SAAR,CAAkBP,gBAAlB,GAAqC,YAAY;AAC7C,QAAI,KAAKZ,MAAL,CAAYkM,WAAhB,EAA6B;AACzB;AACH;;AACD,SAAKvH,cAAL,GAAsB,IAAI9E,eAAJ,CAAoB,KAAKG,MAAzB,EAAiC,KAAKG,OAAtC,CAAtB;AACA,SAAK6N,mBAAL,GAA2B,IAAIlO,aAAJ,CAAkB,KAAKE,MAAvB,CAA3B;AACA,SAAKA,MAAL,CAAYiO,EAAZ,CAAelP,MAAM,CAACmP,UAAtB,EAAkC,KAAKnG,aAAvC,EAAsD,IAAtD;AACA,SAAK/H,MAAL,CAAYiO,EAAZ,CAAelP,MAAM,CAACoP,MAAtB,EAA8B,KAAKzB,aAAnC,EAAkD,IAAlD;AACA,SAAK1M,MAAL,CAAYiO,EAAZ,CAAelP,MAAM,CAACqP,SAAtB,EAAiC,KAAKzM,gBAAtC,EAAwD,IAAxD;AACA,SAAK3B,MAAL,CAAYiO,EAAZ,CAAelP,MAAM,CAACsP,cAAtB,EAAsC,KAAKlE,mBAA3C,EAAgE,IAAhE;AACA,SAAKnK,MAAL,CAAYiO,EAAZ,CAAelP,MAAM,CAACuP,YAAtB,EAAoC,KAAKC,iBAAzC,EAA4D,IAA5D;AACA,SAAKvO,MAAL,CAAYiO,EAAZ,CAAelP,MAAM,CAACyP,YAAtB,EAAoC,KAAKC,SAAzC,EAAoD,IAApD;AACA,SAAKzO,MAAL,CAAYiO,EAAZ,CAAelP,MAAM,CAACyN,OAAtB,EAA+B,KAAKA,OAApC,EAA6C,IAA7C;AACA,SAAKxM,MAAL,CAAYiO,EAAZ,CAAelP,MAAM,CAAC2P,gBAAtB,EAAwC,KAAKlE,UAA7C,EAAyD,IAAzD;AACA,SAAKxK,MAAL,CAAYiO,EAAZ,CAAelP,MAAM,CAAC4P,iBAAtB,EAAyC,KAAKhE,UAA9C,EAA0D,IAA1D;AACA,SAAK3K,MAAL,CAAYiO,EAAZ,CAAelP,MAAM,CAAC0J,iBAAtB,EAAyC,KAAKE,UAA9C,EAA0D,IAA1D;AACA,SAAK3I,MAAL,CAAYiO,EAAZ,CAAelP,MAAM,CAAC6P,kBAAtB,EAA0C,KAAK5B,yBAA/C,EAA0E,IAA1E;AACA,SAAKhN,MAAL,CAAYiO,EAAZ,CAAelP,MAAM,CAAC8P,gBAAtB,EAAwC,KAAK7O,MAAL,CAAY6N,gBAApD,EAAsE,KAAK7N,MAA3E;AACA,SAAKA,MAAL,CAAYiO,EAAZ,CAAelP,MAAM,CAAC+P,WAAtB,EAAmC,KAAK/B,kBAAxC,EAA4D,IAA5D;AACA,SAAK/M,MAAL,CAAYiO,EAAZ,CAAelP,MAAM,CAACgQ,SAAtB,EAAiC,KAAKjC,gBAAtC,EAAwD,IAAxD;AACA,SAAK9M,MAAL,CAAYiO,EAAZ,CAAelP,MAAM,CAACiQ,mBAAtB,EAA2C,KAAKlC,gBAAhD,EAAkE,IAAlE;;AACA,QAAI,CAAC,KAAK9M,MAAL,CAAY4B,UAAZ,CAAuBC,MAAxB,IAAkC,CAACrC,SAAS,EAAhD,EAAoD;AAChD,WAAKQ,MAAL,CAAYiO,EAAZ,CAAelP,MAAM,CAACkQ,YAAtB,EAAoC,KAAKvB,mBAAzC,EAA8D,IAA9D;AACH;AACJ,GAxBD;;AAyBA3N,EAAAA,OAAO,CAACoB,SAAR,CAAkBsL,mBAAlB,GAAwC,YAAY;AAChD,QAAI,KAAKzM,MAAL,CAAYkM,WAAhB,EAA6B;AACzB;AACH;;AACD,SAAKlM,MAAL,CAAYkP,GAAZ,CAAgBnQ,MAAM,CAACmP,UAAvB,EAAmC,KAAKnG,aAAxC;AACA,SAAK/H,MAAL,CAAYkP,GAAZ,CAAgBnQ,MAAM,CAACoP,MAAvB,EAA+B,KAAKzB,aAApC;AACA,SAAK1M,MAAL,CAAYkP,GAAZ,CAAgBnQ,MAAM,CAACqP,SAAvB,EAAkC,KAAKzM,gBAAvC;AACA,SAAK3B,MAAL,CAAYkP,GAAZ,CAAgBnQ,MAAM,CAACsP,cAAvB,EAAuC,KAAKlE,mBAA5C;AACA,SAAKnK,MAAL,CAAYkP,GAAZ,CAAgBnQ,MAAM,CAACuP,YAAvB,EAAqC,KAAKC,iBAA1C;AACA,SAAKvO,MAAL,CAAYkP,GAAZ,CAAgBnQ,MAAM,CAACyP,YAAvB,EAAqC,KAAKC,SAA1C;AACA,SAAKzO,MAAL,CAAYkP,GAAZ,CAAgBnQ,MAAM,CAACyN,OAAvB,EAAgC,KAAKA,OAArC;AACA,SAAKxM,MAAL,CAAYkP,GAAZ,CAAgBnQ,MAAM,CAAC2P,gBAAvB,EAAyC,KAAK1O,MAAL,CAAYyK,gBAAZ,CAA6BC,cAAtE;AACA,SAAK1K,MAAL,CAAYkP,GAAZ,CAAgBnQ,MAAM,CAAC4P,iBAAvB,EAA0C,KAAK3O,MAAL,CAAYyK,gBAAZ,CAA6BG,cAAvE;AACA,SAAK5K,MAAL,CAAYkP,GAAZ,CAAgBnQ,MAAM,CAAC0J,iBAAvB,EAA0C,KAAKE,UAA/C;AACA,SAAK3I,MAAL,CAAYkP,GAAZ,CAAgBnQ,MAAM,CAAC6P,kBAAvB,EAA2C,KAAK5B,yBAAhD;AACA,SAAKhN,MAAL,CAAYkP,GAAZ,CAAgBnQ,MAAM,CAAC8P,gBAAvB,EAAyC,KAAK7O,MAAL,CAAY6N,gBAArD;AACA,SAAK7N,MAAL,CAAYkP,GAAZ,CAAgBnQ,MAAM,CAAC+P,WAAvB,EAAoC,KAAK/B,kBAAzC;AACA,SAAK/M,MAAL,CAAYkP,GAAZ,CAAgBnQ,MAAM,CAACgQ,SAAvB,EAAkC,KAAKjC,gBAAvC;AACA,SAAK9M,MAAL,CAAYkP,GAAZ,CAAgBnQ,MAAM,CAACiQ,mBAAvB,EAA4C,KAAKlC,gBAAjD;;AACA,QAAI,CAAC,KAAK9M,MAAL,CAAY4B,UAAZ,CAAuBC,MAAxB,IAAkC,CAACrC,SAAS,EAAhD,EAAoD;AAChD,WAAKQ,MAAL,CAAYkP,GAAZ,CAAgBnQ,MAAM,CAACkQ,YAAvB,EAAqC,KAAKvB,mBAA1C;AACH;AACJ,GAtBD;;AAuBA3N,EAAAA,OAAO,CAACoB,SAAR,CAAkBsN,SAAlB,GAA8B,YAAY;AACtC,SAAKtG,sBAAL;AACA,SAAKnI,MAAL,CAAY6N,gBAAZ,CAA6B,EAA7B,EAAiC,IAAjC;AACH,GAHD;AAIA;AACJ;AACA;AACA;AACA;AACA;AACA;;;AAEI9N,EAAAA,OAAO,CAACoB,SAAR,CAAkBoN,iBAAlB,GAAsC,UAAUhM,CAAV,EAAa;AAC/C,QAAI,CAAC7D,iBAAiB,CAAC6D,CAAC,CAAC4M,OAAF,CAAUvN,UAAX,CAAtB,EAA8C;AAC1C,WAAK,IAAIwN,EAAE,GAAG,CAAT,EAAYC,EAAE,GAAGvO,MAAM,CAACC,IAAP,CAAYwB,CAAC,CAAC4M,OAAF,CAAUvN,UAAtB,CAAtB,EAAyDwN,EAAE,GAAGC,EAAE,CAACpO,MAAjE,EAAyEmO,EAAE,EAA3E,EAA+E;AAC3E,YAAIE,IAAI,GAAGD,EAAE,CAACD,EAAD,CAAb;;AACA,gBAAQE,IAAR;AACI,eAAK,QAAL;AACI,iBAAKC,cAAL;AACA;AAHR;AAKH;AACJ;;AACD,QAAIhN,CAAC,CAACiN,MAAF,KAAa,KAAKC,aAAL,EAAjB,EAAuC;AACnC;AACH;;AACD,SAAKF,cAAL;AACH,GAfD;;AAgBAxP,EAAAA,OAAO,CAACoB,SAAR,CAAkBoO,cAAlB,GAAmC,YAAY;AAC3C,QAAI7Q,iBAAiB,CAAC,KAAKiC,WAAL,CAAiBgJ,UAAlB,CAArB,EAAoD;AAChD,WAAKhJ,WAAL,GAAmB,KAAKX,MAAL,CAAY4I,oBAAZ,EAAnB;AACH;;AACD,QAAI1F,SAAS,GAAG3E,MAAM,CAAC,MAAMS,OAAO,CAACsE,WAAf,EAA4B,KAAKtD,MAAL,CAAYwD,OAAxC,CAAtB;AACA,QAAIZ,SAAS,GAAGrE,MAAM,CAAC,MAAMS,OAAO,CAAC+M,WAAf,EAA4B,KAAK/L,MAAL,CAAYwD,OAAxC,CAAtB;;AACA,QAAIZ,SAAS,IAAIM,SAAjB,EAA4B;AACxB,WAAKiJ,cAAL;AACH;;AACD,QAAI,KAAKnM,MAAL,CAAYa,eAAZ,CAA4BgB,MAAhC,EAAwC;AACpC,WAAKjB,gBAAL;AACA,WAAKmH,aAAL;AACA,WAAK/H,MAAL,CAAY0P,wBAAZ;;AACA,UAAI,CAACnR,MAAM,CAAC,oBAAD,EAAuB,KAAKyB,MAAL,CAAYwD,OAAnC,CAAX,EAAwD;AACpDpE,QAAAA,oBAAoB,CAAC,KAAKuB,WAAN,EAAmB,KAAKX,MAAL,CAAYoC,SAAZ,CAAsBiJ,aAAtB,CAAoCC,eAApC,CAAoDC,aAApD,EAAnB,CAApB;AACH;;AACD,WAAKvL,MAAL,CAAY8E,MAAZ,CAAmB/F,MAAM,CAAC4Q,aAA1B,EAAyC,EAAzC;AACH;AACJ,GAlBD;AAmBA;AACJ;AACA;AACA;AACA;AACA;;;AACI5P,EAAAA,OAAO,CAACoB,SAAR,CAAkBsO,aAAlB,GAAkC,YAAY;AAC1C,WAAO,SAAP;AACH,GAFD;;AAGA,SAAO1P,OAAP;AACH,CAvpB4B,EAA7B;;AAwpBA,SAASA,OAAT","sourcesContent":["import { addClass, Browser, EventHandler, detach, removeClass, select, selectAll, KeyboardEvents } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined as isNOU, closest, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, extend } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { RenderType, ToolbarType } from '../base/enum';\nimport { setToolbarStatus, updateUndoRedoStatus, getTBarItemsIndex, getCollection, toObjectLowerCase, isIDevice } from '../base/util';\nimport { updateDropDownFontFormatLocale } from '../base/util';\nimport * as model from '../models/items';\nimport { ToolbarRenderer } from '../renderer/toolbar-renderer';\nimport { BaseToolbar } from './base-toolbar';\nimport { DropDownButtons } from './dropdown-buttons';\nimport { ToolbarAction } from './toolbar-action';\n/**\n * `Toolbar` module is used to handle Toolbar actions.\n */\nvar Toolbar = /** @class */ (function () {\n    function Toolbar(parent, serviceLocator) {\n        this.parent = parent;\n        this.isToolbar = false;\n        this.locator = serviceLocator;\n        this.isTransformChild = false;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        model.updateDropDownLocale(this.parent);\n        updateDropDownFontFormatLocale(this.parent);\n        this.renderFactory.addRenderer(RenderType.Toolbar, new ToolbarRenderer(this.parent));\n        this.toolbarRenderer = this.renderFactory.getRenderer(RenderType.Toolbar);\n        this.baseToolbar = new BaseToolbar(this.parent, this.locator);\n        this.addEventListener();\n        if (this.parent.toolbarSettings && Object.keys(this.parent.toolbarSettings.itemConfigs).length > 0) {\n            extend(this.tools, model.tools, toObjectLowerCase(this.parent.toolbarSettings.itemConfigs), true);\n        }\n        else {\n            this.tools = model.tools;\n        }\n    }\n    Toolbar.prototype.initializeInstance = function () {\n        this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n        this.editableElement = this.contentRenderer.getEditPanel();\n        this.editPanel = this.contentRenderer.getPanel();\n    };\n    Toolbar.prototype.toolbarBindEvent = function () {\n        if (!this.parent.inlineMode.enable) {\n            this.keyBoardModule = new KeyboardEvents(this.getToolbarElement(), {\n                keyAction: this.toolBarKeyDown.bind(this), keyConfigs: this.parent.formatter.keyConfig, eventName: 'keydown'\n            });\n        }\n    };\n    Toolbar.prototype.toolBarKeyDown = function (e) {\n        switch (e.action) {\n            case 'escape':\n                this.parent.contentModule.getEditPanel().focus();\n                break;\n        }\n    };\n    Toolbar.prototype.createToolbarElement = function () {\n        this.tbElement = this.parent.createElement('div', { id: this.parent.getID() + '_toolbar' });\n        if (!Browser.isDevice && this.parent.inlineMode.enable && isIDevice()) {\n            return;\n        }\n        else {\n            if (this.parent.toolbarSettings.enableFloating && !this.parent.inlineMode.enable) {\n                this.tbWrapper = this.parent.createElement('div', {\n                    id: this.parent.getID() + '_toolbar_wrapper',\n                    innerHTML: this.tbElement.outerHTML,\n                    className: classes.CLS_TB_WRAP\n                });\n                this.tbElement = this.tbWrapper.firstElementChild;\n                this.parent.element.insertBefore(this.tbWrapper, this.editPanel);\n            }\n            else {\n                this.parent.element.insertBefore(this.tbElement, this.editPanel);\n            }\n        }\n    };\n    Toolbar.prototype.getToolbarMode = function () {\n        var tbMode;\n        switch (this.parent.toolbarSettings.type) {\n            case ToolbarType.Expand:\n                tbMode = 'Extended';\n                break;\n            case ToolbarType.Scrollable:\n                tbMode = 'Scrollable';\n                break;\n            default:\n                tbMode = 'MultiRow';\n        }\n        if (isIDevice() && this.parent.toolbarSettings.type === ToolbarType.Expand) {\n            tbMode = ToolbarType.Scrollable;\n        }\n        return tbMode;\n    };\n    Toolbar.prototype.checkToolbarResponsive = function (ele) {\n        if (!Browser.isDevice || isIDevice()) {\n            return false;\n        }\n        var tBarMode;\n        if (this.parent.toolbarSettings.type === ToolbarType.Expand) {\n            tBarMode = ToolbarType.MultiRow;\n        }\n        else {\n            tBarMode = this.parent.toolbarSettings.type;\n        }\n        this.baseToolbar.render({\n            container: ((this.parent.inlineMode.enable) ? 'quick' : 'toolbar'),\n            items: this.parent.toolbarSettings.items,\n            mode: tBarMode,\n            target: ele\n        });\n        if (this.parent.toolbarSettings.type === ToolbarType.Expand) {\n            addClass([ele], ['e-rte-tb-mobile']);\n            if (this.parent.inlineMode.enable) {\n                this.addFixedTBarClass();\n            }\n            else {\n                addClass([ele], [classes.CLS_TB_STATIC]);\n            }\n        }\n        this.wireEvents();\n        this.dropDownModule.renderDropDowns({\n            container: ele,\n            containerType: ((this.parent.inlineMode.enable) ? 'quick' : 'toolbar'),\n            items: this.parent.toolbarSettings.items\n        });\n        this.parent.notify(events.renderColorPicker, {\n            container: this.tbElement,\n            containerType: ((this.parent.inlineMode.enable) ? 'quick' : 'toolbar'),\n            items: this.parent.toolbarSettings.items\n        });\n        return true;\n    };\n    Toolbar.prototype.checkIsTransformChild = function () {\n        this.isTransformChild = false;\n        var transformElements = selectAll('[style*=\"transform\"]', document);\n        for (var i = 0; i < transformElements.length; i++) {\n            if (!isNullOrUndefined(transformElements[i].contains) && transformElements[i].contains(this.parent.element)) {\n                this.isTransformChild = true;\n                break;\n            }\n        }\n    };\n    Toolbar.prototype.toggleFloatClass = function (e) {\n        var topValue;\n        var isBody = false;\n        var isFloat = false;\n        var scrollParent;\n        var floatOffset = this.parent.floatingToolbarOffset;\n        if (e && this.parent.iframeSettings.enable && this.parent.inputElement.ownerDocument === e.target) {\n            scrollParent = e.target.body;\n        }\n        else if (e && e.target !== document) {\n            scrollParent = e.target;\n        }\n        else {\n            isBody = true;\n            scrollParent = document.body;\n        }\n        var tbHeight = this.getToolbarHeight() + this.getExpandTBarPopHeight();\n        if (this.isTransformChild) {\n            topValue = 0;\n            var scrollParentRelativeTop = 0;\n            var trgHeight = this.parent.element.offsetHeight;\n            if (isBody) {\n                var bodyStyle = window.getComputedStyle(scrollParent);\n                scrollParentRelativeTop = parseFloat(bodyStyle.marginTop.split('px')[0]) + parseFloat(bodyStyle.paddingTop.split('px')[0]);\n            }\n            var targetTop = this.parent.element.getBoundingClientRect().top;\n            var scrollParentYOffset = (Browser.isMSPointer && isBody) ? window.pageYOffset : scrollParent.parentElement.scrollTop;\n            var scrollParentRect = scrollParent.getBoundingClientRect();\n            var scrollParentTop = (!isBody) ? scrollParentRect.top : (scrollParentRect.top + scrollParentYOffset);\n            var outOfRange = ((targetTop - ((!isBody) ? scrollParentTop : 0))\n                + trgHeight > tbHeight + floatOffset) ? false : true;\n            if (targetTop > (scrollParentTop + floatOffset) || targetTop < -trgHeight || ((targetTop < 0) ? outOfRange : false)) {\n                isFloat = false;\n                removeClass([this.tbElement], [classes.CLS_TB_ABS_FLOAT]);\n            }\n            else if (targetTop < (scrollParentTop + floatOffset)) {\n                if (targetTop < 0) {\n                    topValue = (-targetTop) + scrollParentTop;\n                }\n                else {\n                    topValue = scrollParentTop - targetTop;\n                }\n                topValue = (isBody) ? topValue - scrollParentRelativeTop : topValue;\n                addClass([this.tbElement], [classes.CLS_TB_ABS_FLOAT]);\n                isFloat = true;\n            }\n        }\n        else {\n            var parent_1 = this.parent.element.getBoundingClientRect();\n            if (window.innerHeight < parent_1.top) {\n                return;\n            }\n            topValue = (e && e.target !== document) ? scrollParent.getBoundingClientRect().top : 0;\n            if ((parent_1.bottom < (floatOffset + tbHeight + topValue)) || parent_1.bottom < 0 || parent_1.top > floatOffset + topValue) {\n                isFloat = false;\n            }\n            else if (parent_1.top < floatOffset) {\n                isFloat = true;\n            }\n        }\n        if (!isFloat) {\n            removeClass([this.tbElement], [classes.CLS_TB_FLOAT]);\n            setStyleAttribute(this.tbElement, { top: 0 + 'px', width: '100%' });\n        }\n        else {\n            addClass([this.tbElement], [classes.CLS_TB_FLOAT]);\n            setStyleAttribute(this.tbElement, { width: this.parent.element.offsetWidth + 'px', top: (floatOffset + topValue) + 'px' });\n        }\n    };\n    Toolbar.prototype.renderToolbar = function () {\n        this.initializeInstance();\n        this.createToolbarElement();\n        if (this.checkToolbarResponsive(this.tbElement)) {\n            return;\n        }\n        if (this.parent.inlineMode.enable) {\n            this.parent.notify(events.renderInlineToolbar, {});\n        }\n        else {\n            this.baseToolbar.render({\n                container: 'toolbar',\n                items: this.parent.toolbarSettings.items,\n                mode: this.getToolbarMode(),\n                target: this.tbElement\n            });\n            if (!this.parent.inlineMode.enable) {\n                if (this.parent.toolbarSettings.enableFloating) {\n                    this.checkIsTransformChild();\n                    this.toggleFloatClass();\n                }\n                addClass([this.parent.element], [classes.CLS_RTE_TB_ENABLED]);\n                if (this.parent.toolbarSettings.type === ToolbarType.Expand) {\n                    addClass([this.parent.element], [classes.CLS_RTE_EXPAND_TB]);\n                }\n            }\n        }\n        this.wireEvents();\n        if (this.parent.inlineMode.enable && !isIDevice()) {\n            this.addFixedTBarClass();\n        }\n        if (!this.parent.inlineMode.enable) {\n            this.dropDownModule.renderDropDowns({\n                container: this.tbElement,\n                containerType: 'toolbar',\n                items: this.parent.toolbarSettings.items\n            });\n            this.parent.notify(events.renderColorPicker, {\n                container: this.tbElement,\n                containerType: 'toolbar',\n                items: this.parent.toolbarSettings.items\n            });\n            this.refreshToolbarOverflow();\n        }\n        var divEle = this.parent.element.querySelector('.e-rte-srctextarea');\n        var iframeEle = this.parent.element.querySelector('.e-source-content');\n        if ((!this.parent.iframeSettings.enable && (!isNOU(divEle) && divEle.style.display === 'block')) ||\n            (this.parent.iframeSettings.enable && (!isNOU(iframeEle) && iframeEle.style.display === 'block'))) {\n            this.parent.notify(events.updateToolbarItem, {\n                targetItem: 'SourceCode', updateItem: 'Preview',\n                baseToolbar: this.parent.getBaseToolbarObject()\n            });\n            this.parent.disableToolbarItem(this.parent.toolbarSettings.items);\n        }\n    };\n    /**\n     * addFixedTBarClass method\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.addFixedTBarClass = function () {\n        addClass([this.tbElement], [classes.CLS_TB_FIXED]);\n    };\n    /**\n     * removeFixedTBarClass method\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.removeFixedTBarClass = function () {\n        removeClass([this.tbElement], [classes.CLS_TB_FIXED]);\n    };\n    Toolbar.prototype.showFixedTBar = function () {\n        addClass([this.tbElement], [classes.CLS_SHOW]);\n        if (Browser.isIos) {\n            addClass([this.tbElement], [classes.CLS_TB_IOS_FIX]);\n        }\n    };\n    Toolbar.prototype.hideFixedTBar = function () {\n        // eslint-disable-next-line\n        (!this.isToolbar) ? removeClass([this.tbElement], [classes.CLS_SHOW, classes.CLS_TB_IOS_FIX]) : this.isToolbar = false;\n    };\n    /**\n     * updateItem method\n     *\n     * @param {IUpdateItemsModel} args - specifies the arguments.\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.updateItem = function (args) {\n        var item = this.tools[args.updateItem.toLocaleLowerCase()];\n        var trgItem = this.tools[args.targetItem.toLocaleLowerCase()];\n        var index = getTBarItemsIndex(getCollection(trgItem.subCommand), args.baseToolbar.toolbarObj.items)[0];\n        if (!isNOU(index)) {\n            var prefixId = this.parent.inlineMode.enable ? '_quick_' : '_toolbar_';\n            args.baseToolbar.toolbarObj.items[index].id = this.parent.getID() + prefixId + item.id;\n            args.baseToolbar.toolbarObj.items[index].prefixIcon = item.icon;\n            args.baseToolbar.toolbarObj.items[index].tooltipText = item.tooltip;\n            args.baseToolbar.toolbarObj.items[index].subCommand = item.subCommand;\n            args.baseToolbar.toolbarObj.dataBind();\n        }\n        else {\n            this.addTBarItem(args, 0);\n        }\n    };\n    Toolbar.prototype.updateToolbarStatus = function (args) {\n        if (!this.tbElement || (this.parent.inlineMode.enable && (isIDevice() || !Browser.isDevice))) {\n            return;\n        }\n        var options = {\n            args: args,\n            dropDownModule: this.dropDownModule,\n            parent: this.parent,\n            tbElements: selectAll('.' + classes.CLS_TB_ITEM, this.tbElement),\n            tbItems: this.baseToolbar.toolbarObj.items\n        };\n        setToolbarStatus(options, (this.parent.inlineMode.enable ? true : false), this.parent);\n    };\n    Toolbar.prototype.fullScreen = function (e) {\n        this.parent.fullScreenModule.showFullScreen(e);\n    };\n    Toolbar.prototype.hideScreen = function (e) {\n        this.parent.fullScreenModule.hideFullScreen(e);\n    };\n    /**\n     * getBaseToolbar method\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.getBaseToolbar = function () {\n        return this.baseToolbar;\n    };\n    /**\n     * addTBarItem method\n     *\n     * @param {IUpdateItemsModel} args - specifies the arguments.\n     * @param {number} index - specifies the index value.\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.addTBarItem = function (args, index) {\n        args.baseToolbar.toolbarObj.addItems([args.baseToolbar.getObject(args.updateItem, 'toolbar')], index);\n    };\n    /**\n     * enableTBarItems method\n     *\n     * @param {BaseToolbar} baseToolbar - specifies the toolbar.\n     * @param {string} items - specifies the string value.\n     * @param {boolean} isEnable - specifies the boolean value.\n     * @param {boolean} muteToolbarUpdate - specifies the toolbar.\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.enableTBarItems = function (baseToolbar, items, isEnable, muteToolbarUpdate) {\n        var trgItems = getTBarItemsIndex(getCollection(items), baseToolbar.toolbarObj.items);\n        this.tbItems = selectAll('.' + classes.CLS_TB_ITEM, baseToolbar.toolbarObj.element);\n        for (var i = 0; i < trgItems.length; i++) {\n            var item = this.tbItems[trgItems[i]];\n            if (item) {\n                baseToolbar.toolbarObj.enableItems(item, isEnable);\n            }\n        }\n        if (!select('.e-rte-srctextarea', this.parent.element) && !muteToolbarUpdate) {\n            updateUndoRedoStatus(baseToolbar, this.parent.formatter.editorManager.undoRedoManager.getUndoStatus());\n        }\n    };\n    /**\n     * removeTBarItems method\n     *\n     * @param {string} items - specifies the string value.\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.removeTBarItems = function (items) {\n        if (isNullOrUndefined(this.baseToolbar.toolbarObj)) {\n            this.baseToolbar = this.parent.getBaseToolbarObject();\n        }\n        var trgItems = getTBarItemsIndex(getCollection(items), this.baseToolbar.toolbarObj.items);\n        this.tbItems = (this.parent.inlineMode.enable) ? selectAll('.' + classes.CLS_TB_ITEM, this.baseToolbar.toolbarObj.element)\n            : selectAll('.' + classes.CLS_TB_ITEM, this.parent.element);\n        for (var i = 0; i < trgItems.length; i++) {\n            this.baseToolbar.toolbarObj.removeItems(this.tbItems[trgItems[i]]);\n        }\n    };\n    /**\n     * getExpandTBarPopHeight method\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.getExpandTBarPopHeight = function () {\n        var popHeight = 0;\n        if (this.parent.toolbarSettings.type === ToolbarType.Expand && this.tbElement.classList.contains('e-extended-toolbar')) {\n            var expandPopup = select('.e-toolbar-extended', this.tbElement);\n            if (expandPopup && this.tbElement.classList.contains('e-expand-open')\n                || expandPopup && expandPopup.classList.contains('e-popup-open')) {\n                addClass([expandPopup], [classes.CLS_VISIBLE]);\n                popHeight = popHeight + expandPopup.offsetHeight;\n                removeClass([expandPopup], [classes.CLS_VISIBLE]);\n            }\n            else {\n                removeClass([this.tbElement], [classes.CLS_EXPAND_OPEN]);\n            }\n        }\n        return popHeight;\n    };\n    /**\n     * getToolbarHeight method\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.getToolbarHeight = function () {\n        return this.tbElement.offsetHeight;\n    };\n    /**\n     * getToolbarElement method\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.getToolbarElement = function () {\n        return select('.' + classes.CLS_TOOLBAR, this.parent.element);\n    };\n    /**\n     * refreshToolbarOverflow method\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.refreshToolbarOverflow = function () {\n        this.baseToolbar.toolbarObj.refreshOverflow();\n    };\n    Toolbar.prototype.isToolbarDestroyed = function () {\n        return this.baseToolbar.toolbarObj && !this.baseToolbar.toolbarObj.isDestroyed;\n    };\n    Toolbar.prototype.destroyToolbar = function () {\n        if (this.isToolbarDestroyed()) {\n            this.parent.unWireScrollElementsEvents();\n            this.unWireEvents();\n            this.parent.notify(events.destroyColorPicker, {});\n            this.dropDownModule.destroyDropDowns();\n            this.baseToolbar.toolbarObj.destroy();\n            this.removeEventListener();\n            removeClass([this.parent.element], [classes.CLS_RTE_TB_ENABLED]);\n            removeClass([this.parent.element], [classes.CLS_RTE_EXPAND_TB]);\n            var tbWrapper = select('.' + classes.CLS_TB_WRAP, this.parent.element);\n            var tbElement = select('.' + classes.CLS_TOOLBAR, this.parent.element);\n            if (!isNullOrUndefined(tbWrapper)) {\n                detach(tbWrapper);\n            }\n            else if (!isNullOrUndefined(tbElement)) {\n                detach(tbElement);\n            }\n        }\n    };\n    /**\n     * Destroys the ToolBar.\n     *\n     * @function destroy\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.destroy = function () {\n        if (this.isToolbarDestroyed()) {\n            this.destroyToolbar();\n            if (this.keyBoardModule) {\n                this.keyBoardModule.destroy();\n            }\n        }\n    };\n    Toolbar.prototype.scrollHandler = function (e) {\n        if (!this.parent.inlineMode.enable) {\n            if (this.parent.toolbarSettings.enableFloating && this.getDOMVisibility(this.tbElement)) {\n                this.toggleFloatClass(e.args);\n            }\n        }\n    };\n    Toolbar.prototype.getDOMVisibility = function (el) {\n        if (!el.offsetParent && el.offsetWidth === 0 && el.offsetHeight === 0) {\n            return false;\n        }\n        return true;\n    };\n    Toolbar.prototype.mouseDownHandler = function () {\n        if (Browser.isDevice && this.parent.inlineMode.enable && !isIDevice()) {\n            this.showFixedTBar();\n        }\n    };\n    Toolbar.prototype.focusChangeHandler = function () {\n        if (Browser.isDevice && this.parent.inlineMode.enable && !isIDevice()) {\n            this.isToolbar = false;\n            this.hideFixedTBar();\n        }\n    };\n    Toolbar.prototype.dropDownBeforeOpenHandler = function () {\n        this.isToolbar = true;\n    };\n    // eslint-disable-next-line\n    Toolbar.prototype.tbFocusHandler = function (e) {\n        var activeElm = document.activeElement;\n        var isToolbaractive = closest(activeElm, '.e-rte-toolbar');\n        if (activeElm === this.parent.getToolbarElement() || isToolbaractive === this.parent.getToolbarElement()) {\n            var toolbarItem = this.parent.getToolbarElement().querySelectorAll('.e-expended-nav');\n            for (var i = 0; i < toolbarItem.length; i++) {\n                if (isNOU(this.parent.getToolbarElement().querySelector('.e-insert-table-btn'))) {\n                    toolbarItem[i].setAttribute('tabindex', '0');\n                }\n                else {\n                    toolbarItem[i].setAttribute('tabindex', '1');\n                }\n            }\n        }\n    };\n    Toolbar.prototype.tbKeydownHandler = function (e) {\n        if (e.target.classList.contains('e-dropdown-btn') ||\n            e.target.getAttribute('id') === this.parent.getID() + '_toolbar_CreateTable') {\n            e.target.setAttribute('tabindex', '0');\n        }\n    };\n    Toolbar.prototype.toolbarClickHandler = function (e) {\n        var trg = closest(e.originalEvent.target, '.e-hor-nav');\n        if (trg && this.parent.toolbarSettings.type === ToolbarType.Expand && !isNOU(trg)) {\n            if (!trg.classList.contains('e-nav-active')) {\n                removeClass([this.tbElement], [classes.CLS_EXPAND_OPEN]);\n                this.parent.setContentHeight('toolbar', false);\n            }\n            else {\n                addClass([this.tbElement], [classes.CLS_EXPAND_OPEN]);\n                this.parent.setContentHeight('toolbar', true);\n            }\n        }\n        else if (Browser.isDevice || this.parent.inlineMode.enable) {\n            this.isToolbar = true;\n        }\n        if (isNOU(trg) && this.parent.toolbarSettings.type === ToolbarType.Expand) {\n            removeClass([this.tbElement], [classes.CLS_EXPAND_OPEN]);\n        }\n    };\n    Toolbar.prototype.wireEvents = function () {\n        if (this.parent.inlineMode.enable && isIDevice()) {\n            return;\n        }\n        EventHandler.add(this.tbElement, 'focusin', this.tbFocusHandler, this);\n        EventHandler.add(this.tbElement, 'keydown', this.tbKeydownHandler, this);\n    };\n    Toolbar.prototype.unWireEvents = function () {\n        EventHandler.remove(this.tbElement, 'focusin', this.tbFocusHandler);\n        EventHandler.remove(this.tbElement, 'keydown', this.tbKeydownHandler);\n    };\n    Toolbar.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.dropDownModule = new DropDownButtons(this.parent, this.locator);\n        this.toolbarActionModule = new ToolbarAction(this.parent);\n        this.parent.on(events.initialEnd, this.renderToolbar, this);\n        this.parent.on(events.scroll, this.scrollHandler, this);\n        this.parent.on(events.bindOnEnd, this.toolbarBindEvent, this);\n        this.parent.on(events.toolbarUpdated, this.updateToolbarStatus, this);\n        this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.refreshBegin, this.onRefresh, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.enableFullScreen, this.fullScreen, this);\n        this.parent.on(events.disableFullScreen, this.hideScreen, this);\n        this.parent.on(events.updateToolbarItem, this.updateItem, this);\n        this.parent.on(events.beforeDropDownOpen, this.dropDownBeforeOpenHandler, this);\n        this.parent.on(events.expandPopupClick, this.parent.setContentHeight, this.parent);\n        this.parent.on(events.focusChange, this.focusChangeHandler, this);\n        this.parent.on(events.mouseDown, this.mouseDownHandler, this);\n        this.parent.on(events.sourceCodeMouseDown, this.mouseDownHandler, this);\n        if (!this.parent.inlineMode.enable && !isIDevice()) {\n            this.parent.on(events.toolbarClick, this.toolbarClickHandler, this);\n        }\n    };\n    Toolbar.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.renderToolbar);\n        this.parent.off(events.scroll, this.scrollHandler);\n        this.parent.off(events.bindOnEnd, this.toolbarBindEvent);\n        this.parent.off(events.toolbarUpdated, this.updateToolbarStatus);\n        this.parent.off(events.modelChanged, this.onPropertyChanged);\n        this.parent.off(events.refreshBegin, this.onRefresh);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.enableFullScreen, this.parent.fullScreenModule.showFullScreen);\n        this.parent.off(events.disableFullScreen, this.parent.fullScreenModule.hideFullScreen);\n        this.parent.off(events.updateToolbarItem, this.updateItem);\n        this.parent.off(events.beforeDropDownOpen, this.dropDownBeforeOpenHandler);\n        this.parent.off(events.expandPopupClick, this.parent.setContentHeight);\n        this.parent.off(events.focusChange, this.focusChangeHandler);\n        this.parent.off(events.mouseDown, this.mouseDownHandler);\n        this.parent.off(events.sourceCodeMouseDown, this.mouseDownHandler);\n        if (!this.parent.inlineMode.enable && !isIDevice()) {\n            this.parent.off(events.toolbarClick, this.toolbarClickHandler);\n        }\n    };\n    Toolbar.prototype.onRefresh = function () {\n        this.refreshToolbarOverflow();\n        this.parent.setContentHeight('', true);\n    };\n    /**\n     * Called internally if any of the property value changed.\n     *\n     * @param {RichTextEditorModel} e - specifies the string value\n     * @returns {void}\n     * @hidden\n\n     */\n    Toolbar.prototype.onPropertyChanged = function (e) {\n        if (!isNullOrUndefined(e.newProp.inlineMode)) {\n            for (var _i = 0, _a = Object.keys(e.newProp.inlineMode); _i < _a.length; _i++) {\n                var prop = _a[_i];\n                switch (prop) {\n                    case 'enable':\n                        this.refreshToolbar();\n                        break;\n                }\n            }\n        }\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        this.refreshToolbar();\n    };\n    Toolbar.prototype.refreshToolbar = function () {\n        if (isNullOrUndefined(this.baseToolbar.toolbarObj)) {\n            this.baseToolbar = this.parent.getBaseToolbarObject();\n        }\n        var tbWrapper = select('.' + classes.CLS_TB_WRAP, this.parent.element);\n        var tbElement = select('.' + classes.CLS_TOOLBAR, this.parent.element);\n        if (tbElement || tbWrapper) {\n            this.destroyToolbar();\n        }\n        if (this.parent.toolbarSettings.enable) {\n            this.addEventListener();\n            this.renderToolbar();\n            this.parent.wireScrollElementsEvents();\n            if (!select('.e-rte-srctextarea', this.parent.element)) {\n                updateUndoRedoStatus(this.baseToolbar, this.parent.formatter.editorManager.undoRedoManager.getUndoStatus());\n            }\n            this.parent.notify(events.dynamicModule, {});\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Toolbar.prototype.getModuleName = function () {\n        return 'toolbar';\n    };\n    return Toolbar;\n}());\nexport { Toolbar };\n"]},"metadata":{},"sourceType":"module"}