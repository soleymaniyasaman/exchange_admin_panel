{"ast":null,"code":"import { Browser, detach, closest, isNullOrUndefined as isNOU, EventHandler } from '@syncfusion/ej2-base';\nimport { ContextMenu, DetailsView, FileManager as EJ2FileManager } from '@syncfusion/ej2-filemanager';\nimport { NavigationPane, Toolbar } from '@syncfusion/ej2-filemanager';\nimport { RenderType } from '../base/enum';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { dispatchEvent } from '../base/util';\n/**\n * `FileManager` module is used to display the directories and images inside the editor.\n */\n\nvar FileManager =\n/** @class */\nfunction () {\n  function FileManager(parent, locator) {\n    EJ2FileManager.Inject(ContextMenu, DetailsView, NavigationPane, Toolbar);\n    this.parent = parent;\n    this.i10n = locator.getService('rteLocale');\n    this.dialogRenderObj = locator.getService('dialogRenderObject');\n    this.rendererFactory = locator.getService('rendererFactory');\n    this.addEventListener();\n  }\n\n  FileManager.prototype.initialize = function () {\n    this.parent.fileManagerModule = this;\n    this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n  };\n\n  FileManager.prototype.render = function (e) {\n    var _this = this;\n\n    var dlgInsert;\n\n    if (e.selectNode && e.selectNode[0].nodeName === 'IMG') {\n      dlgInsert = this.parent.localeObj.getConstant('dialogUpdate');\n    } else {\n      dlgInsert = this.i10n.getConstant('dialogInsert');\n    }\n\n    var dlgHeader = this.parent.localeObj.getConstant('fileDialogHeader');\n    var dlgCancel = this.i10n.getConstant('dialogCancel');\n    this.dlgButtons = [{\n      click: this.insertImageUrl.bind(this),\n      buttonModel: {\n        content: dlgInsert,\n        cssClass: 'e-flat e-insertImage',\n        isPrimary: true\n      }\n    }, {\n      // eslint-disable-next-line\n      click: function (e) {\n        _this.cancelDialog();\n      },\n      buttonModel: {\n        cssClass: 'e-flat e-cancel',\n        content: dlgCancel\n      }\n    }];\n    this.dlgButtons[0].buttonModel.disabled = true;\n    this.selectObj = {\n      selection: e.selection,\n      args: e.args,\n      selectParent: e.selectParent\n    };\n    var dlgTarget = this.parent.createElement('div', {\n      className: 'e-rte-file-manager-dialog',\n      id: this.parent.getID() + '_file-manager-dialog',\n      attrs: {\n        'aria-owns': this.parent.getID()\n      }\n    });\n    document.body.appendChild(dlgTarget);\n    this.fileWrap = this.parent.createElement('div', {\n      id: this.parent.getID() + '_rte-file-manager',\n      className: 'e-img-file-wrap'\n    });\n    dlgTarget.appendChild(this.fileWrap);\n    dlgTarget.appendChild(this.getInputUrlElement());\n    var dialogModel = {\n      visible: false,\n      isModal: true,\n      header: dlgHeader,\n      target: document.body,\n      locale: this.parent.locale,\n      enableRtl: this.parent.enableRtl,\n      cssClass: classes.CLS_RTE_ELEMENTS,\n      animationSettings: {\n        effect: 'None'\n      },\n      showCloseIcon: true,\n      closeOnEscape: true,\n      width: '720px',\n      height: 'auto',\n      position: {\n        X: 'center',\n        Y: 'center'\n      },\n      buttons: this.dlgButtons,\n      created: this.renderFileManager.bind(this),\n      close: function (e) {\n        _this.parent.isBlur = false;\n\n        if (e && e.event.returnValue) {\n          _this.selectObj.selection.restore();\n        }\n\n        _this.destroyComponents();\n\n        _this.dialogRenderObj.close(e);\n      }\n    };\n    this.dialogObj = this.dialogRenderObj.render(dialogModel);\n    this.dialogObj.createElement = this.parent.createElement;\n    this.dialogObj.appendTo(dlgTarget);\n    this.dialogObj.show(Browser.isDevice ? true : false);\n  };\n\n  FileManager.prototype.renderFileManager = function () {\n    var _this = this; // eslint-disable-next-line\n\n\n    var proxy = this;\n    this.fileObj = new EJ2FileManager({\n      allowMultiSelection: false,\n      locale: this.parent.locale,\n      enableRtl: this.parent.enableRtl,\n      path: this.parent.fileManagerSettings.path,\n      view: this.parent.fileManagerSettings.view,\n      enablePersistence: this.parent.enablePersistence,\n      cssClass: this.parent.fileManagerSettings.cssClass,\n      sortOrder: this.parent.fileManagerSettings.sortOrder,\n      ajaxSettings: this.parent.fileManagerSettings.ajaxSettings,\n      showThumbnail: this.parent.fileManagerSettings.showThumbnail,\n      rootAliasName: this.parent.fileManagerSettings.rootAliasName,\n      uploadSettings: this.parent.fileManagerSettings.uploadSettings,\n      searchSettings: this.parent.fileManagerSettings.searchSettings,\n      toolbarSettings: this.parent.fileManagerSettings.toolbarSettings,\n      showHiddenItems: this.parent.fileManagerSettings.showHiddenItems,\n      allowDragAndDrop: this.parent.fileManagerSettings.allowDragAndDrop,\n      showFileExtension: this.parent.fileManagerSettings.showFileExtension,\n      detailsViewSettings: this.parent.fileManagerSettings.detailsViewSettings,\n      contextMenuSettings: this.parent.fileManagerSettings.contextMenuSettings,\n      navigationPaneSettings: this.parent.fileManagerSettings.navigationPaneSettings,\n      fileSelect: function (e) {\n        var selectedFile = e.fileDetails;\n\n        if (selectedFile.isFile && proxy.parent.insertImageSettings.allowedTypes.indexOf(selectedFile.type) > -1) {\n          proxy.inputUrl.value = proxy.parent.fileManagerSettings.ajaxSettings.getImageUrl + '?path=' + (selectedFile.filterPath && selectedFile.filterPath.replace(/\\\\/g, '/')) + selectedFile.name;\n          _this.dlgButtons[0].buttonModel.disabled = false;\n        } else {\n          proxy.inputUrl.value = '';\n          _this.dlgButtons[0].buttonModel.disabled = true;\n        }\n\n        _this.dialogObj.buttons = _this.dlgButtons;\n      },\n      created: function () {\n        _this.inputUrl.removeAttribute('disabled');\n      },\n      success: function () {\n        _this.fileObj.refreshLayout();\n      }\n    });\n\n    if (Browser.isDevice) {\n      this.fileObj.height = '85%';\n    }\n\n    this.fileObj.appendTo(this.fileWrap);\n    EventHandler.add(this.parent.element.ownerDocument, 'mousedown', this.onDocumentClick, this);\n  };\n\n  FileManager.prototype.getInputUrlElement = function () {\n    var imgUrl = this.parent.createElement('div', {\n      className: 'imgUrl'\n    });\n    var urlLabel = this.parent.createElement('div', {\n      className: 'e-rte-label'\n    });\n    urlLabel.innerHTML = '<label for=\"rteSample_img_url\">' + this.i10n.getConstant('linkWebUrl') + '</label>';\n    imgUrl.appendChild(urlLabel);\n    var placeUrl = this.i10n.getConstant('imageUrl');\n    this.inputUrl = this.parent.createElement('input', {\n      className: 'e-input e-img-url',\n      attrs: {\n        placeholder: placeUrl,\n        spellcheck: 'false',\n        disabled: 'true'\n      }\n    });\n    imgUrl.appendChild(this.inputUrl);\n    return imgUrl;\n  }; // eslint-disable-next-line\n\n\n  FileManager.prototype.insertImageUrl = function (e) {\n    var url = this.inputUrl.value;\n\n    if (this.parent.formatter.getUndoRedoStack().length === 0) {\n      this.parent.formatter.saveData();\n    }\n\n    if (url !== '') {\n      if (this.parent.editorMode === 'HTML' && isNOU(closest(this.selectObj.selection.range.startContainer.parentNode, '#' + this.contentModule.getPanel().id))) {\n        this.contentModule.getEditPanel().focus();\n        var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());\n        this.selectObj.selection = this.parent.formatter.editorManager.nodeSelection.save(range, this.contentModule.getDocument());\n        this.selectObj.selectParent = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n      }\n\n      var regex = /[\\w-]+.(jpg|png|jpeg|gif)/g;\n      var matchUrl = !isNOU(url.match(regex)) && this.parent.editorMode === 'HTML' ? url.match(regex)[0] : '';\n      var value = {\n        cssClass: this.parent.insertImageSettings.display === 'inline' ? classes.CLS_IMGINLINE : classes.CLS_IMGBREAK,\n        url: url,\n        selection: this.selectObj.selection,\n        altText: matchUrl,\n        selectParent: this.selectObj.selectParent,\n        width: {\n          width: this.parent.insertImageSettings.width,\n          minWidth: this.parent.insertImageSettings.minWidth,\n          maxWidth: this.parent.getInsertImgMaxWidth()\n        },\n        height: {\n          height: this.parent.insertImageSettings.height,\n          minHeight: this.parent.insertImageSettings.minHeight,\n          maxHeight: this.parent.insertImageSettings.maxHeight\n        }\n      };\n      this.parent.formatter.process(this.parent, this.selectObj.args, this.selectObj.args.originalEvent, value);\n      this.dialogObj.hide({\n        returnValue: false\n      });\n    }\n  };\n\n  FileManager.prototype.cancelDialog = function () {\n    this.parent.isBlur = false;\n    this.dialogObj.hide({\n      returnValue: true\n    });\n  };\n\n  FileManager.prototype.onDocumentClick = function (e) {\n    var target = e.target;\n    var prevEle = target.nodeName !== '#document' && !isNOU(target.previousElementSibling) && target.previousElementSibling;\n\n    if (!isNOU(this.dialogObj) && !closest(target, '#' + this.parent.getID() + '_file-manager-dialog') && !closest(target, '#' + this.parent.getID() + '_rte-file-manager_tb_sortby-popup') && !closest(target, '#' + this.parent.getID() + '_rte-file-manager_tb_view-popup') && !closest(target, '#' + this.parent.getID() + '_rte-file-manager_contextmenu') && !(!isNOU(closest(target, '.e-contextmenu-wrapper')) && closest(target, '.e-contextmenu-wrapper').querySelector('#' + this.parent.getID() + '_rte-file-manager_contextmenu')) && !isNOU(prevEle) && !prevEle.classList.contains('e-rte-file-manager-dialog') && !isNOU(prevEle) && prevEle.id !== this.parent.getID() + '_rte-file-manager_contextmenu') {\n      this.dialogObj.hide({\n        returnValue: true\n      });\n      this.parent.isBlur = true;\n      dispatchEvent(this.parent.element, 'focusout');\n    } else {\n      this.parent.isRTE = true;\n    }\n  };\n\n  FileManager.prototype.addEventListener = function () {\n    this.parent.on(events.initialEnd, this.initialize, this);\n    this.parent.on(events.renderFileManager, this.render, this);\n    this.parent.on(events.destroy, this.destroy, this);\n  };\n\n  FileManager.prototype.removeEventListener = function () {\n    EventHandler.remove(this.parent.element.ownerDocument, 'mousedown', this.onDocumentClick);\n    this.parent.off(events.initialEnd, this.initialize);\n    this.parent.off(events.renderFileManager, this.render);\n    this.parent.off(events.destroy, this.destroy);\n  };\n\n  FileManager.prototype.destroyComponents = function () {\n    if (this.fileObj) {\n      this.fileObj.destroy();\n      this.fileObj = null;\n    }\n\n    if (this.dialogObj) {\n      this.dialogObj.destroy();\n      detach(this.dialogObj.element);\n      this.dialogObj = null;\n    }\n  };\n\n  FileManager.prototype.destroy = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.destroyComponents();\n    this.removeEventListener();\n  };\n  /**\n   * For internal use only - Get the module name.\n   *\n   * @returns {string} - returns the string value\n   * @hidden\n   */\n\n\n  FileManager.prototype.getModuleName = function () {\n    return 'fileManager';\n  };\n\n  return FileManager;\n}();\n\nexport { FileManager };","map":{"version":3,"sources":["/Users/yasaman/Documents/moj_adminpanel/adminpanel/node_modules/@syncfusion/ej2-richtexteditor/src/rich-text-editor/actions/file-manager.js"],"names":["Browser","detach","closest","isNullOrUndefined","isNOU","EventHandler","ContextMenu","DetailsView","FileManager","EJ2FileManager","NavigationPane","Toolbar","RenderType","events","classes","dispatchEvent","parent","locator","Inject","i10n","getService","dialogRenderObj","rendererFactory","addEventListener","prototype","initialize","fileManagerModule","contentModule","getRenderer","Content","render","e","_this","dlgInsert","selectNode","nodeName","localeObj","getConstant","dlgHeader","dlgCancel","dlgButtons","click","insertImageUrl","bind","buttonModel","content","cssClass","isPrimary","cancelDialog","disabled","selectObj","selection","args","selectParent","dlgTarget","createElement","className","id","getID","attrs","document","body","appendChild","fileWrap","getInputUrlElement","dialogModel","visible","isModal","header","target","locale","enableRtl","CLS_RTE_ELEMENTS","animationSettings","effect","showCloseIcon","closeOnEscape","width","height","position","X","Y","buttons","created","renderFileManager","close","isBlur","event","returnValue","restore","destroyComponents","dialogObj","appendTo","show","isDevice","proxy","fileObj","allowMultiSelection","path","fileManagerSettings","view","enablePersistence","sortOrder","ajaxSettings","showThumbnail","rootAliasName","uploadSettings","searchSettings","toolbarSettings","showHiddenItems","allowDragAndDrop","showFileExtension","detailsViewSettings","contextMenuSettings","navigationPaneSettings","fileSelect","selectedFile","fileDetails","isFile","insertImageSettings","allowedTypes","indexOf","type","inputUrl","value","getImageUrl","filterPath","replace","name","removeAttribute","success","refreshLayout","add","element","ownerDocument","onDocumentClick","imgUrl","urlLabel","innerHTML","placeUrl","placeholder","spellcheck","url","formatter","getUndoRedoStack","length","saveData","editorMode","range","startContainer","parentNode","getPanel","getEditPanel","focus","editorManager","nodeSelection","getRange","getDocument","save","getParentNodeCollection","regex","matchUrl","match","display","CLS_IMGINLINE","CLS_IMGBREAK","altText","minWidth","maxWidth","getInsertImgMaxWidth","minHeight","maxHeight","process","originalEvent","hide","prevEle","previousElementSibling","querySelector","classList","contains","isRTE","on","initialEnd","destroy","removeEventListener","remove","off","isDestroyed","getModuleName"],"mappings":"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","sourcesContent":["import { Browser, detach, closest, isNullOrUndefined as isNOU, EventHandler } from '@syncfusion/ej2-base';\nimport { ContextMenu, DetailsView, FileManager as EJ2FileManager } from '@syncfusion/ej2-filemanager';\nimport { NavigationPane, Toolbar } from '@syncfusion/ej2-filemanager';\nimport { RenderType } from '../base/enum';\nimport * as events from '../base/constant';\nimport * as classes from '../base/classes';\nimport { dispatchEvent } from '../base/util';\n/**\n * `FileManager` module is used to display the directories and images inside the editor.\n */\nvar FileManager = /** @class */ (function () {\n    function FileManager(parent, locator) {\n        EJ2FileManager.Inject(ContextMenu, DetailsView, NavigationPane, Toolbar);\n        this.parent = parent;\n        this.i10n = locator.getService('rteLocale');\n        this.dialogRenderObj = locator.getService('dialogRenderObject');\n        this.rendererFactory = locator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    FileManager.prototype.initialize = function () {\n        this.parent.fileManagerModule = this;\n        this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n    };\n    FileManager.prototype.render = function (e) {\n        var _this = this;\n        var dlgInsert;\n        if (e.selectNode && e.selectNode[0].nodeName === 'IMG') {\n            dlgInsert = this.parent.localeObj.getConstant('dialogUpdate');\n        }\n        else {\n            dlgInsert = this.i10n.getConstant('dialogInsert');\n        }\n        var dlgHeader = this.parent.localeObj.getConstant('fileDialogHeader');\n        var dlgCancel = this.i10n.getConstant('dialogCancel');\n        this.dlgButtons = [{\n                click: this.insertImageUrl.bind(this),\n                buttonModel: { content: dlgInsert, cssClass: 'e-flat e-insertImage', isPrimary: true }\n            },\n            {\n                // eslint-disable-next-line\n                click: function (e) {\n                    _this.cancelDialog();\n                },\n                buttonModel: { cssClass: 'e-flat e-cancel', content: dlgCancel }\n            }];\n        this.dlgButtons[0].buttonModel.disabled = true;\n        this.selectObj = { selection: e.selection, args: e.args, selectParent: e.selectParent };\n        var dlgTarget = this.parent.createElement('div', {\n            className: 'e-rte-file-manager-dialog', id: this.parent.getID() + '_file-manager-dialog',\n            attrs: { 'aria-owns': this.parent.getID() }\n        });\n        document.body.appendChild(dlgTarget);\n        this.fileWrap = this.parent.createElement('div', {\n            id: this.parent.getID() + '_rte-file-manager', className: 'e-img-file-wrap'\n        });\n        dlgTarget.appendChild(this.fileWrap);\n        dlgTarget.appendChild(this.getInputUrlElement());\n        var dialogModel = {\n            visible: false,\n            isModal: true, header: dlgHeader,\n            target: document.body, locale: this.parent.locale,\n            enableRtl: this.parent.enableRtl, cssClass: classes.CLS_RTE_ELEMENTS,\n            animationSettings: { effect: 'None' },\n            showCloseIcon: true, closeOnEscape: true, width: '720px', height: 'auto',\n            position: { X: 'center', Y: 'center' },\n            buttons: this.dlgButtons,\n            created: this.renderFileManager.bind(this),\n            close: function (e) {\n                _this.parent.isBlur = false;\n                if (e && e.event.returnValue) {\n                    _this.selectObj.selection.restore();\n                }\n                _this.destroyComponents();\n                _this.dialogRenderObj.close(e);\n            }\n        };\n        this.dialogObj = this.dialogRenderObj.render(dialogModel);\n        this.dialogObj.createElement = this.parent.createElement;\n        this.dialogObj.appendTo(dlgTarget);\n        this.dialogObj.show(Browser.isDevice ? true : false);\n    };\n    FileManager.prototype.renderFileManager = function () {\n        var _this = this;\n        // eslint-disable-next-line\n        var proxy = this;\n        this.fileObj = new EJ2FileManager({\n            allowMultiSelection: false,\n            locale: this.parent.locale,\n            enableRtl: this.parent.enableRtl,\n            path: this.parent.fileManagerSettings.path,\n            view: this.parent.fileManagerSettings.view,\n            enablePersistence: this.parent.enablePersistence,\n            cssClass: this.parent.fileManagerSettings.cssClass,\n            sortOrder: this.parent.fileManagerSettings.sortOrder,\n            ajaxSettings: this.parent.fileManagerSettings.ajaxSettings,\n            showThumbnail: this.parent.fileManagerSettings.showThumbnail,\n            rootAliasName: this.parent.fileManagerSettings.rootAliasName,\n            uploadSettings: this.parent.fileManagerSettings.uploadSettings,\n            searchSettings: this.parent.fileManagerSettings.searchSettings,\n            toolbarSettings: this.parent.fileManagerSettings.toolbarSettings,\n            showHiddenItems: this.parent.fileManagerSettings.showHiddenItems,\n            allowDragAndDrop: this.parent.fileManagerSettings.allowDragAndDrop,\n            showFileExtension: this.parent.fileManagerSettings.showFileExtension,\n            detailsViewSettings: this.parent.fileManagerSettings.detailsViewSettings,\n            contextMenuSettings: this.parent.fileManagerSettings.contextMenuSettings,\n            navigationPaneSettings: this.parent.fileManagerSettings.navigationPaneSettings,\n            fileSelect: function (e) {\n                var selectedFile = e.fileDetails;\n                if (selectedFile.isFile && proxy.parent.insertImageSettings.allowedTypes.indexOf(selectedFile.type) > -1) {\n                    proxy.inputUrl.value = proxy.parent.fileManagerSettings.ajaxSettings.getImageUrl + '?path=' +\n                        (selectedFile.filterPath && selectedFile.filterPath.replace(/\\\\/g, '/')) + selectedFile.name;\n                    _this.dlgButtons[0].buttonModel.disabled = false;\n                }\n                else {\n                    proxy.inputUrl.value = '';\n                    _this.dlgButtons[0].buttonModel.disabled = true;\n                }\n                _this.dialogObj.buttons = _this.dlgButtons;\n            },\n            created: function () {\n                _this.inputUrl.removeAttribute('disabled');\n            },\n            success: function () {\n                _this.fileObj.refreshLayout();\n            }\n        });\n        if (Browser.isDevice) {\n            this.fileObj.height = '85%';\n        }\n        this.fileObj.appendTo(this.fileWrap);\n        EventHandler.add(this.parent.element.ownerDocument, 'mousedown', this.onDocumentClick, this);\n    };\n    FileManager.prototype.getInputUrlElement = function () {\n        var imgUrl = this.parent.createElement('div', { className: 'imgUrl' });\n        var urlLabel = this.parent.createElement('div', { className: 'e-rte-label' });\n        urlLabel.innerHTML = '<label for=\"rteSample_img_url\">' + this.i10n.getConstant('linkWebUrl') + '</label>';\n        imgUrl.appendChild(urlLabel);\n        var placeUrl = this.i10n.getConstant('imageUrl');\n        this.inputUrl = this.parent.createElement('input', {\n            className: 'e-input e-img-url',\n            attrs: { placeholder: placeUrl, spellcheck: 'false', disabled: 'true' }\n        });\n        imgUrl.appendChild(this.inputUrl);\n        return imgUrl;\n    };\n    // eslint-disable-next-line\n    FileManager.prototype.insertImageUrl = function (e) {\n        var url = this.inputUrl.value;\n        if (this.parent.formatter.getUndoRedoStack().length === 0) {\n            this.parent.formatter.saveData();\n        }\n        if (url !== '') {\n            if (this.parent.editorMode === 'HTML' &&\n                isNOU(closest(this.selectObj.selection.range.startContainer.parentNode, '#' + this.contentModule.getPanel().id))) {\n                this.contentModule.getEditPanel().focus();\n                var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());\n                this.selectObj.selection = this.parent.formatter.editorManager.nodeSelection.save(range, this.contentModule.getDocument());\n                this.selectObj.selectParent = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range);\n            }\n            var regex = /[\\w-]+.(jpg|png|jpeg|gif)/g;\n            var matchUrl = (!isNOU(url.match(regex)) && this.parent.editorMode === 'HTML') ? url.match(regex)[0] : '';\n            var value = {\n                cssClass: (this.parent.insertImageSettings.display === 'inline' ? classes.CLS_IMGINLINE : classes.CLS_IMGBREAK),\n                url: url, selection: this.selectObj.selection, altText: matchUrl, selectParent: this.selectObj.selectParent,\n                width: {\n                    width: this.parent.insertImageSettings.width, minWidth: this.parent.insertImageSettings.minWidth,\n                    maxWidth: this.parent.getInsertImgMaxWidth()\n                },\n                height: {\n                    height: this.parent.insertImageSettings.height, minHeight: this.parent.insertImageSettings.minHeight,\n                    maxHeight: this.parent.insertImageSettings.maxHeight\n                }\n            };\n            this.parent.formatter.process(this.parent, this.selectObj.args, this.selectObj.args.originalEvent, value);\n            this.dialogObj.hide({ returnValue: false });\n        }\n    };\n    FileManager.prototype.cancelDialog = function () {\n        this.parent.isBlur = false;\n        this.dialogObj.hide({ returnValue: true });\n    };\n    FileManager.prototype.onDocumentClick = function (e) {\n        var target = e.target;\n        var prevEle = target.nodeName !== '#document' && !isNOU(target.previousElementSibling) && target.previousElementSibling;\n        if (!isNOU(this.dialogObj) &&\n            (!closest(target, '#' + this.parent.getID() + '_file-manager-dialog') &&\n                !closest(target, '#' + this.parent.getID() + '_rte-file-manager_tb_sortby-popup') &&\n                !closest(target, '#' + this.parent.getID() + '_rte-file-manager_tb_view-popup') &&\n                !closest(target, '#' + this.parent.getID() + '_rte-file-manager_contextmenu') &&\n                (!(!isNOU(closest(target, '.e-contextmenu-wrapper')) &&\n                    closest(target, '.e-contextmenu-wrapper').querySelector('#' + this.parent.getID() + '_rte-file-manager_contextmenu'))) &&\n                (!isNOU(prevEle) && !prevEle.classList.contains('e-rte-file-manager-dialog')) &&\n                (!isNOU(prevEle) && prevEle.id !== this.parent.getID() + '_rte-file-manager_contextmenu'))) {\n            this.dialogObj.hide({ returnValue: true });\n            this.parent.isBlur = true;\n            dispatchEvent(this.parent.element, 'focusout');\n        }\n        else {\n            this.parent.isRTE = true;\n        }\n    };\n    FileManager.prototype.addEventListener = function () {\n        this.parent.on(events.initialEnd, this.initialize, this);\n        this.parent.on(events.renderFileManager, this.render, this);\n        this.parent.on(events.destroy, this.destroy, this);\n    };\n    FileManager.prototype.removeEventListener = function () {\n        EventHandler.remove(this.parent.element.ownerDocument, 'mousedown', this.onDocumentClick);\n        this.parent.off(events.initialEnd, this.initialize);\n        this.parent.off(events.renderFileManager, this.render);\n        this.parent.off(events.destroy, this.destroy);\n    };\n    FileManager.prototype.destroyComponents = function () {\n        if (this.fileObj) {\n            this.fileObj.destroy();\n            this.fileObj = null;\n        }\n        if (this.dialogObj) {\n            this.dialogObj.destroy();\n            detach(this.dialogObj.element);\n            this.dialogObj = null;\n        }\n    };\n    FileManager.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.destroyComponents();\n        this.removeEventListener();\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} - returns the string value\n     * @hidden\n     */\n    FileManager.prototype.getModuleName = function () {\n        return 'fileManager';\n    };\n    return FileManager;\n}());\nexport { FileManager };\n"]},"metadata":{},"sourceType":"module"}