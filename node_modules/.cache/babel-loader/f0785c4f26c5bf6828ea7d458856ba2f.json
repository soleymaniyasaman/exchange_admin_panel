{"ast":null,"code":"import { detach, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { CLS_COUNT, CLS_WARNING, CLS_ERROR } from '../base/classes';\n/**\n * `Count` module is used to handle Count actions.\n */\n\nvar Count =\n/** @class */\nfunction () {\n  function Count(parent, serviceLocator) {\n    this.parent = parent;\n    this.locator = serviceLocator;\n    this.renderFactory = this.locator.getService('rendererFactory');\n    this.addEventListener();\n  }\n\n  Count.prototype.initializeInstance = function () {\n    this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n    this.editPanel = this.contentRenderer.getEditPanel();\n    this.addEventListener();\n  };\n  /**\n   * renderCount method\n   *\n   * @returns {void}\n   * @hidden\n    */\n\n\n  Count.prototype.renderCount = function () {\n    this.initializeInstance();\n    this.element = this.parent.createElement('span', {\n      className: CLS_COUNT\n    });\n    this.contentRenderer.getPanel().parentElement.appendChild(this.element);\n    this.appendCount();\n\n    if (this.parent.maxLength !== -1) {\n      this.charCountBackground(this.htmlLength);\n    }\n  };\n\n  Count.prototype.appendCount = function () {\n    var htmlText = this.parent.editorMode === 'Markdown' ? this.editPanel.value.trim() : this.editPanel.textContent.trim();\n\n    if (this.parent.editorMode !== 'Markdown' && htmlText.indexOf('\\u200B') !== -1) {\n      this.htmlLength = htmlText.replace(/\\u200B/g, '').length;\n    } else {\n      this.htmlLength = htmlText.length;\n    }\n\n    var string = this.parent.maxLength === -1 ? this.htmlLength : this.htmlLength + ' / ' + this.parent.maxLength;\n    this.element.innerHTML = string;\n  };\n\n  Count.prototype.charCountBackground = function (htmlLength) {\n    var percentage = htmlLength / this.parent.maxLength * 100;\n\n    if (percentage < 85) {\n      this.element.classList.remove(CLS_WARNING);\n      this.element.classList.remove(CLS_ERROR);\n    } else if (percentage > 85 && percentage <= 90) {\n      this.element.classList.remove(CLS_ERROR);\n      this.element.classList.add(CLS_WARNING);\n    } else if (percentage > 90) {\n      this.element.classList.remove(CLS_WARNING);\n      this.element.classList.add(CLS_ERROR);\n    }\n  };\n  /**\n   * @returns {void}\n   * @hidden\n    */\n\n\n  Count.prototype.refresh = function () {\n    if (!isNullOrUndefined(this.editPanel)) {\n      this.appendCount();\n\n      if (this.parent.maxLength !== -1) {\n        this.charCountBackground(this.htmlLength);\n      }\n    }\n  };\n  /**\n   * Destroys the Count.\n   *\n   * @function destroy\n   * @returns {void}\n   * @hidden\n    */\n\n\n  Count.prototype.destroy = function () {\n    if (this.element && !isNullOrUndefined(this.parent.element.querySelector('.' + CLS_COUNT))) {\n      detach(this.element);\n    }\n\n    this.removeEventListener();\n  };\n\n  Count.prototype.toggle = function (e) {\n    this.element.style.display = e.member === 'viewSource' ? 'none' : 'block';\n  };\n\n  Count.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.on(events.initialEnd, this.renderCount, this);\n    this.parent.on(events.keyUp, this.refresh, this);\n    this.parent.on(events.count, this.refresh, this);\n    this.parent.on(events.refreshBegin, this.refresh, this);\n    this.parent.on(events.mouseDown, this.refresh, this);\n    this.parent.on(events.destroy, this.destroy, this);\n    this.parent.on(events.sourceCode, this.toggle, this);\n    this.parent.on(events.updateSource, this.toggle, this);\n  };\n\n  Count.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.off(events.initialEnd, this.renderCount);\n    this.parent.off(events.keyUp, this.refresh);\n    this.parent.off(events.refreshBegin, this.refresh);\n    this.parent.off(events.count, this.refresh);\n    this.parent.off(events.mouseDown, this.refresh);\n    this.parent.off(events.destroy, this.destroy);\n    this.parent.off(events.sourceCode, this.toggle);\n    this.parent.off(events.updateSource, this.toggle);\n  };\n  /**\n   * For internal use only - Get the module name.\n   *\n   * @returns {string} - returns the string value\n   */\n\n\n  Count.prototype.getModuleName = function () {\n    return 'count';\n  };\n\n  return Count;\n}();\n\nexport { Count };","map":{"version":3,"sources":["/Users/yasaman/Documents/moj_adminpanel/adminpanel/node_modules/@syncfusion/ej2-richtexteditor/src/rich-text-editor/actions/count.js"],"names":["detach","isNullOrUndefined","events","RenderType","CLS_COUNT","CLS_WARNING","CLS_ERROR","Count","parent","serviceLocator","locator","renderFactory","getService","addEventListener","prototype","initializeInstance","contentRenderer","getRenderer","Content","editPanel","getEditPanel","renderCount","element","createElement","className","getPanel","parentElement","appendChild","appendCount","maxLength","charCountBackground","htmlLength","htmlText","editorMode","value","trim","textContent","indexOf","replace","length","string","innerHTML","percentage","classList","remove","add","refresh","destroy","querySelector","removeEventListener","toggle","e","style","display","member","isDestroyed","on","initialEnd","keyUp","count","refreshBegin","mouseDown","sourceCode","updateSource","off","getModuleName"],"mappings":"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","sourcesContent":["import { detach, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { CLS_COUNT, CLS_WARNING, CLS_ERROR } from '../base/classes';\n/**\n * `Count` module is used to handle Count actions.\n */\nvar Count = /** @class */ (function () {\n    function Count(parent, serviceLocator) {\n        this.parent = parent;\n        this.locator = serviceLocator;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    Count.prototype.initializeInstance = function () {\n        this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n        this.editPanel = this.contentRenderer.getEditPanel();\n        this.addEventListener();\n    };\n    /**\n     * renderCount method\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    Count.prototype.renderCount = function () {\n        this.initializeInstance();\n        this.element = this.parent.createElement('span', { className: CLS_COUNT });\n        this.contentRenderer.getPanel().parentElement.appendChild(this.element);\n        this.appendCount();\n        if (this.parent.maxLength !== -1) {\n            this.charCountBackground(this.htmlLength);\n        }\n    };\n    Count.prototype.appendCount = function () {\n        var htmlText = this.parent.editorMode === 'Markdown' ? this.editPanel.value.trim() :\n            this.editPanel.textContent.trim();\n        if (this.parent.editorMode !== 'Markdown' && htmlText.indexOf('\\u200B') !== -1) {\n            this.htmlLength = htmlText.replace(/\\u200B/g, '').length;\n        }\n        else {\n            this.htmlLength = htmlText.length;\n        }\n        var string = this.parent.maxLength === -1 ? this.htmlLength : this.htmlLength + ' / ' + this.parent.maxLength;\n        this.element.innerHTML = string;\n    };\n    Count.prototype.charCountBackground = function (htmlLength) {\n        var percentage = (htmlLength / this.parent.maxLength) * 100;\n        if (percentage < 85) {\n            this.element.classList.remove(CLS_WARNING);\n            this.element.classList.remove(CLS_ERROR);\n        }\n        else if (percentage > 85 && percentage <= 90) {\n            this.element.classList.remove(CLS_ERROR);\n            this.element.classList.add(CLS_WARNING);\n        }\n        else if (percentage > 90) {\n            this.element.classList.remove(CLS_WARNING);\n            this.element.classList.add(CLS_ERROR);\n        }\n    };\n    /**\n     * @returns {void}\n     * @hidden\n\n     */\n    Count.prototype.refresh = function () {\n        if (!isNullOrUndefined(this.editPanel)) {\n            this.appendCount();\n            if (this.parent.maxLength !== -1) {\n                this.charCountBackground(this.htmlLength);\n            }\n        }\n    };\n    /**\n     * Destroys the Count.\n     *\n     * @function destroy\n     * @returns {void}\n     * @hidden\n\n     */\n    Count.prototype.destroy = function () {\n        if (this.element && !isNullOrUndefined(this.parent.element.querySelector('.' + CLS_COUNT))) {\n            detach(this.element);\n        }\n        this.removeEventListener();\n    };\n    Count.prototype.toggle = function (e) {\n        this.element.style.display = (e.member === 'viewSource') ? 'none' : 'block';\n    };\n    Count.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialEnd, this.renderCount, this);\n        this.parent.on(events.keyUp, this.refresh, this);\n        this.parent.on(events.count, this.refresh, this);\n        this.parent.on(events.refreshBegin, this.refresh, this);\n        this.parent.on(events.mouseDown, this.refresh, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.sourceCode, this.toggle, this);\n        this.parent.on(events.updateSource, this.toggle, this);\n    };\n    Count.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.renderCount);\n        this.parent.off(events.keyUp, this.refresh);\n        this.parent.off(events.refreshBegin, this.refresh);\n        this.parent.off(events.count, this.refresh);\n        this.parent.off(events.mouseDown, this.refresh);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.sourceCode, this.toggle);\n        this.parent.off(events.updateSource, this.toggle);\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} - returns the string value\n     */\n    Count.prototype.getModuleName = function () {\n        return 'count';\n    };\n    return Count;\n}());\nexport { Count };\n"]},"metadata":{},"sourceType":"module"}