{"ast":null,"code":"import _slicedToArray from\"/Users/yasaman/Documents/moj_adminpanel/adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import cookie from'react-cookies';import qs from'qs';import{BASE_URL,COOKIE_EXPIRES}from'./constants';import momentJalaali from\"moment-jalaali\";export function Arraify(data){if(!data)return[];if(Array.isArray(data)){return data;}else{return[data];}}function filterNonNull(obj){return Object.fromEntries(Object.entries(obj).filter(function(_ref){var _ref2=_slicedToArray(_ref,2),k=_ref2[0],v=_ref2[1];return v;}));}export function Header(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var token=Token(),headers=new Headers();headers.set('Accept','application/json');headers.set('Content-Type','application/json');var heads=options;token&&headers.set('Authorization',\"Bearer \"+token);options.headers&&Object.entries(options.headers).forEach(function(_ref3){var _ref4=_slicedToArray(_ref3,2),k=_ref4[0],v=_ref4[1];return headers.set(k,v);});options.headers=headers;if(heads[\"Content-Type\"]){options.headers.set(\"Accept\",heads[\"Accept\"]);}return options;}export function Url(){var url=arguments.length>0&&arguments[0]!==undefined?arguments[0]:\"\";var data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined;if(url.charAt(0)!=='/'){url='/'+url;}return BASE_URL+url+(data?\"?\".concat(qs.stringify(filterNonNull(data),{arrayFormat:'comma'})):\"\");}export function UrlQuery(){var url=arguments.length>0&&arguments[0]!==undefined?arguments[0]:\"\";var data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return url+\"?\".concat(qs.stringify(filterNonNull(data),{arrayFormat:'comma'}));}export function QueryUrl(url){return qs.parse(url,{ignoreQueryPrefix:true});}export function Querys(url){var _query$token;var query=qs.parse(url,{ignoreQueryPrefix:true});query.token=query===null||query===void 0?void 0:(_query$token=query.token)===null||_query$token===void 0?void 0:_query$token.replaceAll(' ','+');return query;}export function setToken(token){var expires=new Date();expires.setDate(expires.getDate()+COOKIE_EXPIRES);cookie.save('admin_token',token.access_token,{path:'/',expires:expires});cookie.save('admin_refresh',token.refresh_token,{path:'/'});}export function RefreshToken(){var token=cookie.load('admin_refresh');if(token==='undefined'){return undefined;}return token;}export function Token(){var token=cookie.load('admin_token');if(token==='undefined'){return undefined;}return token;}export function removeToken(){cookie.remove('admin_token',{path:'/'});cookie.remove('admin_refresh',{path:'/'});}export function getTokenObject(){var token=Token();if(token!==undefined){return{Authorization:token};}}export function formatNumber(value){var f=value.match(/\\d+/);if(f)return f[0];return'';}export function timeToStr(time,format){if(time){return momentJalaali(time).format(format);}return\"\";}","map":{"version":3,"sources":["/Users/yasaman/Documents/moj_adminpanel/adminpanel/src/utils/utils.js"],"names":["cookie","qs","BASE_URL","COOKIE_EXPIRES","momentJalaali","Arraify","data","Array","isArray","filterNonNull","obj","Object","fromEntries","entries","filter","k","v","Header","options","token","Token","headers","Headers","set","heads","forEach","Url","url","undefined","charAt","stringify","arrayFormat","UrlQuery","QueryUrl","parse","ignoreQueryPrefix","Querys","query","replaceAll","setToken","expires","Date","setDate","getDate","save","access_token","path","refresh_token","RefreshToken","load","removeToken","remove","getTokenObject","Authorization","formatNumber","value","f","match","timeToStr","time","format"],"mappings":"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","sourcesContent":["import cookie from 'react-cookies';\nimport qs from 'qs';\nimport {BASE_URL, COOKIE_EXPIRES} from './constants';\nimport momentJalaali from \"moment-jalaali\";\n\n\nexport function Arraify(data){\n    if(!data) return []\n    \n    if(Array.isArray(data)){\n        return data\n    }else{\n        return [data]\n    }\n}\n\nfunction filterNonNull(obj) {\n    return Object.fromEntries(Object.entries(obj).filter(([k, v]) => v));\n}\n\nexport function Header(options = {}) {\n    let token = Token(), headers = new Headers();\n    headers.set('Accept', 'application/json');\n    headers.set('Content-Type', 'application/json');\n    let heads = options;\n\n    token && headers.set('Authorization',\"Bearer \"+ token);\n    options.headers && Object.entries(options.headers).forEach(([k, v]) => headers.set(k, v));\n    options.headers = headers;\n\n    if (heads[\"Content-Type\"]){\n        options.headers.set(\"Accept\", heads[\"Accept\"])\n\n    }\n    return options;\n}\n\nexport function Url(url = \"\", data = undefined) {\n\n     if (url.charAt(0) !== '/') {url = '/' + url}\n    return BASE_URL + url + (data ? `?${qs.stringify(filterNonNull(data), {arrayFormat: 'comma'})}` : ``);\n}\n\nexport function UrlQuery(url = \"\", data = {}){\n    return url + `?${qs.stringify(filterNonNull(data), {arrayFormat: 'comma'})}`\n}\n\n\nexport function QueryUrl(url){\n    return qs.parse(url, { ignoreQueryPrefix: true})\n}\n\n\nexport function Querys(url){\n    let query = qs.parse(url, { ignoreQueryPrefix: true})\n    query.token = query?.token?.replaceAll(' ', '+')\n    return query\n}\n\nexport function setToken(token) {\n    const expires = new Date();\n    expires.setDate(expires.getDate() + COOKIE_EXPIRES);\n    cookie.save('admin_token', token.access_token, {path: '/', expires});\n    cookie.save('admin_refresh', token.refresh_token, {path: '/'})\n}\n\nexport function RefreshToken() {\n    let token = cookie.load('admin_refresh');\n    if (token === 'undefined') {\n        return undefined;\n    }\n    return token;\n}\n\nexport function Token() {\n    let token = cookie.load('admin_token');\n    if (token === 'undefined') {\n        return undefined;\n    }\n\n    return token;\n}\n\nexport function removeToken() {\n    cookie.remove('admin_token', {path: '/'});\n    cookie.remove('admin_refresh', {path: '/'});\n}\n\nexport function getTokenObject() {\n    let token = Token();\n    if (token !== undefined) {\n        return {Authorization: token}\n    }\n}\n\nexport function formatNumber(value) {\n    let f = value.match(/\\d+/);\n    if (f) return f[0];\n    return '';\n}\n\nexport function timeToStr(time, format){\n    if (time){\n        return momentJalaali(time).format(format)\n    }\n    return \"\"\n}\n"]},"metadata":{},"sourceType":"module"}