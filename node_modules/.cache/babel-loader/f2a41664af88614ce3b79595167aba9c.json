{"ast":null,"code":"import { detach, closest, Browser, isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, EventHandler, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport * as classes from '../base/classes';\nimport { dispatchEvent, parseHtml, hasClass } from '../base/util';\n/**\n * `Table` module is used to handle table actions.\n */\n\nvar Table =\n/** @class */\nfunction () {\n  function Table(parent, serviceLocator) {\n    this.ensureInsideTableList = true;\n    this.pageX = null;\n    this.pageY = null;\n    this.moveEle = null;\n    this.parent = parent;\n    this.rteID = parent.element.id;\n    this.l10n = serviceLocator.getService('rteLocale');\n    this.rendererFactory = serviceLocator.getService('rendererFactory');\n    this.dialogRenderObj = serviceLocator.getService('dialogRenderObject');\n    this.addEventListener();\n  }\n\n  Table.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.on(events.createTable, this.renderDlgContent, this);\n    this.parent.on(events.initialEnd, this.afterRender, this);\n    this.parent.on(events.dynamicModule, this.afterRender, this);\n    this.parent.on(events.showTableDialog, this.showDialog, this);\n    this.parent.on(events.closeTableDialog, this.closeDialog, this);\n    this.parent.on(events.docClick, this.docClick, this);\n    this.parent.on(events.editAreaClick, this.editAreaClickHandler, this);\n    this.parent.on(events.clearDialogObj, this.clearDialogObj, this);\n    this.parent.on(events.tableToolbarAction, this.onToolbarAction, this);\n    this.parent.on(events.dropDownSelect, this.dropdownSelect, this);\n    this.parent.on(events.keyDown, this.keyDown, this);\n    this.parent.on(events.mouseUp, this.selectionTable, this);\n    this.parent.on(events.destroy, this.destroy, this);\n  };\n\n  Table.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.off(events.createTable, this.renderDlgContent);\n    this.parent.off(events.initialEnd, this.afterRender);\n    this.parent.off(events.dynamicModule, this.afterRender);\n    this.parent.off(events.docClick, this.docClick);\n    this.parent.off(events.showTableDialog, this.showDialog);\n    this.parent.off(events.closeTableDialog, this.closeDialog);\n    this.parent.off(events.editAreaClick, this.editAreaClickHandler);\n    this.parent.off(events.clearDialogObj, this.clearDialogObj);\n    this.parent.off(events.tableToolbarAction, this.onToolbarAction);\n    this.parent.off(events.dropDownSelect, this.dropdownSelect);\n    this.parent.off(events.mouseDown, this.cellSelect);\n    this.parent.off(events.tableColorPickerChanged, this.setBGColor);\n    this.parent.off(events.keyDown, this.keyDown);\n    this.parent.off(events.mouseUp, this.selectionTable);\n    this.parent.off(events.destroy, this.destroy);\n  };\n\n  Table.prototype.selectionTable = function (e) {\n    var target = e.args.target;\n\n    if (Browser.info.name === 'mozilla' && !isNOU(closest(target, 'table')) && closest(target, 'table').tagName === 'TABLE') {\n      this.parent.contentModule.getEditPanel().setAttribute('contenteditable', 'true');\n    }\n  };\n\n  Table.prototype.afterRender = function () {\n    if (isNullOrUndefined(this.contentModule)) {\n      this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n      this.parent.on(events.tableColorPickerChanged, this.setBGColor, this);\n      this.parent.on(events.mouseDown, this.cellSelect, this);\n\n      if (this.parent.tableSettings.resize) {\n        EventHandler.add(this.parent.contentModule.getEditPanel(), Browser.touchStartEvent, this.resizeStart, this);\n      }\n\n      if (!Browser.isDevice && this.parent.tableSettings.resize) {\n        EventHandler.add(this.contentModule.getEditPanel(), 'mouseover', this.resizeHelper, this);\n      }\n    }\n  };\n\n  Table.prototype.dropdownSelect = function (e) {\n    var item = e.item;\n\n    if (!document.body.contains(document.body.querySelector('.e-rte-quick-toolbar')) || item.command !== 'Table') {\n      return;\n    }\n\n    var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n    var args = {\n      args: e,\n      selection: this.parent.formatter.editorManager.nodeSelection.save(range, this.contentModule.getDocument()),\n      selectParent: this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range)\n    };\n\n    switch (item.subCommand) {\n      case 'InsertRowBefore':\n      case 'InsertRowAfter':\n        this.addRow(args.selection, e);\n        break;\n\n      case 'InsertColumnLeft':\n      case 'InsertColumnRight':\n        this.addColumn(args.selection, e);\n        break;\n\n      case 'DeleteColumn':\n      case 'DeleteRow':\n        this.removeRowColumn(args.selection, e);\n        break;\n\n      case 'AlignTop':\n      case 'AlignMiddle':\n      case 'AlignBottom':\n        this.verticalAlign(args, e);\n        break;\n\n      case 'Dashed':\n      case 'Alternate':\n      case 'Custom':\n        this.tableStyles(args, item.subCommand);\n        break;\n\n      case 'Merge':\n      case 'VerticalSplit':\n      case 'HorizontalSplit':\n        this.UpdateCells(args.selection, e);\n        break;\n    }\n  };\n\n  Table.prototype.UpdateCells = function (selectCell, e) {\n    this.parent.formatter.process(this.parent, e, e, {\n      selection: selectCell,\n      subCommand: e.item.subCommand\n    });\n    this.hideTableQuickToolbar();\n  };\n\n  Table.prototype.keyDown = function (e) {\n    var event = e.args; // eslint-disable-next-line\n\n    var proxy = this;\n\n    switch (event.action) {\n      case 'escape':\n        break;\n\n      case 'insert-table':\n        this.openDialog(true, e);\n        event.preventDefault();\n        break;\n    }\n\n    if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection) && this.contentModule && event.code !== 'KeyK') {\n      var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n      var selection = this.parent.formatter.editorManager.nodeSelection.save(range, this.contentModule.getDocument());\n      var ele = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range)[0];\n      ele = ele && ele.tagName !== 'TD' && ele.tagName !== 'TH' ? ele.parentElement : ele;\n\n      if (event.keyCode === 8 || event.keyCode === 46 || event.ctrlKey && event.keyCode === 88) {\n        if (ele && ele.tagName === 'TBODY') {\n          event.preventDefault();\n          proxy.removeTable(selection, event, true);\n        } else if (ele && ele.querySelectorAll('table').length > 0) {\n          this.removeResizeElement();\n        }\n      }\n\n      if (ele && ele.tagName !== 'TD' && ele.tagName !== 'TH') {\n        var closestTd = closest(ele, 'td');\n        ele = !isNullOrUndefined(closestTd) && this.parent.inputElement.contains(closestTd) ? closestTd : ele;\n      }\n\n      if (ele && (ele.tagName === 'TD' || ele.tagName === 'TH')) {\n        switch (event.keyCode) {\n          case 9:\n          case 37:\n          case 39:\n            proxy.tabSelection(event, selection, ele);\n            break;\n\n          case 40:\n          case 38:\n            proxy.tableArrowNavigation(event, selection, ele);\n            break;\n        }\n      }\n    }\n  };\n\n  Table.prototype.openDialog = function (isInternal, e) {\n    if (!isInternal) {\n      this.parent.contentModule.getEditPanel().focus();\n    }\n\n    if (this.parent.editorMode === 'HTML') {\n      var docElement = this.parent.contentModule.getDocument();\n      var range = this.parent.formatter.editorManager.nodeSelection.getRange(docElement);\n      var selection = this.parent.formatter.editorManager.nodeSelection.save(range, docElement);\n      var args = {\n        originalEvent: e ? e.args : {\n          action: 'insert-table'\n        },\n        item: {\n          command: 'Table',\n          subCommand: 'CreateTable'\n        }\n      };\n      this.insertTableDialog({\n        self: this,\n        args: args,\n        selection: selection\n      });\n    }\n  };\n\n  Table.prototype.showDialog = function () {\n    this.openDialog(false);\n  };\n\n  Table.prototype.closeDialog = function () {\n    if (this.editdlgObj) {\n      this.editdlgObj.hide({\n        returnValue: true\n      });\n    }\n  };\n\n  Table.prototype.onToolbarAction = function (args) {\n    var item = args.args.item;\n\n    switch (item.subCommand) {\n      case 'TableHeader':\n        this.tableHeader(args.selection, args.args);\n        break;\n\n      case 'TableRemove':\n        this.removeTable(args.selection, args.args);\n        break;\n\n      case 'TableEditProperties':\n        this.editTable(args);\n        break;\n    }\n  };\n\n  Table.prototype.verticalAlign = function (args, e) {\n    var tdEle = closest(args.selectParent[0], 'td') || closest(args.selectParent[0], 'th');\n\n    if (tdEle) {\n      this.parent.formatter.process(this.parent, e, e, {\n        tableCell: tdEle,\n        subCommand: e.item.subCommand\n      });\n    }\n  };\n\n  Table.prototype.tableStyles = function (args, command) {\n    var table = closest(args.selectParent[0], 'table');\n\n    if (command === 'Dashed') {\n      /* eslint-disable */\n      this.parent.element.classList.contains(classes.CLS_TB_DASH_BOR) ? this.parent.element.classList.remove(classes.CLS_TB_DASH_BOR) : this.parent.element.classList.add(classes.CLS_TB_DASH_BOR);\n      table.classList.contains(classes.CLS_TB_DASH_BOR) ? table.classList.remove(classes.CLS_TB_DASH_BOR) : table.classList.add(classes.CLS_TB_DASH_BOR);\n    }\n\n    if (command === 'Alternate') {\n      this.parent.element.classList.contains(classes.CLS_TB_ALT_BOR) ? this.parent.element.classList.remove(classes.CLS_TB_ALT_BOR) : this.parent.element.classList.add(classes.CLS_TB_ALT_BOR);\n      table.classList.contains(classes.CLS_TB_ALT_BOR) ? table.classList.remove(classes.CLS_TB_ALT_BOR) : table.classList.add(classes.CLS_TB_ALT_BOR);\n      /* eslint-enable */\n    }\n\n    if (args.args && args.args.item.cssClass) {\n      var classList = args.args.item.cssClass.split(' ');\n\n      for (var i = 0; i < classList.length; i++) {\n        if (table.classList.contains(classList[i])) {\n          table.classList.remove(classList[i]);\n        } else {\n          table.classList.add(classList[i]);\n        }\n      }\n    }\n\n    this.parent.formatter.saveData();\n    this.parent.formatter.editorManager.nodeSelection.restore();\n  };\n\n  Table.prototype.insideList = function (range) {\n    var blockNodes = this.parent.formatter.editorManager.domNode.blockNodes();\n    var nodes = [];\n\n    for (var i = 0; i < blockNodes.length; i++) {\n      if (blockNodes[i].parentNode.tagName === 'LI') {\n        nodes.push(blockNodes[i].parentNode);\n      } else if (blockNodes[i].tagName === 'LI' && blockNodes[i].childNodes[0].tagName !== 'P' && blockNodes[i].childNodes[0].tagName !== 'OL' && blockNodes[i].childNodes[0].tagName !== 'UL') {\n        nodes.push(blockNodes[i]);\n      }\n    }\n\n    if (nodes.length > 1 || nodes.length && range.startOffset === 0 && range.endOffset === 0) {\n      this.ensureInsideTableList = true;\n      return true;\n    } else {\n      this.ensureInsideTableList = false;\n      return false;\n    }\n  };\n\n  Table.prototype.tabSelection = function (event, selection, ele) {\n    var insideList = this.insideList(selection.range);\n\n    if ((event.keyCode === 37 || event.keyCode === 39) && selection.range.startContainer.nodeType === 3 || insideList) {\n      return;\n    }\n\n    event.preventDefault();\n    ele.classList.remove(classes.CLS_TABLE_SEL);\n\n    if (!event.shiftKey && event.keyCode !== 37) {\n      var nextElement = !isNullOrUndefined(ele.nextSibling) ? ele.nextSibling : !isNullOrUndefined(closest(ele, 'tr').nextSibling) ? closest(ele, 'tr').nextSibling.childNodes[0] : !isNullOrUndefined(closest(ele, 'table').nextSibling) ? closest(ele, 'table').nextSibling.nodeName.toLowerCase() === 'td' ? closest(ele, 'table').nextSibling : ele : ele;\n\n      if (ele === nextElement && ele.nodeName === 'TH') {\n        nextElement = closest(ele, 'table').rows[1].cells[0];\n      }\n\n      if (event.keyCode === 39 && ele === nextElement) {\n        nextElement = closest(ele, 'table').nextSibling;\n      }\n\n      if (nextElement) {\n        // eslint-disable-next-line\n        nextElement.textContent.trim() !== '' && closest(nextElement, 'td') ? selection.setSelectionNode(this.contentModule.getDocument(), nextElement) : selection.setSelectionText(this.contentModule.getDocument(), nextElement, nextElement, 0, 0);\n      }\n\n      if (ele === nextElement && event.keyCode !== 39 && nextElement) {\n        ele.classList.add(classes.CLS_TABLE_SEL);\n        this.addRow(selection, event, true);\n        ele.classList.remove(classes.CLS_TABLE_SEL);\n        nextElement = nextElement.parentElement.nextSibling.firstChild; // eslint-disable-next-line\n\n        nextElement.textContent.trim() !== '' && closest(nextElement, 'td') ? selection.setSelectionNode(this.contentModule.getDocument(), nextElement) : selection.setSelectionText(this.contentModule.getDocument(), nextElement, nextElement, 0, 0);\n      }\n    } else {\n      var prevElement = !isNullOrUndefined(ele.previousSibling) ? ele.previousSibling : !isNullOrUndefined(closest(ele, 'tr').previousSibling) ? closest(ele, 'tr').previousSibling.childNodes[closest(ele, 'tr').previousSibling.childNodes.length - 1] : !isNullOrUndefined(closest(ele, 'table').previousSibling) ? closest(ele, 'table').previousSibling.nodeName.toLowerCase() === 'td' ? closest(ele, 'table').previousSibling : ele : ele;\n\n      if (ele === prevElement && ele.cellIndex === 0 && closest(ele, 'table').tHead) {\n        var clsTble = closest(ele, 'table');\n        prevElement = clsTble.rows[0].cells[clsTble.rows[0].cells.length - 1];\n      }\n\n      if (event.keyCode === 37 && ele === prevElement) {\n        prevElement = closest(ele, 'table').previousSibling;\n      }\n\n      if (prevElement) {\n        // eslint-disable-next-line\n        prevElement.textContent.trim() !== '' && closest(prevElement, 'td') ? selection.setSelectionNode(this.contentModule.getDocument(), prevElement) : selection.setSelectionText(this.contentModule.getDocument(), prevElement, prevElement, 0, 0);\n      }\n    }\n  };\n\n  Table.prototype.tableArrowNavigation = function (event, selection, ele) {\n    var selText = selection.range.startContainer;\n\n    if (event.keyCode === 40 && selText.nodeType === 3 && (selText.nextSibling && selText.nextSibling.nodeName === 'BR' || selText.parentNode && selText.parentNode.nodeName !== 'TD') || event.keyCode === 38 && selText.nodeType === 3 && (selText.previousSibling && selText.previousSibling.nodeName === 'BR' || selText.parentNode && selText.parentNode.nodeName !== 'TD')) {\n      return;\n    }\n\n    event.preventDefault();\n    ele.classList.remove(classes.CLS_TABLE_SEL);\n\n    if (event.keyCode === 40) {\n      ele = !isNullOrUndefined(closest(ele, 'tr').nextElementSibling) ? closest(ele, 'tr').nextElementSibling.children[ele.cellIndex] : closest(ele, 'table').tHead && ele.nodeName === 'TH' ? closest(ele, 'table').rows[1].cells[ele.cellIndex] : !isNullOrUndefined(closest(ele, 'table').nextSibling) ? closest(ele, 'table').nextSibling : ele;\n    } else {\n      ele = !isNullOrUndefined(closest(ele, 'tr').previousElementSibling) ? closest(ele, 'tr').previousElementSibling.children[ele.cellIndex] : closest(ele, 'table').tHead && ele.nodeName !== 'TH' ? closest(ele, 'table').tHead.rows[0].cells[ele.cellIndex] : !isNullOrUndefined(closest(ele, 'table').previousSibling) ? closest(ele, 'table').previousSibling : ele;\n    }\n\n    if (ele) {\n      selection.setSelectionText(this.contentModule.getDocument(), ele, ele, 0, 0);\n    }\n  };\n\n  Table.prototype.setBGColor = function (args) {\n    var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument()); // eslint-disable-next-line\n\n    var selection = this.parent.formatter.editorManager.nodeSelection.save(range, this.contentModule.getDocument()); // eslint-disable-next-line\n\n    var selectedCells = this.curTable.querySelectorAll('.e-cell-select');\n\n    for (var i = 0; i < selectedCells.length; i++) {\n      selectedCells[i].style.backgroundColor = args.item.value;\n    }\n\n    this.parent.formatter.saveData();\n  };\n\n  Table.prototype.hideTableQuickToolbar = function () {\n    if (this.quickToolObj && this.quickToolObj.tableQTBar && document.body.contains(this.quickToolObj.tableQTBar.element)) {\n      this.quickToolObj.tableQTBar.hidePopup();\n    }\n  };\n\n  Table.prototype.tableHeader = function (selection, e) {\n    this.parent.formatter.process(this.parent, e, e.originalEvent, {\n      selection: selection,\n      subCommand: e.item.subCommand\n    });\n  };\n\n  Table.prototype.editAreaClickHandler = function (e) {\n    if (this.parent.readonly || !isNOU(closest(e.args.target, '.e-img-caption'))) {\n      return;\n    }\n\n    var args = e.args;\n    var showOnRightClick = this.parent.quickToolbarSettings.showOnRightClick;\n\n    if (args.which === 2 || showOnRightClick && args.which === 1 || !showOnRightClick && args.which === 3) {\n      return;\n    }\n\n    if (this.parent.editorMode === 'HTML' && this.parent.quickToolbarModule && this.parent.quickToolbarModule.tableQTBar) {\n      this.quickToolObj = this.parent.quickToolbarModule;\n      var target = args.target;\n      this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n      var isPopupOpen = this.quickToolObj.tableQTBar.element.classList.contains('e-rte-pop');\n\n      if (isPopupOpen) {\n        return;\n      }\n\n      var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());\n      var closestTable = closest(target, 'table');\n      var startNode = this.parent.getRange().startContainer.parentElement;\n      var endNode = this.parent.getRange().endContainer.parentElement;\n\n      if (target && target.nodeName !== 'A' && target.nodeName !== 'IMG' && startNode === endNode && (target.nodeName === 'TD' || target.nodeName === 'TH' || target.nodeName === 'TABLE' || closestTable && this.parent.contentModule.getEditPanel().contains(closestTable)) && !(range.startContainer.nodeType === 3 && !range.collapsed)) {\n        var range_1 = this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());\n        this.parent.formatter.editorManager.nodeSelection.save(range_1, this.contentModule.getDocument());\n        this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());\n        var pageY = this.parent.iframeSettings.enable ? window.pageYOffset + this.parent.element.getBoundingClientRect().top + args.clientY : args.pageY;\n        this.quickToolObj.tableQTBar.showPopup(args.pageX, pageY, target);\n        this.parent.formatter.editorManager.nodeSelection.restore();\n      } else {\n        this.hideTableQuickToolbar();\n      }\n    }\n  };\n\n  Table.prototype.tableCellSelect = function (e) {\n    var target = e.target;\n    var row = Array.prototype.slice.call(target.parentElement.parentElement.children).indexOf(target.parentElement);\n    var col = Array.prototype.slice.call(target.parentElement.children).indexOf(target);\n    var list = this.dlgDiv.querySelectorAll('.e-rte-tablecell');\n    Array.prototype.forEach.call(list, function (item) {\n      var parentIndex = Array.prototype.slice.call(item.parentElement.parentElement.children).indexOf(item.parentElement);\n      var cellIndex = Array.prototype.slice.call(item.parentElement.children).indexOf(item);\n      removeClass([item], 'e-active');\n\n      if (parentIndex <= row && cellIndex <= col) {\n        addClass([item], 'e-active');\n      }\n    });\n    this.tblHeader.innerHTML = col + 1 + 'x' + (row + 1);\n  }; // eslint-disable-next-line\n\n\n  Table.prototype.tableMouseUp = function (e) {\n    EventHandler.remove(this.curTable, 'mousemove', this.tableMove);\n  }; // eslint-disable-next-line\n\n\n  Table.prototype.tableCellLeave = function (e) {\n    removeClass(this.dlgDiv.querySelectorAll('.e-rte-tablecell'), 'e-active');\n    addClass([this.dlgDiv.querySelector('.e-rte-tablecell')], 'e-active');\n    this.tblHeader.innerHTML = 1 + 'x' + 1;\n  };\n\n  Table.prototype.tableCellClick = function (e) {\n    var target = e.target;\n    var row = Array.prototype.slice.call(target.parentElement.parentElement.children).indexOf(target.parentElement) + 1;\n    var col = Array.prototype.slice.call(target.parentElement.children).indexOf(target) + 1;\n    this.self.tableInsert(row, col, e, this);\n  };\n\n  Table.prototype.tableInsert = function (row, col, e, selectionObj) {\n    var proxy = selectionObj.self ? selectionObj.self : this;\n    var startContainer = selectionObj.selection.range.startContainer;\n\n    if (startContainer.nodeName === 'P' && startContainer.textContent.trim() === '' && !(startContainer.childNodes.length > 0)) {\n      startContainer.innerHTML = '<br />';\n    }\n\n    var parentNode = startContainer.parentNode;\n\n    if (proxy.parent.editorMode === 'HTML' && (proxy.parent.iframeSettings.enable && !hasClass(parentNode.ownerDocument.querySelector('body'), 'e-lib') || // eslint-disable-next-line\n    !proxy.parent.iframeSettings.enable && isNOU(closest(parentNode, '[id=' + \"'\" + proxy.contentModule.getPanel().id + \"'\" + ']')))) {\n      proxy.contentModule.getEditPanel().focus();\n      var range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.contentModule.getDocument());\n      selectionObj.selection = proxy.parent.formatter.editorManager.nodeSelection.save(range, proxy.contentModule.getDocument());\n    }\n\n    var value = {\n      rows: row,\n      columns: col,\n      width: {\n        minWidth: proxy.parent.tableSettings.minWidth,\n        maxWidth: proxy.parent.tableSettings.maxWidth,\n        width: proxy.parent.tableSettings.width\n      },\n      selection: selectionObj.selection\n    };\n\n    if (proxy.popupObj) {\n      proxy.popupObj.hide();\n    }\n\n    if (proxy.editdlgObj) {\n      proxy.editdlgObj.hide();\n    }\n\n    proxy.parent.formatter.process(proxy.parent, selectionObj.args, selectionObj.args.originalEvent, value);\n    proxy.contentModule.getEditPanel().focus();\n    proxy.parent.on(events.mouseDown, proxy.cellSelect, proxy);\n  };\n\n  Table.prototype.cellSelect = function (e) {\n    var target = e.args.target;\n    var tdNode = closest(target, 'td,th');\n    target = target.nodeName !== 'TD' && tdNode && this.parent.contentModule.getEditPanel().contains(tdNode) ? tdNode : target;\n    removeClass(this.contentModule.getEditPanel().querySelectorAll('table td, table th'), classes.CLS_TABLE_SEL);\n\n    if (target && (target.tagName === 'TD' || target.tagName === 'TH')) {\n      addClass([target], classes.CLS_TABLE_SEL);\n      this.activeCell = target;\n      this.curTable = this.curTable ? this.curTable : closest(target, 'table');\n      EventHandler.add(this.curTable, 'mousemove', this.tableMove, this);\n      EventHandler.add(this.curTable, 'mouseup', this.tableMouseUp, this);\n      this.removeResizeElement();\n\n      if (this.helper && this.contentModule.getEditPanel().contains(this.helper)) {\n        detach(this.helper);\n      }\n    }\n\n    if (Browser.info.name === 'mozilla' && !isNOU(closest(target, 'table')) && closest(target, 'table').tagName === 'TABLE') {\n      this.parent.contentModule.getEditPanel().setAttribute('contenteditable', 'false');\n    }\n  };\n\n  Table.prototype.tableMove = function (event) {\n    this.parent.formatter.editorManager.observer.notify('TABLE_MOVE', {\n      event: event,\n      selectNode: [this.activeCell]\n    });\n  };\n\n  Table.prototype.resizeHelper = function (e) {\n    if (this.parent.readonly) {\n      return;\n    }\n\n    var target = e.target || e.targetTouches[0].target;\n    var closestTable = closest(target, 'table');\n\n    if (!isNOU(this.curTable) && !isNOU(closestTable) && closestTable !== this.curTable) {\n      this.removeResizeElement();\n      this.removeHelper(e);\n      this.cancelResizeAction();\n    }\n\n    if (target.nodeName === 'TABLE' || target.nodeName === 'TD' || target.nodeName === 'TH') {\n      this.curTable = closestTable && this.parent.contentModule.getEditPanel().contains(closestTable) && (target.nodeName === 'TD' || target.nodeName === 'TH') ? closestTable : target;\n      this.removeResizeElement();\n      this.tableResizeEleCreation(this.curTable, e);\n    }\n  };\n\n  Table.prototype.tableResizeEleCreation = function (table, e) {\n    this.parent.preventDefaultResize(e);\n    var columns = Array.prototype.slice.call(table.rows[this.calMaxCol(table)].cells, 1);\n    var rows = [];\n\n    for (var i = 0; i < table.rows.length; i++) {\n      rows.push(Array.prototype.slice.call(table.rows[i].cells, 0, 1)[0]);\n    }\n\n    var height = parseInt(getComputedStyle(table).height, 10);\n    var width = parseInt(getComputedStyle(table).width, 10);\n    var pos = this.calcPos(table);\n\n    for (var i = 0; columns.length > i; i++) {\n      var colReEle = this.parent.createElement('span', {\n        attrs: {\n          'data-col': (i + 1).toString(),\n          'unselectable': 'on',\n          'contenteditable': 'false'\n        }\n      });\n      colReEle.classList.add(classes.CLS_RTE_TABLE_RESIZE, classes.CLS_TB_COL_RES);\n      colReEle.style.cssText = 'height: ' + height + 'px; width: 4px; top: ' + pos.top + 'px; left:' + (pos.left + this.calcPos(columns[i]).left) + 'px;';\n      this.contentModule.getEditPanel().appendChild(colReEle);\n    }\n\n    for (var i = 0; rows.length > i; i++) {\n      var rowReEle = this.parent.createElement('span', {\n        attrs: {\n          'data-row': i.toString(),\n          'unselectable': 'on',\n          'contenteditable': 'false'\n        }\n      });\n      rowReEle.classList.add(classes.CLS_RTE_TABLE_RESIZE, classes.CLS_TB_ROW_RES);\n      var rowPosLeft = !isNOU(table.getAttribute('cellspacing')) || table.getAttribute('cellspacing') !== '' ? 0 : this.calcPos(rows[i]).left;\n      rowReEle.style.cssText = 'width: ' + width + 'px; height: 4px; top: ' + (this.calcPos(rows[i]).top + pos.top + rows[i].offsetHeight - 2) + 'px; left:' + (rowPosLeft + pos.left) + 'px;';\n      this.contentModule.getEditPanel().appendChild(rowReEle);\n    }\n\n    var tableReBox = this.parent.createElement('span', {\n      className: classes.CLS_TB_BOX_RES,\n      attrs: {\n        'data-col': columns.length.toString(),\n        'unselectable': 'on',\n        'contenteditable': 'false'\n      }\n    });\n    tableReBox.style.cssText = 'top: ' + (pos.top + height - 4) + 'px; left:' + (pos.left + width - 4) + 'px;';\n\n    if (Browser.isDevice) {\n      tableReBox.classList.add('e-rmob');\n    }\n\n    this.contentModule.getEditPanel().appendChild(tableReBox);\n  };\n\n  Table.prototype.removeResizeElement = function () {\n    var item = this.parent.contentModule.getEditPanel().querySelectorAll('.e-column-resize, .e-row-resize, .e-table-box');\n\n    if (item.length > 0) {\n      for (var i = 0; i < item.length; i++) {\n        detach(item[i]);\n      }\n    }\n  };\n\n  Table.prototype.calcPos = function (elem) {\n    var parentOffset = {\n      top: 0,\n      left: 0\n    }; // eslint-disable-next-line\n\n    var offset = elem.getBoundingClientRect();\n    var doc = elem.ownerDocument;\n    var offsetParent = elem.offsetParent || doc.documentElement;\n\n    while (offsetParent && (offsetParent === doc.body || offsetParent === doc.documentElement) && offsetParent.style.position === 'static') {\n      offsetParent = offsetParent.parentNode;\n    }\n\n    if (offsetParent.nodeName === 'TD' && elem.nodeName === 'TABLE') {\n      offsetParent = closest(offsetParent, '.e-rte-content');\n    }\n\n    if (offsetParent && offsetParent !== elem && offsetParent.nodeType === 1) {\n      // eslint-disable-next-line\n      parentOffset = offsetParent.getBoundingClientRect();\n    }\n\n    return {\n      top: elem.offsetTop,\n      left: elem.offsetLeft\n    };\n  };\n\n  Table.prototype.getPointX = function (e) {\n    if (e.touches && e.touches.length) {\n      return e.touches[0].pageX;\n    } else {\n      return e.pageX;\n    }\n  };\n\n  Table.prototype.getPointY = function (e) {\n    if (e.touches && e.touches.length) {\n      return e.touches[0].pageY;\n    } else {\n      return e.pageY;\n    }\n  };\n\n  Table.prototype.resizeStart = function (e) {\n    var _this = this;\n\n    if (this.parent.readonly) {\n      return;\n    }\n\n    if (Browser.isDevice) {\n      this.resizeHelper(e);\n    }\n\n    var target = e.target;\n\n    if (target.classList.contains(classes.CLS_TB_COL_RES) || target.classList.contains(classes.CLS_TB_ROW_RES) || target.classList.contains(classes.CLS_TB_BOX_RES)) {\n      e.preventDefault();\n      this.parent.preventDefaultResize(e);\n      removeClass(this.curTable.querySelectorAll('td,th'), classes.CLS_TABLE_SEL);\n      this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());\n      this.pageX = this.getPointX(e);\n      this.pageY = this.getPointY(e);\n      this.resizeBtnInit();\n      this.hideTableQuickToolbar();\n\n      if (target.classList.contains(classes.CLS_TB_COL_RES)) {\n        this.resizeBtnStat.column = true;\n        this.columnEle = this.curTable.rows[this.calMaxCol(this.curTable)].cells[parseInt(target.getAttribute('data-col'), 10)];\n        this.colIndex = this.columnEle.cellIndex;\n        this.moveEle = e.target;\n        this.appendHelper();\n      }\n\n      if (target.classList.contains(classes.CLS_TB_ROW_RES)) {\n        this.rowEle = this.curTable.rows[parseInt(target.getAttribute('data-row'), 10)];\n        this.resizeBtnStat.row = true;\n        this.appendHelper();\n      }\n\n      if (target.classList.contains(classes.CLS_TB_BOX_RES)) {\n        this.resizeBtnStat.tableBox = true;\n      }\n\n      if (Browser.isDevice && this.helper && !this.helper.classList.contains('e-reicon')) {\n        this.helper.classList.add('e-reicon');\n        EventHandler.add(document, Browser.touchStartEvent, this.removeHelper, this);\n        EventHandler.add(this.helper, Browser.touchStartEvent, this.resizeStart, this);\n      } else {\n        var args = {\n          event: e,\n          requestType: 'Table'\n        };\n        this.parent.trigger(events.resizeStart, args, function (resizeStartArgs) {\n          if (resizeStartArgs.cancel) {\n            _this.cancelResizeAction();\n          }\n        });\n      }\n\n      EventHandler.add(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing, this);\n      EventHandler.add(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd, this);\n    }\n  };\n\n  Table.prototype.removeHelper = function (e) {\n    var cls = e.target.classList;\n\n    if (!cls.contains('e-reicon') && this.helper) {\n      EventHandler.remove(document, Browser.touchStartEvent, this.removeHelper);\n      EventHandler.remove(this.helper, Browser.touchStartEvent, this.resizeStart);\n\n      if (this.helper && this.contentModule.getEditPanel().contains(this.helper)) {\n        detach(this.helper);\n      }\n\n      this.pageX = null;\n      this.helper = null;\n    }\n  };\n\n  Table.prototype.appendHelper = function () {\n    this.helper = this.parent.createElement('div', {\n      className: 'e-table-rhelper'\n    });\n\n    if (Browser.isDevice) {\n      this.helper.classList.add('e-reicon');\n    }\n\n    this.contentModule.getEditPanel().appendChild(this.helper);\n    this.setHelperHeight();\n  };\n\n  Table.prototype.setHelperHeight = function () {\n    var pos = this.calcPos(this.curTable);\n\n    if (this.resizeBtnStat.column) {\n      this.helper.classList.add('e-column-helper');\n      this.helper.style.cssText = 'height: ' + getComputedStyle(this.curTable).height + '; top: ' + pos.top + 'px; left:' + (pos.left + this.calcPos(this.columnEle).left - 1) + 'px;';\n    } else {\n      this.helper.classList.add('e-row-helper');\n      this.helper.style.cssText = 'width: ' + getComputedStyle(this.curTable).width + '; top: ' + (this.calcPos(this.rowEle).top + pos.top + this.rowEle.offsetHeight) + 'px; left:' + (this.calcPos(this.rowEle).left + pos.left) + 'px;';\n    }\n  };\n\n  Table.prototype.updateHelper = function () {\n    var pos = this.calcPos(this.curTable);\n\n    if (this.resizeBtnStat.column) {\n      var left = pos.left + this.calcPos(this.columnEle).left - 1;\n      this.helper.style.left = left + 'px';\n    } else {\n      var top_1 = this.calcPos(this.rowEle).top + pos.top + this.rowEle.offsetHeight;\n      this.helper.style.top = top_1 + 'px';\n    }\n  };\n\n  Table.prototype.calMaxCol = function (element) {\n    var max = 0;\n    var maxRowIndex;\n\n    for (var i = 0; i < element.rows.length; i++) {\n      if (max < element.rows[i].cells.length) {\n        maxRowIndex = i;\n        max = element.rows[i].cells.length;\n      }\n    }\n\n    return maxRowIndex;\n  };\n\n  Table.prototype.resizing = function (e) {\n    var _this = this;\n\n    var pageX = this.getPointX(e);\n    var pageY = this.getPointY(e);\n    var mouseX = this.parent.enableRtl ? -(pageX - this.pageX) : pageX - this.pageX;\n    var mouseY = this.parent.enableRtl ? -(pageY - this.pageY) : pageY - this.pageY;\n    this.pageX = pageX;\n    this.pageY = pageY;\n    var args = {\n      event: e,\n      requestType: 'table'\n    };\n    this.parent.trigger(events.onResize, args, function (resizingArgs) {\n      if (resizingArgs.cancel) {\n        _this.cancelResizeAction();\n      } else {\n        var tableReBox = _this.contentModule.getEditPanel().querySelector('.e-table-box');\n\n        var tableWidth = parseInt(getComputedStyle(_this.curTable).width, 10);\n        var tableHeight = parseInt(getComputedStyle(_this.curTable).height, 10);\n        var paddingSize = +getComputedStyle(_this.contentModule.getEditPanel()).paddingRight.match(/\\d/g).join('');\n        var rteWidth = _this.contentModule.getEditPanel().offsetWidth - paddingSize * 2;\n\n        if (_this.resizeBtnStat.column) {\n          var cellColl = _this.curTable.rows[_this.calMaxCol(_this.curTable)].cells;\n\n          var width = parseFloat(_this.columnEle.offsetWidth.toString());\n          var actualwid = width - mouseX;\n          var totalwid = parseFloat(_this.columnEle.offsetWidth.toString()) + parseFloat(cellColl[_this.colIndex - 1].offsetWidth.toString());\n\n          for (var i = 0; i < _this.curTable.rows.length; i++) {\n            if (totalwid - actualwid > 20 && actualwid > 20) {\n              var leftColumnWidth = totalwid - actualwid;\n              var rightColWidth = actualwid;\n\n              if (!isNOU(_this.curTable.rows[i].cells[_this.colIndex - 1])) {\n                _this.curTable.rows[i].cells[_this.colIndex - 1].style.width = _this.convertPixelToPercentage(leftColumnWidth, tableWidth) + '%';\n              }\n\n              if (!isNOU(_this.curTable.rows[i].cells[_this.colIndex])) {\n                _this.curTable.rows[i].cells[_this.colIndex].style.width = _this.convertPixelToPercentage(rightColWidth, tableWidth) + '%';\n              }\n            }\n          }\n\n          _this.updateHelper();\n        } else if (_this.resizeBtnStat.row) {\n          _this.parent.preventDefaultResize(e);\n\n          var height = parseFloat(_this.rowEle.clientHeight.toString()) + mouseY;\n\n          if (height > 20) {\n            _this.rowEle.style.height = height + 'px';\n          }\n\n          _this.curTable.style.height = '';\n\n          if (!isNOU(tableReBox)) {\n            tableReBox.style.cssText = 'top: ' + (_this.calcPos(_this.curTable).top + tableHeight - 4) + 'px; left:' + (_this.calcPos(_this.curTable).left + tableWidth - 4) + 'px;';\n          }\n\n          _this.updateHelper();\n        } else if (_this.resizeBtnStat.tableBox) {\n          if (!Browser.isDevice) {\n            EventHandler.remove(_this.contentModule.getEditPanel(), 'mouseover', _this.resizeHelper);\n          }\n\n          var widthType = _this.curTable.style.width.indexOf('%') > -1;\n          _this.curTable.style.width = widthType ? _this.convertPixelToPercentage(tableWidth + mouseX, rteWidth) + '%' : tableWidth + mouseX + 'px';\n          _this.curTable.style.height = tableHeight + mouseY + 'px';\n          tableReBox.classList.add('e-rbox-select');\n          tableReBox.style.cssText = 'top: ' + (_this.calcPos(_this.curTable).top + tableHeight - 4) + 'px; left:' + (_this.calcPos(_this.curTable).left + tableWidth - 4) + 'px;';\n        }\n      }\n    });\n  };\n\n  Table.prototype.convertPixelToPercentage = function (value, offsetValue) {\n    return value / offsetValue * 100;\n  };\n\n  Table.prototype.cancelResizeAction = function () {\n    EventHandler.remove(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing);\n    EventHandler.remove(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd);\n    this.removeResizeElement();\n  };\n\n  Table.prototype.resizeEnd = function (e) {\n    this.resizeBtnInit();\n    EventHandler.remove(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing);\n    EventHandler.remove(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd);\n\n    if (this.contentModule.getEditPanel().querySelector('.e-table-box') && this.contentModule.getEditPanel().contains(this.contentModule.getEditPanel().querySelector('.e-table-box'))) {\n      if (!Browser.isDevice) {\n        EventHandler.add(this.contentModule.getEditPanel(), 'mouseover', this.resizeHelper, this);\n      }\n\n      this.removeResizeElement();\n\n      if (this.helper && this.contentModule.getEditPanel().contains(this.helper)) {\n        detach(this.helper);\n        this.helper = null;\n      }\n\n      this.pageX = null;\n      this.pageY = null;\n      this.moveEle = null;\n    }\n\n    var args = {\n      event: e,\n      requestType: 'table'\n    };\n    this.parent.trigger(events.resizeStop, args);\n    this.parent.formatter.saveData();\n  };\n\n  Table.prototype.resizeBtnInit = function () {\n    return this.resizeBtnStat = {\n      column: false,\n      row: false,\n      tableBox: false\n    };\n  };\n\n  Table.prototype.addRow = function (selectCell, e, tabkey) {\n    var cmd;\n\n    if (tabkey) {\n      cmd = {\n        item: {\n          command: 'Table',\n          subCommand: 'InsertRowAfter'\n        }\n      };\n    }\n\n    var value = {\n      selection: selectCell,\n      subCommand: tabkey ? cmd.item.subCommand : e.item.subCommand\n    };\n    this.parent.formatter.process(this.parent, tabkey ? cmd : e, e, value);\n  };\n\n  Table.prototype.addColumn = function (selectCell, e) {\n    this.parent.formatter.process(this.parent, e, e, {\n      selection: selectCell,\n      width: this.parent.tableSettings.width,\n      subCommand: e.item.subCommand\n    });\n  };\n\n  Table.prototype.removeRowColumn = function (selectCell, e) {\n    this.parent.formatter.process(this.parent, e, e, {\n      selection: selectCell,\n      subCommand: e.item.subCommand\n    });\n    this.hideTableQuickToolbar();\n  };\n\n  Table.prototype.removeTable = function (selection, args, delKey) {\n    var cmd;\n\n    if (delKey) {\n      cmd = {\n        item: {\n          command: 'Table',\n          subCommand: 'TableRemove'\n        }\n      };\n    }\n\n    var value = {\n      selection: selection,\n      subCommand: delKey ? cmd.item.subCommand : args.item.subCommand\n    };\n    this.parent.formatter.process(this.parent, delKey ? cmd : args, args.originalEvent, value);\n    this.contentModule.getEditPanel().focus();\n    this.removeResizeElement();\n    this.hideTableQuickToolbar();\n  };\n\n  Table.prototype.renderDlgContent = function (args) {\n    var _this = this;\n\n    if (Browser.isDevice || this.parent.inlineMode.enable) {\n      this.insertTableDialog(args);\n      return;\n    }\n\n    if (this.popupObj) {\n      this.popupObj.hide();\n      return;\n    }\n\n    this.hideTableQuickToolbar();\n    var header = '1X1';\n    var insertbtn = this.l10n.getConstant('inserttablebtn');\n    this.dlgDiv = this.parent.createElement('div', {\n      className: 'e-rte-table-popup',\n      id: this.rteID + '_table'\n    });\n    this.tblHeader = this.parent.createElement('div', {\n      className: 'e-rte-popup-header'\n    });\n    this.tblHeader.innerHTML = header;\n    this.dlgDiv.appendChild(this.tblHeader);\n    var tableDiv = this.parent.createElement('div', {\n      className: 'e-rte-table-span'\n    });\n    this.drawTable(tableDiv, args);\n    this.dlgDiv.appendChild(tableDiv);\n    this.dlgDiv.appendChild(this.parent.createElement('span', {\n      className: 'e-span-border'\n    }));\n    var btnEle = this.parent.createElement('button', {\n      className: 'e-insert-table-btn',\n      id: this.rteID + '_insertTable',\n      attrs: {\n        type: 'button',\n        tabindex: '0'\n      }\n    });\n\n    if (!isNOU(this.parent.getToolbarElement().querySelector('.e-expended-nav'))) {\n      this.parent.getToolbarElement().querySelector('.e-expended-nav').setAttribute('tabindex', '1');\n    }\n\n    this.dlgDiv.appendChild(btnEle);\n    var button = new Button({\n      iconCss: 'e-icons e-create-table',\n      content: insertbtn,\n      cssClass: 'e-flat',\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale\n    });\n    button.isStringTemplate = true;\n    button.appendTo(btnEle);\n    EventHandler.add(btnEle, 'click', this.insertTableDialog, {\n      self: this,\n      args: args.args,\n      selection: args.selection\n    });\n    this.parent.getToolbar().appendChild(this.dlgDiv);\n    var target = args.args.originalEvent.target;\n    target = target.classList.contains('e-toolbar-item') ? target.firstChild : target.parentElement;\n    this.popupObj = new Popup(this.dlgDiv, {\n      targetType: 'relative',\n      relateTo: target,\n      collision: {\n        X: 'fit',\n        Y: 'none'\n      },\n      offsetY: 8,\n      viewPortElement: this.parent.element,\n      position: {\n        X: 'left',\n        Y: 'bottom'\n      },\n      enableRtl: this.parent.enableRtl,\n      zIndex: 10001,\n      // eslint-disable-next-line\n      close: function (event) {\n        _this.parent.isBlur = false;\n\n        _this.popupObj.destroy();\n\n        detach(_this.popupObj.element);\n        _this.popupObj = null;\n      }\n    });\n    addClass([this.popupObj.element], 'e-popup-open');\n    this.popupObj.refreshPosition(target);\n  };\n\n  Table.prototype.docClick = function (e) {\n    var target = e.args.target; // eslint-disable-next-line\n\n    if (target && target.classList && (this.popupObj && !closest(target, '[id=' + \"'\" + this.popupObj.element.id + \"'\" + ']') || this.editdlgObj && !closest(target, '#' + this.editdlgObj.element.id)) && !target.classList.contains('e-create-table') && target.offsetParent && !target.offsetParent.classList.contains('e-rte-backgroundcolor-dropdown')) {\n      if (this.popupObj) {\n        this.popupObj.hide();\n      }\n\n      if (this.editdlgObj) {\n        this.editdlgObj.hide();\n      }\n\n      this.parent.isBlur = true;\n      dispatchEvent(this.parent.element, 'focusout');\n    }\n\n    var closestEle = closest(target, 'td');\n    var isExist = closestEle && this.parent.contentModule.getEditPanel().contains(closestEle) ? true : false;\n\n    if (target && target.tagName !== 'TD' && target.tagName !== 'TH' && !isExist && closest(target, '.e-rte-quick-popup') === null && target.offsetParent && !target.offsetParent.classList.contains('e-quick-dropdown') && !target.offsetParent.classList.contains('e-rte-backgroundcolor-dropdown') && !closest(target, '.e-rte-dropdown-popup') && !closest(target, '.e-rte-elements')) {\n      removeClass(this.parent.element.querySelectorAll('table td'), classes.CLS_TABLE_SEL);\n\n      if (!Browser.isIE) {\n        this.hideTableQuickToolbar();\n      }\n    }\n\n    if (target && target.classList && !target.classList.contains(classes.CLS_TB_COL_RES) && !target.classList.contains(classes.CLS_TB_ROW_RES) && !target.classList.contains(classes.CLS_TB_BOX_RES)) {\n      this.removeResizeElement();\n    }\n  };\n\n  Table.prototype.drawTable = function (tableDiv, args) {\n    var rowDiv;\n    var tableCell;\n\n    for (var row = 0; row < 3; row++) {\n      rowDiv = this.parent.createElement('div', {\n        className: 'e-rte-table-row',\n        attrs: {\n          'data-column': '' + row\n        }\n      });\n\n      for (var col = 0; col < 10; col++) {\n        var display = row > 2 ? 'none' : 'inline-block';\n        tableCell = this.parent.createElement('div', {\n          className: 'e-rte-tablecell e-default',\n          attrs: {\n            'data-cell': '' + col\n          }\n        });\n        rowDiv.appendChild(tableCell);\n        tableCell.style.display = display;\n\n        if (col === 0 && row === 0) {\n          addClass([tableCell], 'e-active');\n        }\n\n        EventHandler.add(tableCell, 'mousemove', this.tableCellSelect, this);\n        EventHandler.add(rowDiv, 'mouseleave', this.tableCellLeave, this);\n        EventHandler.add(tableCell, 'mouseup', this.tableCellClick, {\n          self: this,\n          args: args.args,\n          selection: args.selection\n        });\n      }\n\n      tableDiv.appendChild(rowDiv);\n    }\n  };\n\n  Table.prototype.editTable = function (args) {\n    var _this = this;\n\n    this.createDialog(args);\n    var editContent = this.tableDlgContent(args);\n    var update = this.l10n.getConstant('dialogUpdate');\n    var cancel = this.l10n.getConstant('dialogCancel');\n    var editHeader = this.l10n.getConstant('tableEditHeader');\n    this.editdlgObj.setProperties({\n      height: 'initial',\n      width: '290px',\n      content: editContent,\n      header: editHeader,\n      buttons: [{\n        click: this.applyProperties.bind(this, args),\n        buttonModel: {\n          content: update,\n          cssClass: 'e-flat e-size-update',\n          isPrimary: true\n        }\n      }, {\n        click: function (e) {\n          _this.cancelDialog(e);\n        },\n        buttonModel: {\n          cssClass: 'e-flat e-cancel',\n          content: cancel\n        }\n      }]\n    });\n    this.editdlgObj.element.style.maxHeight = 'none';\n    this.editdlgObj.content.querySelector('input').focus();\n    this.hideTableQuickToolbar();\n  };\n\n  Table.prototype.insertTableDialog = function (args) {\n    var proxy = this.self ? this.self : this;\n\n    if (proxy.popupObj) {\n      proxy.popupObj.hide();\n    }\n\n    proxy.createDialog(args);\n    var dlgContent = proxy.tableCellDlgContent();\n    var insert = proxy.l10n.getConstant('dialogInsert');\n    var cancel = proxy.l10n.getConstant('dialogCancel');\n\n    if (isNullOrUndefined(proxy.editdlgObj)) {\n      return;\n    }\n\n    proxy.editdlgObj.setProperties({\n      height: 'initial',\n      width: '290px',\n      content: dlgContent,\n      buttons: [{\n        click: proxy.customTable.bind(this, args),\n        buttonModel: {\n          content: insert,\n          cssClass: 'e-flat e-insert-table',\n          isPrimary: true\n        }\n      }, {\n        click: function (e) {\n          proxy.cancelDialog(e);\n        },\n        buttonModel: {\n          cssClass: 'e-flat e-cancel',\n          content: cancel\n        }\n      }]\n    });\n    proxy.editdlgObj.element.style.maxHeight = 'none';\n    proxy.editdlgObj.content.querySelector('input').focus();\n  };\n\n  Table.prototype.tableCellDlgContent = function () {\n    var tableColumn = this.l10n.getConstant('columns');\n    var tableRow = this.l10n.getConstant('rows');\n    var tableWrap = this.parent.createElement('div', {\n      className: 'e-cell-wrap'\n    });\n    var content = '<div class=\"e-rte-field\"><input type=\"text\" ' + ' data-role =\"none\" id=\"tableColumn\" class=\"e-table-column\"/></div>' + '<div class=\"e-rte-field\"><input type=\"text\" data-role =\"none\" id=\"tableRow\" class=\"e-table-row\" /></div>';\n    var contentElem = parseHtml(content);\n    tableWrap.appendChild(contentElem);\n    this.columnTextBox = new NumericTextBox({\n      format: 'n0',\n      min: 1,\n      value: 3,\n      placeholder: tableColumn,\n      floatLabelType: 'Auto',\n      max: 50,\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale\n    });\n    this.columnTextBox.isStringTemplate = true;\n    this.columnTextBox.appendTo(tableWrap.querySelector('#tableColumn'));\n    this.rowTextBox = new NumericTextBox({\n      format: 'n0',\n      min: 1,\n      value: 3,\n      placeholder: tableRow,\n      floatLabelType: 'Auto',\n      max: 50,\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale\n    });\n    this.rowTextBox.isStringTemplate = true;\n    this.rowTextBox.appendTo(tableWrap.querySelector('#tableRow'));\n    return tableWrap;\n  };\n\n  Table.prototype.clearDialogObj = function () {\n    if (this.editdlgObj) {\n      this.editdlgObj.destroy();\n      detach(this.editdlgObj.element);\n      this.editdlgObj = null;\n    }\n  }; // eslint-disable-next-line\n\n\n  Table.prototype.createDialog = function (args) {\n    var _this = this;\n\n    if (this.editdlgObj) {\n      this.editdlgObj.hide({\n        returnValue: true\n      });\n      return;\n    }\n\n    var tableDialog = this.parent.createElement('div', {\n      className: 'e-rte-edit-table',\n      id: this.rteID + '_tabledialog'\n    });\n    this.parent.element.appendChild(tableDialog);\n    var insert = this.l10n.getConstant('dialogInsert');\n    var cancel = this.l10n.getConstant('dialogCancel');\n    var header = this.l10n.getConstant('tabledialogHeader');\n    var dialogModel = {\n      header: header,\n      cssClass: classes.CLS_RTE_ELEMENTS,\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale,\n      showCloseIcon: true,\n      closeOnEscape: true,\n      width: Browser.isDevice ? '290px' : '340px',\n      height: 'initial',\n      position: {\n        X: 'center',\n        Y: Browser.isDevice ? 'center' : 'top'\n      },\n      isModal: Browser.isDevice,\n      buttons: [{\n        buttonModel: {\n          content: insert,\n          cssClass: 'e-flat e-insert-table',\n          isPrimary: true\n        }\n      }, {\n        click: function (e) {\n          _this.cancelDialog(e);\n        },\n        buttonModel: {\n          cssClass: 'e-flat e-cancel',\n          content: cancel\n        }\n      }],\n      target: Browser.isDevice ? document.body : this.parent.element,\n      animationSettings: {\n        effect: 'None'\n      },\n      close: function (event) {\n        _this.parent.isBlur = false;\n\n        _this.editdlgObj.destroy();\n\n        detach(_this.editdlgObj.element);\n\n        _this.dialogRenderObj.close(event);\n\n        _this.editdlgObj = null;\n      }\n    };\n    this.editdlgObj = this.dialogRenderObj.render(dialogModel);\n    this.editdlgObj.appendTo(tableDialog);\n\n    if (this.quickToolObj && this.quickToolObj.inlineQTBar && document.body.contains(this.quickToolObj.inlineQTBar.element)) {\n      this.quickToolObj.inlineQTBar.hidePopup();\n    }\n  };\n\n  Table.prototype.customTable = function (args, e) {\n    var proxy = this.self ? this.self : this;\n\n    if (proxy.rowTextBox.value && proxy.columnTextBox.value) {\n      var argument = Browser.isDevice || !isNullOrUndefined(args.args) && !isNullOrUndefined(args.args.originalEvent) && args.args.originalEvent.action === 'insert-table' || proxy.parent.inlineMode.enable ? args : this;\n      proxy.tableInsert(proxy.rowTextBox.value, proxy.columnTextBox.value, e, argument);\n    }\n  }; // eslint-disable-next-line\n\n\n  Table.prototype.cancelDialog = function (e) {\n    this.parent.isBlur = false;\n    this.editdlgObj.hide({\n      returnValue: true\n    });\n  }; // eslint-disable-next-line\n\n\n  Table.prototype.applyProperties = function (args, e) {\n    var dialogEle = this.editdlgObj.element;\n    var table = closest(args.selectNode[0], 'table');\n    table.style.width = dialogEle.querySelector('.e-table-width').value + 'px';\n\n    if (dialogEle.querySelector('.e-cell-padding').value !== '') {\n      var tdElm = table.querySelectorAll('td');\n\n      for (var i = 0; i < tdElm.length; i++) {\n        var padVal = '';\n\n        if (tdElm[i].style.padding === '') {\n          padVal = tdElm[i].getAttribute('style') + ' padding:' + dialogEle.querySelector('.e-cell-padding').value + 'px;';\n        } else {\n          tdElm[i].style.padding = dialogEle.querySelector('.e-cell-padding').value + 'px';\n          padVal = tdElm[i].getAttribute('style');\n        }\n\n        tdElm[i].setAttribute('style', padVal);\n      }\n    }\n\n    table.cellSpacing = dialogEle.querySelector('.e-cell-spacing').value;\n\n    if (!isNOU(table.cellSpacing) || table.cellSpacing !== '0') {\n      addClass([table], classes.CLS_TABLE_BORDER);\n    } else {\n      removeClass([table], classes.CLS_TABLE_BORDER);\n    }\n\n    this.parent.formatter.saveData();\n    this.editdlgObj.hide({\n      returnValue: true\n    });\n  };\n\n  Table.prototype.tableDlgContent = function (e) {\n    var selectNode = e.selectParent[0];\n    var tableWidth = this.l10n.getConstant('tableWidth');\n    var cellPadding = this.l10n.getConstant('cellpadding');\n    var cellSpacing = this.l10n.getConstant('cellspacing');\n    var tableWrap = this.parent.createElement('div', {\n      className: 'e-table-sizewrap'\n    });\n    var widthVal = closest(selectNode, 'table').getClientRects()[0].width;\n    var padVal = closest(selectNode, 'td').style.padding;\n    var brdSpcVal = closest(selectNode, 'table').getAttribute('cellspacing');\n    var content = '<div class=\"e-rte-field\"><input type=\"text\" data-role =\"none\" id=\"tableWidth\" class=\"e-table-width\" ' + ' /></div>' + '<div class=\"e-rte-field\"><input type=\"text\" data-role =\"none\" id=\"cellPadding\" class=\"e-cell-padding\" />' + ' </div><div class=\"e-rte-field\"><input type=\"text\" data-role =\"none\" id=\"cellSpacing\" class=\"e-cell-spacing\" /></div>';\n    var contentElem = parseHtml(content);\n    tableWrap.appendChild(contentElem);\n    var widthNum = new NumericTextBox({\n      format: 'n0',\n      min: 0,\n      value: widthVal,\n      placeholder: tableWidth,\n      floatLabelType: 'Auto',\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale\n    });\n    widthNum.isStringTemplate = true;\n    widthNum.appendTo(tableWrap.querySelector('#tableWidth'));\n    var padding = new NumericTextBox({\n      format: 'n0',\n      min: 0,\n      // eslint-disable-next-line\n      value: padVal !== '' ? parseInt(padVal, null) : 0,\n      placeholder: cellPadding,\n      floatLabelType: 'Auto',\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale\n    });\n    padding.isStringTemplate = true;\n    padding.appendTo(tableWrap.querySelector('#cellPadding'));\n    var spacing = new NumericTextBox({\n      format: 'n0',\n      min: 0,\n      // eslint-disable-next-line\n      value: brdSpcVal !== '' && !isNOU(brdSpcVal) ? parseInt(brdSpcVal, null) : 0,\n      placeholder: cellSpacing,\n      floatLabelType: 'Auto',\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale\n    });\n    spacing.isStringTemplate = true;\n    spacing.appendTo(tableWrap.querySelector('#cellSpacing'));\n    return tableWrap;\n  };\n  /**\n   * Destroys the ToolBar.\n   *\n   * @function destroy\n   * @returns {void}\n   * @hidden\n    */\n\n\n  Table.prototype.destroy = function () {\n    this.removeEventListener();\n  };\n  /**\n   * For internal use only - Get the module name.\n   *\n   * @returns {void}\n   */\n\n\n  Table.prototype.getModuleName = function () {\n    return 'table';\n  };\n\n  return Table;\n}();\n\nexport { Table };","map":{"version":3,"sources":["/Users/yasaman/Documents/moj_adminpanel/adminpanel/node_modules/@syncfusion/ej2-richtexteditor/src/rich-text-editor/renderer/table-module.js"],"names":["detach","closest","Browser","isNullOrUndefined","isNOU","EventHandler","addClass","removeClass","Popup","Button","events","RenderType","NumericTextBox","classes","dispatchEvent","parseHtml","hasClass","Table","parent","serviceLocator","ensureInsideTableList","pageX","pageY","moveEle","rteID","element","id","l10n","getService","rendererFactory","dialogRenderObj","addEventListener","prototype","isDestroyed","on","createTable","renderDlgContent","initialEnd","afterRender","dynamicModule","showTableDialog","showDialog","closeTableDialog","closeDialog","docClick","editAreaClick","editAreaClickHandler","clearDialogObj","tableToolbarAction","onToolbarAction","dropDownSelect","dropdownSelect","keyDown","mouseUp","selectionTable","destroy","removeEventListener","off","mouseDown","cellSelect","tableColorPickerChanged","setBGColor","e","target","args","info","name","tagName","contentModule","getEditPanel","setAttribute","getRenderer","Content","tableSettings","resize","add","touchStartEvent","resizeStart","isDevice","resizeHelper","item","document","body","contains","querySelector","command","range","formatter","editorManager","nodeSelection","getRange","getDocument","selection","save","selectParent","getParentNodeCollection","subCommand","addRow","addColumn","removeRowColumn","verticalAlign","tableStyles","UpdateCells","selectCell","process","hideTableQuickToolbar","event","proxy","action","openDialog","preventDefault","code","ele","parentElement","keyCode","ctrlKey","removeTable","querySelectorAll","length","removeResizeElement","closestTd","inputElement","tabSelection","tableArrowNavigation","isInternal","focus","editorMode","docElement","originalEvent","insertTableDialog","self","editdlgObj","hide","returnValue","tableHeader","editTable","tdEle","tableCell","table","classList","CLS_TB_DASH_BOR","remove","CLS_TB_ALT_BOR","cssClass","split","i","saveData","restore","insideList","blockNodes","domNode","nodes","parentNode","push","childNodes","startOffset","endOffset","startContainer","nodeType","CLS_TABLE_SEL","shiftKey","nextElement","nextSibling","nodeName","toLowerCase","rows","cells","textContent","trim","setSelectionNode","setSelectionText","firstChild","prevElement","previousSibling","cellIndex","tHead","clsTble","selText","nextElementSibling","children","previousElementSibling","selectedCells","curTable","style","backgroundColor","value","quickToolObj","tableQTBar","hidePopup","readonly","showOnRightClick","quickToolbarSettings","which","quickToolbarModule","isPopupOpen","closestTable","startNode","endNode","endContainer","collapsed","range_1","Clear","iframeSettings","enable","window","pageYOffset","getBoundingClientRect","top","clientY","showPopup","tableCellSelect","row","Array","slice","call","indexOf","col","list","dlgDiv","forEach","parentIndex","tblHeader","innerHTML","tableMouseUp","tableMove","tableCellLeave","tableCellClick","tableInsert","selectionObj","ownerDocument","getPanel","columns","width","minWidth","maxWidth","popupObj","tdNode","activeCell","helper","observer","notify","selectNode","targetTouches","removeHelper","cancelResizeAction","tableResizeEleCreation","preventDefaultResize","calMaxCol","height","parseInt","getComputedStyle","pos","calcPos","colReEle","createElement","attrs","toString","CLS_RTE_TABLE_RESIZE","CLS_TB_COL_RES","cssText","left","appendChild","rowReEle","CLS_TB_ROW_RES","rowPosLeft","getAttribute","offsetHeight","tableReBox","className","CLS_TB_BOX_RES","elem","parentOffset","offset","doc","offsetParent","documentElement","position","offsetTop","offsetLeft","getPointX","touches","getPointY","_this","resizeBtnInit","resizeBtnStat","column","columnEle","colIndex","appendHelper","rowEle","tableBox","requestType","trigger","resizeStartArgs","cancel","touchMoveEvent","resizing","touchEndEvent","resizeEnd","cls","setHelperHeight","updateHelper","top_1","max","maxRowIndex","mouseX","enableRtl","mouseY","onResize","resizingArgs","tableWidth","tableHeight","paddingSize","paddingRight","match","join","rteWidth","offsetWidth","cellColl","parseFloat","actualwid","totalwid","leftColumnWidth","rightColWidth","convertPixelToPercentage","clientHeight","widthType","offsetValue","resizeStop","tabkey","cmd","delKey","inlineMode","header","insertbtn","getConstant","tableDiv","drawTable","btnEle","type","tabindex","getToolbarElement","button","iconCss","content","locale","isStringTemplate","appendTo","getToolbar","targetType","relateTo","collision","X","Y","offsetY","viewPortElement","zIndex","close","isBlur","refreshPosition","closestEle","isExist","isIE","rowDiv","display","createDialog","editContent","tableDlgContent","update","editHeader","setProperties","buttons","click","applyProperties","bind","buttonModel","isPrimary","cancelDialog","maxHeight","dlgContent","tableCellDlgContent","insert","customTable","tableColumn","tableRow","tableWrap","contentElem","columnTextBox","format","min","placeholder","floatLabelType","rowTextBox","tableDialog","dialogModel","CLS_RTE_ELEMENTS","showCloseIcon","closeOnEscape","isModal","animationSettings","effect","render","inlineQTBar","argument","dialogEle","tdElm","padVal","padding","cellSpacing","CLS_TABLE_BORDER","cellPadding","widthVal","getClientRects","brdSpcVal","widthNum","spacing","getModuleName"],"mappings":"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","sourcesContent":["import { detach, closest, Browser, isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, EventHandler, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport * as classes from '../base/classes';\nimport { dispatchEvent, parseHtml, hasClass } from '../base/util';\n/**\n * `Table` module is used to handle table actions.\n */\nvar Table = /** @class */ (function () {\n    function Table(parent, serviceLocator) {\n        this.ensureInsideTableList = true;\n        this.pageX = null;\n        this.pageY = null;\n        this.moveEle = null;\n        this.parent = parent;\n        this.rteID = parent.element.id;\n        this.l10n = serviceLocator.getService('rteLocale');\n        this.rendererFactory = serviceLocator.getService('rendererFactory');\n        this.dialogRenderObj = serviceLocator.getService('dialogRenderObject');\n        this.addEventListener();\n    }\n    Table.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.createTable, this.renderDlgContent, this);\n        this.parent.on(events.initialEnd, this.afterRender, this);\n        this.parent.on(events.dynamicModule, this.afterRender, this);\n        this.parent.on(events.showTableDialog, this.showDialog, this);\n        this.parent.on(events.closeTableDialog, this.closeDialog, this);\n        this.parent.on(events.docClick, this.docClick, this);\n        this.parent.on(events.editAreaClick, this.editAreaClickHandler, this);\n        this.parent.on(events.clearDialogObj, this.clearDialogObj, this);\n        this.parent.on(events.tableToolbarAction, this.onToolbarAction, this);\n        this.parent.on(events.dropDownSelect, this.dropdownSelect, this);\n        this.parent.on(events.keyDown, this.keyDown, this);\n        this.parent.on(events.mouseUp, this.selectionTable, this);\n        this.parent.on(events.destroy, this.destroy, this);\n    };\n    Table.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.createTable, this.renderDlgContent);\n        this.parent.off(events.initialEnd, this.afterRender);\n        this.parent.off(events.dynamicModule, this.afterRender);\n        this.parent.off(events.docClick, this.docClick);\n        this.parent.off(events.showTableDialog, this.showDialog);\n        this.parent.off(events.closeTableDialog, this.closeDialog);\n        this.parent.off(events.editAreaClick, this.editAreaClickHandler);\n        this.parent.off(events.clearDialogObj, this.clearDialogObj);\n        this.parent.off(events.tableToolbarAction, this.onToolbarAction);\n        this.parent.off(events.dropDownSelect, this.dropdownSelect);\n        this.parent.off(events.mouseDown, this.cellSelect);\n        this.parent.off(events.tableColorPickerChanged, this.setBGColor);\n        this.parent.off(events.keyDown, this.keyDown);\n        this.parent.off(events.mouseUp, this.selectionTable);\n        this.parent.off(events.destroy, this.destroy);\n    };\n    Table.prototype.selectionTable = function (e) {\n        var target = e.args.target;\n        if (Browser.info.name === 'mozilla' && !isNOU(closest(target, 'table')) && closest(target, 'table').tagName === 'TABLE') {\n            this.parent.contentModule.getEditPanel().setAttribute('contenteditable', 'true');\n        }\n    };\n    Table.prototype.afterRender = function () {\n        if (isNullOrUndefined(this.contentModule)) {\n            this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n            this.parent.on(events.tableColorPickerChanged, this.setBGColor, this);\n            this.parent.on(events.mouseDown, this.cellSelect, this);\n            if (this.parent.tableSettings.resize) {\n                EventHandler.add(this.parent.contentModule.getEditPanel(), Browser.touchStartEvent, this.resizeStart, this);\n            }\n            if (!Browser.isDevice && this.parent.tableSettings.resize) {\n                EventHandler.add(this.contentModule.getEditPanel(), 'mouseover', this.resizeHelper, this);\n            }\n        }\n    };\n    Table.prototype.dropdownSelect = function (e) {\n        var item = e.item;\n        if (!document.body.contains(document.body.querySelector('.e-rte-quick-toolbar')) || item.command !== 'Table') {\n            return;\n        }\n        var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n        var args = {\n            args: e,\n            selection: this.parent.formatter.editorManager.nodeSelection.save(range, this.contentModule.getDocument()),\n            selectParent: this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range)\n        };\n        switch (item.subCommand) {\n            case 'InsertRowBefore':\n            case 'InsertRowAfter':\n                this.addRow(args.selection, e);\n                break;\n            case 'InsertColumnLeft':\n            case 'InsertColumnRight':\n                this.addColumn(args.selection, e);\n                break;\n            case 'DeleteColumn':\n            case 'DeleteRow':\n                this.removeRowColumn(args.selection, e);\n                break;\n            case 'AlignTop':\n            case 'AlignMiddle':\n            case 'AlignBottom':\n                this.verticalAlign(args, e);\n                break;\n            case 'Dashed':\n            case 'Alternate':\n            case 'Custom':\n                this.tableStyles(args, item.subCommand);\n                break;\n            case 'Merge':\n            case 'VerticalSplit':\n            case 'HorizontalSplit':\n                this.UpdateCells(args.selection, e);\n                break;\n        }\n    };\n    Table.prototype.UpdateCells = function (selectCell, e) {\n        this.parent.formatter.process(this.parent, e, e, { selection: selectCell, subCommand: e.item.subCommand });\n        this.hideTableQuickToolbar();\n    };\n    Table.prototype.keyDown = function (e) {\n        var event = e.args;\n        // eslint-disable-next-line\n        var proxy = this;\n        switch (event.action) {\n            case 'escape':\n                break;\n            case 'insert-table':\n                this.openDialog(true, e);\n                event.preventDefault();\n                break;\n        }\n        if (!isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection) && this.contentModule\n            && event.code !== 'KeyK') {\n            var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());\n            var selection = this.parent.formatter.editorManager.\n                nodeSelection.save(range, this.contentModule.getDocument());\n            var ele = this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(range)[0];\n            ele = (ele && ele.tagName !== 'TD' && ele.tagName !== 'TH') ? ele.parentElement : ele;\n            if ((event.keyCode === 8 || event.keyCode === 46) ||\n                (event.ctrlKey && event.keyCode === 88)) {\n                if (ele && ele.tagName === 'TBODY') {\n                    event.preventDefault();\n                    proxy.removeTable(selection, event, true);\n                }\n                else if (ele && ele.querySelectorAll('table').length > 0) {\n                    this.removeResizeElement();\n                }\n            }\n            if (ele && ele.tagName !== 'TD' && ele.tagName !== 'TH') {\n                var closestTd = closest(ele, 'td');\n                ele = !isNullOrUndefined(closestTd) && this.parent.inputElement.contains(closestTd) ? closestTd : ele;\n            }\n            if (ele && (ele.tagName === 'TD' || ele.tagName === 'TH')) {\n                switch (event.keyCode) {\n                    case 9:\n                    case 37:\n                    case 39:\n                        proxy.tabSelection(event, selection, ele);\n                        break;\n                    case 40:\n                    case 38:\n                        proxy.tableArrowNavigation(event, selection, ele);\n                        break;\n                }\n            }\n        }\n    };\n    Table.prototype.openDialog = function (isInternal, e) {\n        if (!isInternal) {\n            this.parent.contentModule.getEditPanel().focus();\n        }\n        if (this.parent.editorMode === 'HTML') {\n            var docElement = this.parent.contentModule.getDocument();\n            var range = this.parent.formatter.editorManager.nodeSelection.getRange(docElement);\n            var selection = this.parent.formatter.editorManager.nodeSelection.save(range, docElement);\n            var args = {\n                originalEvent: e ? e.args : { action: 'insert-table' },\n                item: {\n                    command: 'Table',\n                    subCommand: 'CreateTable'\n                }\n            };\n            this.insertTableDialog({ self: this, args: args, selection: selection });\n        }\n    };\n    Table.prototype.showDialog = function () {\n        this.openDialog(false);\n    };\n    Table.prototype.closeDialog = function () {\n        if (this.editdlgObj) {\n            this.editdlgObj.hide({ returnValue: true });\n        }\n    };\n    Table.prototype.onToolbarAction = function (args) {\n        var item = args.args.item;\n        switch (item.subCommand) {\n            case 'TableHeader':\n                this.tableHeader(args.selection, args.args);\n                break;\n            case 'TableRemove':\n                this.removeTable(args.selection, args.args);\n                break;\n            case 'TableEditProperties':\n                this.editTable(args);\n                break;\n        }\n    };\n    Table.prototype.verticalAlign = function (args, e) {\n        var tdEle = closest(args.selectParent[0], 'td') || closest(args.selectParent[0], 'th');\n        if (tdEle) {\n            this.parent.formatter.process(this.parent, e, e, { tableCell: tdEle, subCommand: e.item.subCommand });\n        }\n    };\n    Table.prototype.tableStyles = function (args, command) {\n        var table = closest(args.selectParent[0], 'table');\n        if (command === 'Dashed') {\n            /* eslint-disable */\n            (this.parent.element.classList.contains(classes.CLS_TB_DASH_BOR)) ?\n                this.parent.element.classList.remove(classes.CLS_TB_DASH_BOR) : this.parent.element.classList.add(classes.CLS_TB_DASH_BOR);\n            (table.classList.contains(classes.CLS_TB_DASH_BOR)) ? table.classList.remove(classes.CLS_TB_DASH_BOR) :\n                table.classList.add(classes.CLS_TB_DASH_BOR);\n        }\n        if (command === 'Alternate') {\n            (this.parent.element.classList.contains(classes.CLS_TB_ALT_BOR)) ?\n                this.parent.element.classList.remove(classes.CLS_TB_ALT_BOR) : this.parent.element.classList.add(classes.CLS_TB_ALT_BOR);\n            (table.classList.contains(classes.CLS_TB_ALT_BOR)) ? table.classList.remove(classes.CLS_TB_ALT_BOR) :\n                table.classList.add(classes.CLS_TB_ALT_BOR);\n            /* eslint-enable */\n        }\n        if (args.args && args.args.item.cssClass) {\n            var classList = args.args.item.cssClass.split(' ');\n            for (var i = 0; i < classList.length; i++) {\n                if (table.classList.contains(classList[i])) {\n                    table.classList.remove(classList[i]);\n                }\n                else {\n                    table.classList.add(classList[i]);\n                }\n            }\n        }\n        this.parent.formatter.saveData();\n        this.parent.formatter.editorManager.nodeSelection.restore();\n    };\n    Table.prototype.insideList = function (range) {\n        var blockNodes = this.parent.formatter.editorManager.domNode.blockNodes();\n        var nodes = [];\n        for (var i = 0; i < blockNodes.length; i++) {\n            if (blockNodes[i].parentNode.tagName === 'LI') {\n                nodes.push(blockNodes[i].parentNode);\n            }\n            else if (blockNodes[i].tagName === 'LI' && blockNodes[i].childNodes[0].tagName !== 'P' &&\n                (blockNodes[i].childNodes[0].tagName !== 'OL' &&\n                    blockNodes[i].childNodes[0].tagName !== 'UL')) {\n                nodes.push(blockNodes[i]);\n            }\n        }\n        if (nodes.length > 1 || nodes.length && ((range.startOffset === 0 && range.endOffset === 0))) {\n            this.ensureInsideTableList = true;\n            return true;\n        }\n        else {\n            this.ensureInsideTableList = false;\n            return false;\n        }\n    };\n    Table.prototype.tabSelection = function (event, selection, ele) {\n        var insideList = this.insideList(selection.range);\n        if ((event.keyCode === 37 || event.keyCode === 39) && selection.range.startContainer.nodeType === 3 ||\n            insideList) {\n            return;\n        }\n        event.preventDefault();\n        ele.classList.remove(classes.CLS_TABLE_SEL);\n        if (!event.shiftKey && event.keyCode !== 37) {\n            var nextElement = (!isNullOrUndefined(ele.nextSibling)) ? ele.nextSibling :\n                (!isNullOrUndefined(closest(ele, 'tr').nextSibling) ? closest(ele, 'tr').nextSibling.childNodes[0] :\n                    (!isNullOrUndefined(closest(ele, 'table').nextSibling)) ?\n                        (closest(ele, 'table').nextSibling.nodeName.toLowerCase() === 'td') ?\n                            closest(ele, 'table').nextSibling : ele : ele);\n            if (ele === nextElement && ele.nodeName === 'TH') {\n                nextElement = closest(ele, 'table').rows[1].cells[0];\n            }\n            if (event.keyCode === 39 && ele === nextElement) {\n                nextElement = closest(ele, 'table').nextSibling;\n            }\n            if (nextElement) {\n                // eslint-disable-next-line\n                (nextElement.textContent.trim() !== '' && closest(nextElement, 'td')) ?\n                    selection.setSelectionNode(this.contentModule.getDocument(), nextElement) :\n                    selection.setSelectionText(this.contentModule.getDocument(), nextElement, nextElement, 0, 0);\n            }\n            if (ele === nextElement && event.keyCode !== 39 && nextElement) {\n                ele.classList.add(classes.CLS_TABLE_SEL);\n                this.addRow(selection, event, true);\n                ele.classList.remove(classes.CLS_TABLE_SEL);\n                nextElement = nextElement.parentElement.nextSibling.firstChild;\n                // eslint-disable-next-line\n                (nextElement.textContent.trim() !== '' && closest(nextElement, 'td')) ?\n                    selection.setSelectionNode(this.contentModule.getDocument(), nextElement) :\n                    selection.setSelectionText(this.contentModule.getDocument(), nextElement, nextElement, 0, 0);\n            }\n        }\n        else {\n            var prevElement = (!isNullOrUndefined(ele.previousSibling)) ? ele.previousSibling :\n                (!isNullOrUndefined(closest(ele, 'tr').previousSibling) ?\n                    closest(ele, 'tr').previousSibling.childNodes[closest(ele, 'tr').previousSibling.childNodes.length - 1] :\n                    (!isNullOrUndefined(closest(ele, 'table').previousSibling)) ?\n                        (closest(ele, 'table').previousSibling.nodeName.toLowerCase() === 'td') ? closest(ele, 'table').previousSibling :\n                            ele : ele);\n            if (ele === prevElement && ele.cellIndex === 0 &&\n                closest(ele, 'table').tHead) {\n                var clsTble = closest(ele, 'table');\n                prevElement = clsTble.rows[0].cells[clsTble.rows[0].cells.length - 1];\n            }\n            if (event.keyCode === 37 && ele === prevElement) {\n                prevElement = closest(ele, 'table').previousSibling;\n            }\n            if (prevElement) {\n                // eslint-disable-next-line\n                (prevElement.textContent.trim() !== '' && closest(prevElement, 'td')) ?\n                    selection.setSelectionNode(this.contentModule.getDocument(), prevElement) :\n                    selection.setSelectionText(this.contentModule.getDocument(), prevElement, prevElement, 0, 0);\n            }\n        }\n    };\n    Table.prototype.tableArrowNavigation = function (event, selection, ele) {\n        var selText = selection.range.startContainer;\n        if ((event.keyCode === 40 && selText.nodeType === 3 && (selText.nextSibling && selText.nextSibling.nodeName === 'BR' ||\n            selText.parentNode && selText.parentNode.nodeName !== 'TD')) ||\n            (event.keyCode === 38 && selText.nodeType === 3 && (selText.previousSibling && selText.previousSibling.nodeName === 'BR' ||\n                selText.parentNode && selText.parentNode.nodeName !== 'TD'))) {\n            return;\n        }\n        event.preventDefault();\n        ele.classList.remove(classes.CLS_TABLE_SEL);\n        if (event.keyCode === 40) {\n            ele = (!isNullOrUndefined(closest(ele, 'tr').nextElementSibling)) ?\n                closest(ele, 'tr').nextElementSibling.children[ele.cellIndex] :\n                (closest(ele, 'table').tHead && ele.nodeName === 'TH') ?\n                    closest(ele, 'table').rows[1].cells[ele.cellIndex] :\n                    (!isNullOrUndefined(closest(ele, 'table').nextSibling)) ? closest(ele, 'table').nextSibling :\n                        ele;\n        }\n        else {\n            ele = (!isNullOrUndefined(closest(ele, 'tr').previousElementSibling)) ?\n                closest(ele, 'tr').previousElementSibling.children[ele.cellIndex] :\n                (closest(ele, 'table').tHead && ele.nodeName !== 'TH') ?\n                    closest(ele, 'table').tHead.rows[0].cells[ele.cellIndex] :\n                    (!isNullOrUndefined(closest(ele, 'table').previousSibling)) ? closest(ele, 'table').previousSibling :\n                        ele;\n        }\n        if (ele) {\n            selection.setSelectionText(this.contentModule.getDocument(), ele, ele, 0, 0);\n        }\n    };\n    Table.prototype.setBGColor = function (args) {\n        var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());\n        // eslint-disable-next-line\n        var selection = this.parent.formatter.editorManager.nodeSelection.save(range, this.contentModule.getDocument());\n        // eslint-disable-next-line\n        var selectedCells = this.curTable.querySelectorAll('.e-cell-select');\n        for (var i = 0; i < selectedCells.length; i++) {\n            selectedCells[i].style.backgroundColor = args.item.value;\n        }\n        this.parent.formatter.saveData();\n    };\n    Table.prototype.hideTableQuickToolbar = function () {\n        if (this.quickToolObj && this.quickToolObj.tableQTBar && document.body.contains(this.quickToolObj.tableQTBar.element)) {\n            this.quickToolObj.tableQTBar.hidePopup();\n        }\n    };\n    Table.prototype.tableHeader = function (selection, e) {\n        this.parent.formatter.process(this.parent, e, e.originalEvent, { selection: selection, subCommand: e.item.subCommand });\n    };\n    Table.prototype.editAreaClickHandler = function (e) {\n        if (this.parent.readonly || !isNOU(closest(e.args.target, '.e-img-caption'))) {\n            return;\n        }\n        var args = e.args;\n        var showOnRightClick = this.parent.quickToolbarSettings.showOnRightClick;\n        if (args.which === 2 || (showOnRightClick && args.which === 1) || (!showOnRightClick && args.which === 3)) {\n            return;\n        }\n        if (this.parent.editorMode === 'HTML' && this.parent.quickToolbarModule && this.parent.quickToolbarModule.tableQTBar) {\n            this.quickToolObj = this.parent.quickToolbarModule;\n            var target = args.target;\n            this.contentModule = this.rendererFactory.getRenderer(RenderType.Content);\n            var isPopupOpen = this.quickToolObj.tableQTBar.element.classList.contains('e-rte-pop');\n            if (isPopupOpen) {\n                return;\n            }\n            var range = this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());\n            var closestTable = closest(target, 'table');\n            var startNode = this.parent.getRange().startContainer.parentElement;\n            var endNode = this.parent.getRange().endContainer.parentElement;\n            if (target && target.nodeName !== 'A' && target.nodeName !== 'IMG' && startNode === endNode && (target.nodeName === 'TD' || target.nodeName === 'TH' ||\n                target.nodeName === 'TABLE' || (closestTable && this.parent.contentModule.getEditPanel().contains(closestTable)))\n                && !(range.startContainer.nodeType === 3 && !range.collapsed)) {\n                var range_1 = this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());\n                this.parent.formatter.editorManager.nodeSelection.save(range_1, this.contentModule.getDocument());\n                this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());\n                var pageY = (this.parent.iframeSettings.enable) ? window.pageYOffset +\n                    this.parent.element.getBoundingClientRect().top + args.clientY : args.pageY;\n                this.quickToolObj.tableQTBar.showPopup(args.pageX, pageY, target);\n                this.parent.formatter.editorManager.nodeSelection.restore();\n            }\n            else {\n                this.hideTableQuickToolbar();\n            }\n        }\n    };\n    Table.prototype.tableCellSelect = function (e) {\n        var target = e.target;\n        var row = Array.prototype.slice.call(target.parentElement.parentElement.children).indexOf(target.parentElement);\n        var col = Array.prototype.slice.call(target.parentElement.children).indexOf(target);\n        var list = this.dlgDiv.querySelectorAll('.e-rte-tablecell');\n        Array.prototype.forEach.call(list, function (item) {\n            var parentIndex = Array.prototype.slice.call(item.parentElement.parentElement.children).indexOf(item.parentElement);\n            var cellIndex = Array.prototype.slice.call(item.parentElement.children).indexOf(item);\n            removeClass([item], 'e-active');\n            if (parentIndex <= row && cellIndex <= col) {\n                addClass([item], 'e-active');\n            }\n        });\n        this.tblHeader.innerHTML = (col + 1) + 'x' + (row + 1);\n    };\n    // eslint-disable-next-line\n    Table.prototype.tableMouseUp = function (e) {\n        EventHandler.remove(this.curTable, 'mousemove', this.tableMove);\n    };\n    // eslint-disable-next-line\n    Table.prototype.tableCellLeave = function (e) {\n        removeClass(this.dlgDiv.querySelectorAll('.e-rte-tablecell'), 'e-active');\n        addClass([this.dlgDiv.querySelector('.e-rte-tablecell')], 'e-active');\n        this.tblHeader.innerHTML = 1 + 'x' + 1;\n    };\n    Table.prototype.tableCellClick = function (e) {\n        var target = e.target;\n        var row = Array.prototype.slice.call(target.parentElement.parentElement.children).indexOf(target.parentElement) + 1;\n        var col = Array.prototype.slice.call(target.parentElement.children).indexOf(target) + 1;\n        this.self.tableInsert(row, col, e, this);\n    };\n    Table.prototype.tableInsert = function (row, col, e, selectionObj) {\n        var proxy = (selectionObj.self) ? selectionObj.self : this;\n        var startContainer = selectionObj.selection.range.startContainer;\n        if (startContainer.nodeName === 'P' && startContainer.textContent.trim() === '' && !(startContainer.childNodes.length > 0)) {\n            startContainer.innerHTML = '<br />';\n        }\n        var parentNode = startContainer.parentNode;\n        if (proxy.parent.editorMode === 'HTML' &&\n            ((proxy.parent.iframeSettings.enable && !hasClass(parentNode.ownerDocument.querySelector('body'), 'e-lib')) ||\n                // eslint-disable-next-line\n                (!proxy.parent.iframeSettings.enable && isNOU(closest(parentNode, '[id=' + \"'\" + proxy.contentModule.getPanel().id + \"'\" + ']'))))) {\n            proxy.contentModule.getEditPanel().focus();\n            var range = proxy.parent.formatter.editorManager.nodeSelection.getRange(proxy.contentModule.getDocument());\n            selectionObj.selection = proxy.parent.formatter.editorManager.nodeSelection.save(range, proxy.contentModule.getDocument());\n        }\n        var value = {\n            rows: row, columns: col, width: {\n                minWidth: proxy.parent.tableSettings.minWidth,\n                maxWidth: proxy.parent.tableSettings.maxWidth,\n                width: proxy.parent.tableSettings.width\n            },\n            selection: selectionObj.selection\n        };\n        if (proxy.popupObj) {\n            proxy.popupObj.hide();\n        }\n        if (proxy.editdlgObj) {\n            proxy.editdlgObj.hide();\n        }\n        proxy.parent.formatter.process(proxy.parent, selectionObj.args, selectionObj.args.originalEvent, value);\n        proxy.contentModule.getEditPanel().focus();\n        proxy.parent.on(events.mouseDown, proxy.cellSelect, proxy);\n    };\n    Table.prototype.cellSelect = function (e) {\n        var target = e.args.target;\n        var tdNode = closest(target, 'td,th');\n        target = (target.nodeName !== 'TD' && tdNode && this.parent.contentModule.getEditPanel().contains(tdNode)) ?\n            tdNode : target;\n        removeClass(this.contentModule.getEditPanel().querySelectorAll('table td, table th'), classes.CLS_TABLE_SEL);\n        if (target && (target.tagName === 'TD' || target.tagName === 'TH')) {\n            addClass([target], classes.CLS_TABLE_SEL);\n            this.activeCell = target;\n            this.curTable = (this.curTable) ? this.curTable : closest(target, 'table');\n            EventHandler.add(this.curTable, 'mousemove', this.tableMove, this);\n            EventHandler.add(this.curTable, 'mouseup', this.tableMouseUp, this);\n            this.removeResizeElement();\n            if (this.helper && this.contentModule.getEditPanel().contains(this.helper)) {\n                detach(this.helper);\n            }\n        }\n        if (Browser.info.name === 'mozilla' && !isNOU(closest(target, 'table')) &&\n            closest(target, 'table').tagName === 'TABLE') {\n            this.parent.contentModule.getEditPanel().setAttribute('contenteditable', 'false');\n        }\n    };\n    Table.prototype.tableMove = function (event) {\n        this.parent.formatter.editorManager.observer.notify('TABLE_MOVE', { event: event, selectNode: [this.activeCell] });\n    };\n    Table.prototype.resizeHelper = function (e) {\n        if (this.parent.readonly) {\n            return;\n        }\n        var target = e.target || e.targetTouches[0].target;\n        var closestTable = closest(target, 'table');\n        if (!isNOU(this.curTable) && !isNOU(closestTable) && closestTable !== this.curTable) {\n            this.removeResizeElement();\n            this.removeHelper(e);\n            this.cancelResizeAction();\n        }\n        if (target.nodeName === 'TABLE' || target.nodeName === 'TD' || target.nodeName === 'TH') {\n            this.curTable = (closestTable && this.parent.contentModule.getEditPanel().contains(closestTable))\n                && (target.nodeName === 'TD' || target.nodeName === 'TH') ?\n                closestTable : target;\n            this.removeResizeElement();\n            this.tableResizeEleCreation(this.curTable, e);\n        }\n    };\n    Table.prototype.tableResizeEleCreation = function (table, e) {\n        this.parent.preventDefaultResize(e);\n        var columns = Array.prototype.slice.call(table.rows[this.calMaxCol(table)].cells, 1);\n        var rows = [];\n        for (var i = 0; i < table.rows.length; i++) {\n            rows.push(Array.prototype.slice.call(table.rows[i].cells, 0, 1)[0]);\n        }\n        var height = parseInt(getComputedStyle(table).height, 10);\n        var width = parseInt(getComputedStyle(table).width, 10);\n        var pos = this.calcPos(table);\n        for (var i = 0; columns.length > i; i++) {\n            var colReEle = this.parent.createElement('span', {\n                attrs: {\n                    'data-col': (i + 1).toString(), 'unselectable': 'on', 'contenteditable': 'false'\n                }\n            });\n            colReEle.classList.add(classes.CLS_RTE_TABLE_RESIZE, classes.CLS_TB_COL_RES);\n            colReEle.style.cssText = 'height: ' + height + 'px; width: 4px; top: ' + pos.top +\n                'px; left:' + (pos.left + this.calcPos(columns[i]).left) + 'px;';\n            this.contentModule.getEditPanel().appendChild(colReEle);\n        }\n        for (var i = 0; rows.length > i; i++) {\n            var rowReEle = this.parent.createElement('span', {\n                attrs: {\n                    'data-row': (i).toString(), 'unselectable': 'on', 'contenteditable': 'false'\n                }\n            });\n            rowReEle.classList.add(classes.CLS_RTE_TABLE_RESIZE, classes.CLS_TB_ROW_RES);\n            var rowPosLeft = !isNOU(table.getAttribute('cellspacing')) || table.getAttribute('cellspacing') !== '' ?\n                0 : this.calcPos(rows[i]).left;\n            rowReEle.style.cssText = 'width: ' + width + 'px; height: 4px; top: ' +\n                (this.calcPos(rows[i]).top + pos.top + rows[i].offsetHeight - 2) +\n                'px; left:' + (rowPosLeft + pos.left) + 'px;';\n            this.contentModule.getEditPanel().appendChild(rowReEle);\n        }\n        var tableReBox = this.parent.createElement('span', {\n            className: classes.CLS_TB_BOX_RES, attrs: {\n                'data-col': columns.length.toString(), 'unselectable': 'on', 'contenteditable': 'false'\n            }\n        });\n        tableReBox.style.cssText = 'top: ' + (pos.top + height - 4) +\n            'px; left:' + (pos.left + width - 4) + 'px;';\n        if (Browser.isDevice) {\n            tableReBox.classList.add('e-rmob');\n        }\n        this.contentModule.getEditPanel().appendChild(tableReBox);\n    };\n    Table.prototype.removeResizeElement = function () {\n        var item = this.parent.contentModule.getEditPanel().\n            querySelectorAll('.e-column-resize, .e-row-resize, .e-table-box');\n        if (item.length > 0) {\n            for (var i = 0; i < item.length; i++) {\n                detach(item[i]);\n            }\n        }\n    };\n    Table.prototype.calcPos = function (elem) {\n        var parentOffset = {\n            top: 0,\n            left: 0\n        };\n        // eslint-disable-next-line\n        var offset = elem.getBoundingClientRect();\n        var doc = elem.ownerDocument;\n        var offsetParent = elem.offsetParent || doc.documentElement;\n        while (offsetParent &&\n            (offsetParent === doc.body || offsetParent === doc.documentElement) &&\n            offsetParent.style.position === 'static') {\n            offsetParent = offsetParent.parentNode;\n        }\n        if (offsetParent.nodeName === 'TD' && elem.nodeName === 'TABLE') {\n            offsetParent = closest(offsetParent, '.e-rte-content');\n        }\n        if (offsetParent && offsetParent !== elem && offsetParent.nodeType === 1) {\n            // eslint-disable-next-line\n            parentOffset = offsetParent.getBoundingClientRect();\n        }\n        return {\n            top: elem.offsetTop,\n            left: elem.offsetLeft\n        };\n    };\n    Table.prototype.getPointX = function (e) {\n        if (e.touches && e.touches.length) {\n            return e.touches[0].pageX;\n        }\n        else {\n            return e.pageX;\n        }\n    };\n    Table.prototype.getPointY = function (e) {\n        if (e.touches && e.touches.length) {\n            return e.touches[0].pageY;\n        }\n        else {\n            return e.pageY;\n        }\n    };\n    Table.prototype.resizeStart = function (e) {\n        var _this = this;\n        if (this.parent.readonly) {\n            return;\n        }\n        if (Browser.isDevice) {\n            this.resizeHelper(e);\n        }\n        var target = e.target;\n        if (target.classList.contains(classes.CLS_TB_COL_RES) ||\n            target.classList.contains(classes.CLS_TB_ROW_RES) ||\n            target.classList.contains(classes.CLS_TB_BOX_RES)) {\n            e.preventDefault();\n            this.parent.preventDefaultResize(e);\n            removeClass(this.curTable.querySelectorAll('td,th'), classes.CLS_TABLE_SEL);\n            this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());\n            this.pageX = this.getPointX(e);\n            this.pageY = this.getPointY(e);\n            this.resizeBtnInit();\n            this.hideTableQuickToolbar();\n            if (target.classList.contains(classes.CLS_TB_COL_RES)) {\n                this.resizeBtnStat.column = true;\n                this.columnEle = this.curTable.rows[this.calMaxCol(this.curTable)].cells[parseInt(target.getAttribute('data-col'), 10)];\n                this.colIndex = this.columnEle.cellIndex;\n                this.moveEle = e.target;\n                this.appendHelper();\n            }\n            if (target.classList.contains(classes.CLS_TB_ROW_RES)) {\n                this.rowEle = this.curTable.rows[parseInt(target.getAttribute('data-row'), 10)];\n                this.resizeBtnStat.row = true;\n                this.appendHelper();\n            }\n            if (target.classList.contains(classes.CLS_TB_BOX_RES)) {\n                this.resizeBtnStat.tableBox = true;\n            }\n            if (Browser.isDevice && this.helper && !this.helper.classList.contains('e-reicon')) {\n                this.helper.classList.add('e-reicon');\n                EventHandler.add(document, Browser.touchStartEvent, this.removeHelper, this);\n                EventHandler.add(this.helper, Browser.touchStartEvent, this.resizeStart, this);\n            }\n            else {\n                var args = { event: e, requestType: 'Table' };\n                this.parent.trigger(events.resizeStart, args, function (resizeStartArgs) {\n                    if (resizeStartArgs.cancel) {\n                        _this.cancelResizeAction();\n                    }\n                });\n            }\n            EventHandler.add(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing, this);\n            EventHandler.add(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd, this);\n        }\n    };\n    Table.prototype.removeHelper = function (e) {\n        var cls = e.target.classList;\n        if (!(cls.contains('e-reicon')) && this.helper) {\n            EventHandler.remove(document, Browser.touchStartEvent, this.removeHelper);\n            EventHandler.remove(this.helper, Browser.touchStartEvent, this.resizeStart);\n            if (this.helper && this.contentModule.getEditPanel().contains(this.helper)) {\n                detach(this.helper);\n            }\n            this.pageX = null;\n            this.helper = null;\n        }\n    };\n    Table.prototype.appendHelper = function () {\n        this.helper = this.parent.createElement('div', {\n            className: 'e-table-rhelper'\n        });\n        if (Browser.isDevice) {\n            this.helper.classList.add('e-reicon');\n        }\n        this.contentModule.getEditPanel().appendChild(this.helper);\n        this.setHelperHeight();\n    };\n    Table.prototype.setHelperHeight = function () {\n        var pos = this.calcPos(this.curTable);\n        if (this.resizeBtnStat.column) {\n            this.helper.classList.add('e-column-helper');\n            this.helper.style.cssText = 'height: ' + getComputedStyle(this.curTable).height + '; top: ' +\n                pos.top + 'px; left:' + (pos.left + this.calcPos(this.columnEle).left - 1) + 'px;';\n        }\n        else {\n            this.helper.classList.add('e-row-helper');\n            this.helper.style.cssText = 'width: ' + getComputedStyle(this.curTable).width + '; top: ' +\n                (this.calcPos(this.rowEle).top + pos.top + this.rowEle.offsetHeight) +\n                'px; left:' + (this.calcPos(this.rowEle).left + pos.left) + 'px;';\n        }\n    };\n    Table.prototype.updateHelper = function () {\n        var pos = this.calcPos(this.curTable);\n        if (this.resizeBtnStat.column) {\n            var left = pos.left + this.calcPos(this.columnEle).left - 1;\n            this.helper.style.left = left + 'px';\n        }\n        else {\n            var top_1 = this.calcPos(this.rowEle).top + pos.top + this.rowEle.offsetHeight;\n            this.helper.style.top = top_1 + 'px';\n        }\n    };\n    Table.prototype.calMaxCol = function (element) {\n        var max = 0;\n        var maxRowIndex;\n        for (var i = 0; i < element.rows.length; i++) {\n            if (max < element.rows[i].cells.length) {\n                maxRowIndex = i;\n                max = element.rows[i].cells.length;\n            }\n        }\n        return maxRowIndex;\n    };\n    Table.prototype.resizing = function (e) {\n        var _this = this;\n        var pageX = this.getPointX(e);\n        var pageY = this.getPointY(e);\n        var mouseX = (this.parent.enableRtl) ? -(pageX - this.pageX) : (pageX - this.pageX);\n        var mouseY = (this.parent.enableRtl) ? -(pageY - this.pageY) : (pageY - this.pageY);\n        this.pageX = pageX;\n        this.pageY = pageY;\n        var args = { event: e, requestType: 'table' };\n        this.parent.trigger(events.onResize, args, function (resizingArgs) {\n            if (resizingArgs.cancel) {\n                _this.cancelResizeAction();\n            }\n            else {\n                var tableReBox = _this.contentModule.getEditPanel().querySelector('.e-table-box');\n                var tableWidth = parseInt(getComputedStyle(_this.curTable).width, 10);\n                var tableHeight = parseInt(getComputedStyle(_this.curTable).height, 10);\n                var paddingSize = +getComputedStyle(_this.contentModule.getEditPanel()).paddingRight.match(/\\d/g).join('');\n                var rteWidth = _this.contentModule.getEditPanel().offsetWidth - paddingSize * 2;\n                if (_this.resizeBtnStat.column) {\n                    var cellColl = _this.curTable.rows[_this.calMaxCol(_this.curTable)].cells;\n                    var width = parseFloat(_this.columnEle.offsetWidth.toString());\n                    var actualwid = width - mouseX;\n                    var totalwid = parseFloat(_this.columnEle.offsetWidth.toString()) +\n                        parseFloat(cellColl[_this.colIndex - 1].offsetWidth.toString());\n                    for (var i = 0; i < _this.curTable.rows.length; i++) {\n                        if ((totalwid - actualwid) > 20 && actualwid > 20) {\n                            var leftColumnWidth = totalwid - actualwid;\n                            var rightColWidth = actualwid;\n                            if (!isNOU(_this.curTable.rows[i].cells[_this.colIndex - 1])) {\n                                _this.curTable.rows[i].cells[_this.colIndex - 1].style.width =\n                                    _this.convertPixelToPercentage(leftColumnWidth, tableWidth) + '%';\n                            }\n                            if (!isNOU(_this.curTable.rows[i].cells[_this.colIndex])) {\n                                _this.curTable.rows[i].cells[_this.colIndex].style.width =\n                                    _this.convertPixelToPercentage(rightColWidth, tableWidth) + '%';\n                            }\n                        }\n                    }\n                    _this.updateHelper();\n                }\n                else if (_this.resizeBtnStat.row) {\n                    _this.parent.preventDefaultResize(e);\n                    var height = parseFloat(_this.rowEle.clientHeight.toString()) + mouseY;\n                    if (height > 20) {\n                        _this.rowEle.style.height = height + 'px';\n                    }\n                    _this.curTable.style.height = '';\n                    if (!isNOU(tableReBox)) {\n                        tableReBox.style.cssText = 'top: ' + (_this.calcPos(_this.curTable).top + tableHeight - 4) +\n                            'px; left:' + (_this.calcPos(_this.curTable).left + tableWidth - 4) + 'px;';\n                    }\n                    _this.updateHelper();\n                }\n                else if (_this.resizeBtnStat.tableBox) {\n                    if (!Browser.isDevice) {\n                        EventHandler.remove(_this.contentModule.getEditPanel(), 'mouseover', _this.resizeHelper);\n                    }\n                    var widthType = _this.curTable.style.width.indexOf('%') > -1;\n                    _this.curTable.style.width = widthType ? _this.convertPixelToPercentage(tableWidth + mouseX, rteWidth) + '%'\n                        : tableWidth + mouseX + 'px';\n                    _this.curTable.style.height = tableHeight + mouseY + 'px';\n                    tableReBox.classList.add('e-rbox-select');\n                    tableReBox.style.cssText = 'top: ' + (_this.calcPos(_this.curTable).top + tableHeight - 4) +\n                        'px; left:' + (_this.calcPos(_this.curTable).left + tableWidth - 4) + 'px;';\n                }\n            }\n        });\n    };\n    Table.prototype.convertPixelToPercentage = function (value, offsetValue) {\n        return (value / offsetValue) * 100;\n    };\n    Table.prototype.cancelResizeAction = function () {\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd);\n        this.removeResizeElement();\n    };\n    Table.prototype.resizeEnd = function (e) {\n        this.resizeBtnInit();\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(this.contentModule.getDocument(), Browser.touchEndEvent, this.resizeEnd);\n        if (this.contentModule.getEditPanel().querySelector('.e-table-box') &&\n            this.contentModule.getEditPanel().contains(this.contentModule.getEditPanel().querySelector('.e-table-box'))) {\n            if (!Browser.isDevice) {\n                EventHandler.add(this.contentModule.getEditPanel(), 'mouseover', this.resizeHelper, this);\n            }\n            this.removeResizeElement();\n            if (this.helper && this.contentModule.getEditPanel().contains(this.helper)) {\n                detach(this.helper);\n                this.helper = null;\n            }\n            this.pageX = null;\n            this.pageY = null;\n            this.moveEle = null;\n        }\n        var args = { event: e, requestType: 'table' };\n        this.parent.trigger(events.resizeStop, args);\n        this.parent.formatter.saveData();\n    };\n    Table.prototype.resizeBtnInit = function () {\n        return this.resizeBtnStat = { column: false, row: false, tableBox: false };\n    };\n    Table.prototype.addRow = function (selectCell, e, tabkey) {\n        var cmd;\n        if (tabkey) {\n            cmd = {\n                item: { command: 'Table', subCommand: 'InsertRowAfter' }\n            };\n        }\n        var value = {\n            selection: selectCell,\n            subCommand: (tabkey) ? cmd.item.subCommand : e.item.subCommand\n        };\n        this.parent.formatter.process(this.parent, (tabkey) ? cmd : e, e, value);\n    };\n    Table.prototype.addColumn = function (selectCell, e) {\n        this.parent.formatter.process(this.parent, e, e, { selection: selectCell, width: this.parent.tableSettings.width, subCommand: e.item.subCommand });\n    };\n    Table.prototype.removeRowColumn = function (selectCell, e) {\n        this.parent.formatter.process(this.parent, e, e, { selection: selectCell, subCommand: e.item.subCommand });\n        this.hideTableQuickToolbar();\n    };\n    Table.prototype.removeTable = function (selection, args, delKey) {\n        var cmd;\n        if (delKey) {\n            cmd = { item: { command: 'Table', subCommand: 'TableRemove' } };\n        }\n        var value = {\n            selection: selection,\n            subCommand: (delKey) ? cmd.item.subCommand : args.item.subCommand\n        };\n        this.parent.formatter.process(this.parent, (delKey) ? cmd : args, args.originalEvent, value);\n        this.contentModule.getEditPanel().focus();\n        this.removeResizeElement();\n        this.hideTableQuickToolbar();\n    };\n    Table.prototype.renderDlgContent = function (args) {\n        var _this = this;\n        if (Browser.isDevice || this.parent.inlineMode.enable) {\n            this.insertTableDialog(args);\n            return;\n        }\n        if (this.popupObj) {\n            this.popupObj.hide();\n            return;\n        }\n        this.hideTableQuickToolbar();\n        var header = '1X1';\n        var insertbtn = this.l10n.getConstant('inserttablebtn');\n        this.dlgDiv = this.parent.createElement('div', { className: 'e-rte-table-popup', id: this.rteID + '_table' });\n        this.tblHeader = this.parent.createElement('div', { className: 'e-rte-popup-header' });\n        this.tblHeader.innerHTML = header;\n        this.dlgDiv.appendChild(this.tblHeader);\n        var tableDiv = this.parent.createElement('div', { className: 'e-rte-table-span' });\n        this.drawTable(tableDiv, args);\n        this.dlgDiv.appendChild(tableDiv);\n        this.dlgDiv.appendChild(this.parent.createElement('span', { className: 'e-span-border' }));\n        var btnEle = this.parent.createElement('button', {\n            className: 'e-insert-table-btn', id: this.rteID + '_insertTable',\n            attrs: { type: 'button', tabindex: '0' }\n        });\n        if (!isNOU(this.parent.getToolbarElement().querySelector('.e-expended-nav'))) {\n            this.parent.getToolbarElement().querySelector('.e-expended-nav').setAttribute('tabindex', '1');\n        }\n        this.dlgDiv.appendChild(btnEle);\n        var button = new Button({\n            iconCss: 'e-icons e-create-table', content: insertbtn, cssClass: 'e-flat',\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        button.isStringTemplate = true;\n        button.appendTo(btnEle);\n        EventHandler.add(btnEle, 'click', this.insertTableDialog, { self: this, args: args.args, selection: args.selection });\n        this.parent.getToolbar().appendChild(this.dlgDiv);\n        var target = args.args.originalEvent.target;\n        target = target.classList.contains('e-toolbar-item') ? target.firstChild : target.parentElement;\n        this.popupObj = new Popup(this.dlgDiv, {\n            targetType: 'relative',\n            relateTo: target,\n            collision: { X: 'fit', Y: 'none' },\n            offsetY: 8,\n            viewPortElement: this.parent.element,\n            position: { X: 'left', Y: 'bottom' },\n            enableRtl: this.parent.enableRtl,\n            zIndex: 10001,\n            // eslint-disable-next-line\n            close: function (event) {\n                _this.parent.isBlur = false;\n                _this.popupObj.destroy();\n                detach(_this.popupObj.element);\n                _this.popupObj = null;\n            }\n        });\n        addClass([this.popupObj.element], 'e-popup-open');\n        this.popupObj.refreshPosition(target);\n    };\n    Table.prototype.docClick = function (e) {\n        var target = e.args.target;\n        // eslint-disable-next-line\n        if (target && target.classList && ((this.popupObj && !closest(target, '[id=' + \"'\" + this.popupObj.element.id + \"'\" + ']') ||\n            (this.editdlgObj && !closest(target, '#' + this.editdlgObj.element.id)))) && !target.classList.contains('e-create-table') &&\n            target.offsetParent && !target.offsetParent.classList.contains('e-rte-backgroundcolor-dropdown')) {\n            if (this.popupObj) {\n                this.popupObj.hide();\n            }\n            if (this.editdlgObj) {\n                this.editdlgObj.hide();\n            }\n            this.parent.isBlur = true;\n            dispatchEvent(this.parent.element, 'focusout');\n        }\n        var closestEle = closest(target, 'td');\n        var isExist = closestEle && this.parent.contentModule.getEditPanel().contains(closestEle) ? true : false;\n        if (target && target.tagName !== 'TD' && target.tagName !== 'TH' && !isExist &&\n            closest(target, '.e-rte-quick-popup') === null && target.offsetParent &&\n            !target.offsetParent.classList.contains('e-quick-dropdown') &&\n            !target.offsetParent.classList.contains('e-rte-backgroundcolor-dropdown') && !closest(target, '.e-rte-dropdown-popup')\n            && !closest(target, '.e-rte-elements')) {\n            removeClass(this.parent.element.querySelectorAll('table td'), classes.CLS_TABLE_SEL);\n            if (!Browser.isIE) {\n                this.hideTableQuickToolbar();\n            }\n        }\n        if (target && target.classList && !target.classList.contains(classes.CLS_TB_COL_RES) &&\n            !target.classList.contains(classes.CLS_TB_ROW_RES) && !target.classList.contains(classes.CLS_TB_BOX_RES)) {\n            this.removeResizeElement();\n        }\n    };\n    Table.prototype.drawTable = function (tableDiv, args) {\n        var rowDiv;\n        var tableCell;\n        for (var row = 0; row < 3; row++) {\n            rowDiv = this.parent.createElement('div', { className: 'e-rte-table-row', attrs: { 'data-column': '' + row } });\n            for (var col = 0; col < 10; col++) {\n                var display = (row > 2) ? 'none' : 'inline-block';\n                tableCell = this.parent.createElement('div', { className: 'e-rte-tablecell e-default', attrs: { 'data-cell': '' + col } });\n                rowDiv.appendChild(tableCell);\n                tableCell.style.display = display;\n                if (col === 0 && row === 0) {\n                    addClass([tableCell], 'e-active');\n                }\n                EventHandler.add(tableCell, 'mousemove', this.tableCellSelect, this);\n                EventHandler.add(rowDiv, 'mouseleave', this.tableCellLeave, this);\n                EventHandler.add(tableCell, 'mouseup', this.tableCellClick, { self: this, args: args.args, selection: args.selection });\n            }\n            tableDiv.appendChild(rowDiv);\n        }\n    };\n    Table.prototype.editTable = function (args) {\n        var _this = this;\n        this.createDialog(args);\n        var editContent = this.tableDlgContent(args);\n        var update = this.l10n.getConstant('dialogUpdate');\n        var cancel = this.l10n.getConstant('dialogCancel');\n        var editHeader = this.l10n.getConstant('tableEditHeader');\n        this.editdlgObj.setProperties({\n            height: 'initial', width: '290px', content: editContent, header: editHeader,\n            buttons: [{\n                    click: this.applyProperties.bind(this, args),\n                    buttonModel: { content: update, cssClass: 'e-flat e-size-update', isPrimary: true }\n                },\n                {\n                    click: function (e) {\n                        _this.cancelDialog(e);\n                    },\n                    buttonModel: { cssClass: 'e-flat e-cancel', content: cancel }\n                }]\n        });\n        this.editdlgObj.element.style.maxHeight = 'none';\n        this.editdlgObj.content.querySelector('input').focus();\n        this.hideTableQuickToolbar();\n    };\n    Table.prototype.insertTableDialog = function (args) {\n        var proxy = (this.self) ? this.self : this;\n        if (proxy.popupObj) {\n            proxy.popupObj.hide();\n        }\n        proxy.createDialog(args);\n        var dlgContent = proxy.tableCellDlgContent();\n        var insert = proxy.l10n.getConstant('dialogInsert');\n        var cancel = proxy.l10n.getConstant('dialogCancel');\n        if (isNullOrUndefined(proxy.editdlgObj)) {\n            return;\n        }\n        proxy.editdlgObj.setProperties({\n            height: 'initial', width: '290px', content: dlgContent,\n            buttons: [{\n                    click: proxy.customTable.bind(this, args),\n                    buttonModel: { content: insert, cssClass: 'e-flat e-insert-table', isPrimary: true }\n                },\n                {\n                    click: function (e) {\n                        proxy.cancelDialog(e);\n                    },\n                    buttonModel: { cssClass: 'e-flat e-cancel', content: cancel }\n                }]\n        });\n        proxy.editdlgObj.element.style.maxHeight = 'none';\n        proxy.editdlgObj.content.querySelector('input').focus();\n    };\n    Table.prototype.tableCellDlgContent = function () {\n        var tableColumn = this.l10n.getConstant('columns');\n        var tableRow = this.l10n.getConstant('rows');\n        var tableWrap = this.parent.createElement('div', { className: 'e-cell-wrap' });\n        var content = '<div class=\"e-rte-field\"><input type=\"text\" '\n            + ' data-role =\"none\" id=\"tableColumn\" class=\"e-table-column\"/></div>'\n            + '<div class=\"e-rte-field\"><input type=\"text\" data-role =\"none\" id=\"tableRow\" class=\"e-table-row\" /></div>';\n        var contentElem = parseHtml(content);\n        tableWrap.appendChild(contentElem);\n        this.columnTextBox = new NumericTextBox({\n            format: 'n0',\n            min: 1,\n            value: 3,\n            placeholder: tableColumn,\n            floatLabelType: 'Auto',\n            max: 50,\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        this.columnTextBox.isStringTemplate = true;\n        this.columnTextBox.appendTo(tableWrap.querySelector('#tableColumn'));\n        this.rowTextBox = new NumericTextBox({\n            format: 'n0',\n            min: 1,\n            value: 3,\n            placeholder: tableRow,\n            floatLabelType: 'Auto',\n            max: 50,\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        this.rowTextBox.isStringTemplate = true;\n        this.rowTextBox.appendTo(tableWrap.querySelector('#tableRow'));\n        return tableWrap;\n    };\n    Table.prototype.clearDialogObj = function () {\n        if (this.editdlgObj) {\n            this.editdlgObj.destroy();\n            detach(this.editdlgObj.element);\n            this.editdlgObj = null;\n        }\n    };\n    // eslint-disable-next-line\n    Table.prototype.createDialog = function (args) {\n        var _this = this;\n        if (this.editdlgObj) {\n            this.editdlgObj.hide({ returnValue: true });\n            return;\n        }\n        var tableDialog = this.parent.createElement('div', {\n            className: 'e-rte-edit-table', id: this.rteID + '_tabledialog'\n        });\n        this.parent.element.appendChild(tableDialog);\n        var insert = this.l10n.getConstant('dialogInsert');\n        var cancel = this.l10n.getConstant('dialogCancel');\n        var header = this.l10n.getConstant('tabledialogHeader');\n        var dialogModel = {\n            header: header,\n            cssClass: classes.CLS_RTE_ELEMENTS,\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            showCloseIcon: true, closeOnEscape: true, width: (Browser.isDevice) ? '290px' : '340px', height: 'initial',\n            position: { X: 'center', Y: (Browser.isDevice) ? 'center' : 'top' },\n            isModal: Browser.isDevice,\n            buttons: [{\n                    buttonModel: { content: insert, cssClass: 'e-flat e-insert-table', isPrimary: true }\n                },\n                {\n                    click: function (e) {\n                        _this.cancelDialog(e);\n                    },\n                    buttonModel: { cssClass: 'e-flat e-cancel', content: cancel }\n                }],\n            target: (Browser.isDevice) ? document.body : this.parent.element,\n            animationSettings: { effect: 'None' },\n            close: function (event) {\n                _this.parent.isBlur = false;\n                _this.editdlgObj.destroy();\n                detach(_this.editdlgObj.element);\n                _this.dialogRenderObj.close(event);\n                _this.editdlgObj = null;\n            }\n        };\n        this.editdlgObj = this.dialogRenderObj.render(dialogModel);\n        this.editdlgObj.appendTo(tableDialog);\n        if (this.quickToolObj && this.quickToolObj.inlineQTBar && document.body.contains(this.quickToolObj.inlineQTBar.element)) {\n            this.quickToolObj.inlineQTBar.hidePopup();\n        }\n    };\n    Table.prototype.customTable = function (args, e) {\n        var proxy = (this.self) ? this.self : this;\n        if (proxy.rowTextBox.value && proxy.columnTextBox.value) {\n            var argument = ((Browser.isDevice || (!isNullOrUndefined(args.args)\n                && !isNullOrUndefined(args.args.originalEvent) &&\n                args.args.originalEvent.action === 'insert-table')\n                || proxy.parent.inlineMode.enable) ? args : this);\n            proxy.tableInsert(proxy.rowTextBox.value, proxy.columnTextBox.value, e, argument);\n        }\n    };\n    // eslint-disable-next-line\n    Table.prototype.cancelDialog = function (e) {\n        this.parent.isBlur = false;\n        this.editdlgObj.hide({ returnValue: true });\n    };\n    // eslint-disable-next-line\n    Table.prototype.applyProperties = function (args, e) {\n        var dialogEle = this.editdlgObj.element;\n        var table = closest(args.selectNode[0], 'table');\n        table.style.width = dialogEle.querySelector('.e-table-width').value + 'px';\n        if (dialogEle.querySelector('.e-cell-padding').value !== '') {\n            var tdElm = table.querySelectorAll('td');\n            for (var i = 0; i < tdElm.length; i++) {\n                var padVal = '';\n                if (tdElm[i].style.padding === '') {\n                    padVal = tdElm[i].getAttribute('style') + ' padding:' +\n                        dialogEle.querySelector('.e-cell-padding').value + 'px;';\n                }\n                else {\n                    tdElm[i].style.padding = dialogEle.querySelector('.e-cell-padding').value + 'px';\n                    padVal = tdElm[i].getAttribute('style');\n                }\n                tdElm[i].setAttribute('style', padVal);\n            }\n        }\n        table.cellSpacing = dialogEle.querySelector('.e-cell-spacing').value;\n        if (!isNOU(table.cellSpacing) || table.cellSpacing !== '0') {\n            addClass([table], classes.CLS_TABLE_BORDER);\n        }\n        else {\n            removeClass([table], classes.CLS_TABLE_BORDER);\n        }\n        this.parent.formatter.saveData();\n        this.editdlgObj.hide({ returnValue: true });\n    };\n    Table.prototype.tableDlgContent = function (e) {\n        var selectNode = e.selectParent[0];\n        var tableWidth = this.l10n.getConstant('tableWidth');\n        var cellPadding = this.l10n.getConstant('cellpadding');\n        var cellSpacing = this.l10n.getConstant('cellspacing');\n        var tableWrap = this.parent.createElement('div', { className: 'e-table-sizewrap' });\n        var widthVal = closest(selectNode, 'table').getClientRects()[0].width;\n        var padVal = closest(selectNode, 'td').style.padding;\n        var brdSpcVal = closest(selectNode, 'table').getAttribute('cellspacing');\n        var content = '<div class=\"e-rte-field\"><input type=\"text\" data-role =\"none\" id=\"tableWidth\" class=\"e-table-width\" '\n            + ' /></div>' + '<div class=\"e-rte-field\"><input type=\"text\" data-role =\"none\" id=\"cellPadding\" class=\"e-cell-padding\" />'\n            + ' </div><div class=\"e-rte-field\"><input type=\"text\" data-role =\"none\" id=\"cellSpacing\" class=\"e-cell-spacing\" /></div>';\n        var contentElem = parseHtml(content);\n        tableWrap.appendChild(contentElem);\n        var widthNum = new NumericTextBox({\n            format: 'n0',\n            min: 0,\n            value: widthVal,\n            placeholder: tableWidth,\n            floatLabelType: 'Auto',\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        widthNum.isStringTemplate = true;\n        widthNum.appendTo(tableWrap.querySelector('#tableWidth'));\n        var padding = new NumericTextBox({\n            format: 'n0',\n            min: 0,\n            // eslint-disable-next-line\n            value: padVal !== '' ? parseInt(padVal, null) : 0,\n            placeholder: cellPadding,\n            floatLabelType: 'Auto',\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        padding.isStringTemplate = true;\n        padding.appendTo(tableWrap.querySelector('#cellPadding'));\n        var spacing = new NumericTextBox({\n            format: 'n0',\n            min: 0,\n            // eslint-disable-next-line\n            value: brdSpcVal !== '' && !isNOU(brdSpcVal) ? parseInt(brdSpcVal, null) : 0,\n            placeholder: cellSpacing,\n            floatLabelType: 'Auto',\n            enableRtl: this.parent.enableRtl, locale: this.parent.locale\n        });\n        spacing.isStringTemplate = true;\n        spacing.appendTo(tableWrap.querySelector('#cellSpacing'));\n        return tableWrap;\n    };\n    /**\n     * Destroys the ToolBar.\n     *\n     * @function destroy\n     * @returns {void}\n     * @hidden\n\n     */\n    Table.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {void}\n     */\n    Table.prototype.getModuleName = function () {\n        return 'table';\n    };\n    return Table;\n}());\nexport { Table };\n"]},"metadata":{},"sourceType":"module"}