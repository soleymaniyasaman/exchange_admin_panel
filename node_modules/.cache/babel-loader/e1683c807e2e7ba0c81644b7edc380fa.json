{"ast":null,"code":"import { ListBase } from '@syncfusion/ej2-lists';\nimport { createElement, select, selectAll, EventHandler, KeyboardEvents, closest, Draggable } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined as isNOU, addClass, removeClass, Touch, isVisible } from '@syncfusion/ej2-base';\nimport { getValue, setValue, remove } from '@syncfusion/ej2-base';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport { hideSpinner, showSpinner } from '@syncfusion/ej2-popups';\nimport * as events from '../base/constant';\nimport * as CLS from '../base/classes';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { read, GetDetails, Delete } from '../common/operations';\nimport { doRename, getAccessClass, getPathObject, getFullPath, getDirectoryPath, rename, doDownload, getItemName } from '../common/index';\nimport { removeBlur, cutFiles, copyFiles, addBlur, openSearchFolder, removeActive, pasteHandler } from '../common/index';\nimport { createVirtualDragElement, dragStopHandler, dragStartHandler, draggingHandler, getModule } from '../common/index';\nimport { updateRenamingData, doDeleteFiles, doDownloadFiles } from '../common/index';\nimport { openAction, fileType, refresh, getImageUrl, getSortedData, createDeniedDialog, updateLayout } from '../common/utility';\nimport { createEmptyElement, hasReadAccess, hasEditAccess } from '../common/utility';\nimport { createDialog, createImageDialog } from '../pop-up/dialog';\n/**\n * LargeIconsView module\n */\n\nvar LargeIconsView =\n/** @class */\nfunction () {\n  /**\n   * Constructor for the LargeIcons module.\n   *\n   * @param {IFileManager} parent - specifies the parent element.\n   * @hidden\n   */\n  function LargeIconsView(parent) {\n    this.isInteraction = true;\n    this.uploadOperation = false;\n    this.count = 0;\n    this.isRendered = true;\n    this.tapCount = 0;\n    this.isPasteOperation = false;\n    this.isInteracted = true;\n    this.parent = parent;\n    this.element = select('#' + this.parent.element.id + CLS.LARGEICON_ID, this.parent.element);\n    addClass([this.element], CLS.LARGE_ICONS);\n    this.addEventListener();\n    this.keyConfigs = {\n      end: 'end',\n      home: 'home',\n      tab: 'tab',\n      moveDown: 'downarrow',\n      moveLeft: 'leftarrow',\n      moveRight: 'rightarrow',\n      moveUp: 'uparrow',\n      ctrlEnd: 'ctrl+end',\n      ctrlHome: 'ctrl+home',\n      ctrlDown: 'ctrl+downarrow',\n      ctrlLeft: 'ctrl+leftarrow',\n      ctrlRight: 'ctrl+rightarrow',\n      ctrlUp: 'ctrl+uparrow',\n      shiftEnd: 'shift+end',\n      shiftHome: 'shift+home',\n      shiftDown: 'shift+downarrow',\n      shiftLeft: 'shift+leftarrow',\n      shiftRight: 'shift+rightarrow',\n      shiftUp: 'shift+uparrow',\n      csEnd: 'ctrl+shift+end',\n      csHome: 'ctrl+shift+home',\n      csDown: 'ctrl+shift+downarrow',\n      csLeft: 'ctrl+shift+leftarrow',\n      csRight: 'ctrl+shift+rightarrow',\n      csUp: 'ctrl+shift+uparrow',\n      space: 'space',\n      ctrlSpace: 'ctrl+space',\n      shiftSpace: 'shift+space',\n      csSpace: 'ctrl+shift+space',\n      ctrlA: 'ctrl+a',\n      enter: 'enter',\n      altEnter: 'alt+enter',\n      esc: 'escape',\n      del: 'delete',\n      ctrlX: 'ctrl+x',\n      ctrlC: 'ctrl+c',\n      ctrlV: 'ctrl+v',\n      f2: 'f2',\n      shiftdel: 'shift+delete',\n      back: 'backspace',\n      ctrlD: 'ctrl+d'\n    };\n  }\n\n  LargeIconsView.prototype.render = function (args) {\n    this.parent.visitedItem = null;\n    this.startItem = null;\n    showSpinner(this.parent.element);\n\n    if (this.parent.view === 'LargeIcons') {\n      this.resetMultiSelect();\n      this.element.setAttribute('tabindex', '0');\n\n      if (this.listObj) {\n        this.unWireEvents();\n        this.removeEventListener();\n      }\n\n      this.parent.notify(events.hideLayout, {});\n      var iconsView = select('#' + this.parent.element.id + CLS.LARGEICON_ID, this.parent.element);\n      var ul = select('ul', iconsView);\n\n      if (ul) {\n        remove(ul);\n      }\n\n      this.listObj = {\n        ariaAttributes: {\n          itemRole: 'option',\n          listRole: 'listbox',\n          itemText: '',\n          groupItemRole: 'group',\n          wrapperRole: ''\n        },\n        showIcon: true,\n        fields: {\n          text: 'name',\n          iconCss: '_fm_icon',\n          imageUrl: '_fm_imageUrl',\n          htmlAttributes: '_fm_htmlAttr'\n        },\n        sortOrder: this.parent.sortOrder,\n        itemCreated: this.onItemCreated.bind(this),\n        enableHtmlSanitizer: this.parent.enableHtmlSanitizer\n      };\n      this.items = [];\n      this.items = this.renderList(args);\n      this.items = getSortedData(this.parent, this.items); // eslint-disable-next-line\n\n      this.listElements = ListBase.createListFromJson(createElement, this.items, this.listObj);\n      this.itemList = Array.prototype.slice.call(selectAll('.' + CLS.LIST_ITEM, this.listElements));\n      this.element.appendChild(this.listElements);\n      this.preventImgDrag();\n      this.createDragObj();\n      iconsView.classList.remove(CLS.DISPLAY_NONE);\n\n      if (this.itemList.length === 0) {\n        var emptyList = this.element.querySelector('.' + CLS.LIST_PARENT);\n        this.element.removeChild(emptyList);\n        createEmptyElement(this.parent, this.element, args);\n      } else if (this.itemList.length !== 0 && this.element.querySelector('.' + CLS.EMPTY)) {\n        this.element.removeChild(this.element.querySelector('.' + CLS.EMPTY));\n      }\n\n      if (this.isPasteOperation === true) {\n        this.selectItems(this.parent.pasteNodes);\n        this.isPasteOperation = false;\n      }\n      /* istanbul ignore next */\n\n\n      if (this.uploadOperation === true) {\n        this.selectItems(this.parent.uploadItem);\n        this.parent.setProperties({\n          selectedItems: []\n        }, true);\n        this.count++;\n\n        if (this.count === this.parent.uploadItem.length) {\n          this.uploadOperation = false;\n          this.parent.uploadItem = [];\n        }\n      }\n\n      var activeEle = this.element.querySelectorAll('.' + CLS.ACTIVE);\n\n      if (activeEle.length !== 0) {\n        this.parent.activeModule = 'largeiconsview';\n      }\n\n      for (var i = 0; i < activeEle.length; i++) {\n        activeEle[i].setAttribute('aria-selected', 'true');\n      }\n\n      this.adjustHeight();\n      this.element.style.maxHeight = '100%';\n      this.getItemCount();\n      this.addEventListener();\n      this.wireEvents();\n      this.isRendered = true;\n      hideSpinner(this.parent.element);\n\n      if (this.parent.selectedItems.length) {\n        this.checkItem();\n      }\n    }\n  };\n\n  LargeIconsView.prototype.preventImgDrag = function () {\n    var i = 0;\n\n    while (i < this.itemList.length) {\n      if (this.itemList[i].querySelector('img')) {\n        /* istanbul ignore next */\n        this.itemList[i].ondragstart = function () {\n          return false;\n        };\n      }\n\n      i++;\n    }\n  };\n\n  LargeIconsView.prototype.createDragObj = function () {\n    var _this = this;\n\n    if (!this.parent.isMobile && this.listObj) {\n      if (this.parent.allowDragAndDrop) {\n        if (this.dragObj) {\n          this.dragObj.destroy();\n        }\n\n        this.dragObj = new Draggable(this.listElements, {\n          enableTailMode: true,\n          distance: 5,\n          enableAutoScroll: true,\n          dragTarget: '.' + CLS.LARGE_ICON,\n          helper: this.dragHelper.bind(this),\n          cursorAt: this.parent.dragCursorPosition,\n          dragArea: this.parent.element,\n          dragStop: dragStopHandler.bind(this, this.parent),\n          drag: draggingHandler.bind(this, this.parent),\n          clone: true,\n          dragStart: function (args) {\n            dragStartHandler(_this.parent, args, _this.dragObj);\n          }\n        });\n      } else if (this.dragObj && !this.parent.allowDragAndDrop) {\n        this.dragObj.destroy();\n      }\n    }\n  };\n\n  LargeIconsView.prototype.dragHelper = function (args) {\n    var dragTarget = args.sender.target;\n    var dragLi = closest(dragTarget, '.e-list-item');\n\n    if (!dragLi) {\n      return null;\n    }\n\n    if (dragLi && !dragLi.classList.contains('e-active')) {\n      this.setFocus(dragLi);\n    }\n\n    var activeEle = this.element.querySelectorAll('.' + CLS.ACTIVE);\n    this.parent.activeElements = [];\n    this.parent.dragData = [];\n\n    for (var i = 0; i < activeEle.length; i++) {\n      // eslint-disable-next-line\n      this.parent.dragData.push(this.getItemObject(activeEle[i]));\n      this.parent.activeElements.push(activeEle[i]);\n    }\n\n    getModule(this.parent, dragLi);\n    this.parent.dragPath = this.parent.path;\n    createVirtualDragElement(this.parent);\n    return this.parent.virtualDragElement;\n  };\n\n  LargeIconsView.prototype.onDropInit = function (args) {\n    if (this.parent.targetModule === this.getModuleName()) {\n      var dropLi = closest(args.target, '.e-list-item'); // eslint-disable-next-line\n\n      var cwdData = getValue(this.parent.pathId[this.parent.pathId.length - 1], this.parent.feParent);\n\n      if (dropLi) {\n        // eslint-disable-next-line\n        var info = this.getItemObject(dropLi);\n        this.parent.dropPath = info.isFile ? this.parent.path : getFullPath(this.parent, info, this.parent.path);\n        this.parent.dropData = info.isFile ? cwdData : info;\n      } else {\n        this.parent.dropPath = this.parent.path;\n        this.parent.dropData = cwdData;\n      }\n    }\n  };\n  /**\n   * For internal use only - Get the module name.\n   *\n   * @returns {string} - returns the module name.\n   * @private\n   */\n\n\n  LargeIconsView.prototype.getModuleName = function () {\n    return 'largeiconsview';\n  };\n\n  LargeIconsView.prototype.adjustHeight = function () {\n    var pane = select('#' + this.parent.element.id + CLS.CONTENT_ID, this.parent.element);\n    var bar = select('#' + this.parent.element.id + CLS.BREADCRUMBBAR_ID, this.parent.element);\n    this.element.style.height = pane.offsetHeight - bar.offsetHeight + 'px';\n  };\n\n  LargeIconsView.prototype.onItemCreated = function (args) {\n    args.item.removeAttribute('aria-level');\n\n    if (!this.parent.showFileExtension && getValue('isFile', args.curData)) {\n      var textEle = args.item.querySelector('.' + CLS.LIST_TEXT);\n      var txt = getValue('name', args.curData);\n      var type = getValue('type', args.curData);\n      textEle.innerHTML = txt.substr(0, txt.length - type.length);\n    }\n\n    this.renderCheckbox(args);\n    var eventArgs = {\n      element: args.item,\n      fileDetails: args.curData,\n      module: 'LargeIconsView'\n    };\n    this.parent.trigger('fileLoad', eventArgs);\n  };\n\n  LargeIconsView.prototype.renderCheckbox = function (args) {\n    if (!this.parent.allowMultiSelection) {\n      return;\n    }\n\n    var checkElement = createCheckBox(createElement, false, {\n      checked: false,\n      cssClass: 'e-small'\n    });\n    checkElement.setAttribute('role', 'checkbox');\n    checkElement.setAttribute('aria-checked', 'false');\n    args.item.firstElementChild.insertBefore(checkElement, args.item.firstElementChild.childNodes[0]);\n  };\n\n  LargeIconsView.prototype.onLayoutChange = function (args) {\n    if (this.parent.view === 'LargeIcons') {\n      this.destroy();\n      this.render(args);\n      /* istanbul ignore next */\n\n      if (getValue('name', args) === 'layout-change' && this.parent.fileAction === 'move' && this.parent.isCut && this.parent.selectedNodes && this.parent.selectedNodes.length !== 0) {\n        var indexes = this.getIndexes(this.parent.selectedNodes);\n        var length_1 = 0;\n\n        while (length_1 < indexes.length) {\n          addBlur(this.itemList[indexes[length_1]]);\n          length_1++;\n        }\n      }\n\n      var activeEle = this.element.querySelectorAll('.' + CLS.ACTIVE);\n\n      if (activeEle.length !== 0) {\n        this.element.focus();\n      }\n\n      this.checkItem();\n      this.parent.isLayoutChange = false;\n    } else {\n      this.element.setAttribute('tabindex', '-1');\n    }\n  };\n\n  LargeIconsView.prototype.checkItem = function () {\n    var checkEle = this.element.querySelectorAll('.' + CLS.ACTIVE);\n\n    if (checkEle) {\n      var checkLength = 0;\n\n      while (checkLength < checkEle.length) {\n        this.checkState(checkEle[checkLength], true);\n        checkLength++;\n      }\n    }\n  }; // eslint-disable-next-line\n\n\n  LargeIconsView.prototype.renderList = function (args) {\n    var i = 0; // eslint-disable-next-line\n\n    var items = JSON.parse(JSON.stringify(args.files));\n\n    while (i < items.length) {\n      var icon = fileType(items[i]);\n      var name_1 = getValue('name', items[i]);\n      var selected = getItemName(this.parent, items[i]);\n      var className = this.parent.selectedItems && this.parent.selectedItems.indexOf(selected) !== -1 ? CLS.LARGE_ICON + ' e-active' : CLS.LARGE_ICON;\n\n      if (!hasEditAccess(items[i])) {\n        className += ' ' + getAccessClass(items[i]);\n      }\n\n      if (icon === CLS.ICON_IMAGE && this.parent.showThumbnail && hasReadAccess(items[i])) {\n        var imgUrl = getImageUrl(this.parent, items[i]);\n        setValue('_fm_imageUrl', imgUrl, items[i]);\n        setValue('_fm_imageAttr', {\n          alt: name_1\n        }, items[i]);\n      } else {\n        setValue('_fm_icon', icon, items[i]);\n      }\n\n      setValue('_fm_htmlAttr', {\n        class: className,\n        title: name_1\n      }, items[i]);\n      i++;\n    }\n\n    return items;\n  };\n\n  LargeIconsView.prototype.onFinalizeEnd = function (args) {\n    this.render(args);\n  };\n\n  LargeIconsView.prototype.onCreateEnd = function (args) {\n    if (this.parent.view !== 'LargeIcons') {\n      return;\n    }\n\n    this.onLayoutChange(args);\n    this.clearSelect();\n    this.selectItems([getValue(this.parent.hasId ? 'id' : 'name', this.parent.createdItem)]);\n    this.parent.createdItem = null;\n    this.parent.largeiconsviewModule.element.focus();\n  };\n\n  LargeIconsView.prototype.onSelectedData = function () {\n    if (this.parent.activeModule === 'largeiconsview') {\n      this.updateSelectedData();\n    }\n  };\n\n  LargeIconsView.prototype.onDeleteInit = function () {\n    if (this.parent.activeModule === 'largeiconsview') {\n      Delete(this.parent, this.parent.selectedItems, this.parent.path, 'delete');\n    }\n  };\n  /* istanbul ignore next */\n\n\n  LargeIconsView.prototype.onDeleteEnd = function (args) {\n    if (this.parent.view !== 'LargeIcons') {\n      return;\n    }\n\n    this.onLayoutChange(args);\n    this.parent.setProperties({\n      selectedItems: []\n    }, true);\n    this.clearSelect();\n  };\n\n  LargeIconsView.prototype.onRefreshEnd = function (args) {\n    if (this.parent.view !== 'LargeIcons') {\n      return;\n    }\n\n    this.onLayoutChange(args);\n  };\n\n  LargeIconsView.prototype.onRenameInit = function () {\n    if (this.parent.activeModule === 'largeiconsview' && this.parent.selectedItems.length === 1) {\n      this.updateRenameData();\n    }\n  };\n\n  LargeIconsView.prototype.onPathChanged = function (args) {\n    this.parent.isCut = false;\n    /* istanbul ignore next */\n\n    if (this.parent.breadcrumbbarModule.searchObj.element.value === '') {\n      this.parent.searchedItems = [];\n    }\n\n    if (this.parent.view === 'LargeIcons') {\n      removeBlur(this.parent);\n      this.parent.setProperties({\n        selectedItems: []\n      }, true);\n      this.onLayoutChange(args);\n\n      if (this.parent.renamedItem) {\n        this.clearSelect();\n        this.addSelection(this.parent.renamedItem);\n        this.parent.renamedItem = null;\n      }\n    }\n  };\n\n  LargeIconsView.prototype.onOpenInit = function (args) {\n    if (this.parent.activeModule === 'largeiconsview') {\n      this.doOpenAction(args.target);\n    }\n  };\n\n  LargeIconsView.prototype.onHideLayout = function () {\n    if (this.parent.view !== 'LargeIcons' && this.element) {\n      this.element.classList.add(CLS.DISPLAY_NONE);\n    }\n  };\n\n  LargeIconsView.prototype.onSelectAllInit = function () {\n    if (this.parent.view === 'LargeIcons') {\n      this.startItem = this.getFirstItem();\n      var lastItem = this.getLastItem();\n      var eveArgs = {\n        ctrlKey: true,\n        shiftKey: true\n      };\n      this.doSelection(lastItem, eveArgs);\n      this.isInteraction = true;\n      this.isInteracted = true;\n    }\n  };\n\n  LargeIconsView.prototype.onClearAllInit = function () {\n    if (this.parent.view === 'LargeIcons') {\n      this.clearSelection();\n      this.isInteraction = true;\n      this.isInteracted = true;\n    }\n  };\n\n  LargeIconsView.prototype.onBeforeRequest = function () {\n    this.isRendered = false;\n  };\n\n  LargeIconsView.prototype.onAfterRequest = function () {\n    this.isRendered = true;\n  };\n  /* istanbul ignore next */\n\n\n  LargeIconsView.prototype.onSearch = function (args) {\n    if (this.parent.view === 'LargeIcons') {\n      this.parent.setProperties({\n        selectedItems: []\n      }, true);\n      this.parent.notify(events.selectionChanged, {});\n      this.parent.searchedItems = args.files;\n      this.onLayoutChange(args);\n    }\n  };\n\n  LargeIconsView.prototype.onLayoutRefresh = function () {\n    if (this.parent.view !== 'LargeIcons') {\n      return;\n    }\n\n    this.adjustHeight();\n  };\n\n  LargeIconsView.prototype.onUpdateSelectionData = function () {\n    if (this.parent.view !== 'LargeIcons') {\n      return;\n    }\n\n    this.updateSelectedData();\n  };\n\n  LargeIconsView.prototype.onPathColumn = function () {\n    if (this.parent.view === 'LargeIcons' && !isNOU(this.listObj) && this.parent.breadcrumbbarModule.searchObj.element.value === '' && !this.parent.isFiltered && this.parent.sortBy === 'filterPath') {\n      this.parent.sortBy = 'name';\n      this.parent.notify(events.sortByChange, {});\n    }\n  };\n\n  LargeIconsView.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.off(events.pathColumn, this.onPathColumn);\n    this.parent.off(events.finalizeEnd, this.onFinalizeEnd);\n    this.parent.off(events.createEnd, this.onCreateEnd);\n    this.parent.off(events.selectedData, this.onSelectedData);\n    this.parent.off(events.deleteInit, this.onDeleteInit);\n    this.parent.off(events.deleteEnd, this.onDeleteEnd);\n    this.parent.off(events.refreshEnd, this.onRefreshEnd);\n    this.parent.off(events.pathChanged, this.onPathChanged);\n    this.parent.off(events.layoutChange, this.onLayoutChange);\n    this.parent.off(events.search, this.onSearch);\n    this.parent.off(events.openInit, this.onOpenInit);\n    this.parent.off(events.openEnd, this.onPathChanged);\n    this.parent.off(events.modelChanged, this.onPropertyChanged);\n    this.parent.off(events.methodCall, this.onMethodCall);\n    this.parent.off(events.actionFailure, this.onActionFailure);\n    this.parent.off(events.renameInit, this.onRenameInit);\n    this.parent.off(events.renameEnd, this.onPathChanged);\n    this.parent.off(events.hideLayout, this.onHideLayout);\n    this.parent.off(events.selectAllInit, this.onSelectAllInit);\n    this.parent.off(events.clearAllInit, this.onClearAllInit);\n    this.parent.off(events.menuItemData, this.onMenuItemData);\n    this.parent.off(events.beforeRequest, this.onBeforeRequest);\n    this.parent.off(events.afterRequest, this.onAfterRequest);\n    this.parent.off(events.splitterResize, this.splitterResizeHandler);\n    this.parent.off(events.resizeEnd, this.resizeHandler);\n    this.parent.off(events.pasteInit, this.onpasteInit);\n    this.parent.off(events.pasteEnd, this.onpasteEnd);\n    this.parent.off(events.cutCopyInit, this.oncutCopyInit);\n    this.parent.off(events.dropInit, this.onDropInit);\n    this.parent.off(events.detailsInit, this.onDetailsInit);\n    this.parent.off(events.layoutRefresh, this.onLayoutRefresh);\n    this.parent.off(events.dropPath, this.onDropPath);\n    this.parent.off(events.updateSelectionData, this.onUpdateSelectionData);\n    this.parent.off(events.filterEnd, this.onPathChanged);\n  };\n\n  LargeIconsView.prototype.addEventListener = function () {\n    this.parent.on(events.pathColumn, this.onPathColumn, this);\n    this.parent.on(events.finalizeEnd, this.onFinalizeEnd, this);\n    this.parent.on(events.createEnd, this.onCreateEnd, this);\n    this.parent.on(events.refreshEnd, this.onRefreshEnd, this);\n    this.parent.on(events.selectedData, this.onSelectedData, this);\n    this.parent.on(events.pathChanged, this.onPathChanged, this);\n    this.parent.on(events.deleteInit, this.onDeleteInit, this);\n    this.parent.on(events.pasteInit, this.onpasteInit, this);\n    this.parent.on(events.deleteEnd, this.onDeleteEnd, this);\n    this.parent.on(events.layoutChange, this.onLayoutChange, this);\n    this.parent.on(events.search, this.onSearch, this);\n    this.parent.on(events.openInit, this.onOpenInit, this);\n    this.parent.on(events.renameInit, this.onRenameInit, this);\n    this.parent.on(events.renameEnd, this.onPathChanged, this);\n    this.parent.on(events.openEnd, this.onPathChanged, this);\n    this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n    this.parent.on(events.methodCall, this.onMethodCall, this);\n    this.parent.on(events.actionFailure, this.onActionFailure, this);\n    this.parent.on(events.hideLayout, this.onHideLayout, this);\n    this.parent.on(events.selectAllInit, this.onSelectAllInit, this);\n    this.parent.on(events.clearAllInit, this.onClearAllInit, this);\n    this.parent.on(events.menuItemData, this.onMenuItemData, this);\n    this.parent.on(events.beforeRequest, this.onBeforeRequest, this);\n    this.parent.on(events.afterRequest, this.onAfterRequest, this);\n    this.parent.on(events.dropInit, this.onDropInit, this);\n    this.parent.on(events.detailsInit, this.onDetailsInit, this);\n    this.parent.on(events.splitterResize, this.splitterResizeHandler, this);\n    this.parent.on(events.resizeEnd, this.resizeHandler, this);\n    this.parent.on(events.pasteEnd, this.onpasteEnd, this);\n    this.parent.on(events.cutCopyInit, this.oncutCopyInit, this);\n    this.parent.on(events.layoutRefresh, this.onLayoutRefresh, this);\n    this.parent.on(events.dropPath, this.onDropPath, this);\n    this.parent.on(events.updateSelectionData, this.onUpdateSelectionData, this);\n    this.parent.on(events.filterEnd, this.onPathChanged, this);\n  };\n\n  LargeIconsView.prototype.onActionFailure = function () {\n    this.isInteraction = true;\n    this.isInteracted = true;\n  }; // eslint-disable-next-line\n\n\n  LargeIconsView.prototype.onMenuItemData = function (args) {\n    if (this.parent.activeModule === this.getModuleName()) {\n      var ele = closest(args.target, 'li');\n      this.parent.itemData = [this.getItemObject(ele)];\n    }\n  };\n\n  LargeIconsView.prototype.onDetailsInit = function () {\n    if (this.parent.activeModule === this.getModuleName()) {\n      if (this.parent.selectedItems.length !== 0) {\n        this.updateSelectedData();\n      } else {\n        this.parent.itemData = [getValue(this.parent.pathId[this.parent.pathId.length - 1], this.parent.feParent)];\n      }\n    }\n  };\n\n  LargeIconsView.prototype.onpasteInit = function () {\n    if (this.parent.activeModule === this.getModuleName()) {\n      this.parent.itemData = this.parent.folderPath === '' ? [getPathObject(this.parent)] : [this.getItemObject(select('.e-active', this.element))];\n    }\n  };\n\n  LargeIconsView.prototype.oncutCopyInit = function () {\n    if (this.parent.activeModule === this.getModuleName()) {\n      var activeEle = this.element.querySelectorAll('.' + CLS.ACTIVE);\n      this.parent.activeRecords = [];\n      this.parent.activeElements = [];\n\n      for (var i = 0; i < activeEle.length; i++) {\n        this.parent.activeElements.push(activeEle[i]);\n        this.parent.activeRecords.push(this.getItemObject(activeEle[i]));\n      }\n    }\n  };\n\n  LargeIconsView.prototype.onpasteEnd = function (args) {\n    if (this.parent.view === 'LargeIcons') {\n      this.isPasteOperation = true;\n\n      if (this.parent.path === this.parent.destinationPath || this.parent.path === getDirectoryPath(this.parent, args)) {\n        this.onPathChanged(args);\n      }\n    }\n  };\n\n  LargeIconsView.prototype.onDropPath = function (args) {\n    if (this.parent.view === 'LargeIcons') {\n      this.isPasteOperation = true;\n      this.onPathChanged(args);\n    }\n  };\n\n  LargeIconsView.prototype.onPropertyChanged = function (e) {\n    var currentSelected;\n\n    if (e.module !== this.getModuleName() && e.module !== 'common') {\n      return;\n    }\n\n    for (var _i = 0, _a = Object.keys(e.newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      switch (prop) {\n        case 'allowDragAndDrop':\n          this.createDragObj();\n          break;\n\n        case 'height':\n          this.adjustHeight();\n          break;\n\n        case 'selectedItems':\n          this.isInteraction = false;\n          this.isInteracted = false;\n          currentSelected = isNOU(this.parent.selectedItems) ? [] : this.parent.selectedItems.slice(0);\n          currentSelected = this.parent.allowMultiSelection ? currentSelected : currentSelected.slice(currentSelected.length - 1);\n          this.parent.setProperties({\n            selectedItems: []\n          }, true);\n          this.onClearAllInit();\n\n          if (currentSelected.length) {\n            this.selectItems(currentSelected);\n          }\n\n          this.parent.setProperties({\n            selectedItems: this.parent.selectedItems\n          }, true);\n          this.isInteraction = true;\n          this.isInteracted = true;\n          break;\n\n        case 'showThumbnail':\n          refresh(this.parent);\n          break;\n\n        case 'showFileExtension':\n          read(this.parent, events.pathChanged, this.parent.path);\n          break;\n\n        case 'showHiddenItems':\n          read(this.parent, events.pathChanged, this.parent.path);\n          break;\n\n        case 'allowMultiSelection':\n          if (this.parent.view !== 'LargeIcons') {\n            break;\n          }\n\n          refresh(this.parent);\n          break;\n\n        case 'view':\n          updateLayout(this.parent, 'LargeIcons');\n          break;\n      }\n    }\n  };\n\n  LargeIconsView.prototype.destroy = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.removeEventListener();\n\n    if (this.listObj) {\n      this.unWireEvents();\n    }\n  };\n\n  LargeIconsView.prototype.wireEvents = function () {\n    this.wireClickEvent(true);\n    this.keyboardModule = new KeyboardEvents(this.element, {\n      keyAction: this.keyActionHandler.bind(this),\n      keyConfigs: this.keyConfigs,\n      eventName: 'keyup'\n    });\n    this.keyboardDownModule = new KeyboardEvents(this.element, {\n      keyAction: this.keydownActionHandler.bind(this),\n      keyConfigs: this.keyConfigs,\n      eventName: 'keydown'\n    });\n    EventHandler.add(this.element, 'mouseover', this.onMouseOver, this);\n  };\n\n  LargeIconsView.prototype.unWireEvents = function () {\n    this.wireClickEvent(false);\n    EventHandler.remove(this.element, 'mouseover', this.onMouseOver);\n    this.keyboardModule.destroy();\n    this.keyboardDownModule.destroy();\n  };\n  /* istanbul ignore next */\n\n\n  LargeIconsView.prototype.onMouseOver = function (e) {\n    var targetEle = closest(e.target, '.e-list-item');\n    removeBlur(this.parent, 'hover');\n\n    if (targetEle !== null) {\n      targetEle.classList.add(CLS.HOVER);\n    }\n  };\n\n  LargeIconsView.prototype.wireClickEvent = function (toBind) {\n    if (toBind) {\n      // eslint-disable-next-line\n      var proxy_1 = this;\n      this.clickObj = new Touch(this.element, {\n        tap: function (eve) {\n          eve.originalEvent.preventDefault();\n\n          if (proxy_1.parent.isDevice) {\n            proxy_1.tapCount = eve.tapCount;\n            proxy_1.tapEvent = eve;\n            setTimeout(function () {\n              if (proxy_1.tapCount > 0) {\n                proxy_1.doTapAction(proxy_1.tapEvent);\n              }\n\n              proxy_1.tapCount = 0;\n            }, 350);\n          } else {\n            if (eve.tapCount === 2 && eve.originalEvent.which !== 3) {\n              proxy_1.dblClickHandler(eve);\n            } else {\n              proxy_1.clickHandler(eve);\n            }\n          }\n        },\n        tapHold: function (e) {\n          if (proxy_1.parent.isDevice) {\n            proxy_1.multiSelect = proxy_1.parent.allowMultiSelection ? true : false;\n\n            if (proxy_1.parent.allowMultiSelection) {\n              addClass([proxy_1.parent.element], CLS.MULTI_SELECT);\n            }\n\n            proxy_1.clickHandler(e);\n          }\n        }\n      });\n    } else {\n      if (this.clickObj) {\n        this.clickObj.destroy();\n      }\n    }\n  };\n\n  LargeIconsView.prototype.doTapAction = function (eve) {\n    var target = eve.originalEvent.target;\n    var item = closest(target, '.' + CLS.LIST_ITEM);\n\n    if (this.multiSelect || target.classList.contains(CLS.LIST_PARENT) || isNOU(item)) {\n      this.clickHandler(eve);\n    } else {\n      this.parent.isFile = false;\n      this.updateType(item);\n\n      if (!this.parent.isFile) {\n        this.dblClickHandler(eve);\n      } else if (eve.tapCount === 2) {\n        this.clickHandler(eve);\n        this.dblClickHandler(eve);\n      } else {\n        this.clickHandler(eve);\n      }\n    }\n  };\n\n  LargeIconsView.prototype.clickHandler = function (e) {\n    var target = e.originalEvent.target;\n    removeBlur(this.parent, 'hover');\n    this.doSelection(target, e.originalEvent);\n    this.parent.activeModule = 'largeiconsview';\n  };\n  /**\n   *\n   * @param {Element} target - specifies the target element.\n   * @param {TouchEventArgs | MouseEventArgs | KeyboardEventArgs} e - specifies event arguements.\n   * @returns {void}\n   * @hidden\n   */\n\n\n  LargeIconsView.prototype.doSelection = function (target, e) {\n    var item = closest(target, '.' + CLS.LIST_ITEM);\n    var cList = target.classList;\n    this.parent.isFile = false;\n    var action = 'select';\n\n    if (e.which === 3 && !isNOU(item) && item.classList.contains(CLS.ACTIVE)) {\n      this.updateType(item);\n      return;\n    } else if (!isNOU(item)) {\n      if (this.parent.allowMultiSelection && item.classList.contains(CLS.ACTIVE) && (e.ctrlKey || target.classList.contains(CLS.CHECK))) {\n        action = 'unselect';\n      }\n\n      var fileSelectionArgs = this.triggerSelection(action, item);\n\n      if (fileSelectionArgs.cancel !== true) {\n        if ((!this.parent.allowMultiSelection || !this.multiSelect && e && !e.ctrlKey) && !cList.contains(CLS.FRAME)) {\n          this.updateType(item);\n          this.clearSelect();\n        }\n\n        if (this.parent.allowMultiSelection && e.shiftKey) {\n          if (!(e && e.ctrlKey)) {\n            this.clearSelect();\n          }\n\n          if (!this.startItem) {\n            this.startItem = item;\n          }\n\n          var startIndex = this.itemList.indexOf(this.startItem);\n          var endIndex = this.itemList.indexOf(item);\n\n          if (startIndex > endIndex) {\n            for (var i = startIndex; i >= endIndex; i--) {\n              this.addActive(this.itemList[i]);\n            }\n          } else {\n            for (var i = startIndex; i <= endIndex; i++) {\n              this.addActive(this.itemList[i]);\n            }\n          }\n\n          this.addFocus(this.itemList[endIndex]);\n        } else {\n          this.startItem = item;\n\n          if (this.parent.allowMultiSelection && item.classList.contains(CLS.ACTIVE)) {\n            this.removeActive(item);\n          } else {\n            this.addActive(item);\n          }\n\n          this.addFocus(item);\n        }\n\n        if (this.parent.selectedItems.length === 0) {\n          this.resetMultiSelect();\n        }\n\n        this.parent.notify(events.selectionChanged, {});\n        this.triggerSelect(action, item);\n      }\n    } else {\n      this.clearSelection();\n    }\n\n    if (!isNOU(item)) {\n      this.updateType(item);\n    }\n  };\n\n  LargeIconsView.prototype.dblClickHandler = function (e) {\n    this.parent.activeModule = 'largeiconsview';\n    var target = e.originalEvent.target;\n    this.doOpenAction(target);\n  };\n\n  LargeIconsView.prototype.clearSelection = function () {\n    this.clearSelect();\n    this.resetMultiSelect();\n    this.parent.notify(events.selectionChanged, {});\n  };\n\n  LargeIconsView.prototype.resetMultiSelect = function () {\n    this.multiSelect = false;\n    removeClass([this.parent.element], CLS.MULTI_SELECT);\n  };\n\n  LargeIconsView.prototype.doOpenAction = function (target) {\n    var _this = this;\n\n    if (isNOU(target)) {\n      return;\n    }\n\n    var item = closest(target, '.' + CLS.LIST_ITEM);\n    this.parent.isFile = false;\n\n    if (!isNOU(item)) {\n      this.updateType(item); // eslint-disable-next-line\n\n      var details_1 = this.getItemObject(item);\n\n      if (!hasReadAccess(details_1)) {\n        createDeniedDialog(this.parent, details_1, events.permissionRead);\n        return;\n      }\n\n      var eventArgs = {\n        cancel: false,\n        fileDetails: details_1,\n        module: 'LargeIconsView'\n      };\n      this.parent.trigger('fileOpen', eventArgs, function (fileOpenArgs) {\n        if (!fileOpenArgs.cancel) {\n          var text = getValue('name', details_1);\n\n          if (!_this.parent.isFile) {\n            var val = _this.parent.breadcrumbbarModule.searchObj.element.value;\n\n            if (val === '' && !_this.parent.isFiltered) {\n              var id = getValue('id', details_1);\n              var newPath = _this.parent.path + (isNOU(id) ? text : id) + '/';\n\n              _this.parent.setProperties({\n                path: newPath\n              }, true);\n\n              _this.parent.pathNames.push(text);\n\n              _this.parent.pathId.push(getValue('_fm_id', details_1));\n\n              _this.parent.itemData = [details_1];\n              openAction(_this.parent);\n            } else {\n              openSearchFolder(_this.parent, details_1);\n            }\n\n            _this.parent.isFiltered = false;\n\n            _this.parent.setProperties({\n              selectedItems: []\n            }, true);\n          } else {\n            var icon = fileType(details_1);\n\n            if (icon === CLS.ICON_IMAGE) {\n              var imgUrl = getImageUrl(_this.parent, details_1);\n              createImageDialog(_this.parent, text, imgUrl);\n            }\n          }\n        }\n      });\n    }\n  };\n\n  LargeIconsView.prototype.updateType = function (item) {\n    var folder = select('.' + CLS.FOLDER, item);\n    this.parent.isFile = isNOU(folder) ? true : false;\n  };\n  /* istanbul ignore next */\n  // eslint:disable-next-line\n\n\n  LargeIconsView.prototype.keydownActionHandler = function (e) {\n    if (!this.isRendered) {\n      return;\n    }\n\n    switch (e.action) {\n      case 'end':\n      case 'home':\n      case 'moveDown':\n      case 'moveLeft':\n      case 'moveRight':\n      case 'moveUp':\n      case 'ctrlEnd':\n      case 'shiftEnd':\n      case 'csEnd':\n      case 'ctrlHome':\n      case 'shiftHome':\n      case 'csHome':\n      case 'ctrlDown':\n      case 'shiftDown':\n      case 'csDown':\n      case 'ctrlLeft':\n      case 'shiftLeft':\n      case 'csLeft':\n      case 'ctrlRight':\n      case 'shiftRight':\n      case 'csRight':\n      case 'space':\n      case 'ctrlSpace':\n      case 'shiftSpace':\n      case 'csSpace':\n      case 'ctrlA':\n      case 'enter':\n      case 'altEnter':\n      case 'esc':\n      case 'del':\n      case 'shiftdel':\n      case 'ctrlC':\n      case 'ctrlV':\n      case 'ctrlX':\n      case 'f2':\n      case 'ctrlD':\n        e.preventDefault();\n        break;\n\n      default:\n        break;\n    }\n  };\n  /* istanbul ignore next */\n  // eslint:disable-next-line\n\n\n  LargeIconsView.prototype.keyActionHandler = function (e) {\n    if (!this.isRendered) {\n      return;\n    }\n\n    var fItem = this.getFocusedItem();\n    var firstItem = this.getFirstItem();\n    var lastItem = this.getLastItem();\n\n    switch (e.action) {\n      case 'end':\n        this.navigateItem(lastItem);\n        break;\n\n      case 'home':\n        this.navigateItem(firstItem);\n        break;\n\n      case 'tab':\n        if (!isNOU(fItem)) {\n          this.addFocus(fItem);\n        } else if (!isNOU(firstItem)) {\n          this.addFocus(firstItem);\n        }\n\n        break;\n\n      case 'moveDown':\n        this.navigateDown(fItem, true);\n        break;\n\n      case 'moveLeft':\n        this.navigateRight(fItem, false);\n        break;\n\n      case 'moveRight':\n        this.navigateRight(fItem, true);\n        break;\n\n      case 'moveUp':\n        this.navigateDown(fItem, false);\n        break;\n\n      case 'ctrlEnd':\n      case 'shiftEnd':\n      case 'csEnd':\n        this.csEndKey(lastItem, e);\n        break;\n\n      case 'ctrlHome':\n      case 'shiftHome':\n      case 'csHome':\n        this.csHomeKey(firstItem, e);\n        break;\n\n      case 'ctrlDown':\n      case 'shiftDown':\n      case 'csDown':\n        this.csDownKey(fItem, e);\n        break;\n\n      case 'ctrlLeft':\n      case 'shiftLeft':\n      case 'csLeft':\n        this.csLeftKey(fItem, e);\n        break;\n\n      case 'ctrlRight':\n      case 'shiftRight':\n      case 'csRight':\n        this.csRightKey(fItem, e);\n        break;\n\n      case 'ctrlUp':\n      case 'shiftUp':\n      case 'csUp':\n        this.csUpKey(fItem, e);\n        break;\n\n      case 'space':\n        this.spaceKey(fItem);\n        break;\n\n      case 'ctrlSpace':\n      case 'shiftSpace':\n      case 'csSpace':\n        if (!isNOU(fItem)) {\n          this.doSelection(fItem, e);\n        }\n\n        break;\n\n      case 'ctrlA':\n        this.ctrlAKey(firstItem, lastItem);\n        break;\n\n      case 'enter':\n        this.doOpenAction(this.parent.visitedItem ? this.parent.visitedItem : this.getVisitedItem());\n        break;\n\n      case 'altEnter':\n        this.parent.notify(events.detailsInit, {});\n        GetDetails(this.parent, this.parent.selectedItems, this.parent.path, 'details');\n        break;\n\n      case 'esc':\n        removeActive(this.parent);\n        break;\n\n      case 'del':\n      case 'shiftdel':\n        this.performDelete();\n        break;\n\n      case 'ctrlC':\n        copyFiles(this.parent);\n        break;\n\n      case 'ctrlV':\n        this.parent.folderPath = '';\n        pasteHandler(this.parent);\n        break;\n\n      case 'ctrlX':\n        cutFiles(this.parent);\n        break;\n\n      case 'f2':\n        this.performRename();\n        break;\n\n      case 'ctrlD':\n        this.doDownload();\n        break;\n    }\n  };\n\n  LargeIconsView.prototype.doDownload = function () {\n    this.updateSelectedData();\n    doDownload(this.parent);\n  };\n\n  LargeIconsView.prototype.performDelete = function () {\n    if (this.parent.selectedItems && this.parent.selectedItems.length > 0) {\n      this.updateSelectedData(); // eslint-disable-next-line\n\n      var data = this.parent.itemData;\n\n      for (var i = 0; i < data.length; i++) {\n        if (!hasEditAccess(data[i])) {\n          createDeniedDialog(this.parent, data[i], events.permissionEdit);\n          return;\n        }\n      }\n\n      createDialog(this.parent, 'Delete');\n    }\n  };\n\n  LargeIconsView.prototype.performRename = function () {\n    if (this.parent.selectedItems.length === 1) {\n      this.updateRenameData();\n      doRename(this.parent);\n    }\n  };\n\n  LargeIconsView.prototype.updateRenameData = function () {\n    var item = select('.' + CLS.LIST_ITEM + '.' + CLS.ACTIVE, this.element); // eslint-disable-next-line\n\n    var data = this.getItemObject(item);\n    updateRenamingData(this.parent, data);\n  };\n\n  LargeIconsView.prototype.getVisitedItem = function () {\n    var item = this.parent.selectedItems[this.parent.selectedItems.length - 1];\n    var indexes = this.getIndexes([item], this.parent.hasId);\n    return this.itemList[indexes[0]];\n  };\n\n  LargeIconsView.prototype.getFocusedItem = function () {\n    return select('.' + CLS.LIST_ITEM + '.' + CLS.FOCUS, this.element);\n  };\n\n  LargeIconsView.prototype.getActiveItem = function () {\n    return select('.' + CLS.LIST_ITEM + '.' + CLS.ACTIVE, this.element);\n  };\n\n  LargeIconsView.prototype.getFirstItem = function () {\n    return this.itemList[0];\n  };\n\n  LargeIconsView.prototype.getLastItem = function () {\n    return this.itemList[this.itemList.length - 1];\n  };\n\n  LargeIconsView.prototype.navigateItem = function (item) {\n    this.setFocus(item);\n  };\n\n  LargeIconsView.prototype.navigateDown = function (fItem, isTowards) {\n    var nItem = this.getNextItem(fItem, isTowards, this.perRow);\n    this.setFocus(nItem);\n  };\n\n  LargeIconsView.prototype.navigateRight = function (fItem, isTowards) {\n    var nItem = this.getNextItem(fItem, isTowards);\n    this.setFocus(nItem);\n  };\n\n  LargeIconsView.prototype.getNextItem = function (li, isTowards, perRow) {\n    if (isNOU(li)) {\n      return this.getFocusedItem() || this.getActiveItem() || this.getFirstItem();\n    }\n\n    var index = this.itemList.indexOf(li);\n    var nextItem;\n\n    do {\n      if (isTowards) {\n        index = perRow ? index + perRow : index + 1;\n      } else {\n        index = perRow ? index - perRow : index - 1;\n      }\n\n      nextItem = this.itemList[index];\n\n      if (isNOU(nextItem)) {\n        return li;\n      }\n    } while (!isVisible(nextItem));\n\n    return nextItem;\n  };\n\n  LargeIconsView.prototype.setFocus = function (nextItem) {\n    if (!isNOU(nextItem)) {\n      var fileSelectionArgs = this.triggerSelection('select', nextItem);\n\n      if (fileSelectionArgs.cancel !== true) {\n        this.startItem = nextItem;\n        this.clearSelect();\n        this.addActive(nextItem);\n        this.addFocus(nextItem);\n        this.parent.notify(events.selectionChanged, {});\n        this.triggerSelect('select', nextItem);\n      }\n    }\n  };\n\n  LargeIconsView.prototype.spaceKey = function (fItem) {\n    if (!isNOU(fItem) && !fItem.classList.contains(CLS.ACTIVE)) {\n      var fileSelectionArgs = this.triggerSelection('select', fItem);\n\n      if (fileSelectionArgs.cancel !== true) {\n        this.addActive(fItem);\n        this.parent.notify(events.selectionChanged, {});\n        this.triggerSelect('select', fItem);\n      }\n    }\n  };\n\n  LargeIconsView.prototype.ctrlAKey = function (firstItem, lastItem) {\n    if (this.parent.allowMultiSelection && !isNOU(firstItem)) {\n      this.startItem = firstItem;\n      var eveArgs = {\n        ctrlKey: true,\n        shiftKey: true\n      };\n      var liParent = this.element.querySelector('.' + CLS.LIST_PARENT);\n      var liScrPos = liParent.scrollTop;\n      var getCurFocusedItem = this.getFocusedItem();\n      this.doSelection(lastItem, eveArgs);\n      liParent.scrollTop = liScrPos;\n\n      if (!isNOU(getCurFocusedItem)) {\n        this.addFocus(getCurFocusedItem);\n      }\n    }\n  };\n\n  LargeIconsView.prototype.csEndKey = function (lastItem, e) {\n    if (!this.parent.allowMultiSelection) {\n      this.navigateItem(lastItem);\n    } else if (!isNOU(lastItem)) {\n      if (e.action === 'ctrlEnd') {\n        this.addFocus(lastItem);\n      } else {\n        this.doSelection(lastItem, e);\n      }\n    }\n  };\n\n  LargeIconsView.prototype.csHomeKey = function (firstItem, e) {\n    if (!this.parent.allowMultiSelection) {\n      this.navigateItem(firstItem);\n    } else if (!isNOU(firstItem)) {\n      if (e.action === 'ctrlHome') {\n        this.addFocus(firstItem);\n      } else {\n        this.doSelection(firstItem, e);\n      }\n    }\n  };\n\n  LargeIconsView.prototype.csDownKey = function (fItem, e) {\n    if (!this.parent.allowMultiSelection) {\n      this.navigateDown(fItem, true);\n    } else {\n      var dItem = this.getNextItem(fItem, true, this.perRow);\n\n      if (!isNOU(dItem)) {\n        if (e.action === 'ctrlDown') {\n          this.addFocus(dItem);\n        } else {\n          this.doSelection(dItem, e);\n        }\n      }\n    }\n  };\n\n  LargeIconsView.prototype.csLeftKey = function (fItem, e) {\n    if (!this.parent.allowMultiSelection) {\n      this.navigateRight(fItem, false);\n    } else {\n      var lItem = this.getNextItem(fItem, false);\n\n      if (!isNOU(lItem)) {\n        if (e.action === 'ctrlLeft') {\n          this.addFocus(lItem);\n        } else {\n          this.doSelection(lItem, e);\n        }\n      }\n    }\n  };\n\n  LargeIconsView.prototype.csRightKey = function (fItem, e) {\n    if (!this.parent.allowMultiSelection) {\n      this.navigateRight(fItem, true);\n    } else {\n      var rItem = this.getNextItem(fItem, true);\n\n      if (!isNOU(rItem)) {\n        if (e.action === 'ctrlRight') {\n          this.addFocus(rItem);\n        } else {\n          this.doSelection(rItem, e);\n        }\n      }\n    }\n  };\n\n  LargeIconsView.prototype.csUpKey = function (fItem, e) {\n    if (!this.parent.allowMultiSelection) {\n      this.navigateDown(fItem, false);\n    } else {\n      var uItem = this.getNextItem(fItem, false, this.perRow);\n\n      if (!isNOU(uItem)) {\n        if (e.action === 'ctrlUp') {\n          this.addFocus(uItem);\n        } else {\n          this.doSelection(uItem, e);\n        }\n      }\n    }\n  };\n\n  LargeIconsView.prototype.addActive = function (nextItem) {\n    if (!isNOU(nextItem)) {\n      if (!nextItem.classList.contains(CLS.ACTIVE)) {\n        this.parent.selectedItems.push(this.getDataName(nextItem));\n        this.parent.setProperties({\n          selectedItems: this.parent.selectedItems\n        }, true);\n        addClass([nextItem], [CLS.ACTIVE]);\n        nextItem.setAttribute('aria-selected', 'true');\n        this.checkState(nextItem, true);\n      }\n\n      this.parent.visitedItem = nextItem;\n    }\n  };\n\n  LargeIconsView.prototype.removeActive = function (preItem) {\n    if (!isNOU(preItem)) {\n      removeClass([preItem], [CLS.ACTIVE]);\n\n      if (this.parent.allowMultiSelection) {\n        preItem.setAttribute('aria-selected', 'false');\n      } else {\n        preItem.removeAttribute('aria-selected');\n      }\n\n      this.checkState(preItem, false);\n      var index = this.parent.selectedItems.indexOf(this.getDataName(preItem));\n\n      if (index > -1) {\n        this.parent.selectedItems.splice(index, 1);\n        this.parent.setProperties({\n          selectedItems: this.parent.selectedItems\n        }, true);\n      }\n\n      this.parent.visitedItem = null;\n    }\n  };\n\n  LargeIconsView.prototype.getDataName = function (item) {\n    // eslint-disable-next-line\n    var data = this.getItemObject(item);\n    return getItemName(this.parent, data);\n  };\n\n  LargeIconsView.prototype.addFocus = function (item) {\n    this.element.setAttribute('tabindex', '-1');\n    var fItem = this.getFocusedItem();\n\n    if (fItem) {\n      fItem.removeAttribute('tabindex');\n      removeClass([fItem], [CLS.FOCUS]);\n    }\n\n    addClass([item], [CLS.FOCUS]);\n    item.setAttribute('tabindex', '0');\n    item.focus();\n  };\n\n  LargeIconsView.prototype.checkState = function (item, toCheck) {\n    if (!this.parent.allowMultiSelection) {\n      return;\n    }\n\n    var checkEle = select('.' + CLS.FRAME, item);\n\n    if (isNOU(checkEle)) {\n      return;\n    }\n\n    if (toCheck) {\n      if (!checkEle.classList.contains(CLS.CHECK)) {\n        addClass([checkEle], CLS.CHECK);\n        closest(checkEle, '.' + CLS.CB_WRAP).setAttribute('aria-checked', 'true');\n      }\n    } else {\n      if (checkEle.classList.contains(CLS.CHECK)) {\n        removeClass([checkEle], CLS.CHECK);\n        closest(checkEle, '.' + CLS.CB_WRAP).setAttribute('aria-checked', 'false');\n      }\n    }\n  };\n\n  LargeIconsView.prototype.clearSelect = function () {\n    var eles = Array.prototype.slice.call(selectAll('.' + CLS.ACTIVE, this.listElements));\n    var fileSelectionArgs;\n\n    if (eles.length !== 0) {\n      fileSelectionArgs = this.triggerSelection('unselect', eles[0]);\n\n      if (fileSelectionArgs.cancel !== true) {\n        for (var i = 0, len = eles.length; i < len; i++) {\n          this.removeActive(eles[i]);\n        }\n      }\n\n      this.triggerSelect('unselect', eles[0]);\n    }\n  };\n\n  LargeIconsView.prototype.resizeHandler = function () {\n    this.getItemCount();\n\n    if (!isNOU(this.listObj)) {\n      this.adjustHeight();\n    }\n  };\n\n  LargeIconsView.prototype.splitterResizeHandler = function () {\n    this.getItemCount();\n  };\n\n  LargeIconsView.prototype.getItemCount = function () {\n    var perRow = 1;\n\n    if (this.itemList) {\n      for (var i = 0, len = this.itemList.length - 1; i < len; i++) {\n        if (this.itemList[i].getBoundingClientRect().top === this.itemList[i + 1].getBoundingClientRect().top) {\n          perRow++;\n        } else {\n          break;\n        }\n      }\n    }\n\n    this.perRow = perRow;\n  };\n\n  LargeIconsView.prototype.triggerSelection = function (action, item) {\n    // eslint-disable-next-line\n    var data = this.getItemObject(item);\n    var eventArgs = {\n      action: action,\n      fileDetails: data,\n      isInteracted: this.isInteraction,\n      cancel: false,\n      target: item\n    };\n    this.parent.trigger('fileSelection', eventArgs);\n    this.isInteraction = true;\n    return eventArgs;\n  };\n\n  LargeIconsView.prototype.triggerSelect = function (action, item) {\n    // eslint-disable-next-line\n    var data = this.getItemObject(item);\n    this.parent.visitedData = data;\n    var eventArgs = {\n      action: action,\n      fileDetails: data,\n      isInteracted: this.isInteracted\n    };\n    this.parent.trigger('fileSelect', eventArgs);\n    this.isInteracted = true;\n  };\n\n  LargeIconsView.prototype.selectItems = function (items) {\n    var indexes = this.getIndexes(items, this.parent.hasId);\n\n    for (var j = 0, len = indexes.length; j < len; j++) {\n      var eveArgs = {\n        ctrlKey: true,\n        shiftKey: false\n      };\n      this.doSelection(this.itemList[indexes[j]], eveArgs);\n    }\n  };\n\n  LargeIconsView.prototype.getIndexes = function (items, byId) {\n    var indexes = [];\n    var filter = byId ? 'id' : 'name';\n\n    for (var i = 0, len = this.items.length; i < len; i++) {\n      if (items.indexOf(getValue(filter, this.items[i])) !== -1) {\n        indexes.push(i);\n      }\n    }\n\n    return indexes;\n  }; // eslint-disable-next-line\n\n\n  LargeIconsView.prototype.getItemObject = function (item) {\n    var index = this.itemList.indexOf(item);\n    return this.items[index];\n  }; // eslint-disable-next-line\n\n\n  LargeIconsView.prototype.addSelection = function (data) {\n    // eslint-disable-next-line\n    var resultData = [];\n\n    if (this.parent.hasId) {\n      resultData = new DataManager(this.items).executeLocal(new Query().where('id', 'equal', this.parent.renamedId, false));\n    } else {\n      // eslint-disable-next-line\n      var newData = new DataManager(this.items).executeLocal(new Query().where('name', 'equal', getValue('name', data), false));\n\n      if (newData.length > 0) {\n        resultData = new DataManager(newData).executeLocal(new Query().where('filterPath', 'equal', this.parent.filterPath, false));\n      }\n    }\n\n    if (resultData.length > 0) {\n      var index = this.items.indexOf(resultData[0]);\n      var eveArgs = {\n        ctrlKey: true,\n        shiftKey: false\n      };\n      this.doSelection(this.itemList[index], eveArgs);\n    }\n  };\n\n  LargeIconsView.prototype.updateSelectedData = function () {\n    // eslint-disable-next-line\n    var data = [];\n    var items = selectAll('.' + CLS.LIST_ITEM + '.' + CLS.ACTIVE, this.element);\n\n    for (var i = 0; i < items.length; i++) {\n      data[i] = this.getItemObject(items[i]);\n    }\n\n    this.parent.itemData = data;\n  }; // eslint-disable-next-line\n\n\n  LargeIconsView.prototype.onMethodCall = function (args) {\n    if (this.parent.view !== 'LargeIcons') {\n      return;\n    }\n\n    var action = getValue('action', args);\n\n    switch (action) {\n      case 'deleteFiles':\n        this.deleteFiles(getValue('ids', args));\n        break;\n\n      case 'downloadFiles':\n        this.downloadFiles(getValue('ids', args));\n        break;\n\n      case 'openFile':\n        this.openFile(getValue('id', args));\n        break;\n\n      case 'renameFile':\n        this.isInteraction = false;\n        this.isInteracted = false;\n        this.renameFile(getValue('id', args), getValue('newName', args));\n        break;\n\n      case 'createFolder':\n        this.isInteraction = false;\n        this.isInteracted = false;\n        break;\n\n      case 'clearSelection':\n        this.isInteraction = false;\n        this.isInteracted = false;\n        this.onClearAllInit();\n        break;\n\n      case 'selectAll':\n        this.isInteraction = false;\n        this.isInteracted = false;\n        this.onSelectAllInit();\n        break;\n    }\n  };\n\n  LargeIconsView.prototype.getItemsIndex = function (items) {\n    var indexes = [];\n    var isFilter = this.parent.breadcrumbbarModule.searchObj.element.value !== '' || this.parent.isFiltered ? true : false;\n    var filterName = this.parent.hasId ? 'id' : 'name';\n\n    if (this.parent.hasId || !isFilter) {\n      for (var i = 0, len = this.items.length; i < len; i++) {\n        if (items.indexOf(getValue(filterName, this.items[i])) !== -1) {\n          indexes.push(i);\n        }\n      }\n    } else {\n      for (var i = 0, len = this.items.length; i < len; i++) {\n        var name_2 = getValue('filterPath', this.items[i]) + getValue('name', this.items[i]);\n\n        if (items.indexOf(name_2) !== -1) {\n          indexes.push(i);\n        }\n      }\n    }\n\n    return indexes;\n  };\n\n  LargeIconsView.prototype.deleteFiles = function (ids) {\n    this.parent.activeModule = 'largeiconsview';\n\n    if (isNOU(ids)) {\n      this.performDelete();\n      return;\n    }\n\n    var indexes = this.getItemsIndex(ids);\n\n    if (indexes.length === 0) {\n      return;\n    } // eslint-disable-next-line\n\n\n    var data = [];\n    var newIds = [];\n\n    for (var i = 0; i < indexes.length; i++) {\n      data[i] = this.items[indexes[i]];\n      newIds[i] = getItemName(this.parent, data[i]);\n    }\n\n    doDeleteFiles(this.parent, data, newIds);\n  };\n\n  LargeIconsView.prototype.downloadFiles = function (ids) {\n    if (isNOU(ids)) {\n      this.doDownload();\n      return;\n    }\n\n    var index = this.getItemsIndex(ids);\n\n    if (index.length === 0) {\n      return;\n    } // eslint-disable-next-line\n\n\n    var data = [];\n    var newIds = [];\n\n    for (var i = 0; i < index.length; i++) {\n      data[i] = this.items[index[i]];\n      newIds[i] = getItemName(this.parent, data[i]);\n    }\n\n    doDownloadFiles(this.parent, data, newIds);\n  };\n\n  LargeIconsView.prototype.openFile = function (id) {\n    if (isNOU(id)) {\n      return;\n    }\n\n    var indexes = this.getItemsIndex([id]);\n\n    if (indexes.length > 0) {\n      this.doOpenAction(this.itemList[indexes[0]]);\n    }\n  };\n\n  LargeIconsView.prototype.renameFile = function (id, name) {\n    this.parent.activeModule = 'largeiconsview';\n\n    if (isNOU(id)) {\n      this.performRename();\n      return;\n    }\n\n    var indexes = this.getItemsIndex([id]);\n\n    if (indexes.length > 0) {\n      updateRenamingData(this.parent, this.items[indexes[0]]);\n\n      if (isNOU(name)) {\n        doRename(this.parent);\n      } else {\n        if (!hasEditAccess(this.parent.itemData[0])) {\n          createDeniedDialog(this.parent, this.parent.itemData[0], events.permissionEdit);\n        } else {\n          rename(this.parent, this.parent.path, name);\n        }\n      }\n    }\n  };\n\n  return LargeIconsView;\n}();\n\nexport { LargeIconsView };","map":{"version":3,"sources":["/Users/yasaman/Documents/moj_adminpanel/adminpanel/node_modules/@syncfusion/ej2-filemanager/src/file-manager/layout/large-icons-view.js"],"names":["ListBase","createElement","select","selectAll","EventHandler","KeyboardEvents","closest","Draggable","isNullOrUndefined","isNOU","addClass","removeClass","Touch","isVisible","getValue","setValue","remove","DataManager","Query","hideSpinner","showSpinner","events","CLS","createCheckBox","read","GetDetails","Delete","doRename","getAccessClass","getPathObject","getFullPath","getDirectoryPath","rename","doDownload","getItemName","removeBlur","cutFiles","copyFiles","addBlur","openSearchFolder","removeActive","pasteHandler","createVirtualDragElement","dragStopHandler","dragStartHandler","draggingHandler","getModule","updateRenamingData","doDeleteFiles","doDownloadFiles","openAction","fileType","refresh","getImageUrl","getSortedData","createDeniedDialog","updateLayout","createEmptyElement","hasReadAccess","hasEditAccess","createDialog","createImageDialog","LargeIconsView","parent","isInteraction","uploadOperation","count","isRendered","tapCount","isPasteOperation","isInteracted","element","id","LARGEICON_ID","LARGE_ICONS","addEventListener","keyConfigs","end","home","tab","moveDown","moveLeft","moveRight","moveUp","ctrlEnd","ctrlHome","ctrlDown","ctrlLeft","ctrlRight","ctrlUp","shiftEnd","shiftHome","shiftDown","shiftLeft","shiftRight","shiftUp","csEnd","csHome","csDown","csLeft","csRight","csUp","space","ctrlSpace","shiftSpace","csSpace","ctrlA","enter","altEnter","esc","del","ctrlX","ctrlC","ctrlV","f2","shiftdel","back","ctrlD","prototype","render","args","visitedItem","startItem","view","resetMultiSelect","setAttribute","listObj","unWireEvents","removeEventListener","notify","hideLayout","iconsView","ul","ariaAttributes","itemRole","listRole","itemText","groupItemRole","wrapperRole","showIcon","fields","text","iconCss","imageUrl","htmlAttributes","sortOrder","itemCreated","onItemCreated","bind","enableHtmlSanitizer","items","renderList","listElements","createListFromJson","itemList","Array","slice","call","LIST_ITEM","appendChild","preventImgDrag","createDragObj","classList","DISPLAY_NONE","length","emptyList","querySelector","LIST_PARENT","removeChild","EMPTY","selectItems","pasteNodes","uploadItem","setProperties","selectedItems","activeEle","querySelectorAll","ACTIVE","activeModule","i","adjustHeight","style","maxHeight","getItemCount","wireEvents","checkItem","ondragstart","_this","isMobile","allowDragAndDrop","dragObj","destroy","enableTailMode","distance","enableAutoScroll","dragTarget","LARGE_ICON","helper","dragHelper","cursorAt","dragCursorPosition","dragArea","dragStop","drag","clone","dragStart","sender","target","dragLi","contains","setFocus","activeElements","dragData","push","getItemObject","dragPath","path","virtualDragElement","onDropInit","targetModule","getModuleName","dropLi","cwdData","pathId","feParent","info","dropPath","isFile","dropData","pane","CONTENT_ID","bar","BREADCRUMBBAR_ID","height","offsetHeight","item","removeAttribute","showFileExtension","curData","textEle","LIST_TEXT","txt","type","innerHTML","substr","renderCheckbox","eventArgs","fileDetails","module","trigger","allowMultiSelection","checkElement","checked","cssClass","firstElementChild","insertBefore","childNodes","onLayoutChange","fileAction","isCut","selectedNodes","indexes","getIndexes","length_1","focus","isLayoutChange","checkEle","checkLength","checkState","JSON","parse","stringify","files","icon","name_1","selected","className","indexOf","ICON_IMAGE","showThumbnail","imgUrl","alt","class","title","onFinalizeEnd","onCreateEnd","clearSelect","hasId","createdItem","largeiconsviewModule","onSelectedData","updateSelectedData","onDeleteInit","onDeleteEnd","onRefreshEnd","onRenameInit","updateRenameData","onPathChanged","breadcrumbbarModule","searchObj","value","searchedItems","renamedItem","addSelection","onOpenInit","doOpenAction","onHideLayout","add","onSelectAllInit","getFirstItem","lastItem","getLastItem","eveArgs","ctrlKey","shiftKey","doSelection","onClearAllInit","clearSelection","onBeforeRequest","onAfterRequest","onSearch","selectionChanged","onLayoutRefresh","onUpdateSelectionData","onPathColumn","isFiltered","sortBy","sortByChange","isDestroyed","off","pathColumn","finalizeEnd","createEnd","selectedData","deleteInit","deleteEnd","refreshEnd","pathChanged","layoutChange","search","openInit","openEnd","modelChanged","onPropertyChanged","methodCall","onMethodCall","actionFailure","onActionFailure","renameInit","renameEnd","selectAllInit","clearAllInit","menuItemData","onMenuItemData","beforeRequest","afterRequest","splitterResize","splitterResizeHandler","resizeEnd","resizeHandler","pasteInit","onpasteInit","pasteEnd","onpasteEnd","cutCopyInit","oncutCopyInit","dropInit","detailsInit","onDetailsInit","layoutRefresh","onDropPath","updateSelectionData","filterEnd","on","ele","itemData","folderPath","activeRecords","destinationPath","e","currentSelected","_i","_a","Object","keys","newProp","prop","wireClickEvent","keyboardModule","keyAction","keyActionHandler","eventName","keyboardDownModule","keydownActionHandler","onMouseOver","targetEle","HOVER","toBind","proxy_1","clickObj","tap","eve","originalEvent","preventDefault","isDevice","tapEvent","setTimeout","doTapAction","which","dblClickHandler","clickHandler","tapHold","multiSelect","MULTI_SELECT","updateType","cList","action","CHECK","fileSelectionArgs","triggerSelection","cancel","FRAME","startIndex","endIndex","addActive","addFocus","triggerSelect","details_1","permissionRead","fileOpenArgs","val","newPath","pathNames","folder","FOLDER","fItem","getFocusedItem","firstItem","navigateItem","navigateDown","navigateRight","csEndKey","csHomeKey","csDownKey","csLeftKey","csRightKey","csUpKey","spaceKey","ctrlAKey","getVisitedItem","performDelete","performRename","data","permissionEdit","FOCUS","getActiveItem","isTowards","nItem","getNextItem","perRow","li","index","nextItem","liParent","liScrPos","scrollTop","getCurFocusedItem","dItem","lItem","rItem","uItem","getDataName","preItem","splice","toCheck","CB_WRAP","eles","len","getBoundingClientRect","top","visitedData","j","byId","filter","resultData","executeLocal","where","renamedId","newData","filterPath","deleteFiles","downloadFiles","openFile","renameFile","getItemsIndex","isFilter","filterName","name_2","ids","newIds","name"],"mappings":"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","sourcesContent":["import { ListBase } from '@syncfusion/ej2-lists';\nimport { createElement, select, selectAll, EventHandler, KeyboardEvents, closest, Draggable } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined as isNOU, addClass, removeClass, Touch, isVisible } from '@syncfusion/ej2-base';\nimport { getValue, setValue, remove } from '@syncfusion/ej2-base';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport { hideSpinner, showSpinner } from '@syncfusion/ej2-popups';\nimport * as events from '../base/constant';\nimport * as CLS from '../base/classes';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { read, GetDetails, Delete } from '../common/operations';\nimport { doRename, getAccessClass, getPathObject, getFullPath, getDirectoryPath, rename, doDownload, getItemName } from '../common/index';\nimport { removeBlur, cutFiles, copyFiles, addBlur, openSearchFolder, removeActive, pasteHandler } from '../common/index';\nimport { createVirtualDragElement, dragStopHandler, dragStartHandler, draggingHandler, getModule } from '../common/index';\nimport { updateRenamingData, doDeleteFiles, doDownloadFiles } from '../common/index';\nimport { openAction, fileType, refresh, getImageUrl, getSortedData, createDeniedDialog, updateLayout } from '../common/utility';\nimport { createEmptyElement, hasReadAccess, hasEditAccess } from '../common/utility';\nimport { createDialog, createImageDialog } from '../pop-up/dialog';\n/**\n * LargeIconsView module\n */\nvar LargeIconsView = /** @class */ (function () {\n    /**\n     * Constructor for the LargeIcons module.\n     *\n     * @param {IFileManager} parent - specifies the parent element.\n     * @hidden\n     */\n    function LargeIconsView(parent) {\n        this.isInteraction = true;\n        this.uploadOperation = false;\n        this.count = 0;\n        this.isRendered = true;\n        this.tapCount = 0;\n        this.isPasteOperation = false;\n        this.isInteracted = true;\n        this.parent = parent;\n        this.element = select('#' + this.parent.element.id + CLS.LARGEICON_ID, this.parent.element);\n        addClass([this.element], CLS.LARGE_ICONS);\n        this.addEventListener();\n        this.keyConfigs = {\n            end: 'end',\n            home: 'home',\n            tab: 'tab',\n            moveDown: 'downarrow',\n            moveLeft: 'leftarrow',\n            moveRight: 'rightarrow',\n            moveUp: 'uparrow',\n            ctrlEnd: 'ctrl+end',\n            ctrlHome: 'ctrl+home',\n            ctrlDown: 'ctrl+downarrow',\n            ctrlLeft: 'ctrl+leftarrow',\n            ctrlRight: 'ctrl+rightarrow',\n            ctrlUp: 'ctrl+uparrow',\n            shiftEnd: 'shift+end',\n            shiftHome: 'shift+home',\n            shiftDown: 'shift+downarrow',\n            shiftLeft: 'shift+leftarrow',\n            shiftRight: 'shift+rightarrow',\n            shiftUp: 'shift+uparrow',\n            csEnd: 'ctrl+shift+end',\n            csHome: 'ctrl+shift+home',\n            csDown: 'ctrl+shift+downarrow',\n            csLeft: 'ctrl+shift+leftarrow',\n            csRight: 'ctrl+shift+rightarrow',\n            csUp: 'ctrl+shift+uparrow',\n            space: 'space',\n            ctrlSpace: 'ctrl+space',\n            shiftSpace: 'shift+space',\n            csSpace: 'ctrl+shift+space',\n            ctrlA: 'ctrl+a',\n            enter: 'enter',\n            altEnter: 'alt+enter',\n            esc: 'escape',\n            del: 'delete',\n            ctrlX: 'ctrl+x',\n            ctrlC: 'ctrl+c',\n            ctrlV: 'ctrl+v',\n            f2: 'f2',\n            shiftdel: 'shift+delete',\n            back: 'backspace',\n            ctrlD: 'ctrl+d'\n        };\n    }\n    LargeIconsView.prototype.render = function (args) {\n        this.parent.visitedItem = null;\n        this.startItem = null;\n        showSpinner(this.parent.element);\n        if (this.parent.view === 'LargeIcons') {\n            this.resetMultiSelect();\n            this.element.setAttribute('tabindex', '0');\n            if (this.listObj) {\n                this.unWireEvents();\n                this.removeEventListener();\n            }\n            this.parent.notify(events.hideLayout, {});\n            var iconsView = select('#' + this.parent.element.id + CLS.LARGEICON_ID, this.parent.element);\n            var ul = select('ul', iconsView);\n            if (ul) {\n                remove(ul);\n            }\n            this.listObj = {\n                ariaAttributes: {\n                    itemRole: 'option', listRole: 'listbox', itemText: '',\n                    groupItemRole: 'group', wrapperRole: ''\n                },\n                showIcon: true,\n                fields: { text: 'name', iconCss: '_fm_icon', imageUrl: '_fm_imageUrl', htmlAttributes: '_fm_htmlAttr' },\n                sortOrder: this.parent.sortOrder,\n                itemCreated: this.onItemCreated.bind(this),\n                enableHtmlSanitizer: this.parent.enableHtmlSanitizer\n            };\n            this.items = [];\n            this.items = this.renderList(args);\n            this.items = getSortedData(this.parent, this.items);\n            // eslint-disable-next-line\n            this.listElements = ListBase.createListFromJson(createElement, this.items, this.listObj);\n            this.itemList = Array.prototype.slice.call(selectAll('.' + CLS.LIST_ITEM, this.listElements));\n            this.element.appendChild(this.listElements);\n            this.preventImgDrag();\n            this.createDragObj();\n            iconsView.classList.remove(CLS.DISPLAY_NONE);\n            if (this.itemList.length === 0) {\n                var emptyList = this.element.querySelector('.' + CLS.LIST_PARENT);\n                this.element.removeChild(emptyList);\n                createEmptyElement(this.parent, this.element, args);\n            }\n            else if (this.itemList.length !== 0 && this.element.querySelector('.' + CLS.EMPTY)) {\n                this.element.removeChild(this.element.querySelector('.' + CLS.EMPTY));\n            }\n            if (this.isPasteOperation === true) {\n                this.selectItems(this.parent.pasteNodes);\n                this.isPasteOperation = false;\n            }\n            /* istanbul ignore next */\n            if (this.uploadOperation === true) {\n                this.selectItems(this.parent.uploadItem);\n                this.parent.setProperties({ selectedItems: [] }, true);\n                this.count++;\n                if (this.count === this.parent.uploadItem.length) {\n                    this.uploadOperation = false;\n                    this.parent.uploadItem = [];\n                }\n            }\n            var activeEle = this.element.querySelectorAll('.' + CLS.ACTIVE);\n            if (activeEle.length !== 0) {\n                this.parent.activeModule = 'largeiconsview';\n            }\n            for (var i = 0; i < activeEle.length; i++) {\n                activeEle[i].setAttribute('aria-selected', 'true');\n            }\n            this.adjustHeight();\n            this.element.style.maxHeight = '100%';\n            this.getItemCount();\n            this.addEventListener();\n            this.wireEvents();\n            this.isRendered = true;\n            hideSpinner(this.parent.element);\n            if (this.parent.selectedItems.length) {\n                this.checkItem();\n            }\n        }\n    };\n    LargeIconsView.prototype.preventImgDrag = function () {\n        var i = 0;\n        while (i < this.itemList.length) {\n            if (this.itemList[i].querySelector('img')) {\n                /* istanbul ignore next */\n                this.itemList[i].ondragstart = function () { return false; };\n            }\n            i++;\n        }\n    };\n    LargeIconsView.prototype.createDragObj = function () {\n        var _this = this;\n        if (!this.parent.isMobile && this.listObj) {\n            if (this.parent.allowDragAndDrop) {\n                if (this.dragObj) {\n                    this.dragObj.destroy();\n                }\n                this.dragObj = new Draggable(this.listElements, {\n                    enableTailMode: true,\n                    distance: 5,\n                    enableAutoScroll: true,\n                    dragTarget: '.' + CLS.LARGE_ICON,\n                    helper: this.dragHelper.bind(this),\n                    cursorAt: this.parent.dragCursorPosition,\n                    dragArea: this.parent.element,\n                    dragStop: dragStopHandler.bind(this, this.parent),\n                    drag: draggingHandler.bind(this, this.parent),\n                    clone: true,\n                    dragStart: function (args) {\n                        dragStartHandler(_this.parent, args, _this.dragObj);\n                    }\n                });\n            }\n            else if (this.dragObj && !this.parent.allowDragAndDrop) {\n                this.dragObj.destroy();\n            }\n        }\n    };\n    LargeIconsView.prototype.dragHelper = function (args) {\n        var dragTarget = args.sender.target;\n        var dragLi = closest(dragTarget, '.e-list-item');\n        if (!dragLi) {\n            return null;\n        }\n        if (dragLi && !dragLi.classList.contains('e-active')) {\n            this.setFocus(dragLi);\n        }\n        var activeEle = this.element.querySelectorAll('.' + CLS.ACTIVE);\n        this.parent.activeElements = [];\n        this.parent.dragData = [];\n        for (var i = 0; i < activeEle.length; i++) {\n            // eslint-disable-next-line\n            this.parent.dragData.push(this.getItemObject(activeEle[i]));\n            this.parent.activeElements.push(activeEle[i]);\n        }\n        getModule(this.parent, dragLi);\n        this.parent.dragPath = this.parent.path;\n        createVirtualDragElement(this.parent);\n        return this.parent.virtualDragElement;\n    };\n    LargeIconsView.prototype.onDropInit = function (args) {\n        if (this.parent.targetModule === this.getModuleName()) {\n            var dropLi = closest(args.target, '.e-list-item');\n            // eslint-disable-next-line\n            var cwdData = getValue(this.parent.pathId[this.parent.pathId.length - 1], this.parent.feParent);\n            if (dropLi) {\n                // eslint-disable-next-line\n                var info = this.getItemObject(dropLi);\n                this.parent.dropPath = info.isFile ? this.parent.path : getFullPath(this.parent, info, this.parent.path);\n                this.parent.dropData = info.isFile ? cwdData : info;\n            }\n            else {\n                this.parent.dropPath = this.parent.path;\n                this.parent.dropData = cwdData;\n            }\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} - returns the module name.\n     * @private\n     */\n    LargeIconsView.prototype.getModuleName = function () {\n        return 'largeiconsview';\n    };\n    LargeIconsView.prototype.adjustHeight = function () {\n        var pane = select('#' + this.parent.element.id + CLS.CONTENT_ID, this.parent.element);\n        var bar = select('#' + this.parent.element.id + CLS.BREADCRUMBBAR_ID, this.parent.element);\n        this.element.style.height = (pane.offsetHeight - bar.offsetHeight) + 'px';\n    };\n    LargeIconsView.prototype.onItemCreated = function (args) {\n        args.item.removeAttribute('aria-level');\n        if (!this.parent.showFileExtension && getValue('isFile', args.curData)) {\n            var textEle = args.item.querySelector('.' + CLS.LIST_TEXT);\n            var txt = getValue('name', args.curData);\n            var type = getValue('type', args.curData);\n            textEle.innerHTML = txt.substr(0, txt.length - type.length);\n        }\n        this.renderCheckbox(args);\n        var eventArgs = {\n            element: args.item,\n            fileDetails: args.curData,\n            module: 'LargeIconsView'\n        };\n        this.parent.trigger('fileLoad', eventArgs);\n    };\n    LargeIconsView.prototype.renderCheckbox = function (args) {\n        if (!this.parent.allowMultiSelection) {\n            return;\n        }\n        var checkElement = createCheckBox(createElement, false, {\n            checked: false,\n            cssClass: 'e-small'\n        });\n        checkElement.setAttribute('role', 'checkbox');\n        checkElement.setAttribute('aria-checked', 'false');\n        args.item.firstElementChild.insertBefore(checkElement, args.item.firstElementChild.childNodes[0]);\n    };\n    LargeIconsView.prototype.onLayoutChange = function (args) {\n        if (this.parent.view === 'LargeIcons') {\n            this.destroy();\n            this.render(args);\n            /* istanbul ignore next */\n            if (getValue('name', args) === 'layout-change' && this.parent.fileAction === 'move' &&\n                this.parent.isCut && this.parent.selectedNodes && this.parent.selectedNodes.length !== 0) {\n                var indexes = this.getIndexes(this.parent.selectedNodes);\n                var length_1 = 0;\n                while (length_1 < indexes.length) {\n                    addBlur(this.itemList[indexes[length_1]]);\n                    length_1++;\n                }\n            }\n            var activeEle = this.element.querySelectorAll('.' + CLS.ACTIVE);\n            if (activeEle.length !== 0) {\n                this.element.focus();\n            }\n            this.checkItem();\n            this.parent.isLayoutChange = false;\n        }\n        else {\n            this.element.setAttribute('tabindex', '-1');\n        }\n    };\n    LargeIconsView.prototype.checkItem = function () {\n        var checkEle = this.element.querySelectorAll('.' + CLS.ACTIVE);\n        if (checkEle) {\n            var checkLength = 0;\n            while (checkLength < checkEle.length) {\n                this.checkState(checkEle[checkLength], true);\n                checkLength++;\n            }\n        }\n    };\n    // eslint-disable-next-line\n    LargeIconsView.prototype.renderList = function (args) {\n        var i = 0;\n        // eslint-disable-next-line\n        var items = JSON.parse(JSON.stringify(args.files));\n        while (i < items.length) {\n            var icon = fileType(items[i]);\n            var name_1 = getValue('name', items[i]);\n            var selected = getItemName(this.parent, items[i]);\n            var className = ((this.parent.selectedItems &&\n                this.parent.selectedItems.indexOf(selected) !== -1)) ?\n                CLS.LARGE_ICON + ' e-active' : CLS.LARGE_ICON;\n            if (!hasEditAccess(items[i])) {\n                className += ' ' + getAccessClass(items[i]);\n            }\n            if (icon === CLS.ICON_IMAGE && this.parent.showThumbnail && hasReadAccess(items[i])) {\n                var imgUrl = getImageUrl(this.parent, items[i]);\n                setValue('_fm_imageUrl', imgUrl, items[i]);\n                setValue('_fm_imageAttr', { alt: name_1 }, items[i]);\n            }\n            else {\n                setValue('_fm_icon', icon, items[i]);\n            }\n            setValue('_fm_htmlAttr', { class: className, title: name_1 }, items[i]);\n            i++;\n        }\n        return items;\n    };\n    LargeIconsView.prototype.onFinalizeEnd = function (args) {\n        this.render(args);\n    };\n    LargeIconsView.prototype.onCreateEnd = function (args) {\n        if (this.parent.view !== 'LargeIcons') {\n            return;\n        }\n        this.onLayoutChange(args);\n        this.clearSelect();\n        this.selectItems([getValue(this.parent.hasId ? 'id' : 'name', this.parent.createdItem)]);\n        this.parent.createdItem = null;\n        this.parent.largeiconsviewModule.element.focus();\n    };\n    LargeIconsView.prototype.onSelectedData = function () {\n        if (this.parent.activeModule === 'largeiconsview') {\n            this.updateSelectedData();\n        }\n    };\n    LargeIconsView.prototype.onDeleteInit = function () {\n        if (this.parent.activeModule === 'largeiconsview') {\n            Delete(this.parent, this.parent.selectedItems, this.parent.path, 'delete');\n        }\n    };\n    /* istanbul ignore next */\n    LargeIconsView.prototype.onDeleteEnd = function (args) {\n        if (this.parent.view !== 'LargeIcons') {\n            return;\n        }\n        this.onLayoutChange(args);\n        this.parent.setProperties({ selectedItems: [] }, true);\n        this.clearSelect();\n    };\n    LargeIconsView.prototype.onRefreshEnd = function (args) {\n        if (this.parent.view !== 'LargeIcons') {\n            return;\n        }\n        this.onLayoutChange(args);\n    };\n    LargeIconsView.prototype.onRenameInit = function () {\n        if (this.parent.activeModule === 'largeiconsview' && this.parent.selectedItems.length === 1) {\n            this.updateRenameData();\n        }\n    };\n    LargeIconsView.prototype.onPathChanged = function (args) {\n        this.parent.isCut = false;\n        /* istanbul ignore next */\n        if (this.parent.breadcrumbbarModule.searchObj.element.value === '') {\n            this.parent.searchedItems = [];\n        }\n        if (this.parent.view === 'LargeIcons') {\n            removeBlur(this.parent);\n            this.parent.setProperties({ selectedItems: [] }, true);\n            this.onLayoutChange(args);\n            if (this.parent.renamedItem) {\n                this.clearSelect();\n                this.addSelection(this.parent.renamedItem);\n                this.parent.renamedItem = null;\n            }\n        }\n    };\n    LargeIconsView.prototype.onOpenInit = function (args) {\n        if (this.parent.activeModule === 'largeiconsview') {\n            this.doOpenAction(args.target);\n        }\n    };\n    LargeIconsView.prototype.onHideLayout = function () {\n        if (this.parent.view !== 'LargeIcons' && this.element) {\n            this.element.classList.add(CLS.DISPLAY_NONE);\n        }\n    };\n    LargeIconsView.prototype.onSelectAllInit = function () {\n        if (this.parent.view === 'LargeIcons') {\n            this.startItem = this.getFirstItem();\n            var lastItem = this.getLastItem();\n            var eveArgs = { ctrlKey: true, shiftKey: true };\n            this.doSelection(lastItem, eveArgs);\n            this.isInteraction = true;\n            this.isInteracted = true;\n        }\n    };\n    LargeIconsView.prototype.onClearAllInit = function () {\n        if (this.parent.view === 'LargeIcons') {\n            this.clearSelection();\n            this.isInteraction = true;\n            this.isInteracted = true;\n        }\n    };\n    LargeIconsView.prototype.onBeforeRequest = function () {\n        this.isRendered = false;\n    };\n    LargeIconsView.prototype.onAfterRequest = function () {\n        this.isRendered = true;\n    };\n    /* istanbul ignore next */\n    LargeIconsView.prototype.onSearch = function (args) {\n        if (this.parent.view === 'LargeIcons') {\n            this.parent.setProperties({ selectedItems: [] }, true);\n            this.parent.notify(events.selectionChanged, {});\n            this.parent.searchedItems = args.files;\n            this.onLayoutChange(args);\n        }\n    };\n    LargeIconsView.prototype.onLayoutRefresh = function () {\n        if (this.parent.view !== 'LargeIcons') {\n            return;\n        }\n        this.adjustHeight();\n    };\n    LargeIconsView.prototype.onUpdateSelectionData = function () {\n        if (this.parent.view !== 'LargeIcons') {\n            return;\n        }\n        this.updateSelectedData();\n    };\n    LargeIconsView.prototype.onPathColumn = function () {\n        if (this.parent.view === 'LargeIcons' && !isNOU(this.listObj) &&\n            this.parent.breadcrumbbarModule.searchObj.element.value === '' && !this.parent.isFiltered\n            && this.parent.sortBy === 'filterPath') {\n            this.parent.sortBy = 'name';\n            this.parent.notify(events.sortByChange, {});\n        }\n    };\n    LargeIconsView.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.pathColumn, this.onPathColumn);\n        this.parent.off(events.finalizeEnd, this.onFinalizeEnd);\n        this.parent.off(events.createEnd, this.onCreateEnd);\n        this.parent.off(events.selectedData, this.onSelectedData);\n        this.parent.off(events.deleteInit, this.onDeleteInit);\n        this.parent.off(events.deleteEnd, this.onDeleteEnd);\n        this.parent.off(events.refreshEnd, this.onRefreshEnd);\n        this.parent.off(events.pathChanged, this.onPathChanged);\n        this.parent.off(events.layoutChange, this.onLayoutChange);\n        this.parent.off(events.search, this.onSearch);\n        this.parent.off(events.openInit, this.onOpenInit);\n        this.parent.off(events.openEnd, this.onPathChanged);\n        this.parent.off(events.modelChanged, this.onPropertyChanged);\n        this.parent.off(events.methodCall, this.onMethodCall);\n        this.parent.off(events.actionFailure, this.onActionFailure);\n        this.parent.off(events.renameInit, this.onRenameInit);\n        this.parent.off(events.renameEnd, this.onPathChanged);\n        this.parent.off(events.hideLayout, this.onHideLayout);\n        this.parent.off(events.selectAllInit, this.onSelectAllInit);\n        this.parent.off(events.clearAllInit, this.onClearAllInit);\n        this.parent.off(events.menuItemData, this.onMenuItemData);\n        this.parent.off(events.beforeRequest, this.onBeforeRequest);\n        this.parent.off(events.afterRequest, this.onAfterRequest);\n        this.parent.off(events.splitterResize, this.splitterResizeHandler);\n        this.parent.off(events.resizeEnd, this.resizeHandler);\n        this.parent.off(events.pasteInit, this.onpasteInit);\n        this.parent.off(events.pasteEnd, this.onpasteEnd);\n        this.parent.off(events.cutCopyInit, this.oncutCopyInit);\n        this.parent.off(events.dropInit, this.onDropInit);\n        this.parent.off(events.detailsInit, this.onDetailsInit);\n        this.parent.off(events.layoutRefresh, this.onLayoutRefresh);\n        this.parent.off(events.dropPath, this.onDropPath);\n        this.parent.off(events.updateSelectionData, this.onUpdateSelectionData);\n        this.parent.off(events.filterEnd, this.onPathChanged);\n    };\n    LargeIconsView.prototype.addEventListener = function () {\n        this.parent.on(events.pathColumn, this.onPathColumn, this);\n        this.parent.on(events.finalizeEnd, this.onFinalizeEnd, this);\n        this.parent.on(events.createEnd, this.onCreateEnd, this);\n        this.parent.on(events.refreshEnd, this.onRefreshEnd, this);\n        this.parent.on(events.selectedData, this.onSelectedData, this);\n        this.parent.on(events.pathChanged, this.onPathChanged, this);\n        this.parent.on(events.deleteInit, this.onDeleteInit, this);\n        this.parent.on(events.pasteInit, this.onpasteInit, this);\n        this.parent.on(events.deleteEnd, this.onDeleteEnd, this);\n        this.parent.on(events.layoutChange, this.onLayoutChange, this);\n        this.parent.on(events.search, this.onSearch, this);\n        this.parent.on(events.openInit, this.onOpenInit, this);\n        this.parent.on(events.renameInit, this.onRenameInit, this);\n        this.parent.on(events.renameEnd, this.onPathChanged, this);\n        this.parent.on(events.openEnd, this.onPathChanged, this);\n        this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.methodCall, this.onMethodCall, this);\n        this.parent.on(events.actionFailure, this.onActionFailure, this);\n        this.parent.on(events.hideLayout, this.onHideLayout, this);\n        this.parent.on(events.selectAllInit, this.onSelectAllInit, this);\n        this.parent.on(events.clearAllInit, this.onClearAllInit, this);\n        this.parent.on(events.menuItemData, this.onMenuItemData, this);\n        this.parent.on(events.beforeRequest, this.onBeforeRequest, this);\n        this.parent.on(events.afterRequest, this.onAfterRequest, this);\n        this.parent.on(events.dropInit, this.onDropInit, this);\n        this.parent.on(events.detailsInit, this.onDetailsInit, this);\n        this.parent.on(events.splitterResize, this.splitterResizeHandler, this);\n        this.parent.on(events.resizeEnd, this.resizeHandler, this);\n        this.parent.on(events.pasteEnd, this.onpasteEnd, this);\n        this.parent.on(events.cutCopyInit, this.oncutCopyInit, this);\n        this.parent.on(events.layoutRefresh, this.onLayoutRefresh, this);\n        this.parent.on(events.dropPath, this.onDropPath, this);\n        this.parent.on(events.updateSelectionData, this.onUpdateSelectionData, this);\n        this.parent.on(events.filterEnd, this.onPathChanged, this);\n    };\n    LargeIconsView.prototype.onActionFailure = function () { this.isInteraction = true; this.isInteracted = true; };\n    // eslint-disable-next-line\n    LargeIconsView.prototype.onMenuItemData = function (args) {\n        if (this.parent.activeModule === this.getModuleName()) {\n            var ele = closest(args.target, 'li');\n            this.parent.itemData = [this.getItemObject(ele)];\n        }\n    };\n    LargeIconsView.prototype.onDetailsInit = function () {\n        if (this.parent.activeModule === this.getModuleName()) {\n            if (this.parent.selectedItems.length !== 0) {\n                this.updateSelectedData();\n            }\n            else {\n                this.parent.itemData = [getValue(this.parent.pathId[this.parent.pathId.length - 1], this.parent.feParent)];\n            }\n        }\n    };\n    LargeIconsView.prototype.onpasteInit = function () {\n        if (this.parent.activeModule === this.getModuleName()) {\n            this.parent.itemData = (this.parent.folderPath === '') ? [getPathObject(this.parent)] :\n                [this.getItemObject(select('.e-active', this.element))];\n        }\n    };\n    LargeIconsView.prototype.oncutCopyInit = function () {\n        if (this.parent.activeModule === this.getModuleName()) {\n            var activeEle = this.element.querySelectorAll('.' + CLS.ACTIVE);\n            this.parent.activeRecords = [];\n            this.parent.activeElements = [];\n            for (var i = 0; i < activeEle.length; i++) {\n                this.parent.activeElements.push(activeEle[i]);\n                this.parent.activeRecords.push(this.getItemObject(activeEle[i]));\n            }\n        }\n    };\n    LargeIconsView.prototype.onpasteEnd = function (args) {\n        if (this.parent.view === 'LargeIcons') {\n            this.isPasteOperation = true;\n            if (this.parent.path === this.parent.destinationPath || this.parent.path === getDirectoryPath(this.parent, args)) {\n                this.onPathChanged(args);\n            }\n        }\n    };\n    LargeIconsView.prototype.onDropPath = function (args) {\n        if (this.parent.view === 'LargeIcons') {\n            this.isPasteOperation = true;\n            this.onPathChanged(args);\n        }\n    };\n    LargeIconsView.prototype.onPropertyChanged = function (e) {\n        var currentSelected;\n        if (e.module !== this.getModuleName() && e.module !== 'common') {\n            return;\n        }\n        for (var _i = 0, _a = Object.keys(e.newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'allowDragAndDrop':\n                    this.createDragObj();\n                    break;\n                case 'height':\n                    this.adjustHeight();\n                    break;\n                case 'selectedItems':\n                    this.isInteraction = false;\n                    this.isInteracted = false;\n                    currentSelected = isNOU(this.parent.selectedItems) ? [] : this.parent.selectedItems.slice(0);\n                    currentSelected = this.parent.allowMultiSelection ? currentSelected :\n                        currentSelected.slice(currentSelected.length - 1);\n                    this.parent.setProperties({ selectedItems: [] }, true);\n                    this.onClearAllInit();\n                    if (currentSelected.length) {\n                        this.selectItems(currentSelected);\n                    }\n                    this.parent.setProperties({ selectedItems: this.parent.selectedItems }, true);\n                    this.isInteraction = true;\n                    this.isInteracted = true;\n                    break;\n                case 'showThumbnail':\n                    refresh(this.parent);\n                    break;\n                case 'showFileExtension':\n                    read(this.parent, events.pathChanged, this.parent.path);\n                    break;\n                case 'showHiddenItems':\n                    read(this.parent, events.pathChanged, this.parent.path);\n                    break;\n                case 'allowMultiSelection':\n                    if (this.parent.view !== 'LargeIcons') {\n                        break;\n                    }\n                    refresh(this.parent);\n                    break;\n                case 'view':\n                    updateLayout(this.parent, 'LargeIcons');\n                    break;\n            }\n        }\n    };\n    LargeIconsView.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n        if (this.listObj) {\n            this.unWireEvents();\n        }\n    };\n    LargeIconsView.prototype.wireEvents = function () {\n        this.wireClickEvent(true);\n        this.keyboardModule = new KeyboardEvents(this.element, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keyup'\n        });\n        this.keyboardDownModule = new KeyboardEvents(this.element, {\n            keyAction: this.keydownActionHandler.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n        EventHandler.add(this.element, 'mouseover', this.onMouseOver, this);\n    };\n    LargeIconsView.prototype.unWireEvents = function () {\n        this.wireClickEvent(false);\n        EventHandler.remove(this.element, 'mouseover', this.onMouseOver);\n        this.keyboardModule.destroy();\n        this.keyboardDownModule.destroy();\n    };\n    /* istanbul ignore next */\n    LargeIconsView.prototype.onMouseOver = function (e) {\n        var targetEle = closest(e.target, '.e-list-item');\n        removeBlur(this.parent, 'hover');\n        if (targetEle !== null) {\n            targetEle.classList.add(CLS.HOVER);\n        }\n    };\n    LargeIconsView.prototype.wireClickEvent = function (toBind) {\n        if (toBind) {\n            // eslint-disable-next-line\n            var proxy_1 = this;\n            this.clickObj = new Touch(this.element, {\n                tap: function (eve) {\n                    eve.originalEvent.preventDefault();\n                    if (proxy_1.parent.isDevice) {\n                        proxy_1.tapCount = eve.tapCount;\n                        proxy_1.tapEvent = eve;\n                        setTimeout(function () {\n                            if (proxy_1.tapCount > 0) {\n                                proxy_1.doTapAction(proxy_1.tapEvent);\n                            }\n                            proxy_1.tapCount = 0;\n                        }, 350);\n                    }\n                    else {\n                        if (eve.tapCount === 2 && eve.originalEvent.which !== 3) {\n                            proxy_1.dblClickHandler(eve);\n                        }\n                        else {\n                            proxy_1.clickHandler(eve);\n                        }\n                    }\n                },\n                tapHold: function (e) {\n                    if (proxy_1.parent.isDevice) {\n                        proxy_1.multiSelect = proxy_1.parent.allowMultiSelection ? true : false;\n                        if (proxy_1.parent.allowMultiSelection) {\n                            addClass([proxy_1.parent.element], CLS.MULTI_SELECT);\n                        }\n                        proxy_1.clickHandler(e);\n                    }\n                }\n            });\n        }\n        else {\n            if (this.clickObj) {\n                this.clickObj.destroy();\n            }\n        }\n    };\n    LargeIconsView.prototype.doTapAction = function (eve) {\n        var target = eve.originalEvent.target;\n        var item = closest(target, '.' + CLS.LIST_ITEM);\n        if (this.multiSelect || target.classList.contains(CLS.LIST_PARENT) || isNOU(item)) {\n            this.clickHandler(eve);\n        }\n        else {\n            this.parent.isFile = false;\n            this.updateType(item);\n            if (!this.parent.isFile) {\n                this.dblClickHandler(eve);\n            }\n            else if (eve.tapCount === 2) {\n                this.clickHandler(eve);\n                this.dblClickHandler(eve);\n            }\n            else {\n                this.clickHandler(eve);\n            }\n        }\n    };\n    LargeIconsView.prototype.clickHandler = function (e) {\n        var target = e.originalEvent.target;\n        removeBlur(this.parent, 'hover');\n        this.doSelection(target, e.originalEvent);\n        this.parent.activeModule = 'largeiconsview';\n    };\n    /**\n     *\n     * @param {Element} target - specifies the target element.\n     * @param {TouchEventArgs | MouseEventArgs | KeyboardEventArgs} e - specifies event arguements.\n     * @returns {void}\n     * @hidden\n     */\n    LargeIconsView.prototype.doSelection = function (target, e) {\n        var item = closest(target, '.' + CLS.LIST_ITEM);\n        var cList = target.classList;\n        this.parent.isFile = false;\n        var action = 'select';\n        if (e.which === 3 && !isNOU(item) && item.classList.contains(CLS.ACTIVE)) {\n            this.updateType(item);\n            return;\n        }\n        else if (!isNOU(item)) {\n            if (this.parent.allowMultiSelection && item.classList.contains(CLS.ACTIVE)\n                && (e.ctrlKey || target.classList.contains(CLS.CHECK))) {\n                action = 'unselect';\n            }\n            var fileSelectionArgs = this.triggerSelection(action, item);\n            if (fileSelectionArgs.cancel !== true) {\n                if ((!this.parent.allowMultiSelection || (!this.multiSelect && (e && !e.ctrlKey)))\n                    && !cList.contains(CLS.FRAME)) {\n                    this.updateType(item);\n                    this.clearSelect();\n                }\n                if (this.parent.allowMultiSelection && e.shiftKey) {\n                    if (!(e && e.ctrlKey)) {\n                        this.clearSelect();\n                    }\n                    if (!this.startItem) {\n                        this.startItem = item;\n                    }\n                    var startIndex = this.itemList.indexOf(this.startItem);\n                    var endIndex = this.itemList.indexOf(item);\n                    if (startIndex > endIndex) {\n                        for (var i = startIndex; i >= endIndex; i--) {\n                            this.addActive(this.itemList[i]);\n                        }\n                    }\n                    else {\n                        for (var i = startIndex; i <= endIndex; i++) {\n                            this.addActive(this.itemList[i]);\n                        }\n                    }\n                    this.addFocus(this.itemList[endIndex]);\n                }\n                else {\n                    this.startItem = item;\n                    if (this.parent.allowMultiSelection && item.classList.contains(CLS.ACTIVE)) {\n                        this.removeActive(item);\n                    }\n                    else {\n                        this.addActive(item);\n                    }\n                    this.addFocus(item);\n                }\n                if (this.parent.selectedItems.length === 0) {\n                    this.resetMultiSelect();\n                }\n                this.parent.notify(events.selectionChanged, {});\n                this.triggerSelect(action, item);\n            }\n        }\n        else {\n            this.clearSelection();\n        }\n        if (!isNOU(item)) {\n            this.updateType(item);\n        }\n    };\n    LargeIconsView.prototype.dblClickHandler = function (e) {\n        this.parent.activeModule = 'largeiconsview';\n        var target = e.originalEvent.target;\n        this.doOpenAction(target);\n    };\n    LargeIconsView.prototype.clearSelection = function () {\n        this.clearSelect();\n        this.resetMultiSelect();\n        this.parent.notify(events.selectionChanged, {});\n    };\n    LargeIconsView.prototype.resetMultiSelect = function () {\n        this.multiSelect = false;\n        removeClass([this.parent.element], CLS.MULTI_SELECT);\n    };\n    LargeIconsView.prototype.doOpenAction = function (target) {\n        var _this = this;\n        if (isNOU(target)) {\n            return;\n        }\n        var item = closest(target, '.' + CLS.LIST_ITEM);\n        this.parent.isFile = false;\n        if (!isNOU(item)) {\n            this.updateType(item);\n            // eslint-disable-next-line\n            var details_1 = this.getItemObject(item);\n            if (!hasReadAccess(details_1)) {\n                createDeniedDialog(this.parent, details_1, events.permissionRead);\n                return;\n            }\n            var eventArgs = { cancel: false, fileDetails: details_1, module: 'LargeIconsView' };\n            this.parent.trigger('fileOpen', eventArgs, function (fileOpenArgs) {\n                if (!fileOpenArgs.cancel) {\n                    var text = getValue('name', details_1);\n                    if (!_this.parent.isFile) {\n                        var val = _this.parent.breadcrumbbarModule.searchObj.element.value;\n                        if (val === '' && !_this.parent.isFiltered) {\n                            var id = getValue('id', details_1);\n                            var newPath = _this.parent.path + (isNOU(id) ? text : id) + '/';\n                            _this.parent.setProperties({ path: newPath }, true);\n                            _this.parent.pathNames.push(text);\n                            _this.parent.pathId.push(getValue('_fm_id', details_1));\n                            _this.parent.itemData = [details_1];\n                            openAction(_this.parent);\n                        }\n                        else {\n                            openSearchFolder(_this.parent, details_1);\n                        }\n                        _this.parent.isFiltered = false;\n                        _this.parent.setProperties({ selectedItems: [] }, true);\n                    }\n                    else {\n                        var icon = fileType(details_1);\n                        if (icon === CLS.ICON_IMAGE) {\n                            var imgUrl = getImageUrl(_this.parent, details_1);\n                            createImageDialog(_this.parent, text, imgUrl);\n                        }\n                    }\n                }\n            });\n        }\n    };\n    LargeIconsView.prototype.updateType = function (item) {\n        var folder = select('.' + CLS.FOLDER, item);\n        this.parent.isFile = isNOU(folder) ? true : false;\n    };\n    /* istanbul ignore next */\n    // eslint:disable-next-line\n    LargeIconsView.prototype.keydownActionHandler = function (e) {\n        if (!this.isRendered) {\n            return;\n        }\n        switch (e.action) {\n            case 'end':\n            case 'home':\n            case 'moveDown':\n            case 'moveLeft':\n            case 'moveRight':\n            case 'moveUp':\n            case 'ctrlEnd':\n            case 'shiftEnd':\n            case 'csEnd':\n            case 'ctrlHome':\n            case 'shiftHome':\n            case 'csHome':\n            case 'ctrlDown':\n            case 'shiftDown':\n            case 'csDown':\n            case 'ctrlLeft':\n            case 'shiftLeft':\n            case 'csLeft':\n            case 'ctrlRight':\n            case 'shiftRight':\n            case 'csRight':\n            case 'space':\n            case 'ctrlSpace':\n            case 'shiftSpace':\n            case 'csSpace':\n            case 'ctrlA':\n            case 'enter':\n            case 'altEnter':\n            case 'esc':\n            case 'del':\n            case 'shiftdel':\n            case 'ctrlC':\n            case 'ctrlV':\n            case 'ctrlX':\n            case 'f2':\n            case 'ctrlD':\n                e.preventDefault();\n                break;\n            default:\n                break;\n        }\n    };\n    /* istanbul ignore next */\n    // eslint:disable-next-line\n    LargeIconsView.prototype.keyActionHandler = function (e) {\n        if (!this.isRendered) {\n            return;\n        }\n        var fItem = this.getFocusedItem();\n        var firstItem = this.getFirstItem();\n        var lastItem = this.getLastItem();\n        switch (e.action) {\n            case 'end':\n                this.navigateItem(lastItem);\n                break;\n            case 'home':\n                this.navigateItem(firstItem);\n                break;\n            case 'tab':\n                if (!isNOU(fItem)) {\n                    this.addFocus(fItem);\n                }\n                else if (!isNOU(firstItem)) {\n                    this.addFocus(firstItem);\n                }\n                break;\n            case 'moveDown':\n                this.navigateDown(fItem, true);\n                break;\n            case 'moveLeft':\n                this.navigateRight(fItem, false);\n                break;\n            case 'moveRight':\n                this.navigateRight(fItem, true);\n                break;\n            case 'moveUp':\n                this.navigateDown(fItem, false);\n                break;\n            case 'ctrlEnd':\n            case 'shiftEnd':\n            case 'csEnd':\n                this.csEndKey(lastItem, e);\n                break;\n            case 'ctrlHome':\n            case 'shiftHome':\n            case 'csHome':\n                this.csHomeKey(firstItem, e);\n                break;\n            case 'ctrlDown':\n            case 'shiftDown':\n            case 'csDown':\n                this.csDownKey(fItem, e);\n                break;\n            case 'ctrlLeft':\n            case 'shiftLeft':\n            case 'csLeft':\n                this.csLeftKey(fItem, e);\n                break;\n            case 'ctrlRight':\n            case 'shiftRight':\n            case 'csRight':\n                this.csRightKey(fItem, e);\n                break;\n            case 'ctrlUp':\n            case 'shiftUp':\n            case 'csUp':\n                this.csUpKey(fItem, e);\n                break;\n            case 'space':\n                this.spaceKey(fItem);\n                break;\n            case 'ctrlSpace':\n            case 'shiftSpace':\n            case 'csSpace':\n                if (!isNOU(fItem)) {\n                    this.doSelection(fItem, e);\n                }\n                break;\n            case 'ctrlA':\n                this.ctrlAKey(firstItem, lastItem);\n                break;\n            case 'enter':\n                this.doOpenAction(this.parent.visitedItem ? this.parent.visitedItem : this.getVisitedItem());\n                break;\n            case 'altEnter':\n                this.parent.notify(events.detailsInit, {});\n                GetDetails(this.parent, this.parent.selectedItems, this.parent.path, 'details');\n                break;\n            case 'esc':\n                removeActive(this.parent);\n                break;\n            case 'del':\n            case 'shiftdel':\n                this.performDelete();\n                break;\n            case 'ctrlC':\n                copyFiles(this.parent);\n                break;\n            case 'ctrlV':\n                this.parent.folderPath = '';\n                pasteHandler(this.parent);\n                break;\n            case 'ctrlX':\n                cutFiles(this.parent);\n                break;\n            case 'f2':\n                this.performRename();\n                break;\n            case 'ctrlD':\n                this.doDownload();\n                break;\n        }\n    };\n    LargeIconsView.prototype.doDownload = function () {\n        this.updateSelectedData();\n        doDownload(this.parent);\n    };\n    LargeIconsView.prototype.performDelete = function () {\n        if (this.parent.selectedItems && this.parent.selectedItems.length > 0) {\n            this.updateSelectedData();\n            // eslint-disable-next-line\n            var data = this.parent.itemData;\n            for (var i = 0; i < data.length; i++) {\n                if (!hasEditAccess(data[i])) {\n                    createDeniedDialog(this.parent, data[i], events.permissionEdit);\n                    return;\n                }\n            }\n            createDialog(this.parent, 'Delete');\n        }\n    };\n    LargeIconsView.prototype.performRename = function () {\n        if (this.parent.selectedItems.length === 1) {\n            this.updateRenameData();\n            doRename(this.parent);\n        }\n    };\n    LargeIconsView.prototype.updateRenameData = function () {\n        var item = select('.' + CLS.LIST_ITEM + '.' + CLS.ACTIVE, this.element);\n        // eslint-disable-next-line\n        var data = this.getItemObject(item);\n        updateRenamingData(this.parent, data);\n    };\n    LargeIconsView.prototype.getVisitedItem = function () {\n        var item = this.parent.selectedItems[this.parent.selectedItems.length - 1];\n        var indexes = this.getIndexes([item], this.parent.hasId);\n        return this.itemList[indexes[0]];\n    };\n    LargeIconsView.prototype.getFocusedItem = function () {\n        return select('.' + CLS.LIST_ITEM + '.' + CLS.FOCUS, this.element);\n    };\n    LargeIconsView.prototype.getActiveItem = function () {\n        return select('.' + CLS.LIST_ITEM + '.' + CLS.ACTIVE, this.element);\n    };\n    LargeIconsView.prototype.getFirstItem = function () {\n        return this.itemList[0];\n    };\n    LargeIconsView.prototype.getLastItem = function () {\n        return this.itemList[this.itemList.length - 1];\n    };\n    LargeIconsView.prototype.navigateItem = function (item) {\n        this.setFocus(item);\n    };\n    LargeIconsView.prototype.navigateDown = function (fItem, isTowards) {\n        var nItem = this.getNextItem(fItem, isTowards, this.perRow);\n        this.setFocus(nItem);\n    };\n    LargeIconsView.prototype.navigateRight = function (fItem, isTowards) {\n        var nItem = this.getNextItem(fItem, isTowards);\n        this.setFocus(nItem);\n    };\n    LargeIconsView.prototype.getNextItem = function (li, isTowards, perRow) {\n        if (isNOU(li)) {\n            return this.getFocusedItem() || this.getActiveItem() || this.getFirstItem();\n        }\n        var index = this.itemList.indexOf(li);\n        var nextItem;\n        do {\n            if (isTowards) {\n                index = perRow ? index + perRow : index + 1;\n            }\n            else {\n                index = perRow ? index - perRow : index - 1;\n            }\n            nextItem = this.itemList[index];\n            if (isNOU(nextItem)) {\n                return li;\n            }\n        } while (!isVisible(nextItem));\n        return nextItem;\n    };\n    LargeIconsView.prototype.setFocus = function (nextItem) {\n        if (!isNOU(nextItem)) {\n            var fileSelectionArgs = this.triggerSelection('select', nextItem);\n            if (fileSelectionArgs.cancel !== true) {\n                this.startItem = nextItem;\n                this.clearSelect();\n                this.addActive(nextItem);\n                this.addFocus(nextItem);\n                this.parent.notify(events.selectionChanged, {});\n                this.triggerSelect('select', nextItem);\n            }\n        }\n    };\n    LargeIconsView.prototype.spaceKey = function (fItem) {\n        if (!isNOU(fItem) && !fItem.classList.contains(CLS.ACTIVE)) {\n            var fileSelectionArgs = this.triggerSelection('select', fItem);\n            if (fileSelectionArgs.cancel !== true) {\n                this.addActive(fItem);\n                this.parent.notify(events.selectionChanged, {});\n                this.triggerSelect('select', fItem);\n            }\n        }\n    };\n    LargeIconsView.prototype.ctrlAKey = function (firstItem, lastItem) {\n        if (this.parent.allowMultiSelection && !isNOU(firstItem)) {\n            this.startItem = firstItem;\n            var eveArgs = { ctrlKey: true, shiftKey: true };\n            var liParent = this.element.querySelector('.' + CLS.LIST_PARENT);\n            var liScrPos = liParent.scrollTop;\n            var getCurFocusedItem = this.getFocusedItem();\n            this.doSelection(lastItem, eveArgs);\n            liParent.scrollTop = liScrPos;\n            if (!isNOU(getCurFocusedItem)) {\n                this.addFocus(getCurFocusedItem);\n            }\n        }\n    };\n    LargeIconsView.prototype.csEndKey = function (lastItem, e) {\n        if (!this.parent.allowMultiSelection) {\n            this.navigateItem(lastItem);\n        }\n        else if (!isNOU(lastItem)) {\n            if (e.action === 'ctrlEnd') {\n                this.addFocus(lastItem);\n            }\n            else {\n                this.doSelection(lastItem, e);\n            }\n        }\n    };\n    LargeIconsView.prototype.csHomeKey = function (firstItem, e) {\n        if (!this.parent.allowMultiSelection) {\n            this.navigateItem(firstItem);\n        }\n        else if (!isNOU(firstItem)) {\n            if (e.action === 'ctrlHome') {\n                this.addFocus(firstItem);\n            }\n            else {\n                this.doSelection(firstItem, e);\n            }\n        }\n    };\n    LargeIconsView.prototype.csDownKey = function (fItem, e) {\n        if (!this.parent.allowMultiSelection) {\n            this.navigateDown(fItem, true);\n        }\n        else {\n            var dItem = this.getNextItem(fItem, true, this.perRow);\n            if (!isNOU(dItem)) {\n                if (e.action === 'ctrlDown') {\n                    this.addFocus(dItem);\n                }\n                else {\n                    this.doSelection(dItem, e);\n                }\n            }\n        }\n    };\n    LargeIconsView.prototype.csLeftKey = function (fItem, e) {\n        if (!this.parent.allowMultiSelection) {\n            this.navigateRight(fItem, false);\n        }\n        else {\n            var lItem = this.getNextItem(fItem, false);\n            if (!isNOU(lItem)) {\n                if (e.action === 'ctrlLeft') {\n                    this.addFocus(lItem);\n                }\n                else {\n                    this.doSelection(lItem, e);\n                }\n            }\n        }\n    };\n    LargeIconsView.prototype.csRightKey = function (fItem, e) {\n        if (!this.parent.allowMultiSelection) {\n            this.navigateRight(fItem, true);\n        }\n        else {\n            var rItem = this.getNextItem(fItem, true);\n            if (!isNOU(rItem)) {\n                if (e.action === 'ctrlRight') {\n                    this.addFocus(rItem);\n                }\n                else {\n                    this.doSelection(rItem, e);\n                }\n            }\n        }\n    };\n    LargeIconsView.prototype.csUpKey = function (fItem, e) {\n        if (!this.parent.allowMultiSelection) {\n            this.navigateDown(fItem, false);\n        }\n        else {\n            var uItem = this.getNextItem(fItem, false, this.perRow);\n            if (!isNOU(uItem)) {\n                if (e.action === 'ctrlUp') {\n                    this.addFocus(uItem);\n                }\n                else {\n                    this.doSelection(uItem, e);\n                }\n            }\n        }\n    };\n    LargeIconsView.prototype.addActive = function (nextItem) {\n        if (!isNOU(nextItem)) {\n            if (!nextItem.classList.contains(CLS.ACTIVE)) {\n                this.parent.selectedItems.push(this.getDataName(nextItem));\n                this.parent.setProperties({ selectedItems: this.parent.selectedItems }, true);\n                addClass([nextItem], [CLS.ACTIVE]);\n                nextItem.setAttribute('aria-selected', 'true');\n                this.checkState(nextItem, true);\n            }\n            this.parent.visitedItem = nextItem;\n        }\n    };\n    LargeIconsView.prototype.removeActive = function (preItem) {\n        if (!isNOU(preItem)) {\n            removeClass([preItem], [CLS.ACTIVE]);\n            if (this.parent.allowMultiSelection) {\n                preItem.setAttribute('aria-selected', 'false');\n            }\n            else {\n                preItem.removeAttribute('aria-selected');\n            }\n            this.checkState(preItem, false);\n            var index = this.parent.selectedItems.indexOf(this.getDataName(preItem));\n            if (index > -1) {\n                this.parent.selectedItems.splice(index, 1);\n                this.parent.setProperties({ selectedItems: this.parent.selectedItems }, true);\n            }\n            this.parent.visitedItem = null;\n        }\n    };\n    LargeIconsView.prototype.getDataName = function (item) {\n        // eslint-disable-next-line\n        var data = this.getItemObject(item);\n        return getItemName(this.parent, data);\n    };\n    LargeIconsView.prototype.addFocus = function (item) {\n        this.element.setAttribute('tabindex', '-1');\n        var fItem = this.getFocusedItem();\n        if (fItem) {\n            fItem.removeAttribute('tabindex');\n            removeClass([fItem], [CLS.FOCUS]);\n        }\n        addClass([item], [CLS.FOCUS]);\n        item.setAttribute('tabindex', '0');\n        item.focus();\n    };\n    LargeIconsView.prototype.checkState = function (item, toCheck) {\n        if (!this.parent.allowMultiSelection) {\n            return;\n        }\n        var checkEle = select('.' + CLS.FRAME, item);\n        if (isNOU(checkEle)) {\n            return;\n        }\n        if (toCheck) {\n            if (!checkEle.classList.contains(CLS.CHECK)) {\n                addClass([checkEle], CLS.CHECK);\n                closest(checkEle, '.' + CLS.CB_WRAP).setAttribute('aria-checked', 'true');\n            }\n        }\n        else {\n            if (checkEle.classList.contains(CLS.CHECK)) {\n                removeClass([checkEle], CLS.CHECK);\n                closest(checkEle, '.' + CLS.CB_WRAP).setAttribute('aria-checked', 'false');\n            }\n        }\n    };\n    LargeIconsView.prototype.clearSelect = function () {\n        var eles = Array.prototype.slice.call(selectAll('.' + CLS.ACTIVE, this.listElements));\n        var fileSelectionArgs;\n        if (eles.length !== 0) {\n            fileSelectionArgs = this.triggerSelection('unselect', eles[0]);\n            if (fileSelectionArgs.cancel !== true) {\n                for (var i = 0, len = eles.length; i < len; i++) {\n                    this.removeActive(eles[i]);\n                }\n            }\n            this.triggerSelect('unselect', eles[0]);\n        }\n    };\n    LargeIconsView.prototype.resizeHandler = function () {\n        this.getItemCount();\n        if (!isNOU(this.listObj)) {\n            this.adjustHeight();\n        }\n    };\n    LargeIconsView.prototype.splitterResizeHandler = function () {\n        this.getItemCount();\n    };\n    LargeIconsView.prototype.getItemCount = function () {\n        var perRow = 1;\n        if (this.itemList) {\n            for (var i = 0, len = this.itemList.length - 1; i < len; i++) {\n                if (this.itemList[i].getBoundingClientRect().top === this.itemList[i + 1].getBoundingClientRect().top) {\n                    perRow++;\n                }\n                else {\n                    break;\n                }\n            }\n        }\n        this.perRow = perRow;\n    };\n    LargeIconsView.prototype.triggerSelection = function (action, item) {\n        // eslint-disable-next-line\n        var data = this.getItemObject(item);\n        var eventArgs = {\n            action: action, fileDetails: data, isInteracted: this.isInteraction, cancel: false, target: item\n        };\n        this.parent.trigger('fileSelection', eventArgs);\n        this.isInteraction = true;\n        return eventArgs;\n    };\n    LargeIconsView.prototype.triggerSelect = function (action, item) {\n        // eslint-disable-next-line\n        var data = this.getItemObject(item);\n        this.parent.visitedData = data;\n        var eventArgs = { action: action, fileDetails: data, isInteracted: this.isInteracted };\n        this.parent.trigger('fileSelect', eventArgs);\n        this.isInteracted = true;\n    };\n    LargeIconsView.prototype.selectItems = function (items) {\n        var indexes = this.getIndexes(items, this.parent.hasId);\n        for (var j = 0, len = indexes.length; j < len; j++) {\n            var eveArgs = { ctrlKey: true, shiftKey: false };\n            this.doSelection(this.itemList[indexes[j]], eveArgs);\n        }\n    };\n    LargeIconsView.prototype.getIndexes = function (items, byId) {\n        var indexes = [];\n        var filter = byId ? 'id' : 'name';\n        for (var i = 0, len = this.items.length; i < len; i++) {\n            if (items.indexOf(getValue(filter, this.items[i])) !== -1) {\n                indexes.push(i);\n            }\n        }\n        return indexes;\n    };\n    // eslint-disable-next-line\n    LargeIconsView.prototype.getItemObject = function (item) {\n        var index = this.itemList.indexOf(item);\n        return this.items[index];\n    };\n    // eslint-disable-next-line\n    LargeIconsView.prototype.addSelection = function (data) {\n        // eslint-disable-next-line\n        var resultData = [];\n        if (this.parent.hasId) {\n            resultData = new DataManager(this.items).\n                executeLocal(new Query().where('id', 'equal', this.parent.renamedId, false));\n        }\n        else {\n            // eslint-disable-next-line\n            var newData = new DataManager(this.items).\n                executeLocal(new Query().where('name', 'equal', getValue('name', data), false));\n            if (newData.length > 0) {\n                resultData = new DataManager(newData).\n                    executeLocal(new Query().where('filterPath', 'equal', this.parent.filterPath, false));\n            }\n        }\n        if (resultData.length > 0) {\n            var index = this.items.indexOf(resultData[0]);\n            var eveArgs = { ctrlKey: true, shiftKey: false };\n            this.doSelection(this.itemList[index], eveArgs);\n        }\n    };\n    LargeIconsView.prototype.updateSelectedData = function () {\n        // eslint-disable-next-line\n        var data = [];\n        var items = selectAll('.' + CLS.LIST_ITEM + '.' + CLS.ACTIVE, this.element);\n        for (var i = 0; i < items.length; i++) {\n            data[i] = this.getItemObject(items[i]);\n        }\n        this.parent.itemData = data;\n    };\n    // eslint-disable-next-line\n    LargeIconsView.prototype.onMethodCall = function (args) {\n        if (this.parent.view !== 'LargeIcons') {\n            return;\n        }\n        var action = getValue('action', args);\n        switch (action) {\n            case 'deleteFiles':\n                this.deleteFiles(getValue('ids', args));\n                break;\n            case 'downloadFiles':\n                this.downloadFiles(getValue('ids', args));\n                break;\n            case 'openFile':\n                this.openFile(getValue('id', args));\n                break;\n            case 'renameFile':\n                this.isInteraction = false;\n                this.isInteracted = false;\n                this.renameFile(getValue('id', args), getValue('newName', args));\n                break;\n            case 'createFolder':\n                this.isInteraction = false;\n                this.isInteracted = false;\n                break;\n            case 'clearSelection':\n                this.isInteraction = false;\n                this.isInteracted = false;\n                this.onClearAllInit();\n                break;\n            case 'selectAll':\n                this.isInteraction = false;\n                this.isInteracted = false;\n                this.onSelectAllInit();\n                break;\n        }\n    };\n    LargeIconsView.prototype.getItemsIndex = function (items) {\n        var indexes = [];\n        var isFilter = (this.parent.breadcrumbbarModule.searchObj.element.value !== '' || this.parent.isFiltered) ? true : false;\n        var filterName = this.parent.hasId ? 'id' : 'name';\n        if (this.parent.hasId || !isFilter) {\n            for (var i = 0, len = this.items.length; i < len; i++) {\n                if (items.indexOf(getValue(filterName, this.items[i])) !== -1) {\n                    indexes.push(i);\n                }\n            }\n        }\n        else {\n            for (var i = 0, len = this.items.length; i < len; i++) {\n                var name_2 = getValue('filterPath', this.items[i]) + getValue('name', this.items[i]);\n                if (items.indexOf(name_2) !== -1) {\n                    indexes.push(i);\n                }\n            }\n        }\n        return indexes;\n    };\n    LargeIconsView.prototype.deleteFiles = function (ids) {\n        this.parent.activeModule = 'largeiconsview';\n        if (isNOU(ids)) {\n            this.performDelete();\n            return;\n        }\n        var indexes = this.getItemsIndex(ids);\n        if (indexes.length === 0) {\n            return;\n        }\n        // eslint-disable-next-line\n        var data = [];\n        var newIds = [];\n        for (var i = 0; i < indexes.length; i++) {\n            data[i] = this.items[indexes[i]];\n            newIds[i] = getItemName(this.parent, data[i]);\n        }\n        doDeleteFiles(this.parent, data, newIds);\n    };\n    LargeIconsView.prototype.downloadFiles = function (ids) {\n        if (isNOU(ids)) {\n            this.doDownload();\n            return;\n        }\n        var index = this.getItemsIndex(ids);\n        if (index.length === 0) {\n            return;\n        }\n        // eslint-disable-next-line\n        var data = [];\n        var newIds = [];\n        for (var i = 0; i < index.length; i++) {\n            data[i] = this.items[index[i]];\n            newIds[i] = getItemName(this.parent, data[i]);\n        }\n        doDownloadFiles(this.parent, data, newIds);\n    };\n    LargeIconsView.prototype.openFile = function (id) {\n        if (isNOU(id)) {\n            return;\n        }\n        var indexes = this.getItemsIndex([id]);\n        if (indexes.length > 0) {\n            this.doOpenAction(this.itemList[indexes[0]]);\n        }\n    };\n    LargeIconsView.prototype.renameFile = function (id, name) {\n        this.parent.activeModule = 'largeiconsview';\n        if (isNOU(id)) {\n            this.performRename();\n            return;\n        }\n        var indexes = this.getItemsIndex([id]);\n        if (indexes.length > 0) {\n            updateRenamingData(this.parent, this.items[indexes[0]]);\n            if (isNOU(name)) {\n                doRename(this.parent);\n            }\n            else {\n                if (!hasEditAccess(this.parent.itemData[0])) {\n                    createDeniedDialog(this.parent, this.parent.itemData[0], events.permissionEdit);\n                }\n                else {\n                    rename(this.parent, this.parent.path, name);\n                }\n            }\n        }\n    };\n    return LargeIconsView;\n}());\nexport { LargeIconsView };\n"]},"metadata":{},"sourceType":"module"}