{"ast":null,"code":"import { EventHandler, closest, isNullOrUndefined, KeyboardEvents } from '@syncfusion/ej2-base';\nimport { getValue, addClass, removeClass, remove, createElement } from '@syncfusion/ej2-base';\nimport { TextBox } from '@syncfusion/ej2-inputs';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { read } from '../common/operations';\nimport { getLocaleText, searchWordHandler } from '../common/utility';\nimport * as events from '../base/constant';\nimport * as CLS from '../base/classes';\n/**\n * BreadCrumbBar module\n */\n\nvar BreadCrumbBar =\n/** @class */\nfunction () {\n  /**\n   * constructor for addressbar module\n   *\n   * @hidden\n   * @param {IFileManager} parent - specifies parent element.\n   * @private\n   *\n   */\n  function BreadCrumbBar(parent) {\n    this.addressPath = '';\n    this.addressBarLink = '';\n    this.searchTimer = null;\n    this.searchWrapWidth = null;\n    this.parent = parent;\n    this.keyConfigs = {\n      enter: 'enter'\n    };\n    this.render();\n  }\n\n  BreadCrumbBar.prototype.onPropertyChanged = function (e) {\n    if (e.module !== this.getModuleName() && e.module !== 'common') {\n      return;\n    }\n\n    for (var _i = 0, _a = Object.keys(e.newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n      var value = e.newProp.searchSettings;\n\n      switch (prop) {\n        case 'searchSettings':\n          if (!isNullOrUndefined(value.allowSearchOnTyping)) {\n            this.searchEventBind(value.allowSearchOnTyping);\n          }\n\n          if (this.parent.breadcrumbbarModule.searchObj.value && this.parent.breadcrumbbarModule.searchObj.value !== '' && !(!isNullOrUndefined(value.allowSearchOnTyping) && isNullOrUndefined(value.filterType) && isNullOrUndefined(value.ignoreCase))) {\n            searchWordHandler(this.parent, this.parent.breadcrumbbarModule.searchObj.value, false);\n          }\n\n          break;\n      }\n    }\n  };\n\n  BreadCrumbBar.prototype.render = function () {\n    this.addEventListener();\n  };\n\n  BreadCrumbBar.prototype.onPathChange = function () {\n    var pathNames = this.parent.pathNames;\n    var paths = this.parent.path.split('/');\n    var addressbarUL = this.parent.createElement('ul', {\n      className: 'e-addressbar-ul'\n    });\n    var addressbarLI = null;\n    var pathNamesLen = pathNames.length;\n\n    if (pathNames.length > 0) {\n      var id = '';\n\n      for (var i = 0; i < pathNamesLen; i++) {\n        var addressATag = null;\n        addressbarLI = this.parent.createElement('li', {\n          className: 'e-address-list-item'\n        });\n\n        for (var j = 0; j <= i; j++) {\n          id = id + paths[j] + '/';\n        }\n\n        addressbarLI.setAttribute('data-utext', id);\n\n        if (i !== 0) {\n          var icon = createElement('span', {\n            className: CLS.ICONS\n          });\n          addressbarLI.appendChild(icon);\n        }\n\n        if (pathNamesLen - i !== 1) {\n          addressATag = createElement('a', {\n            className: CLS.LIST_TEXT\n          });\n          addressbarLI.setAttribute('tabindex', '0');\n        } else {\n          addressATag = createElement('span', {\n            className: CLS.LIST_TEXT\n          });\n        }\n\n        id = '';\n        addressATag.innerText = pathNames[i];\n        addressbarLI.appendChild(addressATag);\n        addressbarUL.appendChild(addressbarLI);\n      }\n\n      var ulElement = this.parent.breadCrumbBarNavigation.querySelector('.e-addressbar-ul');\n\n      if (!isNullOrUndefined(ulElement)) {\n        if (!isNullOrUndefined(this.subMenuObj)) {\n          this.subMenuObj.destroy();\n        }\n\n        remove(ulElement);\n      }\n\n      var searchWrap = this.parent.breadCrumbBarNavigation.querySelector('.e-search-wrap');\n\n      if (!searchWrap) {\n        this.parent.breadCrumbBarNavigation.insertBefore(addressbarUL, searchWrap);\n      } else {\n        this.parent.breadCrumbBarNavigation.appendChild(addressbarUL);\n      }\n\n      this.updateBreadCrumbBar(addressbarUL);\n    }\n  };\n  /* istanbul ignore next */\n\n\n  BreadCrumbBar.prototype.updateBreadCrumbBar = function (addresBarUL) {\n    var liElements = addresBarUL.querySelectorAll('li');\n    var ulElement = this.parent.breadCrumbBarNavigation.querySelector('.e-addressbar-ul');\n    var style = window.getComputedStyle(ulElement, null);\n    var pRight = parseFloat(style.getPropertyValue('padding-right'));\n    var pLeft = parseFloat(style.getPropertyValue('padding-left'));\n    var breadCrumbBarWidth = ulElement.offsetWidth - pRight - pLeft;\n    var addressbarUL = this.parent.createElement('ul', {\n      className: 'e-addressbar-ul'\n    });\n    var liElementsWidth = 0;\n    var liElementsWidths = [];\n\n    for (var i = 0; i < liElements.length; i++) {\n      var width = liElements[i].clientWidth;\n      liElementsWidths.push(width);\n      liElementsWidth = liElementsWidth + width;\n    }\n\n    if (!isNullOrUndefined(ulElement)) {\n      remove(ulElement);\n    }\n\n    var searchContainer = this.parent.createElement('div');\n    searchContainer.setAttribute('class', 'e-search-wrap');\n    var id = this.parent.element.id + CLS.SEARCH_ID;\n    var searchInput = createElement('input', {\n      id: id,\n      attrs: {\n        autocomplete: 'off',\n        'aria-label': getLocaleText(this.parent, 'Search')\n      }\n    });\n    searchContainer.appendChild(searchInput);\n    var searchEle = this.parent.breadCrumbBarNavigation.querySelector('.e-search-wrap .e-input');\n\n    if (isNullOrUndefined(searchEle)) {\n      this.parent.breadCrumbBarNavigation.appendChild(searchContainer);\n      var span = createElement('span', {\n        className: 'e-icons e-fe-search'\n      });\n      EventHandler.add(span, 'click', this.onShowInput, this);\n      searchInput.parentElement.insertBefore(span, searchInput);\n      this.searchObj = new TextBox({\n        value: '',\n        showClearButton: true,\n        placeholder: getLocaleText(this.parent, 'Search'),\n        focus: this.onFocus.bind(this),\n        blur: this.onBlur.bind(this)\n      });\n      this.searchObj.appendTo('#' + this.parent.element.id + CLS.SEARCH_ID);\n      this.searchEventBind(this.parent.searchSettings.allowSearchOnTyping);\n      var search = this.searchObj.element.nextElementSibling;\n      EventHandler.add(search, 'mousedown', this.searchChangeHandler.bind(this), this);\n      EventHandler.add(this.searchObj.element, 'keyup', this.onKeyUp.bind(this), this);\n    }\n\n    var searchWrap = this.parent.breadCrumbBarNavigation.querySelector('.e-search-wrap');\n    breadCrumbBarWidth = breadCrumbBarWidth - (this.searchWrapWidth ? this.searchWrapWidth : searchWrap.offsetWidth);\n\n    if (liElementsWidth > breadCrumbBarWidth) {\n      var i = liElements.length;\n\n      while (i--) {\n        var diff = breadCrumbBarWidth - liElementsWidths[i];\n\n        if (diff > 40) {\n          addressbarUL.insertBefore(liElements[i], addressbarUL.querySelector('li'));\n          breadCrumbBarWidth = diff;\n        } else {\n          // eslint-disable-next-line\n          var items = [];\n\n          for (var j = 0; j <= i; j++) {\n            var liElement = liElements[j];\n            items.push({\n              text: liElement.innerText,\n              utext: liElement.getAttribute('data-utext')\n            });\n          }\n\n          var subMenuLi = this.parent.createElement('li', {\n            className: 'e-breadcrumb-menu'\n          }); // eslint-disable-next-line\n\n          var attributes = {\n            className: 'e-breadcrumb-submenu'\n          };\n          var subMenuSpan = this.parent.createElement('button', attributes);\n          subMenuLi.appendChild(subMenuSpan);\n          addressbarUL.insertBefore(subMenuLi, addressbarUL.querySelector('li'));\n          this.subMenuObj = new DropDownButton({\n            items: items,\n            cssClass: 'e-caret-hide e-submenu',\n            iconCss: CLS.ICON_BREADCRUMB,\n            iconPosition: 'Top',\n            enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n            beforeItemRender: this.addSubMenuAttributes.bind(this),\n            select: this.subMenuSelectOperations.bind(this)\n          });\n          this.subMenuObj.isStringTemplate = true;\n          this.subMenuObj.appendTo(subMenuSpan);\n          break;\n        }\n      }\n\n      this.parent.breadCrumbBarNavigation.insertBefore(addressbarUL, searchWrap);\n    } else {\n      this.parent.breadCrumbBarNavigation.insertBefore(addresBarUL, searchWrap);\n    }\n  };\n  /* istanbul ignore next */\n\n\n  BreadCrumbBar.prototype.onFocus = function () {\n    var wrap = closest(this.searchObj.element, '.e-search-wrap');\n    wrap.classList.add('e-focus');\n  };\n  /* istanbul ignore next */\n\n\n  BreadCrumbBar.prototype.onKeyUp = function () {\n    this.parent.notify(events.pathColumn, {\n      args: this.parent\n    });\n  };\n  /* istanbul ignore next */\n\n\n  BreadCrumbBar.prototype.onBlur = function () {\n    var wrap = closest(this.searchObj.element, '.e-search-wrap');\n    wrap.classList.remove('e-focus');\n  };\n  /* istanbul ignore next */\n\n\n  BreadCrumbBar.prototype.subMenuSelectOperations = function (event) {\n    // eslint-disable-next-line\n    var args = {\n      target: event.element\n    };\n    this.addressPathClickHandler(args);\n  };\n  /* istanbul ignore next */\n\n\n  BreadCrumbBar.prototype.addSubMenuAttributes = function (args) {\n    args.element.setAttribute('data-utext', getValue('utext', args.item));\n    var anchor = this.parent.createElement('a', {\n      className: 'e-list-text'\n    });\n    args.element.appendChild(anchor);\n  };\n\n  BreadCrumbBar.prototype.searchEventBind = function (allow) {\n    if (allow) {\n      this.searchObj.input = this.searchChangeHandler.bind(this);\n      this.searchObj.change = null;\n    } else {\n      this.searchObj.change = this.searchChangeHandler.bind(this);\n      this.searchObj.input = null;\n    }\n  };\n\n  BreadCrumbBar.prototype.searchChangeHandler = function (args) {\n    var _this = this;\n\n    if (!isNullOrUndefined(args.value)) {\n      this.parent.isFiltered = false;\n\n      if (this.parent.searchSettings.allowSearchOnTyping) {\n        window.clearTimeout(this.searchTimer);\n        this.searchTimer = window.setTimeout(function () {\n          searchWordHandler(_this.parent, args.value, false);\n        }, 300);\n      } else {\n        searchWordHandler(this.parent, args.value, false);\n      }\n    }\n  };\n\n  BreadCrumbBar.prototype.addressPathClickHandler = function (e) {\n    var li = e.target;\n\n    if (li.nodeName === 'LI' || li.nodeName === 'A') {\n      var node = li.nodeName === 'LI' ? li.children[0] : li;\n\n      if (!isNullOrUndefined(node)) {\n        this.parent.isFiltered = false;\n        var currentPath = this.updatePath(node);\n        this.parent.itemData = [getValue(this.parent.pathId[this.parent.pathId.length - 1], this.parent.feParent)];\n        this.triggerFileOpen(this.parent.itemData[0]);\n        read(this.parent, events.pathChanged, currentPath);\n        var treeNodeId = this.parent.pathId[this.parent.pathId.length - 1];\n        this.parent.notify(events.updateTreeSelection, {\n          module: 'treeview',\n          selectedNode: treeNodeId\n        });\n      }\n    }\n  }; // eslint-disable-next-line\n\n\n  BreadCrumbBar.prototype.triggerFileOpen = function (data) {\n    var eventArgs = {\n      cancel: false,\n      fileDetails: data,\n      module: 'BreadCrumbBar'\n    };\n    delete eventArgs.cancel;\n    this.parent.trigger('fileOpen', eventArgs);\n  };\n  /* istanbul ignore next */\n\n\n  BreadCrumbBar.prototype.onShowInput = function () {\n    if (this.parent.isMobile) {\n      if (this.parent.element.classList.contains(CLS.FILTER)) {\n        removeClass([this.parent.element], CLS.FILTER);\n        this.searchWrapWidth = null;\n      } else {\n        var searchWrap = this.parent.breadCrumbBarNavigation.querySelector('.e-search-wrap');\n        this.searchWrapWidth = searchWrap.offsetWidth;\n        addClass([this.parent.element], CLS.FILTER);\n        this.searchObj.element.focus();\n      }\n    }\n  };\n\n  BreadCrumbBar.prototype.updatePath = function (list) {\n    var li = closest(list, 'li');\n    var liElementId = li.getAttribute('data-utext');\n    this.addressBarLink = liElementId;\n    var link = this.addressBarLink.split('/');\n    var ids = this.parent.pathId;\n    var names = this.parent.pathNames;\n    this.parent.pathId = [];\n    this.parent.pathNames = [];\n    var newpath = '';\n\n    for (var i = 0, len = link.length - 1; i < len; i++) {\n      this.parent.pathId.push(ids[i]);\n      this.parent.pathNames.push(names[i]);\n      newpath += link[i] + '/';\n    }\n\n    this.parent.setProperties({\n      path: newpath\n    }, true);\n    return newpath;\n  };\n\n  BreadCrumbBar.prototype.onUpdatePath = function () {\n    this.onPathChange();\n    this.removeSearchValue();\n  };\n\n  BreadCrumbBar.prototype.onCreateEnd = function () {\n    this.onPathChange();\n  };\n\n  BreadCrumbBar.prototype.onRenameEnd = function () {\n    this.onPathChange();\n  };\n  /* istanbul ignore next */\n\n\n  BreadCrumbBar.prototype.onDeleteEnd = function () {\n    this.onUpdatePath();\n  };\n  /* istanbul ignore next */\n\n\n  BreadCrumbBar.prototype.removeSearchValue = function () {\n    this.parent.isFiltered = false;\n\n    if (this.searchObj && (this.searchObj.value !== '' || this.searchObj.element.value !== '')) {\n      this.searchObj.value = '';\n      this.searchObj.element.value = '';\n      this.searchObj.dataBind();\n    }\n  };\n\n  BreadCrumbBar.prototype.onResize = function () {\n    this.onPathChange();\n  };\n\n  BreadCrumbBar.prototype.onPasteEnd = function () {\n    this.onPathChange();\n  };\n\n  BreadCrumbBar.prototype.addEventListener = function () {\n    this.keyboardModule = new KeyboardEvents(this.parent.breadCrumbBarNavigation, {\n      keyAction: this.keyActionHandler.bind(this),\n      keyConfigs: this.keyConfigs,\n      eventName: 'keydown'\n    });\n    this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n    EventHandler.add(this.parent.breadCrumbBarNavigation, 'click', this.addressPathClickHandler, this);\n    this.parent.on(events.destroy, this.destroy, this);\n    this.parent.on(events.pathChanged, this.onUpdatePath, this);\n    this.parent.on(events.finalizeEnd, this.onUpdatePath, this);\n    this.parent.on(events.refreshEnd, this.onUpdatePath, this);\n    this.parent.on(events.openEnd, this.onUpdatePath, this);\n    this.parent.on(events.createEnd, this.onCreateEnd, this);\n    this.parent.on(events.renameEnd, this.onRenameEnd, this);\n    this.parent.on(events.deleteEnd, this.onDeleteEnd, this);\n    this.parent.on(events.splitterResize, this.onResize, this);\n    this.parent.on(events.pasteEnd, this.onPasteEnd, this);\n    this.parent.on(events.resizeEnd, this.onResize, this);\n    this.parent.on(events.searchTextChange, this.onSearchTextChange, this);\n    this.parent.on(events.dropInit, this.onDropInit, this);\n    this.parent.on(events.layoutRefresh, this.onResize, this);\n    this.parent.on(events.dropPath, this.onPathChange, this);\n  };\n\n  BreadCrumbBar.prototype.keyActionHandler = function (e) {\n    switch (e.action) {\n      case 'enter':\n        this.addressPathClickHandler(e);\n        break;\n    }\n  };\n\n  BreadCrumbBar.prototype.removeEventListener = function () {\n    this.keyboardModule.destroy();\n    this.parent.off(events.pathChanged, this.onUpdatePath);\n    this.parent.off(events.finalizeEnd, this.onUpdatePath);\n    this.parent.off(events.refreshEnd, this.onUpdatePath);\n    this.parent.off(events.openEnd, this.onUpdatePath);\n    this.parent.off(events.pasteEnd, this.onPasteEnd);\n    this.parent.off(events.createEnd, this.onCreateEnd);\n    this.parent.off(events.renameEnd, this.onRenameEnd);\n    this.parent.off(events.deleteEnd, this.onDeleteEnd);\n    this.parent.off(events.splitterResize, this.onResize);\n    this.parent.off(events.resizeEnd, this.onResize);\n    this.parent.off(events.searchTextChange, this.onSearchTextChange);\n    this.parent.off(events.dropInit, this.onDropInit);\n    this.parent.off(events.layoutRefresh, this.onResize);\n    this.parent.off(events.dropPath, this.onPathChange);\n  };\n  /* istanbul ignore next */\n\n\n  BreadCrumbBar.prototype.onDropInit = function (args) {\n    if (this.parent.targetModule === this.getModuleName()) {\n      var liEle = args.target.closest('li');\n      this.parent.dropPath = this.updatePath(liEle.children[0]);\n      this.parent.dropData = getValue(this.parent.pathId[this.parent.pathId.length - 1], this.parent.feParent);\n      this.triggerFileOpen(this.parent.dropData);\n      var treeNodeId = this.parent.pathId[this.parent.pathId.length - 1];\n      this.parent.notify(events.updateTreeSelection, {\n        module: 'treeview',\n        selectedNode: treeNodeId\n      });\n    }\n  };\n  /**\n   * For internal use only - Get the module name.\n   *\n   * @returns {string} - returns the module name\n   * @private\n   */\n\n\n  BreadCrumbBar.prototype.getModuleName = function () {\n    return 'breadcrumbbar';\n  };\n\n  BreadCrumbBar.prototype.destroy = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.removeEventListener();\n    /* istanbul ignore next */\n\n    if (!isNullOrUndefined(this.subMenuObj)) {\n      this.subMenuObj.destroy();\n    }\n\n    if (!isNullOrUndefined(this.searchObj)) {\n      this.searchObj.destroy();\n    }\n  };\n\n  BreadCrumbBar.prototype.onSearchTextChange = function (args) {\n    this.searchObj.element.placeholder = getLocaleText(this.parent, 'Search') + ' ' + args.cwd.name;\n  };\n\n  return BreadCrumbBar;\n}();\n\nexport { BreadCrumbBar };","map":{"version":3,"sources":["/Users/yasaman/Documents/moj_adminpanel/adminpanel/node_modules/@syncfusion/ej2-filemanager/src/file-manager/actions/breadcrumb-bar.js"],"names":["EventHandler","closest","isNullOrUndefined","KeyboardEvents","getValue","addClass","removeClass","remove","createElement","TextBox","DropDownButton","read","getLocaleText","searchWordHandler","events","CLS","BreadCrumbBar","parent","addressPath","addressBarLink","searchTimer","searchWrapWidth","keyConfigs","enter","render","prototype","onPropertyChanged","e","module","getModuleName","_i","_a","Object","keys","newProp","length","prop","value","searchSettings","allowSearchOnTyping","searchEventBind","breadcrumbbarModule","searchObj","filterType","ignoreCase","addEventListener","onPathChange","pathNames","paths","path","split","addressbarUL","className","addressbarLI","pathNamesLen","id","i","addressATag","j","setAttribute","icon","ICONS","appendChild","LIST_TEXT","innerText","ulElement","breadCrumbBarNavigation","querySelector","subMenuObj","destroy","searchWrap","insertBefore","updateBreadCrumbBar","addresBarUL","liElements","querySelectorAll","style","window","getComputedStyle","pRight","parseFloat","getPropertyValue","pLeft","breadCrumbBarWidth","offsetWidth","liElementsWidth","liElementsWidths","width","clientWidth","push","searchContainer","element","SEARCH_ID","searchInput","attrs","autocomplete","searchEle","span","add","onShowInput","parentElement","showClearButton","placeholder","focus","onFocus","bind","blur","onBlur","appendTo","search","nextElementSibling","searchChangeHandler","onKeyUp","diff","items","liElement","text","utext","getAttribute","subMenuLi","attributes","subMenuSpan","cssClass","iconCss","ICON_BREADCRUMB","iconPosition","enableHtmlSanitizer","beforeItemRender","addSubMenuAttributes","select","subMenuSelectOperations","isStringTemplate","wrap","classList","notify","pathColumn","args","event","target","addressPathClickHandler","item","anchor","allow","input","change","_this","isFiltered","clearTimeout","setTimeout","li","nodeName","node","children","currentPath","updatePath","itemData","pathId","feParent","triggerFileOpen","pathChanged","treeNodeId","updateTreeSelection","selectedNode","data","eventArgs","cancel","fileDetails","trigger","isMobile","contains","FILTER","list","liElementId","link","ids","names","newpath","len","setProperties","onUpdatePath","removeSearchValue","onCreateEnd","onRenameEnd","onDeleteEnd","dataBind","onResize","onPasteEnd","keyboardModule","keyAction","keyActionHandler","eventName","on","modelChanged","finalizeEnd","refreshEnd","openEnd","createEnd","renameEnd","deleteEnd","splitterResize","pasteEnd","resizeEnd","searchTextChange","onSearchTextChange","dropInit","onDropInit","layoutRefresh","dropPath","action","removeEventListener","off","targetModule","liEle","dropData","isDestroyed","cwd","name"],"mappings":"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","sourcesContent":["import { EventHandler, closest, isNullOrUndefined, KeyboardEvents } from '@syncfusion/ej2-base';\nimport { getValue, addClass, removeClass, remove, createElement } from '@syncfusion/ej2-base';\nimport { TextBox } from '@syncfusion/ej2-inputs';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { read } from '../common/operations';\nimport { getLocaleText, searchWordHandler } from '../common/utility';\nimport * as events from '../base/constant';\nimport * as CLS from '../base/classes';\n/**\n * BreadCrumbBar module\n */\nvar BreadCrumbBar = /** @class */ (function () {\n    /**\n     * constructor for addressbar module\n     *\n     * @hidden\n     * @param {IFileManager} parent - specifies parent element.\n     * @private\n     *\n     */\n    function BreadCrumbBar(parent) {\n        this.addressPath = '';\n        this.addressBarLink = '';\n        this.searchTimer = null;\n        this.searchWrapWidth = null;\n        this.parent = parent;\n        this.keyConfigs = {\n            enter: 'enter'\n        };\n        this.render();\n    }\n    BreadCrumbBar.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName() && e.module !== 'common') {\n            return;\n        }\n        for (var _i = 0, _a = Object.keys(e.newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            var value = e.newProp.searchSettings;\n            switch (prop) {\n                case 'searchSettings':\n                    if (!isNullOrUndefined(value.allowSearchOnTyping)) {\n                        this.searchEventBind(value.allowSearchOnTyping);\n                    }\n                    if (this.parent.breadcrumbbarModule.searchObj.value && this.parent.breadcrumbbarModule.searchObj.value !== '' &&\n                        !(!isNullOrUndefined(value.allowSearchOnTyping) && isNullOrUndefined(value.filterType) &&\n                            isNullOrUndefined(value.ignoreCase))) {\n                        searchWordHandler(this.parent, this.parent.breadcrumbbarModule.searchObj.value, false);\n                    }\n                    break;\n            }\n        }\n    };\n    BreadCrumbBar.prototype.render = function () {\n        this.addEventListener();\n    };\n    BreadCrumbBar.prototype.onPathChange = function () {\n        var pathNames = this.parent.pathNames;\n        var paths = this.parent.path.split('/');\n        var addressbarUL = this.parent.createElement('ul', { className: 'e-addressbar-ul' });\n        var addressbarLI = null;\n        var pathNamesLen = pathNames.length;\n        if (pathNames.length > 0) {\n            var id = '';\n            for (var i = 0; i < pathNamesLen; i++) {\n                var addressATag = null;\n                addressbarLI = this.parent.createElement('li', { className: 'e-address-list-item' });\n                for (var j = 0; j <= i; j++) {\n                    id = id + paths[j] + '/';\n                }\n                addressbarLI.setAttribute('data-utext', id);\n                if (i !== 0) {\n                    var icon = createElement('span', { className: CLS.ICONS });\n                    addressbarLI.appendChild(icon);\n                }\n                if (pathNamesLen - i !== 1) {\n                    addressATag = createElement('a', { className: CLS.LIST_TEXT });\n                    addressbarLI.setAttribute('tabindex', '0');\n                }\n                else {\n                    addressATag = createElement('span', { className: CLS.LIST_TEXT });\n                }\n                id = '';\n                addressATag.innerText = pathNames[i];\n                addressbarLI.appendChild(addressATag);\n                addressbarUL.appendChild(addressbarLI);\n            }\n            var ulElement = this.parent.breadCrumbBarNavigation.querySelector('.e-addressbar-ul');\n            if (!isNullOrUndefined(ulElement)) {\n                if (!isNullOrUndefined(this.subMenuObj)) {\n                    this.subMenuObj.destroy();\n                }\n                remove(ulElement);\n            }\n            var searchWrap = this.parent.breadCrumbBarNavigation.querySelector('.e-search-wrap');\n            if (!searchWrap) {\n                this.parent.breadCrumbBarNavigation.insertBefore(addressbarUL, searchWrap);\n            }\n            else {\n                this.parent.breadCrumbBarNavigation.appendChild(addressbarUL);\n            }\n            this.updateBreadCrumbBar(addressbarUL);\n        }\n    };\n    /* istanbul ignore next */\n    BreadCrumbBar.prototype.updateBreadCrumbBar = function (addresBarUL) {\n        var liElements = addresBarUL.querySelectorAll('li');\n        var ulElement = this.parent.breadCrumbBarNavigation.querySelector('.e-addressbar-ul');\n        var style = window.getComputedStyle(ulElement, null);\n        var pRight = parseFloat(style.getPropertyValue('padding-right'));\n        var pLeft = parseFloat(style.getPropertyValue('padding-left'));\n        var breadCrumbBarWidth = ulElement.offsetWidth - pRight - pLeft;\n        var addressbarUL = this.parent.createElement('ul', { className: 'e-addressbar-ul' });\n        var liElementsWidth = 0;\n        var liElementsWidths = [];\n        for (var i = 0; i < liElements.length; i++) {\n            var width = liElements[i].clientWidth;\n            liElementsWidths.push(width);\n            liElementsWidth = liElementsWidth + width;\n        }\n        if (!isNullOrUndefined(ulElement)) {\n            remove(ulElement);\n        }\n        var searchContainer = this.parent.createElement('div');\n        searchContainer.setAttribute('class', 'e-search-wrap');\n        var id = this.parent.element.id + CLS.SEARCH_ID;\n        var searchInput = createElement('input', { id: id,\n            attrs: { autocomplete: 'off', 'aria-label': getLocaleText(this.parent, 'Search') } });\n        searchContainer.appendChild(searchInput);\n        var searchEle = this.parent.breadCrumbBarNavigation.querySelector('.e-search-wrap .e-input');\n        if (isNullOrUndefined(searchEle)) {\n            this.parent.breadCrumbBarNavigation.appendChild(searchContainer);\n            var span = createElement('span', { className: 'e-icons e-fe-search' });\n            EventHandler.add(span, 'click', this.onShowInput, this);\n            searchInput.parentElement.insertBefore(span, searchInput);\n            this.searchObj = new TextBox({\n                value: '',\n                showClearButton: true,\n                placeholder: getLocaleText(this.parent, 'Search'),\n                focus: this.onFocus.bind(this),\n                blur: this.onBlur.bind(this)\n            });\n            this.searchObj.appendTo('#' + this.parent.element.id + CLS.SEARCH_ID);\n            this.searchEventBind(this.parent.searchSettings.allowSearchOnTyping);\n            var search = this.searchObj.element.nextElementSibling;\n            EventHandler.add(search, 'mousedown', this.searchChangeHandler.bind(this), this);\n            EventHandler.add(this.searchObj.element, 'keyup', this.onKeyUp.bind(this), this);\n        }\n        var searchWrap = this.parent.breadCrumbBarNavigation.querySelector('.e-search-wrap');\n        breadCrumbBarWidth = breadCrumbBarWidth - (this.searchWrapWidth ? this.searchWrapWidth : searchWrap.offsetWidth);\n        if (liElementsWidth > breadCrumbBarWidth) {\n            var i = liElements.length;\n            while (i--) {\n                var diff = breadCrumbBarWidth - liElementsWidths[i];\n                if (diff > 40) {\n                    addressbarUL.insertBefore(liElements[i], addressbarUL.querySelector('li'));\n                    breadCrumbBarWidth = diff;\n                }\n                else {\n                    // eslint-disable-next-line\n                    var items = [];\n                    for (var j = 0; j <= i; j++) {\n                        var liElement = liElements[j];\n                        items.push({\n                            text: liElement.innerText,\n                            utext: liElement.getAttribute('data-utext')\n                        });\n                    }\n                    var subMenuLi = this.parent.createElement('li', { className: 'e-breadcrumb-menu' });\n                    // eslint-disable-next-line\n                    var attributes = { className: 'e-breadcrumb-submenu' };\n                    var subMenuSpan = this.parent.createElement('button', attributes);\n                    subMenuLi.appendChild(subMenuSpan);\n                    addressbarUL.insertBefore(subMenuLi, addressbarUL.querySelector('li'));\n                    this.subMenuObj = new DropDownButton({\n                        items: items,\n                        cssClass: 'e-caret-hide e-submenu',\n                        iconCss: CLS.ICON_BREADCRUMB,\n                        iconPosition: 'Top',\n                        enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n                        beforeItemRender: this.addSubMenuAttributes.bind(this),\n                        select: this.subMenuSelectOperations.bind(this)\n                    });\n                    this.subMenuObj.isStringTemplate = true;\n                    this.subMenuObj.appendTo(subMenuSpan);\n                    break;\n                }\n            }\n            this.parent.breadCrumbBarNavigation.insertBefore(addressbarUL, searchWrap);\n        }\n        else {\n            this.parent.breadCrumbBarNavigation.insertBefore(addresBarUL, searchWrap);\n        }\n    };\n    /* istanbul ignore next */\n    BreadCrumbBar.prototype.onFocus = function () {\n        var wrap = closest(this.searchObj.element, '.e-search-wrap');\n        wrap.classList.add('e-focus');\n    };\n    /* istanbul ignore next */\n    BreadCrumbBar.prototype.onKeyUp = function () {\n        this.parent.notify(events.pathColumn, { args: this.parent });\n    };\n    /* istanbul ignore next */\n    BreadCrumbBar.prototype.onBlur = function () {\n        var wrap = closest(this.searchObj.element, '.e-search-wrap');\n        wrap.classList.remove('e-focus');\n    };\n    /* istanbul ignore next */\n    BreadCrumbBar.prototype.subMenuSelectOperations = function (event) {\n        // eslint-disable-next-line\n        var args = { target: event.element };\n        this.addressPathClickHandler(args);\n    };\n    /* istanbul ignore next */\n    BreadCrumbBar.prototype.addSubMenuAttributes = function (args) {\n        args.element.setAttribute('data-utext', getValue('utext', args.item));\n        var anchor = this.parent.createElement('a', { className: 'e-list-text' });\n        args.element.appendChild(anchor);\n    };\n    BreadCrumbBar.prototype.searchEventBind = function (allow) {\n        if (allow) {\n            this.searchObj.input = this.searchChangeHandler.bind(this);\n            this.searchObj.change = null;\n        }\n        else {\n            this.searchObj.change = this.searchChangeHandler.bind(this);\n            this.searchObj.input = null;\n        }\n    };\n    BreadCrumbBar.prototype.searchChangeHandler = function (args) {\n        var _this = this;\n        if (!isNullOrUndefined(args.value)) {\n            this.parent.isFiltered = false;\n            if (this.parent.searchSettings.allowSearchOnTyping) {\n                window.clearTimeout(this.searchTimer);\n                this.searchTimer = window.setTimeout(function () { searchWordHandler(_this.parent, args.value, false); }, 300);\n            }\n            else {\n                searchWordHandler(this.parent, args.value, false);\n            }\n        }\n    };\n    BreadCrumbBar.prototype.addressPathClickHandler = function (e) {\n        var li = e.target;\n        if (li.nodeName === 'LI' || li.nodeName === 'A') {\n            var node = li.nodeName === 'LI' ? li.children[0] : li;\n            if (!isNullOrUndefined(node)) {\n                this.parent.isFiltered = false;\n                var currentPath = this.updatePath(node);\n                this.parent.itemData = [getValue(this.parent.pathId[this.parent.pathId.length - 1], this.parent.feParent)];\n                this.triggerFileOpen(this.parent.itemData[0]);\n                read(this.parent, events.pathChanged, currentPath);\n                var treeNodeId = this.parent.pathId[this.parent.pathId.length - 1];\n                this.parent.notify(events.updateTreeSelection, { module: 'treeview', selectedNode: treeNodeId });\n            }\n        }\n    };\n    // eslint-disable-next-line\n    BreadCrumbBar.prototype.triggerFileOpen = function (data) {\n        var eventArgs = { cancel: false, fileDetails: data, module: 'BreadCrumbBar' };\n        delete eventArgs.cancel;\n        this.parent.trigger('fileOpen', eventArgs);\n    };\n    /* istanbul ignore next */\n    BreadCrumbBar.prototype.onShowInput = function () {\n        if (this.parent.isMobile) {\n            if (this.parent.element.classList.contains(CLS.FILTER)) {\n                removeClass([this.parent.element], CLS.FILTER);\n                this.searchWrapWidth = null;\n            }\n            else {\n                var searchWrap = this.parent.breadCrumbBarNavigation.querySelector('.e-search-wrap');\n                this.searchWrapWidth = searchWrap.offsetWidth;\n                addClass([this.parent.element], CLS.FILTER);\n                this.searchObj.element.focus();\n            }\n        }\n    };\n    BreadCrumbBar.prototype.updatePath = function (list) {\n        var li = closest(list, 'li');\n        var liElementId = li.getAttribute('data-utext');\n        this.addressBarLink = liElementId;\n        var link = this.addressBarLink.split('/');\n        var ids = this.parent.pathId;\n        var names = this.parent.pathNames;\n        this.parent.pathId = [];\n        this.parent.pathNames = [];\n        var newpath = '';\n        for (var i = 0, len = link.length - 1; i < len; i++) {\n            this.parent.pathId.push(ids[i]);\n            this.parent.pathNames.push(names[i]);\n            newpath += link[i] + '/';\n        }\n        this.parent.setProperties({ path: newpath }, true);\n        return newpath;\n    };\n    BreadCrumbBar.prototype.onUpdatePath = function () {\n        this.onPathChange();\n        this.removeSearchValue();\n    };\n    BreadCrumbBar.prototype.onCreateEnd = function () {\n        this.onPathChange();\n    };\n    BreadCrumbBar.prototype.onRenameEnd = function () {\n        this.onPathChange();\n    };\n    /* istanbul ignore next */\n    BreadCrumbBar.prototype.onDeleteEnd = function () {\n        this.onUpdatePath();\n    };\n    /* istanbul ignore next */\n    BreadCrumbBar.prototype.removeSearchValue = function () {\n        this.parent.isFiltered = false;\n        if (this.searchObj && (this.searchObj.value !== '' || this.searchObj.element.value !== '')) {\n            this.searchObj.value = '';\n            this.searchObj.element.value = '';\n            this.searchObj.dataBind();\n        }\n    };\n    BreadCrumbBar.prototype.onResize = function () {\n        this.onPathChange();\n    };\n    BreadCrumbBar.prototype.onPasteEnd = function () {\n        this.onPathChange();\n    };\n    BreadCrumbBar.prototype.addEventListener = function () {\n        this.keyboardModule = new KeyboardEvents(this.parent.breadCrumbBarNavigation, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n        this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n        EventHandler.add(this.parent.breadCrumbBarNavigation, 'click', this.addressPathClickHandler, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.pathChanged, this.onUpdatePath, this);\n        this.parent.on(events.finalizeEnd, this.onUpdatePath, this);\n        this.parent.on(events.refreshEnd, this.onUpdatePath, this);\n        this.parent.on(events.openEnd, this.onUpdatePath, this);\n        this.parent.on(events.createEnd, this.onCreateEnd, this);\n        this.parent.on(events.renameEnd, this.onRenameEnd, this);\n        this.parent.on(events.deleteEnd, this.onDeleteEnd, this);\n        this.parent.on(events.splitterResize, this.onResize, this);\n        this.parent.on(events.pasteEnd, this.onPasteEnd, this);\n        this.parent.on(events.resizeEnd, this.onResize, this);\n        this.parent.on(events.searchTextChange, this.onSearchTextChange, this);\n        this.parent.on(events.dropInit, this.onDropInit, this);\n        this.parent.on(events.layoutRefresh, this.onResize, this);\n        this.parent.on(events.dropPath, this.onPathChange, this);\n    };\n    BreadCrumbBar.prototype.keyActionHandler = function (e) {\n        switch (e.action) {\n            case 'enter':\n                this.addressPathClickHandler(e);\n                break;\n        }\n    };\n    BreadCrumbBar.prototype.removeEventListener = function () {\n        this.keyboardModule.destroy();\n        this.parent.off(events.pathChanged, this.onUpdatePath);\n        this.parent.off(events.finalizeEnd, this.onUpdatePath);\n        this.parent.off(events.refreshEnd, this.onUpdatePath);\n        this.parent.off(events.openEnd, this.onUpdatePath);\n        this.parent.off(events.pasteEnd, this.onPasteEnd);\n        this.parent.off(events.createEnd, this.onCreateEnd);\n        this.parent.off(events.renameEnd, this.onRenameEnd);\n        this.parent.off(events.deleteEnd, this.onDeleteEnd);\n        this.parent.off(events.splitterResize, this.onResize);\n        this.parent.off(events.resizeEnd, this.onResize);\n        this.parent.off(events.searchTextChange, this.onSearchTextChange);\n        this.parent.off(events.dropInit, this.onDropInit);\n        this.parent.off(events.layoutRefresh, this.onResize);\n        this.parent.off(events.dropPath, this.onPathChange);\n    };\n    /* istanbul ignore next */\n    BreadCrumbBar.prototype.onDropInit = function (args) {\n        if (this.parent.targetModule === this.getModuleName()) {\n            var liEle = args.target.closest('li');\n            this.parent.dropPath = this.updatePath((liEle.children[0]));\n            this.parent.dropData = getValue(this.parent.pathId[this.parent.pathId.length - 1], this.parent.feParent);\n            this.triggerFileOpen(this.parent.dropData);\n            var treeNodeId = this.parent.pathId[this.parent.pathId.length - 1];\n            this.parent.notify(events.updateTreeSelection, { module: 'treeview', selectedNode: treeNodeId });\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} - returns the module name\n     * @private\n     */\n    BreadCrumbBar.prototype.getModuleName = function () {\n        return 'breadcrumbbar';\n    };\n    BreadCrumbBar.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n        /* istanbul ignore next */\n        if (!isNullOrUndefined(this.subMenuObj)) {\n            this.subMenuObj.destroy();\n        }\n        if (!isNullOrUndefined(this.searchObj)) {\n            this.searchObj.destroy();\n        }\n    };\n    BreadCrumbBar.prototype.onSearchTextChange = function (args) {\n        this.searchObj.element.placeholder = getLocaleText(this.parent, 'Search') + ' ' + args.cwd.name;\n    };\n    return BreadCrumbBar;\n}());\nexport { BreadCrumbBar };\n"]},"metadata":{},"sourceType":"module"}