{"ast":null,"code":"import _regeneratorRuntime from\"/Users/yasaman/Documents/moj_adminpanel/adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/yasaman/Documents/moj_adminpanel/adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/yasaman/Documents/moj_adminpanel/adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"/Users/yasaman/Documents/moj_adminpanel/adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useState,useEffect,useReducer}from\"react\";import{api}from\"./api\";import{Snackbar}from'@material-ui/core';import{BASE_URL}from\"./constants\";import{jsx as _jsx}from\"react/jsx-runtime\";var dataFetchReducer=function dataFetchReducer(state,action){switch(action.type){case'FETCH_INIT':return _objectSpread(_objectSpread({},state),{},{isLoading:true,hasError:false});case'FETCH_SUCCESS':return _objectSpread(_objectSpread({},state),{},{isLoading:false,hasError:false,data:action.payload});case'FETCH_FAILURE':return _objectSpread(_objectSpread({},state),{},{isLoading:false,hasError:true});default:throw new Error();}};export var useFetchApi=function useFetchApi(initialConf,initialData){var _useState=useState(initialConf),_useState2=_slicedToArray(_useState,2),configs=_useState2[0],setConfigs=_useState2[1];var createApiConfigs=function createApiConfigs(method,baseUrl,url,data){return setConfigs({method:method,baseURL:!baseUrl.startsWith(\"http\")?BASE_URL(baseUrl):baseUrl,url:url,data:data});};var _useReducer=useReducer(dataFetchReducer,{isLoading:false,hasError:false,data:initialData,listCount:0}),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];useEffect(function(){var didCancel=false;if(configs){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:'FETCH_INIT'});_context.prev=1;_context.next=4;return api(configs);case 4:result=_context.sent;if(!didCancel){if(result.data.message===\"ok\"){dispatch({type:'FETCH_SUCCESS',payload:result.data.result});}}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);if(!didCancel){dispatch({type:'FETCH_FAILURE'});}case 11:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();};return function(){didCancel=true;};},[configs]);return[state,createApiConfigs];};export var useSnackbar=function useSnackbar(message,duration,type){var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),snackOpen=_useState4[0],setSnackOpen=_useState4[1];return/*#__PURE__*/_jsx(Snackbar// anchorOrigin={{ vertical, horizontal }}\n,{open:snackOpen,onClose:function onClose(){return setSnackOpen(false);},message:\"\\u062E\\u0637\\u0627\\u06CC\\u06CC \\u0631\\u062E \\u062F\\u0627\\u062F\\u0647 \\u0627\\u0633\\u062A\",autoHideDuration:1000// key={vertical + horizontal}\n});};","map":{"version":3,"sources":["/Users/yasaman/Documents/moj_adminpanel/adminpanel/src/utils/hooks.js"],"names":["React","useState","useEffect","useReducer","api","Snackbar","BASE_URL","dataFetchReducer","state","action","type","isLoading","hasError","data","payload","Error","useFetchApi","initialConf","initialData","configs","setConfigs","createApiConfigs","method","baseUrl","url","baseURL","startsWith","listCount","dispatch","didCancel","fetchData","result","message","useSnackbar","duration","snackOpen","setSnackOpen"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useReducer } from \"react\";\nimport { api } from \"./api\";\nimport {Snackbar } from '@material-ui/core';\nimport { BASE_URL } from \"./constants\";\n\n\nconst dataFetchReducer = (state, action) => {\n    switch (action.type) {\n        case 'FETCH_INIT':\n          return { \n              ...state,\n              isLoading: true,\n              hasError: false\n            };\n        case 'FETCH_SUCCESS':\n          return { \n              ...state,\n              isLoading: false,\n              hasError: false,\n              data: action.payload,\n            };\n        case 'FETCH_FAILURE':\n          return { \n              ...state,\n              isLoading: false,\n              hasError: true,\n            };\n        default:\n          throw new Error();\n      }\n  };\n\n\nexport const useFetchApi = (initialConf, initialData) => {\n\n    \n    const [configs, setConfigs] = useState(initialConf);\n    \n    const createApiConfigs = (method, baseUrl, url, data) => setConfigs(\n        {\n            method,\n            baseURL: !baseUrl.startsWith(\"http\") ? BASE_URL(baseUrl) : baseUrl,\n            url,\n            data,\n        }\n    )\n\n    const [state, dispatch] = useReducer(dataFetchReducer, {\n        isLoading: false,\n        hasError: false,\n        data: initialData,\n        listCount: 0\n    });\n\n    useEffect(() => {\n        let didCancel = false;\n        if (configs){\n            const fetchData = async () => {\n                dispatch({ type: 'FETCH_INIT' });\n                try {\n                    const result = await api(configs);\n                    if (!didCancel){\n                        if (result.data.message === \"ok\"){\n                            dispatch({ type: 'FETCH_SUCCESS', payload: result.data.result });\n                        }\n                    }\n                } catch (error) {\n                    if (!didCancel) {\n                        dispatch({ type: 'FETCH_FAILURE' });\n                    }\n                }\n            }\n            fetchData();\n        };\n        return () => {\n            didCancel = true;\n        };\n\n    }, [configs]);\n   \n    return [state, createApiConfigs];\n  };\n\n\n  export const useSnackbar = (message, duration, type) => {\n    const [snackOpen, setSnackOpen] = useState(false)\n    return <Snackbar\n            // anchorOrigin={{ vertical, horizontal }}\n            open={snackOpen}\n            onClose={ () => setSnackOpen(false) }\n            message=\"خطایی رخ داده است\"\n            autoHideDuration={1000}\n            // key={vertical + horizontal}\n        />\n  }\n"]},"metadata":{},"sourceType":"module"}