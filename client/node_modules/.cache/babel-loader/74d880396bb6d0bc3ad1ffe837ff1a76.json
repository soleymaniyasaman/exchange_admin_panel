{"ast":null,"code":"import { Dialog } from '@syncfusion/ej2-popups';\nimport { select, isNullOrUndefined as isNOU, createElement, Internationalization } from '@syncfusion/ej2-base';\nimport { getValue, remove, selectAll } from '@syncfusion/ej2-base';\nimport { createFolder } from '../common/operations';\nimport * as CLS from '../base/classes';\nimport * as events from '../base/constant';\nimport { paste, rename } from '../common/operations';\nimport { getLocaleText, getDuplicateData, getParentPath, objectToString, getCssClass } from '../common/utility';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { CheckBox } from '@syncfusion/ej2-buttons'; // eslint:disable-next-line\n\n/**\n *\n * @param {IFileManager} parent - Specifies the parent element\n * @param {string} text - specifies the text string.\n * @param {ReadArgs | SelectedEventArgs} e - specifies the type of event args.\n * @param {FileDetails} details - specifies the file details.\n * @param {string[]} replaceItems - specifies the replacement.\n * @returns {void}\n * @private\n */\n\nexport function createDialog(parent, text, e, details, replaceItems) {\n  var options = getOptions(parent, text, e, details, replaceItems);\n\n  if (isNOU(parent.dialogObj)) {\n    parent.dialogObj = new Dialog({\n      beforeOpen: keydownAction.bind(this, parent, options.dialogName),\n      beforeClose: function (args) {\n        triggerPopupBeforeClose(parent, parent.dialogObj, args, options.dialogName);\n      },\n      header: options.header,\n      content: options.content,\n      buttons: options.buttons,\n      animationSettings: {\n        effect: 'None'\n      },\n      showCloseIcon: true,\n      closeOnEscape: true,\n      visible: true,\n      allowDragging: true,\n      isModal: true,\n      target: parent.popupTarget ? parent.popupTarget : '#' + parent.element.id,\n      cssClass: getCssClass(parent, parent.isMobile ? CLS.MOB_POPUP : CLS.ROOT_POPUP),\n      width: '350px',\n      open: options.open,\n      close: options.close,\n      enableRtl: parent.enableRtl,\n      enableHtmlSanitizer: parent.enableHtmlSanitizer,\n      locale: parent.locale\n    });\n    parent.dialogObj.isStringTemplate = true;\n    parent.dialogObj.appendTo('#' + parent.element.id + CLS.DIALOG_ID);\n  } else {\n    changeOptions(parent, options);\n  }\n}\n/**\n *\n * @param {IFileManager} parent - Specifies the parent element.\n * @param {string} text - specifies the text string.\n * @param {string[]} replaceItems - specifies the replacement items.\n * @param {string} newPath - specifies the new path.\n * @returns {void}\n * @private\n */\n\nexport function createExtDialog(parent, text, replaceItems, newPath) {\n  var extOptions = getExtOptions(parent, text, replaceItems, newPath);\n  parent.isApplySame = false;\n\n  if (isNOU(parent.extDialogObj)) {\n    parent.extDialogObj = new Dialog({\n      beforeOpen: beforeExtOpen.bind(this, parent, extOptions.dialogName),\n      beforeClose: function (args) {\n        triggerPopupBeforeClose(parent, parent.extDialogObj, args, extOptions.dialogName);\n      },\n      content: extOptions.content,\n      header: extOptions.header,\n      closeOnEscape: true,\n      allowDragging: true,\n      animationSettings: {\n        effect: 'None'\n      },\n      target: parent.popupTarget ? parent.popupTarget : '#' + parent.element.id,\n      cssClass: getCssClass(parent, parent.isMobile ? CLS.MOB_POPUP : CLS.ROOT_POPUP),\n      enableRtl: parent.enableRtl,\n      showCloseIcon: true,\n      isModal: true,\n      width: 350,\n      buttons: extOptions.buttons,\n      open: extOptions.open,\n      close: extOptions.close,\n      enableHtmlSanitizer: parent.enableHtmlSanitizer,\n      locale: parent.locale\n    });\n    parent.extDialogObj.isStringTemplate = true;\n    parent.extDialogObj.appendTo('#' + parent.element.id + CLS.EXTN_DIALOG_ID);\n  } else {\n    parent.extDialogObj.header = extOptions.header;\n    parent.extDialogObj.close = extOptions.close;\n    parent.extDialogObj.open = extOptions.open;\n    parent.extDialogObj.close = extOptions.close;\n    parent.extDialogObj.content = extOptions.content;\n    parent.extDialogObj.buttons = extOptions.buttons;\n    parent.extDialogObj.enableRtl = parent.enableRtl;\n    parent.extDialogObj.locale = parent.locale;\n    parent.extDialogObj.beforeOpen = beforeExtOpen.bind(this, parent, extOptions.dialogName);\n\n    parent.extDialogObj.beforeClose = function (args) {\n      triggerPopupBeforeClose(parent, parent.extDialogObj, args, extOptions.dialogName);\n    };\n\n    parent.extDialogObj.dataBind();\n    parent.extDialogObj.show();\n  }\n}\n/**\n *\n * @param {IFileManager} parent - Specifies the parent element.\n * @param {Dialog} dlgModule - Specifies the dialog module.\n * @param {BeforeOpenEventArgs} args - specifies the before open arguements.\n * @param {string} dialogName - specifies the dialog name.\n * @returns {void}\n * @private\n */\n\nfunction triggerPopupBeforeOpen(parent, dlgModule, args, dialogName) {\n  var eventArgs = {\n    cancel: args.cancel,\n    popupName: dialogName,\n    popupModule: dlgModule\n  };\n  parent.trigger('beforePopupOpen', eventArgs, function (eventargs) {\n    args.cancel = eventargs.cancel;\n  });\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {Dialog} dlgModule - specifies the dialog module.\n * @param {BeforeCloseEventArgs} args - specifies the before close event arguements.\n * @param {string} dialogName - specifies the dialog name.\n * @returns {void}\n * @private\n */\n\n\nfunction triggerPopupBeforeClose(parent, dlgModule, args, dialogName) {\n  var eventArgs = {\n    cancel: args.cancel,\n    popupModule: dlgModule,\n    popupName: dialogName\n  };\n  parent.trigger('beforePopupClose', eventArgs, function (eventargs) {\n    args.cancel = eventargs.cancel;\n\n    if (!args.cancel && args.isInteracted && (dialogName === 'Rename' || dialogName === 'Create Folder')) {\n      parent.trigger(events.actionFailure, {});\n    }\n  });\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {Dialog} dlgModule - specifies the dialog module.\n * @param {string} dialogName - specifies the dialog name.\n * @returns {void}\n * @private\n */\n\n\nfunction triggerPopupOpen(parent, dlgModule, dialogName) {\n  var args = {\n    popupModule: dlgModule,\n    element: dlgModule.element,\n    popupName: dialogName\n  };\n  parent.trigger('popupOpen', args);\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {Dialog} dlgModule - specifies the dialog module.\n * @param {string} dialogName - specifies the dialog name.\n * @returns {void}\n * @private\n */\n\n\nfunction triggerPopupClose(parent, dlgModule, dialogName) {\n  var args = {\n    popupModule: dlgModule,\n    element: dlgModule.element,\n    popupName: dialogName\n  };\n  parent.trigger('popupClose', args);\n} // eslint:disable-next-line\n\n/**\n *\n * @param {IFileManager} parent - Specifies the parent element.\n * @param {string} text - specifies the text string.\n * @param {string[]} replaceItems - specifies the replacement items.\n * @param {string} newPath - specifies the new path.\n * @returns {DialogOptions} - returns the dialog options.\n * @private\n */\n\n\nfunction getExtOptions(parent, text, replaceItems, newPath) {\n  var options = {\n    header: '',\n    content: '',\n    buttons: [],\n    dialogName: ''\n  };\n  var duplicateContent;\n  var item;\n  var index;\n\n  options.open = function () {\n    triggerPopupOpen(parent, parent.extDialogObj, options.dialogName);\n  };\n\n  options.close = function () {\n    triggerPopupClose(parent, parent.extDialogObj, options.dialogName);\n  };\n\n  switch (text) {\n    case 'Extension':\n      options.header = getLocaleText(parent, 'Header-Rename-Confirmation');\n      options.content = '<div>' + getLocaleText(parent, 'Content-Rename-Confirmation') + '</div>';\n      options.buttons = [{\n        buttonModel: {\n          isPrimary: true,\n          content: getLocaleText(parent, 'Button-Yes')\n        },\n        click: function () {\n          parent.extDialogObj.hide();\n          rename(parent, newPath, parent.renameText);\n        }\n      }, {\n        buttonModel: {\n          content: getLocaleText(parent, 'Button-No')\n        },\n        click: function () {\n          parent.extDialogObj.hide();\n          parent.dialogObj.hide();\n        }\n      }];\n      options.dialogName = 'Extension Change';\n      break;\n\n    case 'DuplicateItems':\n      options.dialogName = 'Duplicate Items';\n      parent.replaceItems = replaceItems;\n      item = parent.replaceItems[parent.fileLength];\n      index = item.lastIndexOf('/');\n      item = index === -1 ? item : item.substring(index);\n      options.header = getLocaleText(parent, 'Header-Duplicate');\n      duplicateContent = '<div>' + getLocaleText(parent, 'Content-Duplicate') + '</div>';\n      options.content = duplicateContent.replace('{0}', item);\n\n      options.close = function () {\n        if (!parent.isDropEnd && parent.duplicateItems.length === 0) {\n          var args = {\n            fileDetails: parent.droppedObjects\n          };\n          parent.trigger('fileDropped', args);\n          parent.isDropEnd = parent.isDragDrop = false;\n        }\n\n        triggerPopupClose(parent, parent.extDialogObj, options.dialogName);\n      };\n\n      options.buttons = [{\n        buttonModel: {\n          isPrimary: true,\n          content: getLocaleText(parent, 'Button-Yes')\n        },\n        click: function () {\n          parent.duplicateItems.push(parent.replaceItems[parent.fileLength]);\n          parent.duplicateRecords.push(getDuplicateData(parent, parent.replaceItems[parent.fileLength]));\n          parent.fileLength++;\n\n          if (replaceItems[parent.fileLength]) {\n            var item_1 = parent.replaceItems[parent.fileLength];\n            var indexval = item_1.lastIndexOf('/');\n            item_1 = indexval === -1 ? item_1 : item_1.substring(indexval);\n            parent.extDialogObj.content = duplicateContent.replace('{0}', item_1);\n            parent.extDialogObj.show();\n          } else {\n            parent.extDialogObj.hide();\n            var targetPath = parent.isDragDrop ? parent.dragPath : parent.targetPath;\n            var path = parent.isDragDrop ? parent.dropPath : parent.folderPath === '' ? parent.path : parent.folderPath;\n            var action = parent.isDragDrop ? 'move' : parent.fileAction;\n            paste(parent, targetPath, parent.duplicateItems, path, action, parent.duplicateItems, parent.duplicateRecords);\n          }\n        }\n      }, {\n        buttonModel: {\n          content: getLocaleText(parent, 'Button-No')\n        },\n        click: function () {\n          parent.fileLength++;\n\n          if (replaceItems[parent.fileLength]) {\n            var item_2 = parent.replaceItems[parent.fileLength];\n            var ind = item_2.lastIndexOf('/');\n            item_2 = ind === -1 ? item_2 : item_2.substring(ind);\n            parent.extDialogObj.content = duplicateContent.replace('{0}', item_2);\n            parent.extDialogObj.show();\n          } else {\n            parent.extDialogObj.hide();\n\n            if (parent.duplicateItems.length !== 0) {\n              var action = parent.isDragDrop ? 'move' : parent.fileAction;\n              var targetPath = parent.isDragDrop ? parent.dragPath : parent.targetPath;\n              var path = parent.isDragDrop ? parent.dropPath : parent.folderPath === '' ? parent.path : parent.folderPath;\n              paste(parent, targetPath, parent.duplicateItems, path, action, parent.duplicateItems, parent.duplicateRecords);\n            }\n          }\n        }\n      }];\n      break;\n\n    case 'UploadRetry':\n      options.dialogName = 'Retry Upload';\n      options.header = getLocaleText(parent, 'Header-Retry');\n      options.content = parent.retryFiles[0].name + '<div class=\"e-fe-retrycontent\">' + getLocaleText(parent, 'Content-Retry') + '</div>';\n      options.open = onRetryOpen.bind(this, parent);\n\n      options.close = function () {\n        parent.isRetryOpened = false;\n        retryDlgClose(parent);\n        triggerPopupClose(parent, parent.extDialogObj, options.dialogName);\n      };\n\n      options.buttons = [{\n        buttonModel: {\n          isPrimary: true,\n          content: getLocaleText(parent, 'Button-Keep-Both')\n        },\n        click: function () {\n          retryDlgUpdate(parent, true);\n        }\n      }, {\n        buttonModel: {\n          isPrimary: true,\n          content: getLocaleText(parent, 'Button-Replace')\n        },\n        click: function () {\n          retryDlgUpdate(parent, false);\n        }\n      }, {\n        buttonModel: {\n          isPrimary: true,\n          content: getLocaleText(parent, 'Button-Skip')\n        },\n        click: function () {\n          var count = 0;\n\n          if (parent.isApplySame) {\n            count = parent.retryFiles.length;\n            parent.retryFiles = [];\n            retryDlgClose(parent);\n          } else {\n            count = 1;\n            parent.retryFiles.splice(0, 1);\n\n            if (parent.retryFiles.length !== 0) {\n              createExtDialog(parent, 'UploadRetry');\n            } else {\n              retryDlgClose(parent);\n            }\n          }\n\n          parent.notify(events.skipUpload, {\n            count: count\n          });\n        }\n      }];\n      break;\n  }\n\n  return options;\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {boolean} isKeepBoth - checks the arguement to keep both.\n * @returns {void}\n * @private\n */\n\n\nfunction retryDlgUpdate(parent, isKeepBoth) {\n  if (parent.isApplySame) {\n    if (isKeepBoth) {\n      onKeepBothAll(parent);\n    } else {\n      onReplaceAll(parent);\n    }\n\n    retryDlgClose(parent);\n  } else {\n    parent.retryArgs.push({\n      action: isKeepBoth ? 'keepboth' : 'replace',\n      file: parent.retryFiles[0]\n    });\n    parent.uploadObj.retry(parent.retryFiles[0]);\n    parent.retryFiles.splice(0, 1);\n\n    if (parent.retryFiles.length !== 0) {\n      createExtDialog(parent, 'UploadRetry');\n    } else {\n      retryDlgClose(parent);\n    }\n  }\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @returns {void}\n * @private\n */\n\n\nfunction retryDlgClose(parent) {\n  var flag = true;\n\n  if (parent.isRetryOpened) {\n    parent.isRetryOpened = false;\n  } else {\n    flag = false;\n  }\n\n  var ele = select('.e-dlg-checkbox', parent.extDialogObj.element);\n\n  if (ele) {\n    remove(ele);\n  }\n\n  if (flag) {\n    parent.extDialogObj.hide();\n  } else {\n    parent.retryFiles = [];\n  }\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {object} args - specifies the arguements.\n * @returns {void}\n * @private\n */\n// eslint-disable-next-line\n\n\nfunction onRetryOpen(parent, args) {\n  parent.isRetryOpened = true;\n  var dialogEle = getValue('element', args);\n  var container = select('.e-dlg-content', dialogEle);\n  var checkContainer = parent.createElement('div', {\n    className: 'e-dlg-checkbox'\n  });\n  var checkbox = parent.createElement('input', {\n    id: parent.element.id + '_applyall'\n  });\n  checkContainer.appendChild(checkbox);\n  container.appendChild(checkContainer);\n  var checkBoxObj = new CheckBox({\n    label: getLocaleText(parent, 'ApplyAll-Label'),\n    change: function (args) {\n      parent.isApplySame = args.checked;\n    }\n  });\n  checkBoxObj.appendTo('#' + parent.element.id + '_applyall');\n  triggerPopupOpen(parent, parent.extDialogObj, 'Retry Upload');\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @returns {void}\n * @private\n */\n\n\nfunction onKeepBothAll(parent) {\n  while (parent.retryFiles.length !== 0) {\n    parent.retryArgs.push({\n      action: 'keepboth',\n      file: parent.retryFiles[0]\n    });\n    parent.uploadObj.retry(parent.retryFiles[0]);\n    parent.retryFiles.splice(0, 1);\n  }\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @returns {void}\n * @private\n */\n\n\nfunction onReplaceAll(parent) {\n  while (parent.retryFiles.length !== 0) {\n    parent.retryArgs.push({\n      action: 'replace',\n      file: parent.retryFiles[0]\n    });\n    parent.uploadObj.retry(parent.retryFiles[0]);\n    parent.retryFiles.splice(0, 1);\n  }\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @returns {void}\n * @private\n */\n\n\nfunction focusInput(parent) {\n  var ele = select('#newname', parent.dialogObj.element);\n  ele.focus();\n  ele.value = '';\n  var len = ele.value.length;\n  ele.setSelectionRange(0, len);\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @returns {void}\n * @private\n */\n\n\nfunction onFolderDialogOpen(parent) {\n  var ele = select('#newname', parent.dialogObj.element);\n\n  if (!ele.parentElement.classList.contains('e-control-wrapper')) {\n    createInput(ele, getLocaleText(parent, 'Content-NewFolder'));\n  }\n\n  ele.parentElement.nextElementSibling.innerHTML = '';\n\n  ele.oninput = function () {\n    onValidate(parent, ele);\n  };\n\n  ele.onkeyup = function (e) {\n    var code = getKeyCode(e);\n\n    if (code === 13) {\n      onSubmit(parent);\n    }\n  };\n\n  focusInput(parent);\n  triggerPopupOpen(parent, parent.dialogObj, 'Create Folder');\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @returns {void}\n * @private\n */\n\n\nfunction onRenameDialogOpen(parent) {\n  var inputEle = select('#rename', parent.dialogObj.element);\n\n  if (!inputEle.parentElement.classList.contains('e-control-wrapper')) {\n    createInput(inputEle, getLocaleText(parent, 'Content-Rename'));\n  }\n\n  inputEle.parentElement.nextElementSibling.innerHTML = '';\n\n  inputEle.oninput = function () {\n    onValidate(parent, inputEle);\n  };\n\n  inputEle.onkeyup = function (e) {\n    var code = getKeyCode(e);\n\n    if (code === 13) {\n      onReSubmit(parent);\n    }\n  };\n\n  onFocusRenameInput(parent, inputEle);\n  triggerPopupOpen(parent, parent.dialogObj, 'Rename');\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {HTMLInputElement} inputEle - specifies the input element.\n * @returns {void}\n * @private\n */\n\n\nfunction onFocusRenameInput(parent, inputEle) {\n  inputEle.focus();\n  var txt = '';\n\n  if (parent.isFile && !parent.showFileExtension) {\n    var index = parent.currentItemText.lastIndexOf('.');\n    txt = index === -1 ? parent.currentItemText : parent.currentItemText.substring(0, index);\n  } else {\n    txt = parent.currentItemText;\n  }\n\n  inputEle.value = txt;\n\n  if (parent.isFile && parent.showFileExtension && inputEle.value.indexOf('.') !== -1) {\n    inputEle.setSelectionRange(0, inputEle.value.lastIndexOf('.'));\n  } else {\n    inputEle.setSelectionRange(0, inputEle.value.length);\n  }\n}\n/**\n *\n * @param {HTMLInputElement} ele - specifies the element.\n * @param {string} placeholder - specifies the place holder.\n * @returns {void}\n * @private\n */\n\n\nfunction createInput(ele, placeholder) {\n  Input.createInput({\n    element: ele,\n    properties: {\n      placeholder: placeholder\n    }\n  });\n}\n/* istanbul ignore next */\n// eslint:disable-next-line\n\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} text - specifies the text string.\n * @param {ReadArgs | SelectedEventArgs} e - specifies the event arguements.\n * @param {FileDetails} details - specifies the file details.\n * @param {string[]} replaceItems - specifies the replacement items.\n * @returns {DialogOptions} - specifies the dialog options.\n * @private\n */\n\n\nfunction getOptions(parent, text, e, details, replaceItems) {\n  var options = {\n    header: '',\n    content: '',\n    buttons: [],\n    dialogName: ''\n  };\n  var permission;\n  var formattedString;\n  var intl;\n  var strArr;\n  var fileType;\n  var location;\n\n  options.open = function () {\n    triggerPopupOpen(parent, parent.dialogObj, options.dialogName);\n  };\n\n  options.close = function () {\n    triggerPopupClose(parent, parent.dialogObj, options.dialogName);\n  };\n\n  text = details && details.multipleFiles === true ? 'MultipleFileDetails' : text;\n\n  switch (text) {\n    case 'NewFolder':\n      options.dialogName = 'Create Folder';\n      options.header = getLocaleText(parent, 'Header-NewFolder');\n      options.content = '<input type=\"text\" value=\"New folder\" id=\"newname\"><div class=\"e-fe-error\"></div>';\n      options.buttons = [{\n        buttonModel: {\n          isPrimary: true,\n          content: getLocaleText(parent, 'Button-Create')\n        },\n        click: function (e) {\n          if (e.type === 'keydown') {\n            return;\n          }\n\n          onSubmit(parent);\n        }\n      }];\n      options.open = onFolderDialogOpen.bind(this, parent);\n      break;\n\n    case 'Delete':\n      options.dialogName = 'Delete';\n\n      if (parent.selectedItems.length > 1) {\n        options.content = ('<div>' + getLocaleText(parent, 'Content-Multiple-Delete') + '</div>').replace('{0}', parent.selectedItems.length.toString());\n        options.header = getLocaleText(parent, 'Header-Multiple-Delete');\n      } else {\n        options.content = '<div>' + getLocaleText(parent, parent.isFile ? 'Content-Delete' : 'Content-Folder-Delete') + '</div>';\n        options.header = getLocaleText(parent, parent.isFile ? 'Header-Delete' : 'Header-Folder-Delete');\n      }\n\n      options.buttons = [{\n        buttonModel: {\n          isPrimary: true,\n          content: getLocaleText(parent, 'Button-Yes')\n        },\n        click: function (e) {\n          onDeleteSubmit(parent);\n        }\n      }, {\n        buttonModel: {\n          content: getLocaleText(parent, 'Button-No')\n        },\n        click: function () {\n          parent.dialogObj.hide();\n        }\n      }];\n      break;\n\n    case 'Rename':\n      options.dialogName = 'Rename';\n      options.header = getLocaleText(parent, 'Header-Rename');\n      options.content = '<input type=\"text\" class=\"e-input\" id=\"rename\"><div class=\"e-fe-error\"></div>';\n      options.buttons = [{\n        buttonModel: {\n          isPrimary: true,\n          content: getLocaleText(parent, 'Button-Save')\n        },\n        click: function (e) {\n          if (e.type === 'keydown') {\n            return;\n          }\n\n          onReSubmit(parent);\n        }\n      }];\n      options.open = onRenameDialogOpen.bind(this, parent);\n      break;\n\n    case 'details':\n      options.dialogName = 'File Details';\n      intl = new Internationalization(parent.locale);\n      formattedString = intl.formatDate(new Date(details.modified), {\n        format: 'MMMM dd, yyyy HH:mm:ss'\n      });\n      permission = '';\n\n      if (!isNOU(details.permission)) {\n        permission = '<tr><td>' + getLocaleText(parent, 'Permission') + '</td><td class=\"' + CLS.VALUE + '\" >' + objectToString(details.permission) + '</td></tr>';\n      }\n\n      options.header = details.name;\n      options.content = '<table>' + '<tr><td>' + getLocaleText(parent, 'Type') + '</td><td class=\"' + CLS.VALUE + '\" title=\"' + (details.isFile ? 'File' : 'Folder') + '\">' + (details.isFile ? 'File' : 'Folder') + '</td></tr>' + '<tr><td>' + getLocaleText(parent, 'Size') + '</td><td><span class=\"' + CLS.VALUE + '\" title =\"' + details.size + '\">' + details.size + '</span></td></tr>' + '<tr><td>' + getLocaleText(parent, 'Location') + '</td><td class=\"' + CLS.VALUE + '\" title=\"' + details.location + '\">' + details.location + '</td></tr>' + '<tr><td>' + getLocaleText(parent, 'Modified') + '</td><td class=\"' + CLS.VALUE + '\" >' + formattedString + '</td></tr>' + permission + '</table>';\n      options.buttons = [{\n        buttonModel: {\n          isPrimary: true,\n          content: getLocaleText(parent, 'Button-Ok')\n        },\n        click: function (e) {\n          parent.dialogObj.hide();\n        }\n      }];\n      break;\n\n    case 'MultipleFileDetails':\n      options.dialogName = 'File Details';\n      strArr = details.name.split(',').map(function (val) {\n        var index = val.indexOf('.') + 1;\n        return index === 0 ? 'Folder' : val.substr(index).replace(' ', '');\n      });\n      fileType = strArr.every(function (val, i, arr) {\n        return val === arr[0];\n      }) ? strArr[0] === 'Folder' ? 'Folder' : strArr[0].toLocaleUpperCase() + ' Type' : 'Multiple Types';\n      location = details.location;\n      options.header = details.name;\n      options.content = '<table><tr><td>' + getLocaleText(parent, 'Type') + ':</td><td class=\"' + CLS.VALUE + '\">' + fileType + '</td></tr>' + '<tr><td>' + getLocaleText(parent, 'Size') + ':</td><td>' + details.size + '<span class=\"' + CLS.VALUE + '\" title =\"' + details.size + '\"></span></td></tr>' + '<tr><td>' + getLocaleText(parent, 'Location') + ':</td><td class=\"' + CLS.VALUE + '\" title=\"' + location + '\">' + location + '</td></tr>' + '</table>';\n      options.buttons = [{\n        buttonModel: {\n          isPrimary: true,\n          content: getLocaleText(parent, 'Button-Ok')\n        },\n        click: function (e) {\n          if (e.type === 'keydown') {\n            return;\n          }\n\n          parent.dialogObj.hide();\n        }\n      }];\n      break;\n\n    case 'Error':\n      parent.notify(events.actionFailure, {});\n      options.dialogName = 'Error';\n\n      if (e.error.code === '401') {\n        options.header = '<span class=\"e-fe-icon e-fe-access-error\"></span><div class=\"e-fe-access-header\">' + getLocaleText(parent, 'Access-Denied') + '</div>';\n      } else {\n        options.header = getLocaleText(parent, 'Error');\n      }\n\n      options.content = '<div class=\"' + CLS.ERROR_CONTENT + '\">' + e.error.message + '</div>';\n      options.buttons = [{\n        buttonModel: {\n          isPrimary: true,\n          content: getLocaleText(parent, 'Button-Ok')\n        },\n        click: function (e) {\n          parent.dialogObj.hide();\n        }\n      }];\n      break;\n  }\n\n  return options;\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} dialogName - specifies the dialog name.\n * @param {BeforeOpenEventArgs} args - specifies the before open event arguements.\n * @returns {void}\n * @private\n */\n\n\nfunction keydownAction(parent, dialogName, args) {\n  var btnElement = selectAll('.e-btn', parent.dialogObj.element);\n  preventKeydown(btnElement);\n  triggerPopupBeforeOpen(parent, parent.dialogObj, args, dialogName);\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} dlgName - specifies the dialog name.\n * @param {BeforeOpenEventArgs} args - specifies the before open event arguements.\n * @returns {void}\n * @private\n */\n\n\nfunction beforeExtOpen(parent, dlgName, args) {\n  var btnElement = selectAll('.e-btn', parent.extDialogObj.element);\n  preventKeydown(btnElement);\n  triggerPopupBeforeOpen(parent, parent.extDialogObj, args, dlgName);\n}\n/**\n *\n * @param {HTMLInputElement[]} btnElement - specifies the button element.\n * @returns {void}\n * @private\n */\n\n\nfunction preventKeydown(btnElement) {\n  var _loop_1 = function (btnCount) {\n    btnElement[btnCount].onkeydown = function (e) {\n      if (e.keyCode === 13) {\n        e.preventDefault();\n      }\n    };\n\n    btnElement[btnCount].onkeyup = function (e) {\n      if (e.keyCode === 13) {\n        btnElement[btnCount].click();\n      }\n    };\n  };\n\n  for (var btnCount = 0; btnCount < btnElement.length; btnCount++) {\n    _loop_1(btnCount);\n  }\n}\n/* istanbul ignore next */\n\n/**\n *\n * @param {SelectedEventArgs} data - specifies the data.\n * @returns {HTMLElement} - returns the HTML element.\n * @private\n */\n\n\nfunction getFilesName(data) {\n  var parent = createElement('div', {\n    id: 'uploadDialog'\n  });\n  var ulElement = createElement('ul');\n  var filesData = data.isModified ? data.modifiedFilesData : data.filesData;\n\n  for (var fileCount = 0; fileCount < filesData.length; fileCount++) {\n    var liElement = createElement('li', {\n      className: 'dialogFiles'\n    });\n    liElement.innerHTML = filesData[fileCount].name;\n    ulElement.appendChild(liElement);\n  }\n\n  parent.appendChild(ulElement);\n  var errorTag = createElement('div', {\n    className: 'e-fe-error'\n  });\n  parent.appendChild(errorTag);\n  return parent;\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {DialogOptions} options - specifies the dialog options.\n * @returns {void}\n * @private\n */\n\n\nfunction changeOptions(parent, options) {\n  parent.dialogObj.header = options.header;\n  parent.dialogObj.content = options.content;\n  parent.dialogObj.buttons = options.buttons;\n  parent.dialogObj.enableRtl = parent.enableRtl;\n  parent.dialogObj.open = options.open;\n  parent.dialogObj.close = options.close;\n  parent.dialogObj.beforeOpen = keydownAction.bind(this, parent, options.dialogName);\n\n  parent.dialogObj.beforeClose = function (args) {\n    triggerPopupBeforeClose(parent, parent.dialogObj, args, options.dialogName);\n  };\n\n  parent.dialogObj.dataBind();\n  parent.dialogObj.show();\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @returns {void}\n * @private\n */\n\n\nfunction onSubmit(parent) {\n  var ele = select('#newname', parent.dialogObj.element);\n  onSubmitValidate(parent, ele);\n\n  if (ele.parentElement.nextElementSibling.innerHTML !== '') {\n    return;\n  }\n\n  createFolder(parent, ele.value);\n}\n/* istanbul ignore next */\n\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @returns {void}\n * @private\n */\n\n\nfunction onReSubmit(parent) {\n  var ele = select('#rename', parent.dialogObj.element);\n  onSubmitValidate(parent, ele);\n\n  if (ele.parentElement.nextElementSibling.innerHTML !== '') {\n    return;\n  }\n\n  var text = ele.value;\n  var oIndex = parent.currentItemText.lastIndexOf('.');\n\n  if (parent.isFile && !parent.showFileExtension) {\n    var extn = oIndex === -1 ? '' : parent.currentItemText.substr(oIndex);\n    text += extn;\n  }\n\n  parent.renameText = text;\n\n  if (parent.currentItemText === text) {\n    parent.dialogObj.hide();\n    return;\n  }\n\n  var newPath = parent.activeModule === 'navigationpane' ? getParentPath(parent.path) : parent.path;\n  parent.renamedId = getValue('id', parent.itemData[0]);\n\n  if (parent.isFile) {\n    var oldExtension = oIndex === -1 ? '' : parent.currentItemText.substr(oIndex);\n    var nIndex = text.lastIndexOf('.');\n    var newExtension = nIndex === -1 ? '' : text.substr(nIndex);\n\n    if (parent.showFileExtension && oldExtension !== newExtension) {\n      createExtDialog(parent, 'Extension', null, newPath);\n    } else {\n      rename(parent, newPath, text);\n    }\n  } else {\n    rename(parent, newPath, text);\n  }\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @returns {void}\n * @private\n */\n\n\nfunction onDeleteSubmit(parent) {\n  parent.dialogObj.hide();\n  parent.notify(events.deleteInit, {});\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {HTMLInputElement} ele - specifies the input element.\n * @returns {void}\n * @private\n */\n\n\nfunction onValidate(parent, ele) {\n  if (/[/\\\\|*?\"<>:]/.test(ele.value)) {\n    addInvalid(parent, ele);\n  } else if (ele.value === '') {\n    ele.parentElement.nextElementSibling.innerHTML = getLocaleText(parent, 'Validation-Empty');\n  } else {\n    ele.parentElement.nextElementSibling.innerHTML = '';\n  }\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {HTMLInputElement} ele - specifies the input element.\n * @returns {void}\n * @private\n */\n\n\nfunction onSubmitValidate(parent, ele) {\n  onValidate(parent, ele);\n  var len = ele.value.length - 1;\n\n  if (ele.value !== '' && (ele.value.lastIndexOf('.') === len || ele.value.lastIndexOf(' ') === len) && (parent.showFileExtension || parent.currentItemText.lastIndexOf('.') === -1)) {\n    addInvalid(parent, ele);\n  }\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {HTMLInputElement} ele - specifies the input element.\n * @returns {void}\n * @private\n */\n\n\nfunction addInvalid(parent, ele) {\n  var error = getLocaleText(parent, 'Validation-Invalid').replace('{0}', '\"' + ele.value + '\"');\n\n  if (parent.enableHtmlSanitizer) {\n    ele.parentElement.nextElementSibling.textContent = error;\n  } else {\n    ele.parentElement.nextElementSibling.innerHTML = error;\n  }\n}\n/**\n *\n * @param {KeyboardEvent} e - specifies the keyboard event.\n * @returns {number} - returns the key code.\n * @private\n */\n\n\nfunction getKeyCode(e) {\n  var code;\n\n  if (e.keyCode) {\n    code = e.keyCode;\n  } else if (e.which) {\n    code = e.which;\n  } else {\n    code = e.charCode;\n  }\n\n  return code;\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} header - specifies the header element.\n * @param {string} imageUrl - specifies the image URL.\n * @returns {void}\n * @private\n */\n\n\nexport function createImageDialog(parent, header, imageUrl) {\n  var content = createElement('div', {\n    className: 'e-image-wrap'\n  });\n  var image = createElement('img', {\n    className: 'e-image',\n    attrs: {\n      src: imageUrl,\n      alt: header\n    }\n  });\n  content.appendChild(image);\n\n  if (isNOU(parent.viewerObj)) {\n    parent.viewerObj = new Dialog({\n      header: header,\n      content: content,\n      animationSettings: {\n        effect: 'None'\n      },\n      showCloseIcon: true,\n      closeOnEscape: true,\n      visible: true,\n      isModal: true,\n      width: '350px',\n      height: '350px',\n      target: parent.popupTarget ? parent.popupTarget : '#' + parent.element.id,\n      cssClass: getCssClass(parent, parent.isMobile ? CLS.MOB_POPUP : CLS.ROOT_POPUP),\n      locale: parent.locale,\n      enableResize: true,\n      allowDragging: true,\n      enableHtmlSanitizer: parent.enableHtmlSanitizer,\n      position: {\n        X: 'center',\n        Y: 'center'\n      },\n      enableRtl: parent.enableRtl,\n      open: openImage.bind(this, parent),\n      close: function () {\n        triggerPopupClose(parent, parent.viewerObj, 'Image Preview');\n      },\n      beforeOpen: function (args) {\n        triggerPopupBeforeOpen(parent, parent.viewerObj, args, 'Image Preview');\n      },\n      beforeClose: function (args) {\n        triggerPopupBeforeClose(parent, parent.viewerObj, args, 'Image Preview');\n      },\n      resizing: updateImage.bind(this, parent),\n      resizeStop: updateImage.bind(this, parent)\n    });\n    parent.viewerObj.isStringTemplate = true;\n    parent.viewerObj.appendTo('#' + parent.element.id + CLS.IMG_DIALOG_ID);\n  } else {\n    parent.viewerObj.refresh();\n    parent.viewerObj.header = header;\n    parent.viewerObj.content = content;\n    parent.viewerObj.enableRtl = parent.enableRtl;\n    parent.viewerObj.dataBind();\n    parent.viewerObj.show();\n  }\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @returns {void}\n * @private\n */\n\nfunction openImage(parent) {\n  setTimeout(function () {\n    if (parent.viewerObj) {\n      parent.viewerObj.element.focus();\n    }\n  });\n  updateImage(parent);\n  triggerPopupOpen(parent, parent.viewerObj, 'Image Preview');\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @returns {void}\n * @private\n */\n\n\nfunction updateImage(parent) {\n  var content = select('.e-dlg-content', parent.viewerObj.element);\n  var imgWrap = select('.e-image-wrap', parent.viewerObj.element);\n  var cssObj = window.getComputedStyle(content, null);\n  var paddingWidth = cssObj ? 2 * parseFloat(cssObj.paddingRight) : 36;\n  var paddingHeight = cssObj ? 2 * parseFloat(cssObj.paddingBottom) : 20;\n  imgWrap.style.width = content.offsetWidth - paddingWidth + 'px';\n  imgWrap.style.height = content.offsetHeight - paddingHeight + 'px';\n}","map":{"version":3,"sources":["/Users/yasaman/Documents/moj_adminpanel/adminpanel/node_modules/@syncfusion/ej2-filemanager/src/file-manager/pop-up/dialog.js"],"names":["Dialog","select","isNullOrUndefined","isNOU","createElement","Internationalization","getValue","remove","selectAll","createFolder","CLS","events","paste","rename","getLocaleText","getDuplicateData","getParentPath","objectToString","getCssClass","Input","CheckBox","createDialog","parent","text","e","details","replaceItems","options","getOptions","dialogObj","beforeOpen","keydownAction","bind","dialogName","beforeClose","args","triggerPopupBeforeClose","header","content","buttons","animationSettings","effect","showCloseIcon","closeOnEscape","visible","allowDragging","isModal","target","popupTarget","element","id","cssClass","isMobile","MOB_POPUP","ROOT_POPUP","width","open","close","enableRtl","enableHtmlSanitizer","locale","isStringTemplate","appendTo","DIALOG_ID","changeOptions","createExtDialog","newPath","extOptions","getExtOptions","isApplySame","extDialogObj","beforeExtOpen","EXTN_DIALOG_ID","dataBind","show","triggerPopupBeforeOpen","dlgModule","eventArgs","cancel","popupName","popupModule","trigger","eventargs","isInteracted","actionFailure","triggerPopupOpen","triggerPopupClose","duplicateContent","item","index","buttonModel","isPrimary","click","hide","renameText","fileLength","lastIndexOf","substring","replace","isDropEnd","duplicateItems","length","fileDetails","droppedObjects","isDragDrop","push","duplicateRecords","item_1","indexval","targetPath","dragPath","path","dropPath","folderPath","action","fileAction","item_2","ind","retryFiles","name","onRetryOpen","isRetryOpened","retryDlgClose","retryDlgUpdate","count","splice","notify","skipUpload","isKeepBoth","onKeepBothAll","onReplaceAll","retryArgs","file","uploadObj","retry","flag","ele","dialogEle","container","checkContainer","className","checkbox","appendChild","checkBoxObj","label","change","checked","focusInput","focus","value","len","setSelectionRange","onFolderDialogOpen","parentElement","classList","contains","createInput","nextElementSibling","innerHTML","oninput","onValidate","onkeyup","code","getKeyCode","onSubmit","onRenameDialogOpen","inputEle","onReSubmit","onFocusRenameInput","txt","isFile","showFileExtension","currentItemText","indexOf","placeholder","properties","permission","formattedString","intl","strArr","fileType","location","multipleFiles","type","selectedItems","toString","onDeleteSubmit","formatDate","Date","modified","format","VALUE","size","split","map","val","substr","every","i","arr","toLocaleUpperCase","error","ERROR_CONTENT","message","btnElement","preventKeydown","dlgName","_loop_1","btnCount","onkeydown","keyCode","preventDefault","getFilesName","data","ulElement","filesData","isModified","modifiedFilesData","fileCount","liElement","errorTag","onSubmitValidate","oIndex","extn","activeModule","renamedId","itemData","oldExtension","nIndex","newExtension","deleteInit","test","addInvalid","textContent","which","charCode","createImageDialog","imageUrl","image","attrs","src","alt","viewerObj","height","enableResize","position","X","Y","openImage","resizing","updateImage","resizeStop","IMG_DIALOG_ID","refresh","setTimeout","imgWrap","cssObj","window","getComputedStyle","paddingWidth","parseFloat","paddingRight","paddingHeight","paddingBottom","style","offsetWidth","offsetHeight"],"mappings":"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","sourcesContent":["import { Dialog } from '@syncfusion/ej2-popups';\nimport { select, isNullOrUndefined as isNOU, createElement, Internationalization } from '@syncfusion/ej2-base';\nimport { getValue, remove, selectAll } from '@syncfusion/ej2-base';\nimport { createFolder } from '../common/operations';\nimport * as CLS from '../base/classes';\nimport * as events from '../base/constant';\nimport { paste, rename } from '../common/operations';\nimport { getLocaleText, getDuplicateData, getParentPath, objectToString, getCssClass } from '../common/utility';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { CheckBox } from '@syncfusion/ej2-buttons';\n// eslint:disable-next-line\n/**\n *\n * @param {IFileManager} parent - Specifies the parent element\n * @param {string} text - specifies the text string.\n * @param {ReadArgs | SelectedEventArgs} e - specifies the type of event args.\n * @param {FileDetails} details - specifies the file details.\n * @param {string[]} replaceItems - specifies the replacement.\n * @returns {void}\n * @private\n */\nexport function createDialog(parent, text, e, details, replaceItems) {\n    var options = getOptions(parent, text, e, details, replaceItems);\n    if (isNOU(parent.dialogObj)) {\n        parent.dialogObj = new Dialog({\n            beforeOpen: keydownAction.bind(this, parent, options.dialogName),\n            beforeClose: function (args) {\n                triggerPopupBeforeClose(parent, parent.dialogObj, args, options.dialogName);\n            },\n            header: options.header,\n            content: options.content,\n            buttons: options.buttons,\n            animationSettings: { effect: 'None' },\n            showCloseIcon: true,\n            closeOnEscape: true,\n            visible: true,\n            allowDragging: true,\n            isModal: true,\n            target: parent.popupTarget ? parent.popupTarget : '#' + parent.element.id,\n            cssClass: getCssClass(parent, parent.isMobile ? CLS.MOB_POPUP : CLS.ROOT_POPUP),\n            width: '350px',\n            open: options.open,\n            close: options.close,\n            enableRtl: parent.enableRtl,\n            enableHtmlSanitizer: parent.enableHtmlSanitizer,\n            locale: parent.locale\n        });\n        parent.dialogObj.isStringTemplate = true;\n        parent.dialogObj.appendTo('#' + parent.element.id + CLS.DIALOG_ID);\n    }\n    else {\n        changeOptions(parent, options);\n    }\n}\n/**\n *\n * @param {IFileManager} parent - Specifies the parent element.\n * @param {string} text - specifies the text string.\n * @param {string[]} replaceItems - specifies the replacement items.\n * @param {string} newPath - specifies the new path.\n * @returns {void}\n * @private\n */\nexport function createExtDialog(parent, text, replaceItems, newPath) {\n    var extOptions = getExtOptions(parent, text, replaceItems, newPath);\n    parent.isApplySame = false;\n    if (isNOU(parent.extDialogObj)) {\n        parent.extDialogObj = new Dialog({\n            beforeOpen: beforeExtOpen.bind(this, parent, extOptions.dialogName),\n            beforeClose: function (args) {\n                triggerPopupBeforeClose(parent, parent.extDialogObj, args, extOptions.dialogName);\n            },\n            content: extOptions.content,\n            header: extOptions.header,\n            closeOnEscape: true,\n            allowDragging: true,\n            animationSettings: { effect: 'None' },\n            target: parent.popupTarget ? parent.popupTarget : '#' + parent.element.id,\n            cssClass: getCssClass(parent, parent.isMobile ? CLS.MOB_POPUP : CLS.ROOT_POPUP),\n            enableRtl: parent.enableRtl,\n            showCloseIcon: true,\n            isModal: true,\n            width: 350,\n            buttons: extOptions.buttons,\n            open: extOptions.open,\n            close: extOptions.close,\n            enableHtmlSanitizer: parent.enableHtmlSanitizer,\n            locale: parent.locale\n        });\n        parent.extDialogObj.isStringTemplate = true;\n        parent.extDialogObj.appendTo('#' + parent.element.id + CLS.EXTN_DIALOG_ID);\n    }\n    else {\n        parent.extDialogObj.header = extOptions.header;\n        parent.extDialogObj.close = extOptions.close;\n        parent.extDialogObj.open = extOptions.open;\n        parent.extDialogObj.close = extOptions.close;\n        parent.extDialogObj.content = extOptions.content;\n        parent.extDialogObj.buttons = extOptions.buttons;\n        parent.extDialogObj.enableRtl = parent.enableRtl;\n        parent.extDialogObj.locale = parent.locale;\n        parent.extDialogObj.beforeOpen = beforeExtOpen.bind(this, parent, extOptions.dialogName);\n        parent.extDialogObj.beforeClose = function (args) {\n            triggerPopupBeforeClose(parent, parent.extDialogObj, args, extOptions.dialogName);\n        };\n        parent.extDialogObj.dataBind();\n        parent.extDialogObj.show();\n    }\n}\n/**\n *\n * @param {IFileManager} parent - Specifies the parent element.\n * @param {Dialog} dlgModule - Specifies the dialog module.\n * @param {BeforeOpenEventArgs} args - specifies the before open arguements.\n * @param {string} dialogName - specifies the dialog name.\n * @returns {void}\n * @private\n */\nfunction triggerPopupBeforeOpen(parent, dlgModule, args, dialogName) {\n    var eventArgs = {\n        cancel: args.cancel, popupName: dialogName, popupModule: dlgModule\n    };\n    parent.trigger('beforePopupOpen', eventArgs, function (eventargs) {\n        args.cancel = eventargs.cancel;\n    });\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {Dialog} dlgModule - specifies the dialog module.\n * @param {BeforeCloseEventArgs} args - specifies the before close event arguements.\n * @param {string} dialogName - specifies the dialog name.\n * @returns {void}\n * @private\n */\nfunction triggerPopupBeforeClose(parent, dlgModule, args, dialogName) {\n    var eventArgs = {\n        cancel: args.cancel, popupModule: dlgModule, popupName: dialogName\n    };\n    parent.trigger('beforePopupClose', eventArgs, function (eventargs) {\n        args.cancel = eventargs.cancel;\n        if (!args.cancel && args.isInteracted && ((dialogName === 'Rename') || (dialogName === 'Create Folder'))) {\n            parent.trigger(events.actionFailure, {});\n        }\n    });\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {Dialog} dlgModule - specifies the dialog module.\n * @param {string} dialogName - specifies the dialog name.\n * @returns {void}\n * @private\n */\nfunction triggerPopupOpen(parent, dlgModule, dialogName) {\n    var args = { popupModule: dlgModule, element: dlgModule.element, popupName: dialogName };\n    parent.trigger('popupOpen', args);\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {Dialog} dlgModule - specifies the dialog module.\n * @param {string} dialogName - specifies the dialog name.\n * @returns {void}\n * @private\n */\nfunction triggerPopupClose(parent, dlgModule, dialogName) {\n    var args = { popupModule: dlgModule, element: dlgModule.element, popupName: dialogName };\n    parent.trigger('popupClose', args);\n}\n// eslint:disable-next-line\n/**\n *\n * @param {IFileManager} parent - Specifies the parent element.\n * @param {string} text - specifies the text string.\n * @param {string[]} replaceItems - specifies the replacement items.\n * @param {string} newPath - specifies the new path.\n * @returns {DialogOptions} - returns the dialog options.\n * @private\n */\nfunction getExtOptions(parent, text, replaceItems, newPath) {\n    var options = {\n        header: '', content: '', buttons: [], dialogName: ''\n    };\n    var duplicateContent;\n    var item;\n    var index;\n    options.open = function () { triggerPopupOpen(parent, parent.extDialogObj, options.dialogName); };\n    options.close = function () { triggerPopupClose(parent, parent.extDialogObj, options.dialogName); };\n    switch (text) {\n        case 'Extension':\n            options.header = getLocaleText(parent, 'Header-Rename-Confirmation');\n            options.content = '<div>' + getLocaleText(parent, 'Content-Rename-Confirmation') + '</div>';\n            options.buttons = [{\n                    buttonModel: { isPrimary: true, content: getLocaleText(parent, 'Button-Yes') },\n                    click: function () {\n                        parent.extDialogObj.hide();\n                        rename(parent, newPath, parent.renameText);\n                    }\n                },\n                {\n                    buttonModel: { content: getLocaleText(parent, 'Button-No') },\n                    click: function () {\n                        parent.extDialogObj.hide();\n                        parent.dialogObj.hide();\n                    }\n                }];\n            options.dialogName = 'Extension Change';\n            break;\n        case 'DuplicateItems':\n            options.dialogName = 'Duplicate Items';\n            parent.replaceItems = replaceItems;\n            item = parent.replaceItems[parent.fileLength];\n            index = item.lastIndexOf('/');\n            item = index === -1 ? item : item.substring(index);\n            options.header = getLocaleText(parent, 'Header-Duplicate');\n            duplicateContent = '<div>' + getLocaleText(parent, 'Content-Duplicate') + '</div>';\n            options.content = (duplicateContent).replace('{0}', item);\n            options.close = function () {\n                if (!parent.isDropEnd && parent.duplicateItems.length === 0) {\n                    var args = { fileDetails: parent.droppedObjects };\n                    parent.trigger('fileDropped', args);\n                    parent.isDropEnd = parent.isDragDrop = false;\n                }\n                triggerPopupClose(parent, parent.extDialogObj, options.dialogName);\n            };\n            options.buttons = [\n                {\n                    buttonModel: { isPrimary: true, content: getLocaleText(parent, 'Button-Yes') },\n                    click: function () {\n                        parent.duplicateItems.push(parent.replaceItems[parent.fileLength]);\n                        parent.duplicateRecords.push(getDuplicateData(parent, parent.replaceItems[parent.fileLength]));\n                        parent.fileLength++;\n                        if (replaceItems[parent.fileLength]) {\n                            var item_1 = parent.replaceItems[parent.fileLength];\n                            var indexval = item_1.lastIndexOf('/');\n                            item_1 = indexval === -1 ? item_1 : item_1.substring(indexval);\n                            parent.extDialogObj.content = (duplicateContent).replace('{0}', item_1);\n                            parent.extDialogObj.show();\n                        }\n                        else {\n                            parent.extDialogObj.hide();\n                            var targetPath = parent.isDragDrop ? parent.dragPath : parent.targetPath;\n                            var path = parent.isDragDrop ? parent.dropPath : ((parent.folderPath === '') ? parent.path :\n                                parent.folderPath);\n                            var action = parent.isDragDrop ? 'move' : parent.fileAction;\n                            paste(parent, targetPath, parent.duplicateItems, path, action, parent.duplicateItems, parent.duplicateRecords);\n                        }\n                    }\n                },\n                {\n                    buttonModel: { content: getLocaleText(parent, 'Button-No') },\n                    click: function () {\n                        parent.fileLength++;\n                        if (replaceItems[parent.fileLength]) {\n                            var item_2 = parent.replaceItems[parent.fileLength];\n                            var ind = item_2.lastIndexOf('/');\n                            item_2 = ind === -1 ? item_2 : item_2.substring(ind);\n                            parent.extDialogObj.content = (duplicateContent).replace('{0}', item_2);\n                            parent.extDialogObj.show();\n                        }\n                        else {\n                            parent.extDialogObj.hide();\n                            if (parent.duplicateItems.length !== 0) {\n                                var action = parent.isDragDrop ? 'move' : parent.fileAction;\n                                var targetPath = parent.isDragDrop ? parent.dragPath : parent.targetPath;\n                                var path = parent.isDragDrop ? parent.dropPath : ((parent.folderPath === '') ? parent.path :\n                                    parent.folderPath);\n                                paste(parent, targetPath, parent.duplicateItems, path, action, parent.duplicateItems, parent.duplicateRecords);\n                            }\n                        }\n                    }\n                }\n            ];\n            break;\n        case 'UploadRetry':\n            options.dialogName = 'Retry Upload';\n            options.header = getLocaleText(parent, 'Header-Retry');\n            options.content = parent.retryFiles[0].name + '<div class=\"e-fe-retrycontent\">' +\n                (getLocaleText(parent, 'Content-Retry')) + '</div>';\n            options.open = onRetryOpen.bind(this, parent);\n            options.close = function () {\n                parent.isRetryOpened = false;\n                retryDlgClose(parent);\n                triggerPopupClose(parent, parent.extDialogObj, options.dialogName);\n            };\n            options.buttons = [\n                {\n                    buttonModel: { isPrimary: true, content: getLocaleText(parent, 'Button-Keep-Both') },\n                    click: function () {\n                        retryDlgUpdate(parent, true);\n                    }\n                },\n                {\n                    buttonModel: { isPrimary: true, content: getLocaleText(parent, 'Button-Replace') },\n                    click: function () {\n                        retryDlgUpdate(parent, false);\n                    }\n                },\n                {\n                    buttonModel: { isPrimary: true, content: getLocaleText(parent, 'Button-Skip') },\n                    click: function () {\n                        var count = 0;\n                        if (parent.isApplySame) {\n                            count = parent.retryFiles.length;\n                            parent.retryFiles = [];\n                            retryDlgClose(parent);\n                        }\n                        else {\n                            count = 1;\n                            parent.retryFiles.splice(0, 1);\n                            if (parent.retryFiles.length !== 0) {\n                                createExtDialog(parent, 'UploadRetry');\n                            }\n                            else {\n                                retryDlgClose(parent);\n                            }\n                        }\n                        parent.notify(events.skipUpload, { count: count });\n                    }\n                }\n            ];\n            break;\n    }\n    return options;\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {boolean} isKeepBoth - checks the arguement to keep both.\n * @returns {void}\n * @private\n */\nfunction retryDlgUpdate(parent, isKeepBoth) {\n    if (parent.isApplySame) {\n        if (isKeepBoth) {\n            onKeepBothAll(parent);\n        }\n        else {\n            onReplaceAll(parent);\n        }\n        retryDlgClose(parent);\n    }\n    else {\n        parent.retryArgs.push({\n            action: isKeepBoth ? 'keepboth' : 'replace',\n            file: parent.retryFiles[0]\n        });\n        parent.uploadObj.retry(parent.retryFiles[0]);\n        parent.retryFiles.splice(0, 1);\n        if (parent.retryFiles.length !== 0) {\n            createExtDialog(parent, 'UploadRetry');\n        }\n        else {\n            retryDlgClose(parent);\n        }\n    }\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @returns {void}\n * @private\n */\nfunction retryDlgClose(parent) {\n    var flag = true;\n    if (parent.isRetryOpened) {\n        parent.isRetryOpened = false;\n    }\n    else {\n        flag = false;\n    }\n    var ele = select('.e-dlg-checkbox', parent.extDialogObj.element);\n    if (ele) {\n        remove(ele);\n    }\n    if (flag) {\n        parent.extDialogObj.hide();\n    }\n    else {\n        parent.retryFiles = [];\n    }\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {object} args - specifies the arguements.\n * @returns {void}\n * @private\n */\n// eslint-disable-next-line\nfunction onRetryOpen(parent, args) {\n    parent.isRetryOpened = true;\n    var dialogEle = getValue('element', args);\n    var container = select('.e-dlg-content', dialogEle);\n    var checkContainer = parent.createElement('div', {\n        className: 'e-dlg-checkbox'\n    });\n    var checkbox = parent.createElement('input', {\n        id: parent.element.id + '_applyall'\n    });\n    checkContainer.appendChild(checkbox);\n    container.appendChild(checkContainer);\n    var checkBoxObj = new CheckBox({\n        label: getLocaleText(parent, 'ApplyAll-Label'),\n        change: function (args) {\n            parent.isApplySame = args.checked;\n        }\n    });\n    checkBoxObj.appendTo('#' + parent.element.id + '_applyall');\n    triggerPopupOpen(parent, parent.extDialogObj, 'Retry Upload');\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @returns {void}\n * @private\n */\nfunction onKeepBothAll(parent) {\n    while (parent.retryFiles.length !== 0) {\n        parent.retryArgs.push({ action: 'keepboth', file: parent.retryFiles[0] });\n        parent.uploadObj.retry(parent.retryFiles[0]);\n        parent.retryFiles.splice(0, 1);\n    }\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @returns {void}\n * @private\n */\nfunction onReplaceAll(parent) {\n    while (parent.retryFiles.length !== 0) {\n        parent.retryArgs.push({ action: 'replace', file: parent.retryFiles[0] });\n        parent.uploadObj.retry(parent.retryFiles[0]);\n        parent.retryFiles.splice(0, 1);\n    }\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @returns {void}\n * @private\n */\nfunction focusInput(parent) {\n    var ele = select('#newname', parent.dialogObj.element);\n    ele.focus();\n    ele.value = '';\n    var len = ele.value.length;\n    ele.setSelectionRange(0, len);\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @returns {void}\n * @private\n */\nfunction onFolderDialogOpen(parent) {\n    var ele = select('#newname', parent.dialogObj.element);\n    if (!ele.parentElement.classList.contains('e-control-wrapper')) {\n        createInput(ele, getLocaleText(parent, 'Content-NewFolder'));\n    }\n    ele.parentElement.nextElementSibling.innerHTML = '';\n    ele.oninput = function () {\n        onValidate(parent, ele);\n    };\n    ele.onkeyup = function (e) {\n        var code = getKeyCode(e);\n        if (code === 13) {\n            onSubmit(parent);\n        }\n    };\n    focusInput(parent);\n    triggerPopupOpen(parent, parent.dialogObj, 'Create Folder');\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @returns {void}\n * @private\n */\nfunction onRenameDialogOpen(parent) {\n    var inputEle = select('#rename', parent.dialogObj.element);\n    if (!inputEle.parentElement.classList.contains('e-control-wrapper')) {\n        createInput(inputEle, getLocaleText(parent, 'Content-Rename'));\n    }\n    inputEle.parentElement.nextElementSibling.innerHTML = '';\n    inputEle.oninput = function () {\n        onValidate(parent, inputEle);\n    };\n    inputEle.onkeyup = function (e) {\n        var code = getKeyCode(e);\n        if (code === 13) {\n            onReSubmit(parent);\n        }\n    };\n    onFocusRenameInput(parent, inputEle);\n    triggerPopupOpen(parent, parent.dialogObj, 'Rename');\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {HTMLInputElement} inputEle - specifies the input element.\n * @returns {void}\n * @private\n */\nfunction onFocusRenameInput(parent, inputEle) {\n    inputEle.focus();\n    var txt = '';\n    if (parent.isFile && !parent.showFileExtension) {\n        var index = parent.currentItemText.lastIndexOf('.');\n        txt = (index === -1) ? parent.currentItemText : parent.currentItemText.substring(0, index);\n    }\n    else {\n        txt = parent.currentItemText;\n    }\n    inputEle.value = txt;\n    if (parent.isFile && parent.showFileExtension && (inputEle.value.indexOf('.') !== -1)) {\n        inputEle.setSelectionRange(0, inputEle.value.lastIndexOf('.'));\n    }\n    else {\n        inputEle.setSelectionRange(0, inputEle.value.length);\n    }\n}\n/**\n *\n * @param {HTMLInputElement} ele - specifies the element.\n * @param {string} placeholder - specifies the place holder.\n * @returns {void}\n * @private\n */\nfunction createInput(ele, placeholder) {\n    Input.createInput({\n        element: ele,\n        properties: {\n            placeholder: placeholder\n        }\n    });\n}\n/* istanbul ignore next */\n// eslint:disable-next-line\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} text - specifies the text string.\n * @param {ReadArgs | SelectedEventArgs} e - specifies the event arguements.\n * @param {FileDetails} details - specifies the file details.\n * @param {string[]} replaceItems - specifies the replacement items.\n * @returns {DialogOptions} - specifies the dialog options.\n * @private\n */\nfunction getOptions(parent, text, e, details, replaceItems) {\n    var options = {\n        header: '', content: '', buttons: [], dialogName: ''\n    };\n    var permission;\n    var formattedString;\n    var intl;\n    var strArr;\n    var fileType;\n    var location;\n    options.open = function () { triggerPopupOpen(parent, parent.dialogObj, options.dialogName); };\n    options.close = function () { triggerPopupClose(parent, parent.dialogObj, options.dialogName); };\n    text = (details && details.multipleFiles === true) ? 'MultipleFileDetails' : text;\n    switch (text) {\n        case 'NewFolder':\n            options.dialogName = 'Create Folder';\n            options.header = getLocaleText(parent, 'Header-NewFolder');\n            options.content = '<input type=\"text\" value=\"New folder\" id=\"newname\"><div class=\"e-fe-error\"></div>';\n            options.buttons = [\n                {\n                    buttonModel: { isPrimary: true, content: getLocaleText(parent, 'Button-Create') },\n                    click: function (e) {\n                        if (e.type === 'keydown') {\n                            return;\n                        }\n                        onSubmit(parent);\n                    }\n                }\n            ];\n            options.open = onFolderDialogOpen.bind(this, parent);\n            break;\n        case 'Delete':\n            options.dialogName = 'Delete';\n            if (parent.selectedItems.length > 1) {\n                options.content = ('<div>' + getLocaleText(parent, 'Content-Multiple-Delete') + '</div>')\n                    .replace('{0}', parent.selectedItems.length.toString());\n                options.header = getLocaleText(parent, 'Header-Multiple-Delete');\n            }\n            else {\n                options.content = '<div>' + getLocaleText(parent, parent.isFile ? 'Content-Delete' : 'Content-Folder-Delete') + '</div>';\n                options.header = getLocaleText(parent, parent.isFile ? 'Header-Delete' : 'Header-Folder-Delete');\n            }\n            options.buttons = [\n                {\n                    buttonModel: { isPrimary: true, content: getLocaleText(parent, 'Button-Yes') },\n                    click: function (e) {\n                        onDeleteSubmit(parent);\n                    }\n                },\n                {\n                    buttonModel: { content: getLocaleText(parent, 'Button-No') },\n                    click: function () {\n                        parent.dialogObj.hide();\n                    }\n                }\n            ];\n            break;\n        case 'Rename':\n            options.dialogName = 'Rename';\n            options.header = getLocaleText(parent, 'Header-Rename');\n            options.content = '<input type=\"text\" class=\"e-input\" id=\"rename\"><div class=\"e-fe-error\"></div>';\n            options.buttons = [\n                {\n                    buttonModel: { isPrimary: true, content: getLocaleText(parent, 'Button-Save') },\n                    click: function (e) {\n                        if (e.type === 'keydown') {\n                            return;\n                        }\n                        onReSubmit(parent);\n                    }\n                }\n            ];\n            options.open = onRenameDialogOpen.bind(this, parent);\n            break;\n        case 'details':\n            options.dialogName = 'File Details';\n            intl = new Internationalization(parent.locale);\n            formattedString = intl.formatDate(new Date(details.modified), { format: 'MMMM dd, yyyy HH:mm:ss' });\n            permission = '';\n            if (!isNOU(details.permission)) {\n                permission = '<tr><td>' + getLocaleText(parent, 'Permission') + '</td><td class=\"' + CLS.VALUE + '\" >'\n                    + objectToString(details.permission) + '</td></tr>';\n            }\n            options.header = details.name;\n            options.content = '<table>' +\n                '<tr><td>' + getLocaleText(parent, 'Type') + '</td><td class=\"' + CLS.VALUE + '\" title=\"' +\n                (details.isFile ? 'File' : 'Folder') + '\">' + (details.isFile ? 'File' : 'Folder') + '</td></tr>' +\n                '<tr><td>' + getLocaleText(parent, 'Size') + '</td><td><span class=\"' + CLS.VALUE + '\" title =\"' +\n                details.size + '\">' + details.size + '</span></td></tr>' +\n                '<tr><td>' + getLocaleText(parent, 'Location') + '</td><td class=\"' + CLS.VALUE + '\" title=\"' +\n                details.location + '\">' + details.location + '</td></tr>' +\n                '<tr><td>' + getLocaleText(parent, 'Modified') + '</td><td class=\"' + CLS.VALUE + '\" >'\n                + formattedString + '</td></tr>'\n                + permission + '</table>';\n            options.buttons = [\n                {\n                    buttonModel: { isPrimary: true, content: getLocaleText(parent, 'Button-Ok') },\n                    click: function (e) {\n                        parent.dialogObj.hide();\n                    }\n                }\n            ];\n            break;\n        case 'MultipleFileDetails':\n            options.dialogName = 'File Details';\n            strArr = details.name.split(',').map(function (val) {\n                var index = val.indexOf('.') + 1;\n                return (index === 0) ? 'Folder' : val.substr(index).replace(' ', '');\n            });\n            fileType = strArr.every(function (val, i, arr) { return val === arr[0]; }) ?\n                ((strArr[0] === 'Folder') ? 'Folder' : strArr[0].toLocaleUpperCase() + ' Type') : 'Multiple Types';\n            location = details.location;\n            options.header = details.name;\n            options.content = '<table><tr><td>' + getLocaleText(parent, 'Type')\n                + ':</td><td class=\"' + CLS.VALUE + '\">' + fileType + '</td></tr>' +\n                '<tr><td>' + getLocaleText(parent, 'Size') + ':</td><td>' +\n                details.size + '<span class=\"' + CLS.VALUE + '\" title =\"' + details.size\n                + '\"></span></td></tr>' + '<tr><td>' + getLocaleText(parent, 'Location') +\n                ':</td><td class=\"' + CLS.VALUE + '\" title=\"' + location + '\">'\n                + location + '</td></tr>' + '</table>';\n            options.buttons = [\n                {\n                    buttonModel: { isPrimary: true, content: getLocaleText(parent, 'Button-Ok') },\n                    click: function (e) {\n                        if (e.type === 'keydown') {\n                            return;\n                        }\n                        parent.dialogObj.hide();\n                    }\n                }\n            ];\n            break;\n        case 'Error':\n            parent.notify(events.actionFailure, {});\n            options.dialogName = 'Error';\n            if (e.error.code === '401') {\n                options.header = '<span class=\"e-fe-icon e-fe-access-error\"></span><div class=\"e-fe-access-header\">' +\n                    getLocaleText(parent, 'Access-Denied') + '</div>';\n            }\n            else {\n                options.header = getLocaleText(parent, 'Error');\n            }\n            options.content = '<div class=\"' + CLS.ERROR_CONTENT + '\">' + e.error.message + '</div>';\n            options.buttons = [\n                {\n                    buttonModel: { isPrimary: true, content: getLocaleText(parent, 'Button-Ok') },\n                    click: function (e) {\n                        parent.dialogObj.hide();\n                    }\n                }\n            ];\n            break;\n    }\n    return options;\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} dialogName - specifies the dialog name.\n * @param {BeforeOpenEventArgs} args - specifies the before open event arguements.\n * @returns {void}\n * @private\n */\nfunction keydownAction(parent, dialogName, args) {\n    var btnElement = selectAll('.e-btn', parent.dialogObj.element);\n    preventKeydown(btnElement);\n    triggerPopupBeforeOpen(parent, parent.dialogObj, args, dialogName);\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} dlgName - specifies the dialog name.\n * @param {BeforeOpenEventArgs} args - specifies the before open event arguements.\n * @returns {void}\n * @private\n */\nfunction beforeExtOpen(parent, dlgName, args) {\n    var btnElement = selectAll('.e-btn', parent.extDialogObj.element);\n    preventKeydown(btnElement);\n    triggerPopupBeforeOpen(parent, parent.extDialogObj, args, dlgName);\n}\n/**\n *\n * @param {HTMLInputElement[]} btnElement - specifies the button element.\n * @returns {void}\n * @private\n */\nfunction preventKeydown(btnElement) {\n    var _loop_1 = function (btnCount) {\n        btnElement[btnCount].onkeydown = function (e) {\n            if (e.keyCode === 13) {\n                e.preventDefault();\n            }\n        };\n        btnElement[btnCount].onkeyup = function (e) {\n            if (e.keyCode === 13) {\n                btnElement[btnCount].click();\n            }\n        };\n    };\n    for (var btnCount = 0; btnCount < btnElement.length; btnCount++) {\n        _loop_1(btnCount);\n    }\n}\n/* istanbul ignore next */\n/**\n *\n * @param {SelectedEventArgs} data - specifies the data.\n * @returns {HTMLElement} - returns the HTML element.\n * @private\n */\nfunction getFilesName(data) {\n    var parent = createElement('div', { id: 'uploadDialog' });\n    var ulElement = createElement('ul');\n    var filesData = data.isModified ? data.modifiedFilesData : data.filesData;\n    for (var fileCount = 0; fileCount < filesData.length; fileCount++) {\n        var liElement = createElement('li', { className: 'dialogFiles' });\n        liElement.innerHTML = filesData[fileCount].name;\n        ulElement.appendChild(liElement);\n    }\n    parent.appendChild(ulElement);\n    var errorTag = createElement('div', { className: 'e-fe-error' });\n    parent.appendChild(errorTag);\n    return parent;\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {DialogOptions} options - specifies the dialog options.\n * @returns {void}\n * @private\n */\nfunction changeOptions(parent, options) {\n    parent.dialogObj.header = options.header;\n    parent.dialogObj.content = options.content;\n    parent.dialogObj.buttons = options.buttons;\n    parent.dialogObj.enableRtl = parent.enableRtl;\n    parent.dialogObj.open = options.open;\n    parent.dialogObj.close = options.close;\n    parent.dialogObj.beforeOpen = keydownAction.bind(this, parent, options.dialogName);\n    parent.dialogObj.beforeClose = function (args) {\n        triggerPopupBeforeClose(parent, parent.dialogObj, args, options.dialogName);\n    };\n    parent.dialogObj.dataBind();\n    parent.dialogObj.show();\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @returns {void}\n * @private\n */\nfunction onSubmit(parent) {\n    var ele = select('#newname', parent.dialogObj.element);\n    onSubmitValidate(parent, ele);\n    if (ele.parentElement.nextElementSibling.innerHTML !== '') {\n        return;\n    }\n    createFolder(parent, ele.value);\n}\n/* istanbul ignore next */\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @returns {void}\n * @private\n */\nfunction onReSubmit(parent) {\n    var ele = select('#rename', parent.dialogObj.element);\n    onSubmitValidate(parent, ele);\n    if (ele.parentElement.nextElementSibling.innerHTML !== '') {\n        return;\n    }\n    var text = ele.value;\n    var oIndex = parent.currentItemText.lastIndexOf('.');\n    if (parent.isFile && !parent.showFileExtension) {\n        var extn = (oIndex === -1) ? '' : parent.currentItemText.substr(oIndex);\n        text += extn;\n    }\n    parent.renameText = text;\n    if (parent.currentItemText === text) {\n        parent.dialogObj.hide();\n        return;\n    }\n    var newPath = (parent.activeModule === 'navigationpane') ? getParentPath(parent.path) : parent.path;\n    parent.renamedId = getValue('id', parent.itemData[0]);\n    if (parent.isFile) {\n        var oldExtension = (oIndex === -1) ? '' : parent.currentItemText.substr(oIndex);\n        var nIndex = text.lastIndexOf('.');\n        var newExtension = (nIndex === -1) ? '' : text.substr(nIndex);\n        if (parent.showFileExtension && oldExtension !== newExtension) {\n            createExtDialog(parent, 'Extension', null, newPath);\n        }\n        else {\n            rename(parent, newPath, text);\n        }\n    }\n    else {\n        rename(parent, newPath, text);\n    }\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @returns {void}\n * @private\n */\nfunction onDeleteSubmit(parent) {\n    parent.dialogObj.hide();\n    parent.notify(events.deleteInit, {});\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {HTMLInputElement} ele - specifies the input element.\n * @returns {void}\n * @private\n */\nfunction onValidate(parent, ele) {\n    if (/[/\\\\|*?\"<>:]/.test(ele.value)) {\n        addInvalid(parent, ele);\n    }\n    else if (ele.value === '') {\n        ele.parentElement.nextElementSibling.innerHTML = getLocaleText(parent, 'Validation-Empty');\n    }\n    else {\n        ele.parentElement.nextElementSibling.innerHTML = '';\n    }\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {HTMLInputElement} ele - specifies the input element.\n * @returns {void}\n * @private\n */\nfunction onSubmitValidate(parent, ele) {\n    onValidate(parent, ele);\n    var len = ele.value.length - 1;\n    if (ele.value !== '' && ((ele.value.lastIndexOf('.') === len) || (ele.value.lastIndexOf(' ') === len)) &&\n        (parent.showFileExtension || (parent.currentItemText.lastIndexOf('.') === -1))) {\n        addInvalid(parent, ele);\n    }\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {HTMLInputElement} ele - specifies the input element.\n * @returns {void}\n * @private\n */\nfunction addInvalid(parent, ele) {\n    var error = getLocaleText(parent, 'Validation-Invalid').replace('{0}', '\"' + ele.value + '\"');\n    if (parent.enableHtmlSanitizer) {\n        ele.parentElement.nextElementSibling.textContent = error;\n    }\n    else {\n        ele.parentElement.nextElementSibling.innerHTML = error;\n    }\n}\n/**\n *\n * @param {KeyboardEvent} e - specifies the keyboard event.\n * @returns {number} - returns the key code.\n * @private\n */\nfunction getKeyCode(e) {\n    var code;\n    if (e.keyCode) {\n        code = e.keyCode;\n    }\n    else if (e.which) {\n        code = e.which;\n    }\n    else {\n        code = e.charCode;\n    }\n    return code;\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @param {string} header - specifies the header element.\n * @param {string} imageUrl - specifies the image URL.\n * @returns {void}\n * @private\n */\nexport function createImageDialog(parent, header, imageUrl) {\n    var content = createElement('div', { className: 'e-image-wrap' });\n    var image = createElement('img', { className: 'e-image', attrs: { src: imageUrl, alt: header } });\n    content.appendChild(image);\n    if (isNOU(parent.viewerObj)) {\n        parent.viewerObj = new Dialog({\n            header: header,\n            content: content,\n            animationSettings: { effect: 'None' },\n            showCloseIcon: true,\n            closeOnEscape: true,\n            visible: true,\n            isModal: true,\n            width: '350px',\n            height: '350px',\n            target: parent.popupTarget ? parent.popupTarget : '#' + parent.element.id,\n            cssClass: getCssClass(parent, parent.isMobile ? CLS.MOB_POPUP : CLS.ROOT_POPUP),\n            locale: parent.locale,\n            enableResize: true,\n            allowDragging: true,\n            enableHtmlSanitizer: parent.enableHtmlSanitizer,\n            position: { X: 'center', Y: 'center' },\n            enableRtl: parent.enableRtl,\n            open: openImage.bind(this, parent),\n            close: function () { triggerPopupClose(parent, parent.viewerObj, 'Image Preview'); },\n            beforeOpen: function (args) {\n                triggerPopupBeforeOpen(parent, parent.viewerObj, args, 'Image Preview');\n            },\n            beforeClose: function (args) {\n                triggerPopupBeforeClose(parent, parent.viewerObj, args, 'Image Preview');\n            },\n            resizing: updateImage.bind(this, parent),\n            resizeStop: updateImage.bind(this, parent)\n        });\n        parent.viewerObj.isStringTemplate = true;\n        parent.viewerObj.appendTo('#' + parent.element.id + CLS.IMG_DIALOG_ID);\n    }\n    else {\n        parent.viewerObj.refresh();\n        parent.viewerObj.header = header;\n        parent.viewerObj.content = content;\n        parent.viewerObj.enableRtl = parent.enableRtl;\n        parent.viewerObj.dataBind();\n        parent.viewerObj.show();\n    }\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @returns {void}\n * @private\n */\nfunction openImage(parent) {\n    setTimeout(function () {\n        if (parent.viewerObj) {\n            parent.viewerObj.element.focus();\n        }\n    });\n    updateImage(parent);\n    triggerPopupOpen(parent, parent.viewerObj, 'Image Preview');\n}\n/**\n *\n * @param {IFileManager} parent - specifies the parent element.\n * @returns {void}\n * @private\n */\nfunction updateImage(parent) {\n    var content = select('.e-dlg-content', parent.viewerObj.element);\n    var imgWrap = select('.e-image-wrap', parent.viewerObj.element);\n    var cssObj = window.getComputedStyle(content, null);\n    var paddingWidth = cssObj ? (2 * parseFloat(cssObj.paddingRight)) : 36;\n    var paddingHeight = cssObj ? (2 * parseFloat(cssObj.paddingBottom)) : 20;\n    imgWrap.style.width = (content.offsetWidth - paddingWidth) + 'px';\n    imgWrap.style.height = (content.offsetHeight - paddingHeight) + 'px';\n}\n"]},"metadata":{},"sourceType":"module"}