{"ast":null,"code":"import { Grid, Resize, ContextMenu, Sort, VirtualScroll } from '@syncfusion/ej2-grids';\nimport { select, KeyboardEvents, EventHandler, getValue, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined as isNOU, Touch, setValue, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { Internationalization, closest, Draggable } from '@syncfusion/ej2-base';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport { hideSpinner, showSpinner } from '@syncfusion/ej2-popups';\nimport * as events from '../base/constant';\nimport * as CLS from '../base/classes';\nimport { createDialog, createImageDialog } from '../pop-up/dialog';\nimport { removeBlur, openAction, getImageUrl, fileType, getSortedData, getLocaleText, updateLayout } from '../common/utility';\nimport { createEmptyElement } from '../common/utility';\nimport { read, Download, GetDetails, Delete } from '../common/operations';\nimport { cutFiles, addBlur, openSearchFolder, copyFiles, removeActive, pasteHandler, getPathObject, getName } from '../common/index';\nimport { hasReadAccess, hasEditAccess, hasDownloadAccess, doRename, getAccessClass, createDeniedDialog, rename } from '../common/index';\nimport { createVirtualDragElement, dragStopHandler, dragStartHandler, draggingHandler, getModule, getFullPath } from '../common/index';\nimport { getDirectoryPath, updateRenamingData, getItemName, doDeleteFiles, doDownloadFiles } from '../common/index';\n/**\n * DetailsView module\n */\n\nvar DetailsView =\n/** @class */\nfunction () {\n  /**\n   * Constructor for the GridView module\n   *\n   * @param {FileManager} parent - specifies the parent.\n   * @hidden\n   */\n  function DetailsView(parent) {\n    this.isInteracted = true;\n    this.interaction = true;\n    this.isPasteOperation = false;\n    this.isColumnRefresh = false;\n    this.dragObj = null;\n    this.startIndex = null;\n    this.firstItemIndex = null;\n    this.isSelectionUpdate = false;\n    this.currentSelectedItem = [];\n    this.count = 0;\n    this.isRendered = true;\n    this.isLoaded = false;\n    this.isNameWidth = false;\n    this.pasteOperation = false;\n    this.uploadOperation = false;\n    Grid.Inject(Resize, ContextMenu, Sort, VirtualScroll);\n    this.parent = parent;\n    this.element = select('#' + this.parent.element.id + CLS.GRID_ID, this.parent.element);\n    this.addEventListener();\n    this.keyConfigs = {\n      altEnter: 'alt+enter',\n      esc: 'escape',\n      tab: 'tab',\n      moveDown: 'downarrow',\n      ctrlEnd: 'ctrl+end',\n      ctrlHome: 'ctrl+home',\n      ctrlDown: 'ctrl+downarrow',\n      ctrlLeft: 'ctrl+leftarrow',\n      ctrlRight: 'ctrl+rightarrow',\n      shiftEnd: 'shift+end',\n      shiftHome: 'shift+home',\n      shiftDown: 'shift+downarrow',\n      shiftUp: 'shift+uparrow',\n      ctrlUp: 'ctrl+uparrow',\n      csEnd: 'ctrl+shift+end',\n      csHome: 'ctrl+shift+home',\n      csDown: 'ctrl+shift+downarrow',\n      csUp: 'ctrl+shift+uparrow',\n      space: 'space',\n      ctrlSpace: 'ctrl+space',\n      shiftSpace: 'shift+space',\n      csSpace: 'ctrl+shift+space',\n      end: 'end',\n      home: 'home',\n      moveUp: 'uparrow',\n      del: 'delete',\n      ctrlX: 'ctrl+x',\n      ctrlC: 'ctrl+c',\n      ctrlV: 'ctrl+v',\n      ctrlShiftN: 'ctrl+shift+n',\n      shiftdel: 'shift+delete',\n      ctrlD: 'ctrl+d',\n      f2: 'f2',\n      ctrlA: 'ctrl+a',\n      enter: 'enter'\n    };\n  }\n  /* istanbul ignore next */\n\n\n  DetailsView.prototype.render = function (args) {\n    showSpinner(this.parent.element);\n\n    if (this.parent.view === 'Details') {\n      removeClass([this.parent.element], CLS.MULTI_SELECT); // eslint-disable-next-line\n\n      var items = getSortedData(this.parent, args.files);\n      this.checkNameWidth();\n      var columns = this.getColumns();\n      var sortSettings = void 0;\n\n      if (this.parent.isMobile) {\n        sortSettings = [];\n      } else {\n        if (this.parent.sortOrder !== 'None') {\n          sortSettings = [{\n            direction: this.parent.sortOrder,\n            field: this.parent.sortBy\n          }];\n        }\n      }\n\n      this.gridObj = new Grid({\n        dataSource: items,\n        allowSorting: true,\n        rowSelecting: this.onSelection.bind(this, 'select'),\n        rowDeselecting: this.onSelection.bind(this, 'unselect'),\n        rowSelected: this.onSelected.bind(this),\n        rowDeselected: this.onDeSelection.bind(this),\n        allowResizing: this.parent.detailsViewSettings.columnResizing,\n        selectionSettings: {\n          type: this.parent.allowMultiSelection ? 'Multiple' : 'Single',\n          checkboxMode: 'ResetOnRowClick'\n        },\n        enableRtl: this.parent.enableRtl,\n        pageSettings: {\n          pageSize: 20\n        },\n        sortSettings: {\n          allowUnsort: false,\n          columns: sortSettings\n        },\n        columns: columns,\n        recordDoubleClick: this.DblClickEvents.bind(this),\n        beforeDataBound: this.onBeforeDataBound.bind(this),\n        dataBound: this.onDataBound.bind(this),\n        rowDataBound: this.onRowDataBound.bind(this),\n        actionBegin: this.onActionBegin.bind(this),\n        headerCellInfo: this.onHeaderCellInfo.bind(this),\n        width: '100%',\n        beforeCopy: function (args) {\n          args.cancel = true;\n        },\n        // eslint-disable-next-line\n        load: function (args) {\n          this.focusModule.destroy();\n        },\n        locale: this.parent.locale\n      });\n      this.gridObj.isStringTemplate = true;\n      this.gridObj.appendTo('#' + this.parent.element.id + CLS.GRID_ID);\n      this.wireEvents();\n      this.adjustHeight();\n      this.emptyArgs = args;\n    }\n  };\n\n  DetailsView.prototype.checkNameWidth = function () {\n    var initialColumn = this.parent.detailsViewSettings.columns;\n    this.isNameWidth = false;\n\n    for (var i = 0; i < initialColumn.length; i++) {\n      if (initialColumn[i].field === 'name') {\n        this.isNameWidth = !isNOU(initialColumn[i].width);\n        return;\n      }\n    }\n  };\n\n  DetailsView.prototype.adjustWidth = function (columns, fieldName) {\n    if (this.isNameWidth && fieldName === 'name') {\n      return;\n    }\n\n    for (var i = 0; i < columns.length; i++) {\n      if (columns[i].field === fieldName) {\n        var nameWidth = void 0;\n\n        if (this.parent.breadcrumbbarModule.searchObj.element.value === '' && !this.parent.isFiltered) {\n          nameWidth = this.element.clientWidth <= 500 ? '120px' : 'auto';\n        } else {\n          nameWidth = this.element.clientWidth <= 680 ? fieldName === 'name' ? '120px' : '180px' : 'auto';\n        }\n\n        columns[i].width = nameWidth;\n      }\n    }\n  };\n\n  DetailsView.prototype.getColumns = function () {\n    var columns;\n\n    if (this.parent.isMobile) {\n      columns = [{\n        field: 'name',\n        headerText: getLocaleText(this.parent, 'Name'),\n        width: 'auto',\n        minWidth: 120,\n        headerTextAlign: 'Left',\n        template: '<div class=\"e-fe-text\">${name}</div><div class=\"e-fe-date\">${_fm_modified}</div>' + '<span class=\"e-fe-size\">${size}</span>'\n      }];\n    } else {\n      columns = JSON.parse(JSON.stringify(this.parent.detailsViewSettings.columns));\n      this.adjustWidth(columns, 'name');\n\n      for (var i = 0, len = columns.length; i < len; i++) {\n        columns[i].headerText = getLocaleText(this.parent, columns[i].headerText);\n      }\n    }\n\n    var iWidth = this.parent.isMobile || this.parent.isBigger ? '54' : '46';\n    var icon = {\n      field: 'type',\n      width: iWidth,\n      minWidth: iWidth,\n      template: '<span class=\"e-fe-icon ${_fm_iconClass}\"></span>',\n      allowResizing: false,\n      allowSorting: true,\n      customAttributes: {\n        class: 'e-fe-grid-icon'\n      },\n      headerTemplate: '<span class=\"e-fe-icon e-fe-folder\"></span>'\n    };\n    columns.unshift(icon);\n\n    if (this.parent.allowMultiSelection) {\n      var cWidth = this.parent.isBigger ? '36' : '26';\n      var cBox = {\n        type: 'checkbox',\n        width: cWidth,\n        minWidth: cWidth,\n        customAttributes: {\n          class: 'e-fe-checkbox'\n        },\n        allowResizing: false,\n        allowSorting: false\n      };\n\n      if (this.parent.isMobile) {\n        columns.push(cBox);\n      } else {\n        columns.unshift(cBox);\n      }\n    }\n\n    for (var i = 0, len = columns.length; i < len; i++) {\n      columns[i].disableHtmlEncode = !this.parent.enableHtmlSanitizer;\n    }\n\n    return columns;\n  };\n\n  DetailsView.prototype.adjustHeight = function () {\n    if (!this.gridObj) {\n      return;\n    }\n\n    var pane = select('#' + this.parent.element.id + CLS.CONTENT_ID, this.parent.element);\n    var bar = select('#' + this.parent.element.id + CLS.BREADCRUMBBAR_ID, this.parent.element);\n    var gridHeader = select('.' + CLS.GRID_HEADER, this.parent.element);\n    var height = pane.offsetHeight - bar.offsetHeight - gridHeader.offsetHeight;\n    this.gridObj.height = height;\n    this.gridObj.dataBind();\n  };\n\n  DetailsView.prototype.renderCheckBox = function () {\n    this.gridObj.columns = this.getColumns();\n    this.isColumnRefresh = true;\n    this.gridObj.refreshColumns();\n  };\n\n  DetailsView.prototype.onRowDataBound = function (args) {\n    var td = select('.e-fe-grid-name', args.row);\n\n    if (!td) {\n      var columns = this.parent.detailsViewSettings.columns;\n\n      for (var i = 0; i < columns.length; i++) {\n        if (columns[i].field === 'name') {\n          td = args.row.children[this.parent.allowMultiSelection ? i + 2 : i + 1];\n          break;\n        }\n      }\n    }\n\n    if (td) {\n      td.setAttribute('title', getValue('name', args.data));\n    }\n\n    if (this.parent.isLayoutChange && this.parent.isCut && this.parent.fileAction === 'move' && this.parent.selectedNodes && this.parent.selectedNodes.length !== 0) {\n      if (this.parent.selectedNodes.indexOf(getValue('name', args.data)) !== -1) {\n        addBlur(args.row);\n      }\n    }\n\n    if (!this.parent.showFileExtension && getValue('isFile', args.data)) {\n      var textEle = args.row.querySelector('.e-fe-text');\n\n      if (textEle) {\n        var name_1 = getValue('name', args.data);\n        var type = getValue('type', args.data);\n        textEle.innerHTML = name_1.substr(0, name_1.length - type.length);\n      }\n    }\n\n    if (getValue('size', args.data) !== undefined && args.row.querySelector('.e-fe-size')) {\n      var sizeEle = args.row.querySelector('.e-fe-size');\n      var modifiedSize = void 0;\n\n      if (!getValue('isFile', args.data)) {\n        modifiedSize = '';\n      } else {\n        var sizeValue = getValue('size', args.data);\n        var intl = new Internationalization(this.parent.locale);\n        var value = intl.formatNumber(sizeValue / 1024, {\n          format: 'n'\n        });\n        modifiedSize = value + ' ' + getLocaleText(this.parent, 'KB');\n      }\n\n      sizeEle.innerHTML = modifiedSize;\n    }\n\n    if (this.parent.isMobile) {\n      if (getValue('_fm_modified', args.data) !== undefined && args.row.querySelector('.e-fe-date')) {\n        var dateEle = args.row.querySelector('.e-fe-date');\n        var intl = new Internationalization(this.parent.locale);\n        var columns = this.parent.detailsViewSettings.columns; // eslint-disable-next-line\n\n        var format = void 0;\n\n        for (var i = 0; i < columns.length; i++) {\n          if (columns[i].field === 'dateModified') {\n            format = columns[i].format;\n            break;\n          }\n        }\n\n        var formattedString = intl.formatDate(new Date(getValue('_fm_modified', args.data)), format);\n        dateEle.innerHTML = formattedString;\n      }\n    }\n\n    var checkWrap = args.row.querySelector('.' + CLS.CB_WRAP);\n\n    if (checkWrap) {\n      checkWrap.classList.add('e-small');\n    }\n\n    if (!hasEditAccess(args.data)) {\n      args.row.className += ' ' + getAccessClass(args.data);\n    }\n\n    var eventArgs = {\n      element: args.row,\n      fileDetails: args.data,\n      module: 'DetailsView'\n    };\n    this.parent.trigger('fileLoad', eventArgs);\n  };\n\n  DetailsView.prototype.onActionBegin = function (args) {\n    if (args.requestType === 'sorting') {\n      this.parent.setProperties({\n        sortOrder: args.direction\n      }, true);\n      this.parent.setProperties({\n        sortBy: args.columnName\n      }, true);\n\n      if (this.parent.selectedItems.length !== 0) {\n        this.sortItem = true;\n        var rows = this.gridObj.getSelectedRowIndexes();\n        var len = rows.length;\n        this.sortSelectedNodes = [];\n\n        while (len > 0) {\n          // eslint-disable-next-line\n          var data = this.gridObj.getRowsObject()[rows[len - 1]].data;\n          this.sortSelectedNodes.push(getValue(this.parent.hasId ? 'id' : 'name', data));\n          len--;\n        }\n      }\n\n      this.parent.notify(events.sortByChange, {});\n    }\n  };\n\n  DetailsView.prototype.onHeaderCellInfo = function (args) {\n    var checkWrap = args.node.querySelector('.' + CLS.CB_WRAP);\n\n    if (checkWrap) {\n      checkWrap.classList.add('e-small');\n    }\n  };\n\n  DetailsView.prototype.onBeforeDataBound = function (args) {\n    showSpinner(this.parent.element); // eslint-disable-next-line\n\n    var items = getSortedData(this.parent, this.gridObj.dataSource);\n    args.result = items;\n  };\n  /* istanbul ignore next */\n\n\n  DetailsView.prototype.onDataBound = function () {\n    this.createDragObj();\n\n    if (this.parent.selectedItems.length !== 0) {\n      this.selectRecords(this.parent.selectedItems);\n    }\n\n    if (this.isPasteOperation === true) {\n      if (!this.isColumnRefresh) {\n        this.selectRecords(this.parent.pasteNodes);\n        this.isPasteOperation = false;\n      } else {\n        this.isColumnRefresh = false;\n      }\n    }\n\n    if (this.parent.createdItem) {\n      this.selectRecords([getValue(this.parent.hasId ? 'id' : 'name', this.parent.createdItem)]);\n      this.parent.createdItem = null;\n    }\n\n    if (this.parent.layoutSelectedItems.length) {\n      this.selectRecords(this.parent.layoutSelectedItems);\n    }\n\n    if (this.parent.renamedItem) {\n      this.addSelection(this.parent.renamedItem);\n      this.parent.renamedItem = null;\n    }\n\n    if (this.sortItem === true) {\n      this.selectRecords(this.sortSelectedNodes);\n      this.sortItem = false;\n    }\n\n    if (this.isSelectionUpdate) {\n      if (!this.isColumnRefresh) {\n        this.selectRecords(this.currentSelectedItem);\n        this.isSelectionUpdate = false;\n      } else {\n        this.isColumnRefresh = false;\n      }\n    }\n\n    if (this.uploadOperation === true) {\n      this.count++;\n      this.selectRecords(this.parent.uploadItem);\n\n      if (this.count === this.parent.uploadItem.length) {\n        this.uploadOperation = false;\n        this.parent.uploadItem = [];\n      }\n    }\n\n    if (this.gridObj.currentViewData.length * this.gridObj.getRowHeight() < this.gridObj.height) {\n      var hdTable = this.gridObj.getHeaderContent();\n      hdTable.style.paddingRight = '';\n      hdTable.style.paddingLeft = '';\n      var hdContent = select('.e-headercontent', hdTable);\n      hdContent.style.borderRightWidth = '0';\n      var cnTable = this.gridObj.getContent().querySelector('.e-content');\n      cnTable.style.overflowY = '';\n      cnTable.classList.add('e-scrollShow');\n    } else {\n      var hdTable = this.gridObj.getHeaderContent();\n\n      if (!this.parent.enableRtl) {\n        hdTable.style.paddingRight = '16px';\n      } else {\n        hdTable.style.paddingLeft = '16px';\n      }\n\n      var cnTable = this.gridObj.getContent().querySelector('.e-content');\n      cnTable.classList.remove('e-scrollShow');\n    }\n\n    this.isRendered = true;\n    this.parent.isLayoutChange = false;\n    hideSpinner(this.parent.element);\n    this.checkEmptyDiv(this.emptyArgs);\n    this.isInteracted = this.isLoaded ? true : this.isInteracted;\n    this.isLoaded = false;\n  };\n\n  DetailsView.prototype.selectRecords = function (nodes) {\n    // eslint-disable-next-line\n    var gridRecords = this.gridObj.getCurrentViewRecords();\n    var sRecords = [];\n\n    for (var i = 0, len = gridRecords.length; i < len; i++) {\n      var node = this.parent.hasId ? getValue('id', gridRecords[i]) : getName(this.parent, gridRecords[i]);\n\n      if (nodes.indexOf(node) !== -1) {\n        sRecords.push(i);\n      }\n    }\n\n    if (sRecords.length !== 0) {\n      this.gridObj.selectRows(sRecords);\n      this.addFocus(this.gridObj.selectedRowIndex);\n    }\n  }; // eslint-disable-next-line\n\n\n  DetailsView.prototype.addSelection = function (data) {\n    // eslint-disable-next-line\n    var items = this.gridObj.getCurrentViewRecords(); // eslint-disable-next-line\n\n    var rData = [];\n\n    if (this.parent.hasId) {\n      rData = new DataManager(items).executeLocal(new Query().where('id', 'equal', this.parent.renamedId, false));\n    } else {\n      // eslint-disable-next-line\n      var nData = new DataManager(items).executeLocal(new Query().where('name', 'equal', getValue('name', data), false));\n\n      if (nData.length > 0) {\n        rData = new DataManager(nData).executeLocal(new Query().where('filterPath', 'equal', this.parent.filterPath, false));\n      }\n    }\n\n    if (rData.length > 0) {\n      var index = items.indexOf(rData[0]);\n      this.gridObj.selectRows([index]);\n    }\n  };\n\n  DetailsView.prototype.onSortColumn = function () {\n    if (this.parent.sortOrder !== 'None') {\n      this.gridObj.sortModule.sortColumn(this.parent.sortBy, this.parent.sortOrder);\n    } else {\n      // eslint-disable-next-line\n      this.gridObj.dataSource = getSortedData(this.parent, this.gridObj.dataSource);\n    }\n  };\n\n  DetailsView.prototype.onPropertyChanged = function (e) {\n    if (e.module !== this.getModuleName() && e.module !== 'common') {\n      /* istanbul ignore next */\n      return;\n    }\n\n    for (var _i = 0, _a = Object.keys(e.newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      switch (prop) {\n        case 'allowDragAndDrop':\n          this.createDragObj();\n          break;\n\n        case 'height':\n          this.adjustHeight();\n          break;\n\n        case 'detailsViewSettings':\n          if (!isNullOrUndefined(this.gridObj)) {\n            this.checkNameWidth();\n            var columns = this.getColumns();\n            this.gridObj.columns = columns;\n            this.gridObj.allowResizing = this.parent.detailsViewSettings.columnResizing;\n            this.gridObj.dataBind();\n            this.gridObj.refreshColumns();\n          }\n\n          break;\n\n        case 'selectedItems':\n          this.interaction = false;\n\n          if (this.parent.selectedItems.length !== 0) {\n            if (!this.parent.allowMultiSelection) {\n              var slItems = this.parent.selectedItems.slice(this.parent.selectedItems.length - 1);\n              this.parent.setProperties({\n                selectedItems: slItems\n              }, true);\n            }\n\n            this.selectRecords(this.parent.selectedItems);\n            this.parent.setProperties({\n              selectedItems: this.parent.selectedItems\n            }, true);\n          } else if (!isNOU(this.gridObj)) {\n            this.gridObj.clearSelection();\n          }\n\n          break;\n\n        case 'showFileExtension':\n          read(this.parent, events.pathChanged, this.parent.path);\n          break;\n\n        case 'showHiddenItems':\n          read(this.parent, events.pathChanged, this.parent.path);\n          break;\n\n        case 'allowMultiSelection':\n          if (!isNullOrUndefined(this.gridObj)) {\n            this.currentSelectedItem = this.parent.selectedItems;\n            this.gridObj.selectionSettings.type = e.newProp.allowMultiSelection ? 'Multiple' : 'Single';\n            this.isSelectionUpdate = true;\n            this.renderCheckBox();\n          }\n\n          break;\n\n        case 'view':\n          updateLayout(this.parent, 'Details');\n          break;\n\n        case 'width':\n          this.onDetailsResize();\n      }\n    }\n  };\n\n  DetailsView.prototype.onPathChanged = function (args) {\n    this.parent.isCut = false;\n\n    if (this.parent.breadcrumbbarModule.searchObj.element.value.trim() === '' && this.gridObj) {\n      this.parent.searchedItems = [];\n\n      if (!this.parent.isFiltered) {\n        this.removePathColumn(false);\n      } else {\n        this.updatePathColumn();\n      }\n    }\n\n    removeBlur(this.parent);\n\n    if (this.parent.view === 'Details') {\n      /* istanbul ignore next */\n      this.isInteracted = false;\n      showSpinner(this.parent.element);\n      this.parent.setProperties({\n        selectedItems: []\n      }, true);\n      this.gridObj.dataSource = getSortedData(this.parent, args.files);\n    }\n\n    this.emptyArgs = args;\n  };\n\n  DetailsView.prototype.updatePathColumn = function () {\n    var len = this.gridObj.columns.length;\n    var columnData = JSON.parse(JSON.stringify(this.gridObj.columns));\n\n    if (columnData[len - 1].field && columnData[len - 1].field !== 'filterPath' && !this.parent.isMobile) {\n      var pathColumn = {\n        field: 'filterPath',\n        headerText: getLocaleText(this.parent, 'Path'),\n        minWidth: 180,\n        width: 'auto'\n      };\n      this.gridObj.columns.push(pathColumn);\n      this.adjustWidth(this.gridObj.columns, 'filterPath');\n      this.adjustWidth(this.gridObj.columns, 'name');\n      this.isColumnRefresh = true;\n      this.gridObj.refreshColumns();\n    }\n  };\n\n  DetailsView.prototype.checkEmptyDiv = function (args) {\n    // eslint-disable-next-line\n    var items = getSortedData(this.parent, args.files);\n\n    if (items.length === 0 && !isNOU(this.element.querySelector('.' + CLS.GRID_VIEW))) {\n      createEmptyElement(this.parent, this.element, args);\n    } else if (items.length !== 0 && this.element.querySelector('.' + CLS.EMPTY)) {\n      if (this.element.querySelector('.' + CLS.GRID_VIEW).querySelector('.' + CLS.EMPTY)) {\n        var emptyDiv = this.element.querySelector('.' + CLS.GRID_VIEW).querySelector('.' + CLS.EMPTY);\n        this.element.querySelector('.' + CLS.GRID_VIEW).removeChild(emptyDiv);\n      } else {\n        this.element.removeChild(this.element.querySelector('.' + CLS.EMPTY));\n      }\n    }\n  };\n\n  DetailsView.prototype.onOpenInit = function () {\n    if (this.parent.activeModule === 'detailsview') {\n      // eslint-disable-next-line\n      var data = this.gridObj.getSelectedRecords()[0];\n      this.openContent(data);\n    }\n  };\n\n  DetailsView.prototype.DblClickEvents = function (args) {\n    this.gridObj.selectRows([args.rowIndex]); // eslint-disable-next-line\n\n    var data;\n\n    if (args.rowData) {\n      data = JSON.parse(JSON.stringify(args.rowData));\n      this.openContent(data);\n    }\n  }; // eslint-disable-next-line\n\n\n  DetailsView.prototype.openContent = function (data) {\n    var _this = this;\n\n    if (!hasReadAccess(data)) {\n      createDeniedDialog(this.parent, data, events.permissionRead);\n      return;\n    }\n\n    var eventArgs = {\n      cancel: false,\n      fileDetails: data,\n      module: 'DetailsView'\n    };\n    this.parent.trigger('fileOpen', eventArgs, function (fileOpenArgs) {\n      if (!fileOpenArgs.cancel) {\n        var name_2 = getValue('name', data);\n\n        if (getValue('isFile', data)) {\n          var icon = fileType(data);\n\n          if (icon === CLS.ICON_IMAGE) {\n            var imgUrl = getImageUrl(_this.parent, data);\n            createImageDialog(_this.parent, name_2, imgUrl);\n          }\n        } else {\n          var val = _this.parent.breadcrumbbarModule.searchObj.element.value;\n\n          if (val === '' && !_this.parent.isFiltered) {\n            var id = getValue('id', data);\n            var newPath = _this.parent.path + (isNOU(id) ? name_2 : id) + '/';\n\n            _this.parent.setProperties({\n              path: newPath\n            }, true);\n\n            _this.parent.pathNames.push(name_2);\n\n            _this.parent.pathId.push(getValue('_fm_id', data));\n\n            _this.parent.itemData = [data];\n            openAction(_this.parent);\n          } else {\n            openSearchFolder(_this.parent, data);\n          }\n\n          _this.parent.isFiltered = false;\n        }\n\n        _this.element.focus();\n      }\n    });\n  };\n  /* istanbul ignore next */\n\n\n  DetailsView.prototype.onLayoutChange = function (args) {\n    if (this.parent.view === 'Details') {\n      if (!this.gridObj) {\n        this.render(args);\n      } else {\n        this.isLoaded = true;\n      }\n\n      if (this.parent.isFiltered) {\n        this.updatePathColumn();\n        this.parent.setProperties({\n          selectedItems: []\n        }, true);\n      }\n\n      this.gridObj.dataSource = getSortedData(this.parent, args.files);\n      this.parent.notify(events.hideLayout, {});\n      this.gridObj.element.classList.remove(CLS.DISPLAY_NONE);\n      this.isInteracted = false;\n      this.gridObj.clearSelection();\n\n      if (this.parent.breadcrumbbarModule.searchObj.element.value.trim() !== '') {\n        this.onSearchFiles(args);\n      }\n\n      this.adjustHeight();\n\n      if (this.gridObj.sortSettings.columns.length > 0 && this.gridObj.sortSettings.columns[0].field !== this.parent.sortBy) {\n        if (this.parent.sortOrder !== 'None') {\n          this.gridObj.sortColumn(this.parent.sortBy, this.parent.sortOrder);\n        }\n      }\n    }\n  };\n  /* istanbul ignore next */\n\n\n  DetailsView.prototype.onSearchFiles = function (args) {\n    if (this.parent.view === 'Details') {\n      this.parent.setProperties({\n        selectedItems: []\n      }, true);\n      this.parent.notify(events.selectionChanged, {});\n\n      if (!this.parent.isLayoutChange) {\n        this.parent.layoutSelectedItems = [];\n      }\n\n      this.updatePathColumn();\n      this.parent.searchedItems = args.files;\n      this.onPathChanged(args);\n    }\n  };\n\n  DetailsView.prototype.removePathColumn = function (isRefresh) {\n    var len = this.gridObj.columns.length;\n    var columnData = JSON.parse(JSON.stringify(this.gridObj.columns));\n\n    if (columnData[len - 1].field && columnData[len - 1].field === 'filterPath') {\n      /* istanbul ignore next */\n      if (this.gridObj.sortSettings.columns[0].field === 'filterPath') {\n        if (this.parent.sortOrder !== 'None') {\n          this.gridObj.sortColumn('name', this.parent.sortOrder);\n        } else {\n          // eslint-disable-next-line\n          this.gridObj.dataSource = getSortedData(this.parent, this.gridObj.dataSource);\n        }\n\n        this.parent.notify(events.sortByChange, {});\n      }\n\n      this.gridObj.columns.pop();\n\n      if (!isRefresh) {\n        this.isColumnRefresh = true;\n        this.gridObj.refreshColumns();\n      }\n    }\n  };\n\n  DetailsView.prototype.onFinalizeEnd = function (args) {\n    if (this.parent.view !== 'Details') {\n      return;\n    }\n\n    if (!this.gridObj) {\n      this.render(args);\n    } else {\n      this.onPathChanged(args);\n    }\n  };\n\n  DetailsView.prototype.onCreateEnd = function (args) {\n    if (this.parent.view !== 'Details') {\n      return;\n    }\n\n    this.onPathChanged(args);\n  };\n\n  DetailsView.prototype.onRenameInit = function () {\n    if (this.parent.activeModule === 'detailsview' && this.parent.selectedItems.length === 1) {\n      this.updateRenameData();\n    }\n  };\n\n  DetailsView.prototype.onSelectedData = function () {\n    if (this.parent.activeModule === 'detailsview') {\n      this.parent.itemData = this.gridObj.getSelectedRecords();\n    }\n  };\n\n  DetailsView.prototype.onDeleteInit = function () {\n    if (this.parent.activeModule === 'detailsview') {\n      Delete(this.parent, this.parent.selectedItems, this.parent.path, 'delete');\n    }\n  };\n  /* istanbul ignore next */\n\n\n  DetailsView.prototype.onDeleteEnd = function (args) {\n    if (this.parent.view !== 'Details') {\n      return;\n    }\n\n    this.onPathChanged(args);\n    this.parent.setProperties({\n      selectedItems: []\n    }, true);\n  };\n\n  DetailsView.prototype.onRefreshEnd = function (args) {\n    if (this.parent.view !== 'Details') {\n      return;\n    }\n\n    this.isInteracted = false;\n    this.removePathColumn(false);\n    this.gridObj.dataSource = getSortedData(this.parent, args.files);\n    this.emptyArgs = args;\n  };\n\n  DetailsView.prototype.onHideLayout = function () {\n    if (this.parent.view !== 'Details' && this.gridObj) {\n      this.gridObj.element.classList.add(CLS.DISPLAY_NONE);\n    }\n  };\n\n  DetailsView.prototype.onSelectAllInit = function () {\n    if (this.parent.view === 'Details') {\n      this.isInteracted = false;\n\n      if (this.parent.allowMultiSelection) {\n        this.gridObj.selectionModule.selectRowsByRange(0, this.gridObj.getRows().length);\n      } else {\n        this.gridObj.selectRow(this.gridObj.getRows().length - 1);\n      }\n\n      this.isInteracted = true;\n      this.interaction = true;\n    }\n  };\n\n  DetailsView.prototype.onClearAllInit = function () {\n    if (this.parent.view === 'Details') {\n      this.removeSelection();\n      this.interaction = true;\n    }\n  };\n  /* istanbul ignore next */\n\n\n  DetailsView.prototype.onSelectionChanged = function () {\n    removeClass([this.element], CLS.HEADER_CHECK);\n\n    if (this.parent.selectedItems.length > 0) {\n      addClass([this.element], CLS.HEADER_CHECK);\n    }\n  };\n\n  DetailsView.prototype.onLayoutRefresh = function () {\n    if (this.parent.view !== 'Details') {\n      return;\n    }\n\n    this.adjustHeight();\n  };\n\n  DetailsView.prototype.onBeforeRequest = function () {\n    this.isRendered = false;\n  };\n\n  DetailsView.prototype.onAfterRequest = function () {\n    this.isRendered = true;\n  };\n\n  DetailsView.prototype.onUpdateSelectionData = function () {\n    if (this.parent.view !== 'Details') {\n      return;\n    }\n\n    this.parent.itemData = this.gridObj.getSelectedRecords();\n  };\n\n  DetailsView.prototype.addEventListener = function () {\n    this.parent.on(events.finalizeEnd, this.onFinalizeEnd, this);\n    this.parent.on(events.destroy, this.destroy, this);\n    this.parent.on(events.layoutChange, this.onLayoutChange, this);\n    this.parent.on(events.pathChanged, this.onPathChanged, this);\n    this.parent.on(events.createEnd, this.onCreateEnd, this);\n    this.parent.on(events.dropInit, this.onDropInit, this);\n    this.parent.on(events.detailsInit, this.onDetailsInit, this);\n    this.parent.on(events.refreshEnd, this.onRefreshEnd, this);\n    this.parent.on(events.search, this.onSearchFiles, this);\n    this.parent.on(events.methodCall, this.onMethodCall, this);\n    this.parent.on(events.actionFailure, this.onActionFailure, this);\n    this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n    this.parent.on(events.deleteInit, this.onDeleteInit, this);\n    this.parent.on(events.deleteEnd, this.onDeleteEnd, this);\n    this.parent.on(events.selectedData, this.onSelectedData, this);\n    this.parent.on(events.renameInit, this.onRenameInit, this);\n    this.parent.on(events.renameEnd, this.onPathChanged, this);\n    this.parent.on(events.openInit, this.onOpenInit, this);\n    this.parent.on(events.sortColumn, this.onSortColumn, this);\n    this.parent.on(events.openEnd, this.onPathChanged, this);\n    this.parent.on(events.filterEnd, this.onPathChanged, this);\n    this.parent.on(events.pasteInit, this.onPasteInit, this);\n    this.parent.on(events.hideLayout, this.onHideLayout, this);\n    this.parent.on(events.selectAllInit, this.onSelectAllInit, this);\n    this.parent.on(events.clearAllInit, this.onClearAllInit, this);\n    this.parent.on(events.pathColumn, this.onPathColumn, this);\n    this.parent.on(events.selectionChanged, this.onSelectionChanged, this);\n    this.parent.on(events.beforeRequest, this.onBeforeRequest, this);\n    this.parent.on(events.afterRequest, this.onAfterRequest, this);\n    this.parent.on(events.pasteEnd, this.onpasteEnd, this);\n    this.parent.on(events.cutCopyInit, this.oncutCopyInit, this);\n    this.parent.on(events.menuItemData, this.onMenuItemData, this);\n    this.parent.on(events.resizeEnd, this.onDetailsResizeHandler, this);\n    this.parent.on(events.splitterResize, this.onDetailsResize, this);\n    this.parent.on(events.layoutRefresh, this.onLayoutRefresh, this);\n    this.parent.on(events.dropPath, this.onDropPath, this);\n    this.parent.on(events.updateSelectionData, this.onUpdateSelectionData, this);\n  };\n\n  DetailsView.prototype.removeEventListener = function () {\n    this.parent.off(events.finalizeEnd, this.onFinalizeEnd);\n    this.parent.off(events.destroy, this.destroy);\n    this.parent.off(events.layoutChange, this.onLayoutChange);\n    this.parent.off(events.pathChanged, this.onPathChanged);\n    this.parent.off(events.pasteInit, this.onPasteInit);\n    this.parent.off(events.createEnd, this.onCreateEnd);\n    this.parent.off(events.refreshEnd, this.onRefreshEnd);\n    this.parent.off(events.search, this.onSearchFiles);\n    this.parent.off(events.methodCall, this.onMethodCall);\n    this.parent.off(events.actionFailure, this.onActionFailure);\n    this.parent.off(events.modelChanged, this.onPropertyChanged);\n    this.parent.off(events.renameInit, this.onRenameInit);\n    this.parent.off(events.renameEnd, this.onPathChanged);\n    this.parent.off(events.filterEnd, this.onPathChanged);\n    this.parent.off(events.openInit, this.onOpenInit);\n    this.parent.off(events.sortColumn, this.onSortColumn);\n    this.parent.off(events.openEnd, this.onPathChanged);\n    this.parent.off(events.hideLayout, this.onHideLayout);\n    this.parent.off(events.selectAllInit, this.onSelectAllInit);\n    this.parent.off(events.clearAllInit, this.onClearAllInit);\n    this.parent.off(events.deleteInit, this.onDeleteInit);\n    this.parent.off(events.deleteEnd, this.onDeleteEnd);\n    this.parent.off(events.pathColumn, this.onPathColumn);\n    this.parent.off(events.selectionChanged, this.onSelectionChanged);\n    this.parent.off(events.beforeRequest, this.onBeforeRequest);\n    this.parent.off(events.afterRequest, this.onAfterRequest);\n    this.parent.off(events.pasteEnd, this.onpasteEnd);\n    this.parent.off(events.cutCopyInit, this.oncutCopyInit);\n    this.parent.off(events.dropInit, this.onDropInit);\n    this.parent.off(events.selectedData, this.onSelectedData);\n    this.parent.off(events.detailsInit, this.onDetailsInit);\n    this.parent.off(events.menuItemData, this.onMenuItemData);\n    this.parent.off(events.resizeEnd, this.onDetailsResizeHandler);\n    this.parent.off(events.splitterResize, this.onDetailsResize);\n    this.parent.off(events.layoutRefresh, this.onLayoutRefresh);\n    this.parent.off(events.dropPath, this.onDropPath);\n    this.parent.off(events.updateSelectionData, this.onUpdateSelectionData);\n  };\n\n  DetailsView.prototype.onActionFailure = function () {\n    this.interaction = true;\n  }; // eslint-disable-next-line\n\n\n  DetailsView.prototype.onMenuItemData = function (args) {\n    if (this.parent.activeModule === this.getModuleName()) {\n      this.parent.itemData = [this.gridObj.getRowInfo(args.target).rowData];\n    }\n  };\n\n  DetailsView.prototype.onPasteInit = function () {\n    if (this.parent.activeModule === this.getModuleName()) {\n      this.parent.itemData = this.parent.folderPath !== '' ? this.gridObj.getSelectedRecords() : [getPathObject(this.parent)];\n    }\n  };\n\n  DetailsView.prototype.onDetailsInit = function () {\n    if (this.parent.activeModule === this.getModuleName()) {\n      if (this.parent.selectedItems.length !== 0) {\n        this.parent.itemData = this.gridObj.getSelectedRecords();\n      } else {\n        this.parent.itemData = [getValue(this.parent.pathId[this.parent.pathId.length - 1], this.parent.feParent)];\n      }\n    }\n  };\n\n  DetailsView.prototype.dragHelper = function (args) {\n    var dragTarget = args.sender.target;\n    var dragLi = dragTarget.closest('tr.e-row');\n\n    if (!dragLi) {\n      return null;\n    }\n\n    var name = dragLi.getElementsByClassName('e-fe-text')[0].innerText;\n\n    if (dragLi && !dragLi.querySelector('.e-active')) {\n      this.selectRecords([name]);\n    }\n\n    getModule(this.parent, dragLi);\n    this.parent.activeElements = [];\n    this.parent.dragData = []; // eslint-disable-next-line\n\n    this.parent.dragData = this.gridObj.getSelectedRecords();\n    var dragRow;\n\n    if (this.parent.dragData.length === 0 && dragLi) {\n      dragRow = this.gridObj.getRowInfo(dragLi);\n    }\n\n    if (dragRow) {\n      this.parent.dragData.push(dragRow.rowData);\n    }\n\n    this.parent.dragPath = this.parent.path;\n    this.parent.activeElements = this.gridObj.getSelectedRows();\n    createVirtualDragElement(this.parent);\n    return this.parent.virtualDragElement;\n  };\n  /* istanbul ignore next */\n\n\n  DetailsView.prototype.onDetailsResize = function () {\n    if (this.parent.view === 'Details' && !this.parent.isMobile && !isNOU(this.gridObj)) {\n      var gridHeader = this.gridObj.getHeaderContent().querySelector('.e-headercontent');\n      var gridHeaderColGroup = gridHeader.firstChild.childNodes[0];\n      var gridContentColGroup = this.gridObj.getContent().querySelector('.e-content .e-table').children[0];\n      var gridHeaderColNames = this.gridObj.getColumns();\n\n      for (var i = 0; i < gridHeaderColNames.length; i++) {\n        if (!this.isNameWidth && gridHeaderColNames[i].field === 'name' || gridHeaderColNames[i].field === 'filterPath') {\n          if (this.parent.breadcrumbbarModule.searchObj.element.value === '' && !this.parent.isFiltered) {\n            if (this.element.clientWidth <= 500) {\n              gridHeaderColGroup.children[i].setAttribute('style', 'width: 120px');\n              gridContentColGroup.children[i].setAttribute('style', 'width: 120px');\n            } else if (this.element.clientWidth > 500) {\n              gridHeaderColGroup.children[i].setAttribute('style', 'width: auto');\n              gridContentColGroup.children[i].setAttribute('style', 'width: auto');\n            }\n          } else {\n            if (this.element.clientWidth <= 680) {\n              if (gridHeaderColNames[i].field === 'name') {\n                gridHeaderColGroup.children[i].setAttribute('style', 'width: 120px');\n                gridContentColGroup.children[i].setAttribute('style', 'width: 120px');\n              } else {\n                gridHeaderColGroup.children[i].setAttribute('style', 'width: 180px');\n                gridContentColGroup.children[i].setAttribute('style', 'width: 180px');\n              }\n            } else if (this.element.clientWidth > 680) {\n              gridHeaderColGroup.children[i].setAttribute('style', 'width: auto');\n              gridContentColGroup.children[i].setAttribute('style', 'width: auto');\n            }\n          }\n        }\n      }\n    }\n  };\n\n  DetailsView.prototype.onDetailsResizeHandler = function () {\n    this.onDetailsResize();\n\n    if (this.parent.view === 'Details' && !this.parent.isMobile && !isNOU(this.gridObj)) {\n      this.adjustHeight();\n    }\n  };\n\n  DetailsView.prototype.createDragObj = function () {\n    var _this = this;\n\n    if (!this.parent.isMobile && this.gridObj) {\n      if (this.parent.allowDragAndDrop) {\n        if (this.dragObj) {\n          this.dragObj.destroy();\n        }\n\n        this.dragObj = new Draggable(this.gridObj.element, {\n          cursorAt: this.parent.dragCursorPosition,\n          distance: 5,\n          enableTailMode: true,\n          dragArea: this.parent.element,\n          dragTarget: '.' + CLS.ROW,\n          drag: draggingHandler.bind(this, this.parent),\n          dragStart: function (args) {\n            dragStartHandler(_this.parent, args, _this.dragObj);\n          },\n          dragStop: dragStopHandler.bind(this, this.parent),\n          enableAutoScroll: true,\n          helper: this.dragHelper.bind(this)\n        });\n      } else if (!this.parent.allowDragAndDrop && this.dragObj) {\n        this.dragObj.destroy();\n      }\n    }\n  };\n\n  DetailsView.prototype.onDropInit = function (args) {\n    if (this.parent.targetModule === this.getModuleName()) {\n      /* istanbul ignore next */\n      // eslint-disable-next-line\n      var cwdData = getValue(this.parent.pathId[this.parent.pathId.length - 1], this.parent.feParent);\n\n      if (!args.target.closest('tr')) {\n        this.parent.dropPath = this.parent.path;\n        this.parent.dropData = cwdData;\n      } else {\n        // eslint-disable-next-line\n        var info = null; // eslint-disable-next-line\n\n        info = this.gridObj.getRowInfo(args.target).rowData;\n        this.parent.dropPath = info.isFile ? this.parent.path : getFullPath(this.parent, info, this.parent.path);\n        this.parent.dropData = info.isFile ? cwdData : info;\n      }\n    }\n  };\n\n  DetailsView.prototype.oncutCopyInit = function () {\n    if (this.parent.activeModule === this.getModuleName()) {\n      this.parent.activeRecords = this.gridObj.getSelectedRecords();\n      this.parent.activeElements = this.gridObj.getSelectedRows();\n    }\n  };\n\n  DetailsView.prototype.onpasteEnd = function (args) {\n    if (this.parent.view === 'Details') {\n      this.isPasteOperation = true;\n\n      if (this.parent.path === this.parent.destinationPath || this.parent.path === getDirectoryPath(this.parent, args)) {\n        this.onPathChanged(args);\n      }\n    }\n  };\n\n  DetailsView.prototype.onDropPath = function (args) {\n    if (this.parent.view === 'Details') {\n      this.isPasteOperation = true;\n      this.onPathChanged(args);\n    }\n  };\n  /**\n   * For internal use only - Get the module name.\n   *\n   * @returns {string} - returns modules name.\n   * @private\n   */\n\n\n  DetailsView.prototype.getModuleName = function () {\n    return 'detailsview';\n  };\n\n  DetailsView.prototype.destroy = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.removeEventListener();\n\n    if (this.gridObj) {\n      this.unWireEvents();\n      this.gridObj.destroy();\n    }\n  };\n\n  DetailsView.prototype.updateType = function (item) {\n    var folder = select('.' + CLS.FOLDER, item);\n    this.parent.isFile = isNOU(folder) ? true : false;\n  };\n  /* istanbul ignore next */\n\n\n  DetailsView.prototype.onSelection = function (action, args) {\n    var eventArgs = {\n      action: action,\n      fileDetails: args.data,\n      isInteracted: this.interaction,\n      cancel: false,\n      target: args.target\n    };\n    this.parent.trigger('fileSelection', eventArgs);\n    args.cancel = eventArgs.cancel;\n  };\n  /* istanbul ignore next */\n\n\n  DetailsView.prototype.onSelected = function (args) {\n    this.parent.activeModule = 'detailsview';\n\n    if (!this.parent.isLayoutChange || this.parent.isFiltered) {\n      this.selectedRecords();\n    }\n\n    this.parent.notify(events.selectionChanged, {});\n\n    if (this.gridObj.getSelectedRowIndexes().length === 1) {\n      this.firstItemIndex = this.gridObj.selectedRowIndex;\n    }\n\n    this.gridObj.element.setAttribute('tabindex', '-1');\n    this.triggerSelect('select', args);\n    var item = this.gridObj.getRowByIndex(this.gridObj.selectedRowIndex);\n    this.updateType(item);\n\n    if (!isNOU(item) && !isNOU(item.querySelector('.e-checkselect'))) {\n      if (this.gridObj.getSelectedRowIndexes().length !== 1) {\n        var lastItemIndex = this.gridObj.getSelectedRowIndexes()[this.gridObj.getSelectedRowIndexes().length - 2];\n        var lastItem = this.gridObj.getRowByIndex(lastItemIndex);\n        lastItem.querySelector('.e-checkselect').setAttribute('tabindex', '-1');\n      }\n\n      item.querySelector('.e-rowcell.e-fe-checkbox').removeAttribute('tabindex');\n    }\n\n    if (!isNOU(this.gridObj) && !isNOU(this.gridObj.element.querySelector('.e-checkselectall'))) {\n      this.gridObj.element.querySelector('.e-checkselectall').setAttribute('tabindex', '-1');\n    }\n\n    var rows = this.gridObj.getSelectedRowIndexes();\n\n    if (!this.parent.allowMultiSelection) {\n      for (var i = 0; i < rows.length; i++) {\n        if (rows[i] === this.gridObj.selectedRowIndex) {\n          this.gridObj.getRowByIndex(rows[i]).setAttribute('tabindex', '0');\n        } else {\n          this.gridObj.getRowByIndex(rows[i]).removeAttribute('tabindex');\n        }\n      }\n    }\n\n    var len = rows.length;\n\n    if (len > 0) {\n      // eslint-disable-next-line\n      var data = this.gridObj.getRowsObject()[rows[len - 1]].data;\n      this.parent.currentItemText = getValue('name', data);\n    }\n\n    var indexes = getValue('rowIndexes', args);\n    var multiSelect = getValue('enableSelectMultiTouch', this.gridObj.selectionModule);\n\n    if (this.parent.isDevice && isNOU(indexes) && args.target && !multiSelect && !args.target.closest('.e-headercell')) {\n      this.parent.isFile = getValue('isFile', args.data);\n\n      if (!this.parent.isFile) {\n        this.openContent(args.data);\n      }\n    }\n\n    this.parent.visitedItem = args.row;\n\n    if (this.parent.allowMultiSelection && !isNOU(item) && !isNOU(item.querySelector('.e-checkselect'))) {\n      var checkItem = item.querySelector('.e-checkselect');\n      checkItem.focus();\n    }\n\n    this.addFocus(this.gridObj.selectedRowIndex);\n\n    if (!this.parent.isLayoutChange) {\n      this.isInteracted = true;\n    }\n  };\n  /* istanbul ignore next */\n\n\n  DetailsView.prototype.onPathColumn = function () {\n    if (this.parent.view === 'Details' && !isNOU(this.gridObj)) {\n      if (this.parent.breadcrumbbarModule.searchObj.element.value === '' && !this.parent.isFiltered) {\n        this.removePathColumn(false);\n      }\n    }\n  };\n\n  DetailsView.prototype.selectedRecords = function () {\n    this.parent.setProperties({\n      selectedItems: []\n    }, true); // eslint-disable-next-line\n\n    var selectedRecords = this.gridSelectNodes();\n    var selectSize = 0;\n\n    while (selectSize < selectedRecords.length) {\n      var record = selectedRecords[selectSize];\n      var name_3 = getItemName(this.parent, record);\n      this.parent.selectedItems.push(name_3);\n      selectSize++;\n    }\n\n    this.parent.setProperties({\n      selectedItems: this.parent.selectedItems\n    }, true);\n  };\n\n  DetailsView.prototype.onDeSelection = function (args) {\n    /* istanbul ignore next */\n    if (!this.parent.allowMultiSelection && isNOU(args.data)) {\n      this.gridObj.getRowByIndex(args.rowIndex).removeAttribute('tabindex');\n    } else if (this.gridObj.getSelectedRowIndexes().length > 1) {\n      var lastItemIndex = this.gridObj.getSelectedRowIndexes()[this.gridObj.getSelectedRowIndexes().length - 2];\n      this.gridObj.getRowByIndex(lastItemIndex).querySelector('.e-checkselect').removeAttribute('tabindex');\n    }\n\n    if (this.gridObj.selectedRowIndex === -1) {\n      this.gridObj.element.setAttribute('tabindex', '0');\n    }\n\n    if (!this.isInteracted) {\n      this.isInteracted = true;\n      return;\n    }\n\n    this.selectedRecords();\n\n    if (this.parent.selectedItems.length === 0) {\n      setValue('enableSelectMultiTouch', false, this.gridObj.selectionModule);\n      removeClass([this.parent.element], CLS.MULTI_SELECT);\n    }\n\n    this.parent.notify(events.selectionChanged, {});\n    this.triggerSelect('unselect', args);\n    this.parent.visitedItem = null;\n  };\n\n  DetailsView.prototype.triggerSelect = function (action, args) {\n    var eventArgs = {\n      action: action,\n      fileDetails: args.data,\n      isInteracted: this.interaction\n    };\n    this.parent.trigger('fileSelect', eventArgs);\n    this.interaction = true;\n  };\n\n  DetailsView.prototype.wireEvents = function () {\n    this.wireClickEvent(true);\n    this.keyboardModule = new KeyboardEvents(this.gridObj.element, {\n      keyAction: this.keyupHandler.bind(this),\n      keyConfigs: this.keyConfigs,\n      eventName: 'keyup'\n    });\n    this.keyboardDownModule = new KeyboardEvents(this.element, {\n      keyAction: this.keydownHandler.bind(this),\n      keyConfigs: this.keyConfigs,\n      eventName: 'keydown'\n    });\n    EventHandler.add(this.gridObj.element, 'blur', this.removeFocus, this);\n  };\n\n  DetailsView.prototype.unWireEvents = function () {\n    this.wireClickEvent(false);\n    this.keyboardModule.destroy();\n    this.keyboardDownModule.destroy();\n    EventHandler.remove(this.gridObj.element, 'blur', this.removeFocus);\n  };\n\n  DetailsView.prototype.wireClickEvent = function (toBind) {\n    if (toBind) {\n      // eslint-disable-next-line\n      var proxy_1 = this;\n      var ele = this.gridObj.getContent();\n      this.clickObj = new Touch(ele, {\n        tap: function (eve) {\n          if (eve.tapCount === 1 && eve.originalEvent.target.classList.contains('e-content')) {\n            proxy_1.onClearAllInit();\n          }\n        },\n        tapHold: function (e) {\n          if (proxy_1.parent.isDevice) {\n            e.originalEvent.preventDefault();\n\n            if (proxy_1.parent.allowMultiSelection) {\n              setValue('enableSelectMultiTouch', proxy_1.parent.allowMultiSelection, proxy_1.gridObj.selectionModule);\n              addClass([proxy_1.parent.element], CLS.MULTI_SELECT);\n            }\n\n            var target = e.originalEvent.target;\n\n            if (target) {\n              var row = closest(target, '.' + CLS.ROW);\n              var index = proxy_1.gridObj.getRows().indexOf(row);\n              proxy_1.gridObj.selectRow(index);\n            }\n          }\n        }\n      });\n    } else {\n      if (this.clickObj) {\n        this.clickObj.destroy();\n      }\n    }\n  };\n  /* istanbul ignore next */\n\n\n  DetailsView.prototype.removeSelection = function () {\n    removeClass([this.parent.element], CLS.MULTI_SELECT);\n    this.gridObj.clearSelection();\n    this.parent.setProperties({\n      selectedItems: []\n    }, true);\n    this.parent.notify(events.selectionChanged, {});\n\n    if (this.gridObj.selectedRowIndex === -1) {\n      this.startIndex = null;\n    }\n\n    this.isInteracted = true;\n  };\n\n  DetailsView.prototype.removeFocus = function () {\n    this.addFocus(null);\n  };\n\n  DetailsView.prototype.getFocusedItemIndex = function () {\n    return !isNOU(this.getFocusedItem()) ? parseInt(this.getFocusedItem().getAttribute('aria-rowindex'), 10) : null;\n  };\n  /* istanbul ignore next */\n  // eslint:disable-next-line\n\n\n  DetailsView.prototype.keydownHandler = function (e) {\n    if (!this.isRendered) {\n      return;\n    }\n\n    switch (e.action) {\n      case 'end':\n      case 'home':\n      case 'space':\n      case 'ctrlSpace':\n      case 'shiftSpace':\n      case 'csSpace':\n      case 'ctrlA':\n      case 'enter':\n      case 'altEnter':\n      case 'ctrlEnd':\n      case 'shiftEnd':\n      case 'csEnd':\n      case 'ctrlHome':\n      case 'shiftHome':\n      case 'csHome':\n      case 'ctrlDown':\n      case 'shiftDown':\n      case 'csDown':\n      case 'ctrlLeft':\n      case 'shiftLeft':\n      case 'csLeft':\n      case 'esc':\n      case 'del':\n      case 'shiftdel':\n      case 'ctrlC':\n      case 'ctrlV':\n      case 'ctrlX':\n      case 'f2':\n      case 'moveDown':\n      case 'moveUp':\n        e.preventDefault();\n        break;\n\n      default:\n        break;\n    }\n  };\n  /* istanbul ignore next */\n  // eslint:disable-next-line\n\n\n  DetailsView.prototype.keyupHandler = function (e) {\n    if (!this.isRendered) {\n      return;\n    }\n\n    e.preventDefault();\n    var action = e.action; // eslint-disable-next-line\n\n    var gridItems = getSortedData(this.parent, this.gridObj.dataSource);\n    var gridLength = gridItems.length;\n    var focItem = this.getFocusedItem();\n    var focIndex = this.getFocusedItemIndex();\n    var selIndex = this.gridObj.selectedRowIndex;\n    var selRowIndeces = this.gridObj.getSelectedRowIndexes(); // eslint-disable-next-line\n\n    var rowData;\n    var firstItem;\n    var lastItem;\n\n    switch (action) {\n      case 'altEnter':\n        GetDetails(this.parent, this.parent.selectedItems, this.parent.path, 'details');\n        break;\n\n      case 'esc':\n        removeActive(this.parent);\n        break;\n\n      case 'del':\n      case 'shiftdel':\n        this.performDelete();\n        break;\n\n      case 'enter':\n        if (this.gridObj.selectedRowIndex === -1) {\n          break;\n        }\n\n        rowData = this.gridObj.getRowsObject()[this.gridObj.selectedRowIndex].data;\n\n        if (rowData) {\n          // eslint-disable-next-line\n          var data = JSON.parse(JSON.stringify(rowData));\n          this.openContent(data);\n        }\n\n        break;\n\n      case 'ctrlC':\n        copyFiles(this.parent);\n        break;\n\n      case 'ctrlV':\n        this.parent.folderPath = '';\n        pasteHandler(this.parent);\n        break;\n\n      case 'ctrlX':\n        cutFiles(this.parent);\n        break;\n\n      case 'ctrlD':\n        this.doDownload();\n        break;\n\n      case 'f2':\n        this.performRename();\n        break;\n\n      case 'ctrlA':\n        if (!isNOU(gridItems[0]) && this.parent.allowMultiSelection) {\n          var cnTable = this.gridObj.getContent().querySelector('.e-content');\n          var crtSrlPos = cnTable.scrollTop;\n          var crtFocusIndex = this.gridObj.selectedRowIndex;\n          this.gridObj.selectionModule.selectRowsByRange(0, gridItems.length - 1);\n          cnTable.scrollTop = crtSrlPos;\n\n          if (crtFocusIndex !== -1) {\n            this.addFocus(crtFocusIndex);\n          }\n        }\n\n        break;\n\n      case 'ctrlHome':\n      case 'tab':\n        if (!isNOU(gridItems[0])) {\n          if (!this.parent.allowMultiSelection && e.action === 'ctrlHome') {\n            this.gridObj.selectRow(0);\n          } else if (this.gridObj.selectedRowIndex !== -1 && e.action === 'tab') {\n            return;\n          } else {\n            this.addFocus(0);\n          }\n        }\n\n        break;\n\n      case 'ctrlEnd':\n        if (!isNOU(gridItems[0])) {\n          if (!this.parent.allowMultiSelection) {\n            this.gridObj.selectRow(gridLength - 1);\n          } else {\n            this.addFocus(gridLength - 1);\n          }\n        }\n\n        break;\n\n      case 'shiftHome':\n      case 'shiftEnd':\n      case 'csHome':\n      case 'csEnd':\n        if (!this.parent.allowMultiSelection) {\n          this.gridObj.selectRow(e.action === 'shiftHome' || e.action === 'csHome' ? 0 : gridItems.length - 1);\n        } else {\n          if (!isNOU(gridItems[0])) {\n            if (!isNOU(selIndex) && selIndex !== -1) {\n              this.checkRowsKey(gridItems, selIndex, null, e);\n            } else {\n              if (e.action === 'csHome' || e.action === 'shiftHome') {\n                this.gridObj.selectRow(0);\n              } else {\n                this.gridObj.selectionModule.selectRowsByRange(0, gridItems.length - 1);\n              }\n            }\n          }\n        }\n\n        break;\n\n      case 'space':\n      case 'csSpace':\n      case 'shiftSpace':\n      case 'ctrlSpace':\n        this.spaceSelection(selRowIndeces, focIndex, selIndex, e);\n        break;\n\n      case 'csUp':\n      case 'csDown':\n      case 'shiftUp':\n      case 'shiftDown':\n        this.shiftMoveMethod(gridItems, selIndex, focIndex, selRowIndeces, e);\n        break;\n\n      case 'ctrlUp':\n      case 'ctrlDown':\n        if (!this.parent.allowMultiSelection) {\n          this.moveFunction(gridItems, e, selIndex);\n        } else {\n          this.ctrlMoveFunction(gridItems, e, selIndex);\n        }\n\n        break;\n\n      case 'home':\n        firstItem = [getValue(this.parent.hasId ? 'id' : 'name', gridItems[0])];\n        this.parent.setProperties({\n          selectedItems: firstItem\n        }, true);\n        this.selectRecords(firstItem);\n        break;\n\n      case 'moveUp':\n      case 'moveDown':\n        this.moveFunction(gridItems, e, selIndex);\n        break;\n\n      case 'end':\n        lastItem = [getValue(this.parent.hasId ? 'id' : 'name', gridItems[gridLength - 1])];\n        this.parent.setProperties({\n          selectedItems: lastItem\n        }, true);\n        this.selectRecords(lastItem);\n        break;\n    }\n  }; // eslint-disable-next-line\n\n\n  DetailsView.prototype.gridSelectNodes = function () {\n    return this.gridObj.getSelectedRecords();\n  };\n\n  DetailsView.prototype.doDownload = function () {\n    if (this.parent.selectedItems.length !== 0) {\n      this.parent.itemData = this.gridObj.getSelectedRecords(); // eslint-disable-next-line\n\n      var items = this.parent.itemData;\n\n      for (var i = 0; i < items.length; i++) {\n        if (!hasDownloadAccess(items[i])) {\n          createDeniedDialog(this.parent, items[i], events.permissionDownload);\n          return;\n        }\n      }\n\n      Download(this.parent, this.parent.path, this.parent.selectedItems);\n    }\n  };\n\n  DetailsView.prototype.performDelete = function () {\n    if (this.parent.selectedItems && this.parent.selectedItems.length > 0) {\n      this.parent.itemData = this.gridObj.getSelectedRecords(); // eslint-disable-next-line\n\n      var items = this.parent.itemData;\n\n      for (var i = 0; i < items.length; i++) {\n        if (!hasEditAccess(items[i])) {\n          createDeniedDialog(this.parent, items[i], events.permissionEdit);\n          return;\n        }\n      }\n\n      createDialog(this.parent, 'Delete');\n    }\n  };\n\n  DetailsView.prototype.performRename = function () {\n    if (this.parent.selectedItems.length === 1) {\n      this.updateRenameData();\n      doRename(this.parent);\n    }\n  };\n\n  DetailsView.prototype.updateRenameData = function () {\n    // eslint-disable-next-line\n    var data = this.gridSelectNodes()[0];\n    updateRenamingData(this.parent, data);\n  }; // eslint-disable-next-line\n\n\n  DetailsView.prototype.shiftMoveMethod = function (gridItems, selIndex, focIndex, selRowIndeces, e) {\n    if (!this.parent.allowMultiSelection) {\n      this.moveFunction(gridItems, e, selIndex);\n    } else {\n      if (selIndex === -1 && (e.action === 'csUp' || e.action === 'csDown')) {\n        this.ctrlMoveFunction(gridItems, e, selIndex);\n      } else if (selIndex !== -1 && focIndex !== selIndex && !((e.action === 'csUp' || e.action === 'csDown') && this.isSelected(selRowIndeces, focIndex))) {\n        this.shiftSelectFocusItem(selIndex, focIndex, selRowIndeces, e);\n      } else {\n        this.shiftSelectedItem(selIndex, selRowIndeces, gridItems, e);\n      }\n    }\n  }; // eslint-disable-next-line\n\n\n  DetailsView.prototype.moveFunction = function (selectedItems, e, rowIndex) {\n    if (!isNOU(this.getFocusedItem()) && this.parent.allowMultiSelection) {\n      if (e.action === 'moveDown') {\n        this.gridObj.selectRow(this.getFocusedItemIndex() + 1);\n      } else {\n        this.gridObj.selectRow(this.getFocusedItemIndex() - 1);\n      }\n    } else if (!isNOU(rowIndex) && rowIndex !== -1) {\n      if (e.action === 'moveDown' || e.action === 'ctrlDown' || e.action === 'shiftDown' || e.action === 'csDown') {\n        this.gridObj.selectRow(rowIndex + (rowIndex !== selectedItems.length - 1 ? 1 : 0));\n      } else {\n        this.gridObj.selectRow(rowIndex - (rowIndex !== 0 ? 1 : 0));\n      }\n    } else {\n      if (!isNOU(selectedItems[0])) {\n        this.gridObj.selectRow(0);\n      }\n    }\n  };\n\n  DetailsView.prototype.spaceSelection = function (selRowIndeces, focIndex, selIndex, e) {\n    if (!this.isSelected(selRowIndeces, focIndex) && selIndex !== -1 && (e.action === 'shiftSpace' || e.action === 'csSpace')) {\n      if (focIndex < selIndex) {\n        this.gridObj.selectionModule.selectRowsByRange(focIndex, selIndex);\n      } else {\n        this.gridObj.selectionModule.selectRowsByRange(selIndex, focIndex);\n      }\n    } else if (!isNOU(this.getFocusedItem()) && focIndex !== selIndex) {\n      selRowIndeces.push(this.getFocusedItemIndex());\n      this.gridObj.selectRows(selRowIndeces);\n    } else if (selIndex !== -1 && e.action === 'ctrlSpace' && this.parent.allowMultiSelection) {\n      var lItem = selIndex;\n      selRowIndeces.pop();\n      this.gridObj.selectRows(selRowIndeces);\n      this.addFocus(lItem);\n    } else if (e.action === 'shiftSpace') {\n      this.gridObj.selectRow(selIndex);\n    }\n  }; // eslint-disable-next-line\n\n\n  DetailsView.prototype.ctrlMoveFunction = function (items, e, rowIndex) {\n    var nextItem;\n\n    if (!isNOU(this.getFocusedItem())) {\n      var nextIndex = this.getFocusedItemIndex();\n      nextItem = e.action === 'ctrlDown' || e.action === 'csDown' ? nextIndex + (nextIndex < items.length - 1 ? 1 : 0) : nextIndex - (nextIndex < 1 ? 0 : 1);\n    } else if (!isNOU(rowIndex) && rowIndex !== -1) {\n      nextItem = e.action === 'ctrlDown' || e.action === 'csDown' ? rowIndex + (rowIndex < items.length ? 1 : 0) : rowIndex - (rowIndex < 1 ? 0 : 1);\n    } else {\n      if (!isNOU(items[0])) {\n        nextItem = 0;\n      }\n    }\n\n    this.addFocus(nextItem);\n  }; // eslint-disable-next-line\n\n\n  DetailsView.prototype.checkRowsKey = function (items, indexValue, focIndex, e) {\n    if (this.gridObj.checkAllRows === 'Uncheck' || this.gridObj.checkAllRows === 'Intermediate') {\n      if (e.action !== 'csHome' && e.action !== 'csEnd') {\n        if (isNOU(this.startIndex) && this.firstItemIndex !== indexValue) {\n          this.firstItemIndex = indexValue;\n        }\n\n        if (e.action === 'shiftEnd') {\n          this.gridObj.selectionModule.selectRowsByRange(this.firstItemIndex, items.length - 1);\n        } else {\n          this.gridObj.selectionModule.selectRowsByRange(0, this.firstItemIndex);\n        }\n\n        this.startIndex = indexValue;\n      } else {\n        if (e.action === 'csEnd') {\n          this.gridObj.selectRows(this.InnerItems(isNOU(indexValue) ? 0 : indexValue, isNOU(focIndex) ? items.length - 1 : focIndex, e));\n        } else {\n          if (isNOU(indexValue)) {\n            this.gridObj.selectRow(0);\n          } else {\n            this.gridObj.selectRows(this.InnerItems(isNOU(focIndex) ? 0 : focIndex, indexValue, e));\n          }\n        }\n      }\n    } else {\n      this.gridObj.selectionModule.selectRow(e.action === 'shiftHome' || e.action === 'csHome' ? 0 : items.length - 1);\n    }\n  };\n\n  DetailsView.prototype.InnerItems = function (fItem, lItem, e) {\n    var itemArr = this.gridObj.getSelectedRowIndexes();\n\n    if (e.action === 'csEnd') {\n      for (var i = fItem + 1; i <= lItem; i++) {\n        itemArr.push(i);\n      }\n    } else {\n      for (var i = lItem - 1; fItem <= i; i--) {\n        itemArr.push(i);\n      }\n    }\n\n    return itemArr;\n  };\n\n  DetailsView.prototype.shiftSelectFocusItem = function (selIndex, fIndex, selRowIndexes, e) {\n    var lItem = fIndex + (e.action === 'shiftDown' || e.action === 'csDown' ? 1 : -1);\n    var fItem = isNOU(this.startIndex) ? selIndex : selRowIndexes[0];\n\n    if (fItem === lItem) {\n      this.gridObj.selectRow(fItem);\n    } else {\n      if (fItem < lItem) {\n        if (e.action === 'shiftDown' || e.action === 'csDown') {\n          this.gridObj.selectionModule.selectRowsByRange(fItem, lItem);\n        } else {\n          this.gridObj.selectionModule.selectRowsByRange(lItem, fItem);\n        }\n      } else if (e.action === 'shiftDown' || e.action === 'csDown') {\n        this.gridObj.selectionModule.selectRowsByRange(lItem, fItem);\n      } else {\n        this.gridObj.selectionModule.selectRowsByRange(fItem, lItem);\n      }\n    }\n\n    this.startIndex = this.gridObj.selectedRowIndex;\n  };\n\n  DetailsView.prototype.addFocus = function (item) {\n    var fItem = this.getFocusedItem();\n    var itemElement = this.gridObj.getRowByIndex(item);\n\n    if (fItem) {\n      fItem.removeAttribute('tabindex');\n      removeClass([fItem], [CLS.FOCUS, CLS.FOCUSED]);\n    }\n\n    if (!isNOU(itemElement)) {\n      this.gridObj.element.setAttribute('tabindex', '-1');\n      itemElement.setAttribute('tabindex', '0');\n      itemElement.focus();\n      addClass([itemElement], [CLS.FOCUS, CLS.FOCUSED]);\n    }\n  };\n\n  DetailsView.prototype.getFocusedItem = function () {\n    return select('.' + CLS.FOCUSED, this.element);\n  };\n\n  DetailsView.prototype.isSelected = function (selRowIndexes, focIndex) {\n    var check = false;\n\n    for (var i = 0; i <= selRowIndexes.length - 1; i++) {\n      if (selRowIndexes[i] === focIndex) {\n        check = true;\n        break;\n      }\n    }\n\n    return check;\n  }; // eslint-disable-next-line\n\n\n  DetailsView.prototype.shiftSelectedItem = function (selIndex, selRowIndexes, gridItems, e) {\n    if (selIndex === -1) {\n      this.gridObj.selectRow(0);\n    } else {\n      if (isNOU(this.startIndex) && e.shiftKey) {\n        this.startIndex = this.gridObj.selectedRowIndex;\n        this.gridObj.selectRows([selIndex, e.action === 'shiftDown' || e.action === 'csDown' ? selIndex + (selIndex !== gridItems.length - 1 ? 1 : 0) : selIndex - (selIndex !== 0 ? 1 : 0)]);\n      } else {\n        if (e.action === 'shiftDown' || e.action === 'shiftUp') {\n          if (e.action === 'shiftDown' && selRowIndexes.indexOf(selIndex + 1) === -1) {\n            if (selIndex !== gridItems.length - 1) {\n              selRowIndexes.push(selIndex + 1);\n            }\n          } else if (e.action === 'shiftUp' && selRowIndexes.indexOf(selIndex - 1) === -1) {\n            if (selIndex !== 0) {\n              selRowIndexes.push(selIndex - 1);\n            }\n          } else {\n            selRowIndexes.pop();\n          }\n\n          this.gridObj.selectRows(selRowIndexes);\n        } else {\n          if (e.action === 'csDown') {\n            if (!this.isSelected(selRowIndexes, this.getFocusedItemIndex() + 1)) {\n              selRowIndexes.push(this.getFocusedItemIndex() + 1);\n              this.gridObj.selectRows(selRowIndexes);\n            } else {\n              this.addFocus(this.getFocusedItemIndex() + 1);\n            }\n          } else if (!this.isSelected(selRowIndexes, this.getFocusedItemIndex() - 1)) {\n            selRowIndexes.push(this.getFocusedItemIndex() - 1);\n            this.gridObj.selectRows(selRowIndexes);\n          } else {\n            this.addFocus(this.getFocusedItemIndex() - 1);\n          }\n        }\n      }\n    }\n  }; // eslint-disable-next-line\n\n\n  DetailsView.prototype.onMethodCall = function (e) {\n    if (this.parent.view !== 'Details') {\n      return;\n    }\n\n    var action = getValue('action', e);\n\n    switch (action) {\n      case 'deleteFiles':\n        this.deleteFiles(getValue('ids', e));\n        break;\n\n      case 'downloadFiles':\n        this.downloadFiles(getValue('ids', e));\n        break;\n\n      case 'openFile':\n        this.openFile(getValue('id', e));\n        break;\n\n      case 'createFolder':\n        this.interaction = false;\n        break;\n\n      case 'renameFile':\n        this.interaction = false;\n        this.renameFile(getValue('id', e), getValue('newName', e));\n        break;\n\n      case 'selectAll':\n        this.interaction = false;\n        this.onSelectAllInit();\n        break;\n\n      case 'clearSelection':\n        this.interaction = false;\n        this.onClearAllInit();\n        break;\n    }\n  }; // eslint-disable-next-line\n\n\n  DetailsView.prototype.getRecords = function (nodes) {\n    // eslint-disable-next-line\n    var gridRecords = this.gridObj.getCurrentViewRecords(); // eslint-disable-next-line\n\n    var records = [];\n    var hasFilter = this.parent.breadcrumbbarModule.searchObj.element.value !== '' || this.parent.isFiltered ? true : false;\n    var filter = this.parent.hasId ? 'id' : 'name';\n\n    if (this.parent.hasId || !hasFilter) {\n      for (var i = 0, len = gridRecords.length; i < len; i++) {\n        if (nodes.indexOf(getValue(filter, gridRecords[i])) !== -1) {\n          records.push(gridRecords[i]);\n        }\n      }\n    } else {\n      for (var i = 0, len = gridRecords.length; i < len; i++) {\n        var name_4 = getValue('filterPath', gridRecords[i]) + getValue('name', gridRecords[i]);\n\n        if (nodes.indexOf(name_4) !== -1) {\n          records.push(gridRecords[i]);\n        }\n      }\n    }\n\n    return records;\n  };\n\n  DetailsView.prototype.deleteFiles = function (ids) {\n    this.parent.activeModule = 'detailsview';\n\n    if (isNOU(ids)) {\n      this.performDelete();\n      return;\n    } // eslint-disable-next-line\n\n\n    var records = this.getRecords(ids);\n\n    if (records.length === 0) {\n      return;\n    } // eslint-disable-next-line\n\n\n    var data = [];\n    var newIds = [];\n\n    for (var i = 0; i < records.length; i++) {\n      data[i] = records[i];\n      newIds[i] = getItemName(this.parent, data[i]);\n    }\n\n    doDeleteFiles(this.parent, data, newIds);\n  };\n\n  DetailsView.prototype.downloadFiles = function (ids) {\n    if (isNOU(ids)) {\n      this.doDownload();\n      return;\n    } // eslint-disable-next-line\n\n\n    var dRecords = this.getRecords(ids);\n\n    if (dRecords.length === 0) {\n      return;\n    } // eslint-disable-next-line\n\n\n    var data = [];\n    var newIds = [];\n\n    for (var i = 0; i < dRecords.length; i++) {\n      data[i] = dRecords[i];\n      newIds[i] = getItemName(this.parent, data[i]);\n    }\n\n    doDownloadFiles(this.parent, data, newIds);\n  };\n\n  DetailsView.prototype.openFile = function (id) {\n    if (isNOU(id)) {\n      return;\n    } // eslint-disable-next-line\n\n\n    var records = this.getRecords([id]);\n\n    if (records.length > 0) {\n      this.openContent(records[0]);\n    }\n  };\n\n  DetailsView.prototype.renameFile = function (id, name) {\n    this.parent.activeModule = 'detailsview';\n\n    if (isNOU(id)) {\n      this.performRename();\n      return;\n    } // eslint-disable-next-line\n\n\n    var records = this.getRecords([id]);\n\n    if (records.length > 0) {\n      updateRenamingData(this.parent, records[0]);\n\n      if (!isNOU(name)) {\n        if (hasEditAccess(this.parent.itemData[0])) {\n          rename(this.parent, this.parent.path, name);\n        } else {\n          createDeniedDialog(this.parent, this.parent.itemData[0], events.permissionEdit);\n        }\n      } else {\n        doRename(this.parent);\n      }\n    }\n  };\n\n  return DetailsView;\n}();\n\nexport { DetailsView };","map":{"version":3,"sources":["/Users/yasaman/Documents/moj_adminpanel/adminpanel/node_modules/@syncfusion/ej2-filemanager/src/file-manager/layout/details-view.js"],"names":["Grid","Resize","ContextMenu","Sort","VirtualScroll","select","KeyboardEvents","EventHandler","getValue","isNullOrUndefined","isNOU","Touch","setValue","addClass","removeClass","Internationalization","closest","Draggable","DataManager","Query","hideSpinner","showSpinner","events","CLS","createDialog","createImageDialog","removeBlur","openAction","getImageUrl","fileType","getSortedData","getLocaleText","updateLayout","createEmptyElement","read","Download","GetDetails","Delete","cutFiles","addBlur","openSearchFolder","copyFiles","removeActive","pasteHandler","getPathObject","getName","hasReadAccess","hasEditAccess","hasDownloadAccess","doRename","getAccessClass","createDeniedDialog","rename","createVirtualDragElement","dragStopHandler","dragStartHandler","draggingHandler","getModule","getFullPath","getDirectoryPath","updateRenamingData","getItemName","doDeleteFiles","doDownloadFiles","DetailsView","parent","isInteracted","interaction","isPasteOperation","isColumnRefresh","dragObj","startIndex","firstItemIndex","isSelectionUpdate","currentSelectedItem","count","isRendered","isLoaded","isNameWidth","pasteOperation","uploadOperation","Inject","element","id","GRID_ID","addEventListener","keyConfigs","altEnter","esc","tab","moveDown","ctrlEnd","ctrlHome","ctrlDown","ctrlLeft","ctrlRight","shiftEnd","shiftHome","shiftDown","shiftUp","ctrlUp","csEnd","csHome","csDown","csUp","space","ctrlSpace","shiftSpace","csSpace","end","home","moveUp","del","ctrlX","ctrlC","ctrlV","ctrlShiftN","shiftdel","ctrlD","f2","ctrlA","enter","prototype","render","args","view","MULTI_SELECT","items","files","checkNameWidth","columns","getColumns","sortSettings","isMobile","sortOrder","direction","field","sortBy","gridObj","dataSource","allowSorting","rowSelecting","onSelection","bind","rowDeselecting","rowSelected","onSelected","rowDeselected","onDeSelection","allowResizing","detailsViewSettings","columnResizing","selectionSettings","type","allowMultiSelection","checkboxMode","enableRtl","pageSettings","pageSize","allowUnsort","recordDoubleClick","DblClickEvents","beforeDataBound","onBeforeDataBound","dataBound","onDataBound","rowDataBound","onRowDataBound","actionBegin","onActionBegin","headerCellInfo","onHeaderCellInfo","width","beforeCopy","cancel","load","focusModule","destroy","locale","isStringTemplate","appendTo","wireEvents","adjustHeight","emptyArgs","initialColumn","i","length","adjustWidth","fieldName","nameWidth","breadcrumbbarModule","searchObj","value","isFiltered","clientWidth","headerText","minWidth","headerTextAlign","template","JSON","parse","stringify","len","iWidth","isBigger","icon","customAttributes","class","headerTemplate","unshift","cWidth","cBox","push","disableHtmlEncode","enableHtmlSanitizer","pane","CONTENT_ID","bar","BREADCRUMBBAR_ID","gridHeader","GRID_HEADER","height","offsetHeight","dataBind","renderCheckBox","refreshColumns","td","row","children","setAttribute","data","isLayoutChange","isCut","fileAction","selectedNodes","indexOf","showFileExtension","textEle","querySelector","name_1","innerHTML","substr","undefined","sizeEle","modifiedSize","sizeValue","intl","formatNumber","format","dateEle","formattedString","formatDate","Date","checkWrap","CB_WRAP","classList","add","className","eventArgs","fileDetails","module","trigger","requestType","setProperties","columnName","selectedItems","sortItem","rows","getSelectedRowIndexes","sortSelectedNodes","getRowsObject","hasId","notify","sortByChange","node","result","createDragObj","selectRecords","pasteNodes","createdItem","layoutSelectedItems","renamedItem","addSelection","uploadItem","currentViewData","getRowHeight","hdTable","getHeaderContent","style","paddingRight","paddingLeft","hdContent","borderRightWidth","cnTable","getContent","overflowY","remove","checkEmptyDiv","nodes","gridRecords","getCurrentViewRecords","sRecords","selectRows","addFocus","selectedRowIndex","rData","executeLocal","where","renamedId","nData","filterPath","index","onSortColumn","sortModule","sortColumn","onPropertyChanged","e","getModuleName","_i","_a","Object","keys","newProp","prop","slItems","slice","clearSelection","pathChanged","path","onDetailsResize","onPathChanged","trim","searchedItems","removePathColumn","updatePathColumn","columnData","pathColumn","GRID_VIEW","EMPTY","emptyDiv","removeChild","onOpenInit","activeModule","getSelectedRecords","openContent","rowIndex","rowData","_this","permissionRead","fileOpenArgs","name_2","ICON_IMAGE","imgUrl","val","newPath","pathNames","pathId","itemData","focus","onLayoutChange","hideLayout","DISPLAY_NONE","onSearchFiles","selectionChanged","isRefresh","pop","onFinalizeEnd","onCreateEnd","onRenameInit","updateRenameData","onSelectedData","onDeleteInit","onDeleteEnd","onRefreshEnd","onHideLayout","onSelectAllInit","selectionModule","selectRowsByRange","getRows","selectRow","onClearAllInit","removeSelection","onSelectionChanged","HEADER_CHECK","onLayoutRefresh","onBeforeRequest","onAfterRequest","onUpdateSelectionData","on","finalizeEnd","layoutChange","createEnd","dropInit","onDropInit","detailsInit","onDetailsInit","refreshEnd","search","methodCall","onMethodCall","actionFailure","onActionFailure","modelChanged","deleteInit","deleteEnd","selectedData","renameInit","renameEnd","openInit","openEnd","filterEnd","pasteInit","onPasteInit","selectAllInit","clearAllInit","onPathColumn","beforeRequest","afterRequest","pasteEnd","onpasteEnd","cutCopyInit","oncutCopyInit","menuItemData","onMenuItemData","resizeEnd","onDetailsResizeHandler","splitterResize","layoutRefresh","dropPath","onDropPath","updateSelectionData","removeEventListener","off","getRowInfo","target","folderPath","feParent","dragHelper","dragTarget","sender","dragLi","name","getElementsByClassName","innerText","activeElements","dragData","dragRow","dragPath","getSelectedRows","virtualDragElement","gridHeaderColGroup","firstChild","childNodes","gridContentColGroup","gridHeaderColNames","allowDragAndDrop","cursorAt","dragCursorPosition","distance","enableTailMode","dragArea","ROW","drag","dragStart","dragStop","enableAutoScroll","helper","targetModule","cwdData","dropData","info","isFile","activeRecords","destinationPath","isDestroyed","unWireEvents","updateType","item","folder","FOLDER","action","selectedRecords","triggerSelect","getRowByIndex","lastItemIndex","lastItem","removeAttribute","currentItemText","indexes","multiSelect","isDevice","visitedItem","checkItem","gridSelectNodes","selectSize","record","name_3","wireClickEvent","keyboardModule","keyAction","keyupHandler","eventName","keyboardDownModule","keydownHandler","removeFocus","toBind","proxy_1","ele","clickObj","tap","eve","tapCount","originalEvent","contains","tapHold","preventDefault","getFocusedItemIndex","getFocusedItem","parseInt","getAttribute","gridItems","gridLength","focItem","focIndex","selIndex","selRowIndeces","firstItem","performDelete","doDownload","performRename","crtSrlPos","scrollTop","crtFocusIndex","checkRowsKey","spaceSelection","shiftMoveMethod","moveFunction","ctrlMoveFunction","permissionDownload","permissionEdit","isSelected","shiftSelectFocusItem","shiftSelectedItem","lItem","nextItem","nextIndex","indexValue","checkAllRows","InnerItems","fItem","itemArr","fIndex","selRowIndexes","itemElement","FOCUS","FOCUSED","check","shiftKey","deleteFiles","downloadFiles","openFile","renameFile","getRecords","records","hasFilter","filter","name_4","ids","newIds","dRecords"],"mappings":"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","sourcesContent":["import { Grid, Resize, ContextMenu, Sort, VirtualScroll } from '@syncfusion/ej2-grids';\nimport { select, KeyboardEvents, EventHandler, getValue, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined as isNOU, Touch, setValue, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { Internationalization, closest, Draggable } from '@syncfusion/ej2-base';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport { hideSpinner, showSpinner } from '@syncfusion/ej2-popups';\nimport * as events from '../base/constant';\nimport * as CLS from '../base/classes';\nimport { createDialog, createImageDialog } from '../pop-up/dialog';\nimport { removeBlur, openAction, getImageUrl, fileType, getSortedData, getLocaleText, updateLayout } from '../common/utility';\nimport { createEmptyElement } from '../common/utility';\nimport { read, Download, GetDetails, Delete } from '../common/operations';\nimport { cutFiles, addBlur, openSearchFolder, copyFiles, removeActive, pasteHandler, getPathObject, getName } from '../common/index';\nimport { hasReadAccess, hasEditAccess, hasDownloadAccess, doRename, getAccessClass, createDeniedDialog, rename } from '../common/index';\nimport { createVirtualDragElement, dragStopHandler, dragStartHandler, draggingHandler, getModule, getFullPath } from '../common/index';\nimport { getDirectoryPath, updateRenamingData, getItemName, doDeleteFiles, doDownloadFiles } from '../common/index';\n/**\n * DetailsView module\n */\nvar DetailsView = /** @class */ (function () {\n    /**\n     * Constructor for the GridView module\n     *\n     * @param {FileManager} parent - specifies the parent.\n     * @hidden\n     */\n    function DetailsView(parent) {\n        this.isInteracted = true;\n        this.interaction = true;\n        this.isPasteOperation = false;\n        this.isColumnRefresh = false;\n        this.dragObj = null;\n        this.startIndex = null;\n        this.firstItemIndex = null;\n        this.isSelectionUpdate = false;\n        this.currentSelectedItem = [];\n        this.count = 0;\n        this.isRendered = true;\n        this.isLoaded = false;\n        this.isNameWidth = false;\n        this.pasteOperation = false;\n        this.uploadOperation = false;\n        Grid.Inject(Resize, ContextMenu, Sort, VirtualScroll);\n        this.parent = parent;\n        this.element = select('#' + this.parent.element.id + CLS.GRID_ID, this.parent.element);\n        this.addEventListener();\n        this.keyConfigs = {\n            altEnter: 'alt+enter',\n            esc: 'escape',\n            tab: 'tab',\n            moveDown: 'downarrow',\n            ctrlEnd: 'ctrl+end',\n            ctrlHome: 'ctrl+home',\n            ctrlDown: 'ctrl+downarrow',\n            ctrlLeft: 'ctrl+leftarrow',\n            ctrlRight: 'ctrl+rightarrow',\n            shiftEnd: 'shift+end',\n            shiftHome: 'shift+home',\n            shiftDown: 'shift+downarrow',\n            shiftUp: 'shift+uparrow',\n            ctrlUp: 'ctrl+uparrow',\n            csEnd: 'ctrl+shift+end',\n            csHome: 'ctrl+shift+home',\n            csDown: 'ctrl+shift+downarrow',\n            csUp: 'ctrl+shift+uparrow',\n            space: 'space',\n            ctrlSpace: 'ctrl+space',\n            shiftSpace: 'shift+space',\n            csSpace: 'ctrl+shift+space',\n            end: 'end',\n            home: 'home',\n            moveUp: 'uparrow',\n            del: 'delete',\n            ctrlX: 'ctrl+x',\n            ctrlC: 'ctrl+c',\n            ctrlV: 'ctrl+v',\n            ctrlShiftN: 'ctrl+shift+n',\n            shiftdel: 'shift+delete',\n            ctrlD: 'ctrl+d',\n            f2: 'f2',\n            ctrlA: 'ctrl+a',\n            enter: 'enter'\n        };\n    }\n    /* istanbul ignore next */\n    DetailsView.prototype.render = function (args) {\n        showSpinner(this.parent.element);\n        if (this.parent.view === 'Details') {\n            removeClass([this.parent.element], CLS.MULTI_SELECT);\n            // eslint-disable-next-line\n            var items = getSortedData(this.parent, args.files);\n            this.checkNameWidth();\n            var columns = this.getColumns();\n            var sortSettings = void 0;\n            if (this.parent.isMobile) {\n                sortSettings = [];\n            }\n            else {\n                if (this.parent.sortOrder !== 'None') {\n                    sortSettings = [{ direction: this.parent.sortOrder, field: this.parent.sortBy }];\n                }\n            }\n            this.gridObj = new Grid({\n                dataSource: items,\n                allowSorting: true,\n                rowSelecting: this.onSelection.bind(this, 'select'),\n                rowDeselecting: this.onSelection.bind(this, 'unselect'),\n                rowSelected: this.onSelected.bind(this),\n                rowDeselected: this.onDeSelection.bind(this),\n                allowResizing: this.parent.detailsViewSettings.columnResizing,\n                selectionSettings: {\n                    type: this.parent.allowMultiSelection ? 'Multiple' : 'Single',\n                    checkboxMode: 'ResetOnRowClick'\n                },\n                enableRtl: this.parent.enableRtl,\n                pageSettings: { pageSize: 20 },\n                sortSettings: { allowUnsort: false, columns: sortSettings },\n                columns: columns,\n                recordDoubleClick: this.DblClickEvents.bind(this),\n                beforeDataBound: this.onBeforeDataBound.bind(this),\n                dataBound: this.onDataBound.bind(this),\n                rowDataBound: this.onRowDataBound.bind(this),\n                actionBegin: this.onActionBegin.bind(this),\n                headerCellInfo: this.onHeaderCellInfo.bind(this),\n                width: '100%',\n                beforeCopy: function (args) { args.cancel = true; },\n                // eslint-disable-next-line\n                load: function (args) {\n                    this.focusModule.destroy();\n                },\n                locale: this.parent.locale\n            });\n            this.gridObj.isStringTemplate = true;\n            this.gridObj.appendTo('#' + this.parent.element.id + CLS.GRID_ID);\n            this.wireEvents();\n            this.adjustHeight();\n            this.emptyArgs = args;\n        }\n    };\n    DetailsView.prototype.checkNameWidth = function () {\n        var initialColumn = this.parent.detailsViewSettings.columns;\n        this.isNameWidth = false;\n        for (var i = 0; i < initialColumn.length; i++) {\n            if (initialColumn[i].field === 'name') {\n                this.isNameWidth = !isNOU(initialColumn[i].width);\n                return;\n            }\n        }\n    };\n    DetailsView.prototype.adjustWidth = function (columns, fieldName) {\n        if (this.isNameWidth && (fieldName === 'name')) {\n            return;\n        }\n        for (var i = 0; i < columns.length; i++) {\n            if (columns[i].field === fieldName) {\n                var nameWidth = void 0;\n                if (this.parent.breadcrumbbarModule.searchObj.element.value === '' && !this.parent.isFiltered) {\n                    nameWidth = (this.element.clientWidth <= 500) ? '120px' : 'auto';\n                }\n                else {\n                    nameWidth = (this.element.clientWidth <= 680) ? ((fieldName === 'name') ? '120px' : '180px') : 'auto';\n                }\n                columns[i].width = nameWidth;\n            }\n        }\n    };\n    DetailsView.prototype.getColumns = function () {\n        var columns;\n        if (this.parent.isMobile) {\n            columns = [\n                {\n                    field: 'name', headerText: getLocaleText(this.parent, 'Name'), width: 'auto', minWidth: 120, headerTextAlign: 'Left',\n                    template: '<div class=\"e-fe-text\">${name}</div><div class=\"e-fe-date\">${_fm_modified}</div>' +\n                        '<span class=\"e-fe-size\">${size}</span>'\n                }\n            ];\n        }\n        else {\n            columns = JSON.parse(JSON.stringify(this.parent.detailsViewSettings.columns));\n            this.adjustWidth(columns, 'name');\n            for (var i = 0, len = columns.length; i < len; i++) {\n                columns[i].headerText = getLocaleText(this.parent, columns[i].headerText);\n            }\n        }\n        var iWidth = ((this.parent.isMobile || this.parent.isBigger) ? '54' : '46');\n        var icon = {\n            field: 'type', width: iWidth, minWidth: iWidth, template: '<span class=\"e-fe-icon ${_fm_iconClass}\"></span>',\n            allowResizing: false, allowSorting: true, customAttributes: { class: 'e-fe-grid-icon' },\n            headerTemplate: '<span class=\"e-fe-icon e-fe-folder\"></span>'\n        };\n        columns.unshift(icon);\n        if (this.parent.allowMultiSelection) {\n            var cWidth = (this.parent.isBigger ? '36' : '26');\n            var cBox = {\n                type: 'checkbox', width: cWidth, minWidth: cWidth, customAttributes: { class: 'e-fe-checkbox' },\n                allowResizing: false, allowSorting: false\n            };\n            if (this.parent.isMobile) {\n                columns.push(cBox);\n            }\n            else {\n                columns.unshift(cBox);\n            }\n        }\n        for (var i = 0, len = columns.length; i < len; i++) {\n            columns[i].disableHtmlEncode = !this.parent.enableHtmlSanitizer;\n        }\n        return columns;\n    };\n    DetailsView.prototype.adjustHeight = function () {\n        if (!this.gridObj) {\n            return;\n        }\n        var pane = select('#' + this.parent.element.id + CLS.CONTENT_ID, this.parent.element);\n        var bar = select('#' + this.parent.element.id + CLS.BREADCRUMBBAR_ID, this.parent.element);\n        var gridHeader = select('.' + CLS.GRID_HEADER, this.parent.element);\n        var height = (pane.offsetHeight - bar.offsetHeight - gridHeader.offsetHeight);\n        this.gridObj.height = height;\n        this.gridObj.dataBind();\n    };\n    DetailsView.prototype.renderCheckBox = function () {\n        this.gridObj.columns = this.getColumns();\n        this.isColumnRefresh = true;\n        this.gridObj.refreshColumns();\n    };\n    DetailsView.prototype.onRowDataBound = function (args) {\n        var td = select('.e-fe-grid-name', args.row);\n        if (!td) {\n            var columns = this.parent.detailsViewSettings.columns;\n            for (var i = 0; i < columns.length; i++) {\n                if (columns[i].field === 'name') {\n                    td = args.row.children[this.parent.allowMultiSelection ? (i + 2) : (i + 1)];\n                    break;\n                }\n            }\n        }\n        if (td) {\n            td.setAttribute('title', getValue('name', args.data));\n        }\n        if (this.parent.isLayoutChange && this.parent.isCut && this.parent.fileAction === 'move' &&\n            this.parent.selectedNodes && this.parent.selectedNodes.length !== 0) {\n            if (this.parent.selectedNodes.indexOf(getValue('name', args.data)) !== -1) {\n                addBlur(args.row);\n            }\n        }\n        if (!this.parent.showFileExtension && getValue('isFile', args.data)) {\n            var textEle = args.row.querySelector('.e-fe-text');\n            if (textEle) {\n                var name_1 = getValue('name', args.data);\n                var type = getValue('type', args.data);\n                textEle.innerHTML = name_1.substr(0, name_1.length - type.length);\n            }\n        }\n        if (getValue('size', args.data) !== undefined && args.row.querySelector('.e-fe-size')) {\n            var sizeEle = args.row.querySelector('.e-fe-size');\n            var modifiedSize = void 0;\n            if (!getValue('isFile', args.data)) {\n                modifiedSize = '';\n            }\n            else {\n                var sizeValue = getValue('size', args.data);\n                var intl = new Internationalization(this.parent.locale);\n                var value = intl.formatNumber((sizeValue / 1024), { format: 'n' });\n                modifiedSize = value + ' ' + getLocaleText(this.parent, 'KB');\n            }\n            sizeEle.innerHTML = modifiedSize;\n        }\n        if (this.parent.isMobile) {\n            if (getValue('_fm_modified', args.data) !== undefined && args.row.querySelector('.e-fe-date')) {\n                var dateEle = args.row.querySelector('.e-fe-date');\n                var intl = new Internationalization(this.parent.locale);\n                var columns = this.parent.detailsViewSettings.columns;\n                // eslint-disable-next-line\n                var format = void 0;\n                for (var i = 0; i < columns.length; i++) {\n                    if (columns[i].field === 'dateModified') {\n                        format = columns[i].format;\n                        break;\n                    }\n                }\n                var formattedString = intl.formatDate(new Date(getValue('_fm_modified', args.data)), format);\n                dateEle.innerHTML = formattedString;\n            }\n        }\n        var checkWrap = args.row.querySelector('.' + CLS.CB_WRAP);\n        if (checkWrap) {\n            checkWrap.classList.add('e-small');\n        }\n        if (!hasEditAccess(args.data)) {\n            args.row.className += ' ' + getAccessClass(args.data);\n        }\n        var eventArgs = {\n            element: args.row,\n            fileDetails: args.data,\n            module: 'DetailsView'\n        };\n        this.parent.trigger('fileLoad', eventArgs);\n    };\n    DetailsView.prototype.onActionBegin = function (args) {\n        if (args.requestType === 'sorting') {\n            this.parent.setProperties({ sortOrder: args.direction }, true);\n            this.parent.setProperties({ sortBy: args.columnName }, true);\n            if (this.parent.selectedItems.length !== 0) {\n                this.sortItem = true;\n                var rows = this.gridObj.getSelectedRowIndexes();\n                var len = rows.length;\n                this.sortSelectedNodes = [];\n                while (len > 0) {\n                    // eslint-disable-next-line\n                    var data = this.gridObj.getRowsObject()[rows[len - 1]].data;\n                    this.sortSelectedNodes.push(getValue(this.parent.hasId ? 'id' : 'name', data));\n                    len--;\n                }\n            }\n            this.parent.notify(events.sortByChange, {});\n        }\n    };\n    DetailsView.prototype.onHeaderCellInfo = function (args) {\n        var checkWrap = args.node.querySelector('.' + CLS.CB_WRAP);\n        if (checkWrap) {\n            checkWrap.classList.add('e-small');\n        }\n    };\n    DetailsView.prototype.onBeforeDataBound = function (args) {\n        showSpinner(this.parent.element);\n        // eslint-disable-next-line\n        var items = getSortedData(this.parent, this.gridObj.dataSource);\n        args.result = items;\n    };\n    /* istanbul ignore next */\n    DetailsView.prototype.onDataBound = function () {\n        this.createDragObj();\n        if (this.parent.selectedItems.length !== 0) {\n            this.selectRecords(this.parent.selectedItems);\n        }\n        if (this.isPasteOperation === true) {\n            if (!this.isColumnRefresh) {\n                this.selectRecords(this.parent.pasteNodes);\n                this.isPasteOperation = false;\n            }\n            else {\n                this.isColumnRefresh = false;\n            }\n        }\n        if (this.parent.createdItem) {\n            this.selectRecords([getValue(this.parent.hasId ? 'id' : 'name', this.parent.createdItem)]);\n            this.parent.createdItem = null;\n        }\n        if (this.parent.layoutSelectedItems.length) {\n            this.selectRecords(this.parent.layoutSelectedItems);\n        }\n        if (this.parent.renamedItem) {\n            this.addSelection(this.parent.renamedItem);\n            this.parent.renamedItem = null;\n        }\n        if (this.sortItem === true) {\n            this.selectRecords(this.sortSelectedNodes);\n            this.sortItem = false;\n        }\n        if (this.isSelectionUpdate) {\n            if (!this.isColumnRefresh) {\n                this.selectRecords(this.currentSelectedItem);\n                this.isSelectionUpdate = false;\n            }\n            else {\n                this.isColumnRefresh = false;\n            }\n        }\n        if (this.uploadOperation === true) {\n            this.count++;\n            this.selectRecords(this.parent.uploadItem);\n            if (this.count === this.parent.uploadItem.length) {\n                this.uploadOperation = false;\n                this.parent.uploadItem = [];\n            }\n        }\n        if (this.gridObj.currentViewData.length * this.gridObj.getRowHeight() < this.gridObj.height) {\n            var hdTable = this.gridObj.getHeaderContent();\n            hdTable.style.paddingRight = '';\n            hdTable.style.paddingLeft = '';\n            var hdContent = select('.e-headercontent', hdTable);\n            hdContent.style.borderRightWidth = '0';\n            var cnTable = this.gridObj.getContent().querySelector('.e-content');\n            cnTable.style.overflowY = '';\n            cnTable.classList.add('e-scrollShow');\n        }\n        else {\n            var hdTable = this.gridObj.getHeaderContent();\n            if (!this.parent.enableRtl) {\n                hdTable.style.paddingRight = '16px';\n            }\n            else {\n                hdTable.style.paddingLeft = '16px';\n            }\n            var cnTable = this.gridObj.getContent().querySelector('.e-content');\n            cnTable.classList.remove('e-scrollShow');\n        }\n        this.isRendered = true;\n        this.parent.isLayoutChange = false;\n        hideSpinner(this.parent.element);\n        this.checkEmptyDiv(this.emptyArgs);\n        this.isInteracted = this.isLoaded ? true : this.isInteracted;\n        this.isLoaded = false;\n    };\n    DetailsView.prototype.selectRecords = function (nodes) {\n        // eslint-disable-next-line\n        var gridRecords = this.gridObj.getCurrentViewRecords();\n        var sRecords = [];\n        for (var i = 0, len = gridRecords.length; i < len; i++) {\n            var node = this.parent.hasId ? getValue('id', gridRecords[i]) : getName(this.parent, gridRecords[i]);\n            if (nodes.indexOf(node) !== -1) {\n                sRecords.push(i);\n            }\n        }\n        if (sRecords.length !== 0) {\n            this.gridObj.selectRows(sRecords);\n            this.addFocus(this.gridObj.selectedRowIndex);\n        }\n    };\n    // eslint-disable-next-line\n    DetailsView.prototype.addSelection = function (data) {\n        // eslint-disable-next-line\n        var items = this.gridObj.getCurrentViewRecords();\n        // eslint-disable-next-line\n        var rData = [];\n        if (this.parent.hasId) {\n            rData = new DataManager(items).\n                executeLocal(new Query().where('id', 'equal', this.parent.renamedId, false));\n        }\n        else {\n            // eslint-disable-next-line\n            var nData = new DataManager(items).\n                executeLocal(new Query().where('name', 'equal', getValue('name', data), false));\n            if (nData.length > 0) {\n                rData = new DataManager(nData).\n                    executeLocal(new Query().where('filterPath', 'equal', this.parent.filterPath, false));\n            }\n        }\n        if (rData.length > 0) {\n            var index = items.indexOf(rData[0]);\n            this.gridObj.selectRows([index]);\n        }\n    };\n    DetailsView.prototype.onSortColumn = function () {\n        if (this.parent.sortOrder !== 'None') {\n            this.gridObj.sortModule.sortColumn(this.parent.sortBy, this.parent.sortOrder);\n        }\n        else {\n            // eslint-disable-next-line\n            this.gridObj.dataSource = getSortedData(this.parent, this.gridObj.dataSource);\n        }\n    };\n    DetailsView.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName() && e.module !== 'common') {\n            /* istanbul ignore next */\n            return;\n        }\n        for (var _i = 0, _a = Object.keys(e.newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'allowDragAndDrop':\n                    this.createDragObj();\n                    break;\n                case 'height':\n                    this.adjustHeight();\n                    break;\n                case 'detailsViewSettings':\n                    if (!isNullOrUndefined(this.gridObj)) {\n                        this.checkNameWidth();\n                        var columns = this.getColumns();\n                        this.gridObj.columns = columns;\n                        this.gridObj.allowResizing = this.parent.detailsViewSettings.columnResizing;\n                        this.gridObj.dataBind();\n                        this.gridObj.refreshColumns();\n                    }\n                    break;\n                case 'selectedItems':\n                    this.interaction = false;\n                    if (this.parent.selectedItems.length !== 0) {\n                        if (!this.parent.allowMultiSelection) {\n                            var slItems = this.parent.selectedItems.slice(this.parent.selectedItems.length - 1);\n                            this.parent.setProperties({ selectedItems: slItems }, true);\n                        }\n                        this.selectRecords(this.parent.selectedItems);\n                        this.parent.setProperties({ selectedItems: this.parent.selectedItems }, true);\n                    }\n                    else if (!isNOU(this.gridObj)) {\n                        this.gridObj.clearSelection();\n                    }\n                    break;\n                case 'showFileExtension':\n                    read(this.parent, events.pathChanged, this.parent.path);\n                    break;\n                case 'showHiddenItems':\n                    read(this.parent, events.pathChanged, this.parent.path);\n                    break;\n                case 'allowMultiSelection':\n                    if (!isNullOrUndefined(this.gridObj)) {\n                        this.currentSelectedItem = this.parent.selectedItems;\n                        this.gridObj.selectionSettings.type = e.newProp.allowMultiSelection ? 'Multiple' : 'Single';\n                        this.isSelectionUpdate = true;\n                        this.renderCheckBox();\n                    }\n                    break;\n                case 'view':\n                    updateLayout(this.parent, 'Details');\n                    break;\n                case 'width':\n                    this.onDetailsResize();\n            }\n        }\n    };\n    DetailsView.prototype.onPathChanged = function (args) {\n        this.parent.isCut = false;\n        if (this.parent.breadcrumbbarModule.searchObj.element.value.trim() === '' && this.gridObj) {\n            this.parent.searchedItems = [];\n            if (!this.parent.isFiltered) {\n                this.removePathColumn(false);\n            }\n            else {\n                this.updatePathColumn();\n            }\n        }\n        removeBlur(this.parent);\n        if (this.parent.view === 'Details') {\n            /* istanbul ignore next */\n            this.isInteracted = false;\n            showSpinner(this.parent.element);\n            this.parent.setProperties({ selectedItems: [] }, true);\n            this.gridObj.dataSource = getSortedData(this.parent, args.files);\n        }\n        this.emptyArgs = args;\n    };\n    DetailsView.prototype.updatePathColumn = function () {\n        var len = this.gridObj.columns.length;\n        var columnData = JSON.parse(JSON.stringify(this.gridObj.columns));\n        if (columnData[len - 1].field && columnData[len - 1].field !== 'filterPath' && !this.parent.isMobile) {\n            var pathColumn = {\n                field: 'filterPath', headerText: getLocaleText(this.parent, 'Path'), minWidth: 180, width: 'auto'\n            };\n            this.gridObj.columns.push(pathColumn);\n            this.adjustWidth(this.gridObj.columns, 'filterPath');\n            this.adjustWidth(this.gridObj.columns, 'name');\n            this.isColumnRefresh = true;\n            this.gridObj.refreshColumns();\n        }\n    };\n    DetailsView.prototype.checkEmptyDiv = function (args) {\n        // eslint-disable-next-line\n        var items = getSortedData(this.parent, args.files);\n        if (items.length === 0 && !isNOU(this.element.querySelector('.' + CLS.GRID_VIEW))) {\n            createEmptyElement(this.parent, this.element, args);\n        }\n        else if (items.length !== 0 && this.element.querySelector('.' + CLS.EMPTY)) {\n            if (this.element.querySelector('.' + CLS.GRID_VIEW).querySelector('.' + CLS.EMPTY)) {\n                var emptyDiv = this.element.querySelector('.' + CLS.GRID_VIEW).querySelector('.' + CLS.EMPTY);\n                this.element.querySelector('.' + CLS.GRID_VIEW).removeChild(emptyDiv);\n            }\n            else {\n                this.element.removeChild(this.element.querySelector('.' + CLS.EMPTY));\n            }\n        }\n    };\n    DetailsView.prototype.onOpenInit = function () {\n        if (this.parent.activeModule === 'detailsview') {\n            // eslint-disable-next-line\n            var data = this.gridObj.getSelectedRecords()[0];\n            this.openContent(data);\n        }\n    };\n    DetailsView.prototype.DblClickEvents = function (args) {\n        this.gridObj.selectRows([args.rowIndex]);\n        // eslint-disable-next-line\n        var data;\n        if (args.rowData) {\n            data = JSON.parse(JSON.stringify(args.rowData));\n            this.openContent(data);\n        }\n    };\n    // eslint-disable-next-line\n    DetailsView.prototype.openContent = function (data) {\n        var _this = this;\n        if (!hasReadAccess(data)) {\n            createDeniedDialog(this.parent, data, events.permissionRead);\n            return;\n        }\n        var eventArgs = { cancel: false, fileDetails: data, module: 'DetailsView' };\n        this.parent.trigger('fileOpen', eventArgs, function (fileOpenArgs) {\n            if (!fileOpenArgs.cancel) {\n                var name_2 = getValue('name', data);\n                if (getValue('isFile', data)) {\n                    var icon = fileType(data);\n                    if (icon === CLS.ICON_IMAGE) {\n                        var imgUrl = getImageUrl(_this.parent, data);\n                        createImageDialog(_this.parent, name_2, imgUrl);\n                    }\n                }\n                else {\n                    var val = _this.parent.breadcrumbbarModule.searchObj.element.value;\n                    if (val === '' && !_this.parent.isFiltered) {\n                        var id = getValue('id', data);\n                        var newPath = _this.parent.path + (isNOU(id) ? name_2 : id) + '/';\n                        _this.parent.setProperties({ path: newPath }, true);\n                        _this.parent.pathNames.push(name_2);\n                        _this.parent.pathId.push(getValue('_fm_id', data));\n                        _this.parent.itemData = [data];\n                        openAction(_this.parent);\n                    }\n                    else {\n                        openSearchFolder(_this.parent, data);\n                    }\n                    _this.parent.isFiltered = false;\n                }\n                _this.element.focus();\n            }\n        });\n    };\n    /* istanbul ignore next */\n    DetailsView.prototype.onLayoutChange = function (args) {\n        if (this.parent.view === 'Details') {\n            if (!this.gridObj) {\n                this.render(args);\n            }\n            else {\n                this.isLoaded = true;\n            }\n            if (this.parent.isFiltered) {\n                this.updatePathColumn();\n                this.parent.setProperties({ selectedItems: [] }, true);\n            }\n            this.gridObj.dataSource = getSortedData(this.parent, args.files);\n            this.parent.notify(events.hideLayout, {});\n            this.gridObj.element.classList.remove(CLS.DISPLAY_NONE);\n            this.isInteracted = false;\n            this.gridObj.clearSelection();\n            if (this.parent.breadcrumbbarModule.searchObj.element.value.trim() !== '') {\n                this.onSearchFiles(args);\n            }\n            this.adjustHeight();\n            if (this.gridObj.sortSettings.columns.length > 0 && this.gridObj.sortSettings.columns[0].field !== this.parent.sortBy) {\n                if (this.parent.sortOrder !== 'None') {\n                    this.gridObj.sortColumn(this.parent.sortBy, this.parent.sortOrder);\n                }\n            }\n        }\n    };\n    /* istanbul ignore next */\n    DetailsView.prototype.onSearchFiles = function (args) {\n        if (this.parent.view === 'Details') {\n            this.parent.setProperties({ selectedItems: [] }, true);\n            this.parent.notify(events.selectionChanged, {});\n            if (!this.parent.isLayoutChange) {\n                this.parent.layoutSelectedItems = [];\n            }\n            this.updatePathColumn();\n            this.parent.searchedItems = args.files;\n            this.onPathChanged(args);\n        }\n    };\n    DetailsView.prototype.removePathColumn = function (isRefresh) {\n        var len = this.gridObj.columns.length;\n        var columnData = JSON.parse(JSON.stringify(this.gridObj.columns));\n        if (columnData[len - 1].field && (columnData[len - 1].field === 'filterPath')) {\n            /* istanbul ignore next */\n            if (this.gridObj.sortSettings.columns[0].field === 'filterPath') {\n                if (this.parent.sortOrder !== 'None') {\n                    this.gridObj.sortColumn('name', this.parent.sortOrder);\n                }\n                else {\n                    // eslint-disable-next-line\n                    this.gridObj.dataSource = getSortedData(this.parent, this.gridObj.dataSource);\n                }\n                this.parent.notify(events.sortByChange, {});\n            }\n            this.gridObj.columns.pop();\n            if (!isRefresh) {\n                this.isColumnRefresh = true;\n                this.gridObj.refreshColumns();\n            }\n        }\n    };\n    DetailsView.prototype.onFinalizeEnd = function (args) {\n        if (this.parent.view !== 'Details') {\n            return;\n        }\n        if (!this.gridObj) {\n            this.render(args);\n        }\n        else {\n            this.onPathChanged(args);\n        }\n    };\n    DetailsView.prototype.onCreateEnd = function (args) {\n        if (this.parent.view !== 'Details') {\n            return;\n        }\n        this.onPathChanged(args);\n    };\n    DetailsView.prototype.onRenameInit = function () {\n        if (this.parent.activeModule === 'detailsview' && this.parent.selectedItems.length === 1) {\n            this.updateRenameData();\n        }\n    };\n    DetailsView.prototype.onSelectedData = function () {\n        if (this.parent.activeModule === 'detailsview') {\n            this.parent.itemData = this.gridObj.getSelectedRecords();\n        }\n    };\n    DetailsView.prototype.onDeleteInit = function () {\n        if (this.parent.activeModule === 'detailsview') {\n            Delete(this.parent, this.parent.selectedItems, this.parent.path, 'delete');\n        }\n    };\n    /* istanbul ignore next */\n    DetailsView.prototype.onDeleteEnd = function (args) {\n        if (this.parent.view !== 'Details') {\n            return;\n        }\n        this.onPathChanged(args);\n        this.parent.setProperties({ selectedItems: [] }, true);\n    };\n    DetailsView.prototype.onRefreshEnd = function (args) {\n        if (this.parent.view !== 'Details') {\n            return;\n        }\n        this.isInteracted = false;\n        this.removePathColumn(false);\n        this.gridObj.dataSource = getSortedData(this.parent, args.files);\n        this.emptyArgs = args;\n    };\n    DetailsView.prototype.onHideLayout = function () {\n        if (this.parent.view !== 'Details' && this.gridObj) {\n            this.gridObj.element.classList.add(CLS.DISPLAY_NONE);\n        }\n    };\n    DetailsView.prototype.onSelectAllInit = function () {\n        if (this.parent.view === 'Details') {\n            this.isInteracted = false;\n            if (this.parent.allowMultiSelection) {\n                this.gridObj.selectionModule.selectRowsByRange(0, this.gridObj.getRows().length);\n            }\n            else {\n                this.gridObj.selectRow(this.gridObj.getRows().length - 1);\n            }\n            this.isInteracted = true;\n            this.interaction = true;\n        }\n    };\n    DetailsView.prototype.onClearAllInit = function () {\n        if (this.parent.view === 'Details') {\n            this.removeSelection();\n            this.interaction = true;\n        }\n    };\n    /* istanbul ignore next */\n    DetailsView.prototype.onSelectionChanged = function () {\n        removeClass([this.element], CLS.HEADER_CHECK);\n        if (this.parent.selectedItems.length > 0) {\n            addClass([this.element], CLS.HEADER_CHECK);\n        }\n    };\n    DetailsView.prototype.onLayoutRefresh = function () {\n        if (this.parent.view !== 'Details') {\n            return;\n        }\n        this.adjustHeight();\n    };\n    DetailsView.prototype.onBeforeRequest = function () {\n        this.isRendered = false;\n    };\n    DetailsView.prototype.onAfterRequest = function () {\n        this.isRendered = true;\n    };\n    DetailsView.prototype.onUpdateSelectionData = function () {\n        if (this.parent.view !== 'Details') {\n            return;\n        }\n        this.parent.itemData = this.gridObj.getSelectedRecords();\n    };\n    DetailsView.prototype.addEventListener = function () {\n        this.parent.on(events.finalizeEnd, this.onFinalizeEnd, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.layoutChange, this.onLayoutChange, this);\n        this.parent.on(events.pathChanged, this.onPathChanged, this);\n        this.parent.on(events.createEnd, this.onCreateEnd, this);\n        this.parent.on(events.dropInit, this.onDropInit, this);\n        this.parent.on(events.detailsInit, this.onDetailsInit, this);\n        this.parent.on(events.refreshEnd, this.onRefreshEnd, this);\n        this.parent.on(events.search, this.onSearchFiles, this);\n        this.parent.on(events.methodCall, this.onMethodCall, this);\n        this.parent.on(events.actionFailure, this.onActionFailure, this);\n        this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.deleteInit, this.onDeleteInit, this);\n        this.parent.on(events.deleteEnd, this.onDeleteEnd, this);\n        this.parent.on(events.selectedData, this.onSelectedData, this);\n        this.parent.on(events.renameInit, this.onRenameInit, this);\n        this.parent.on(events.renameEnd, this.onPathChanged, this);\n        this.parent.on(events.openInit, this.onOpenInit, this);\n        this.parent.on(events.sortColumn, this.onSortColumn, this);\n        this.parent.on(events.openEnd, this.onPathChanged, this);\n        this.parent.on(events.filterEnd, this.onPathChanged, this);\n        this.parent.on(events.pasteInit, this.onPasteInit, this);\n        this.parent.on(events.hideLayout, this.onHideLayout, this);\n        this.parent.on(events.selectAllInit, this.onSelectAllInit, this);\n        this.parent.on(events.clearAllInit, this.onClearAllInit, this);\n        this.parent.on(events.pathColumn, this.onPathColumn, this);\n        this.parent.on(events.selectionChanged, this.onSelectionChanged, this);\n        this.parent.on(events.beforeRequest, this.onBeforeRequest, this);\n        this.parent.on(events.afterRequest, this.onAfterRequest, this);\n        this.parent.on(events.pasteEnd, this.onpasteEnd, this);\n        this.parent.on(events.cutCopyInit, this.oncutCopyInit, this);\n        this.parent.on(events.menuItemData, this.onMenuItemData, this);\n        this.parent.on(events.resizeEnd, this.onDetailsResizeHandler, this);\n        this.parent.on(events.splitterResize, this.onDetailsResize, this);\n        this.parent.on(events.layoutRefresh, this.onLayoutRefresh, this);\n        this.parent.on(events.dropPath, this.onDropPath, this);\n        this.parent.on(events.updateSelectionData, this.onUpdateSelectionData, this);\n    };\n    DetailsView.prototype.removeEventListener = function () {\n        this.parent.off(events.finalizeEnd, this.onFinalizeEnd);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.layoutChange, this.onLayoutChange);\n        this.parent.off(events.pathChanged, this.onPathChanged);\n        this.parent.off(events.pasteInit, this.onPasteInit);\n        this.parent.off(events.createEnd, this.onCreateEnd);\n        this.parent.off(events.refreshEnd, this.onRefreshEnd);\n        this.parent.off(events.search, this.onSearchFiles);\n        this.parent.off(events.methodCall, this.onMethodCall);\n        this.parent.off(events.actionFailure, this.onActionFailure);\n        this.parent.off(events.modelChanged, this.onPropertyChanged);\n        this.parent.off(events.renameInit, this.onRenameInit);\n        this.parent.off(events.renameEnd, this.onPathChanged);\n        this.parent.off(events.filterEnd, this.onPathChanged);\n        this.parent.off(events.openInit, this.onOpenInit);\n        this.parent.off(events.sortColumn, this.onSortColumn);\n        this.parent.off(events.openEnd, this.onPathChanged);\n        this.parent.off(events.hideLayout, this.onHideLayout);\n        this.parent.off(events.selectAllInit, this.onSelectAllInit);\n        this.parent.off(events.clearAllInit, this.onClearAllInit);\n        this.parent.off(events.deleteInit, this.onDeleteInit);\n        this.parent.off(events.deleteEnd, this.onDeleteEnd);\n        this.parent.off(events.pathColumn, this.onPathColumn);\n        this.parent.off(events.selectionChanged, this.onSelectionChanged);\n        this.parent.off(events.beforeRequest, this.onBeforeRequest);\n        this.parent.off(events.afterRequest, this.onAfterRequest);\n        this.parent.off(events.pasteEnd, this.onpasteEnd);\n        this.parent.off(events.cutCopyInit, this.oncutCopyInit);\n        this.parent.off(events.dropInit, this.onDropInit);\n        this.parent.off(events.selectedData, this.onSelectedData);\n        this.parent.off(events.detailsInit, this.onDetailsInit);\n        this.parent.off(events.menuItemData, this.onMenuItemData);\n        this.parent.off(events.resizeEnd, this.onDetailsResizeHandler);\n        this.parent.off(events.splitterResize, this.onDetailsResize);\n        this.parent.off(events.layoutRefresh, this.onLayoutRefresh);\n        this.parent.off(events.dropPath, this.onDropPath);\n        this.parent.off(events.updateSelectionData, this.onUpdateSelectionData);\n    };\n    DetailsView.prototype.onActionFailure = function () { this.interaction = true; };\n    // eslint-disable-next-line\n    DetailsView.prototype.onMenuItemData = function (args) {\n        if (this.parent.activeModule === this.getModuleName()) {\n            this.parent.itemData = [this.gridObj.getRowInfo(args.target).rowData];\n        }\n    };\n    DetailsView.prototype.onPasteInit = function () {\n        if (this.parent.activeModule === this.getModuleName()) {\n            this.parent.itemData = (this.parent.folderPath !== '') ? this.gridObj.getSelectedRecords() :\n                [getPathObject(this.parent)];\n        }\n    };\n    DetailsView.prototype.onDetailsInit = function () {\n        if (this.parent.activeModule === this.getModuleName()) {\n            if (this.parent.selectedItems.length !== 0) {\n                this.parent.itemData = this.gridObj.getSelectedRecords();\n            }\n            else {\n                this.parent.itemData = [getValue(this.parent.pathId[this.parent.pathId.length - 1], this.parent.feParent)];\n            }\n        }\n    };\n    DetailsView.prototype.dragHelper = function (args) {\n        var dragTarget = args.sender.target;\n        var dragLi = dragTarget.closest('tr.e-row');\n        if (!dragLi) {\n            return null;\n        }\n        var name = dragLi.getElementsByClassName('e-fe-text')[0].innerText;\n        if (dragLi && !dragLi.querySelector('.e-active')) {\n            this.selectRecords([name]);\n        }\n        getModule(this.parent, dragLi);\n        this.parent.activeElements = [];\n        this.parent.dragData = [];\n        // eslint-disable-next-line\n        this.parent.dragData = this.gridObj.getSelectedRecords();\n        var dragRow;\n        if (this.parent.dragData.length === 0 && dragLi) {\n            dragRow = this.gridObj.getRowInfo(dragLi);\n        }\n        if (dragRow) {\n            this.parent.dragData.push(dragRow.rowData);\n        }\n        this.parent.dragPath = this.parent.path;\n        this.parent.activeElements = this.gridObj.getSelectedRows();\n        createVirtualDragElement(this.parent);\n        return this.parent.virtualDragElement;\n    };\n    /* istanbul ignore next */\n    DetailsView.prototype.onDetailsResize = function () {\n        if (this.parent.view === 'Details' && !this.parent.isMobile && !isNOU(this.gridObj)) {\n            var gridHeader = this.gridObj.getHeaderContent().querySelector('.e-headercontent');\n            var gridHeaderColGroup = gridHeader.firstChild.childNodes[0];\n            var gridContentColGroup = this.gridObj.getContent().querySelector('.e-content .e-table').children[0];\n            var gridHeaderColNames = this.gridObj.getColumns();\n            for (var i = 0; i < gridHeaderColNames.length; i++) {\n                if ((!this.isNameWidth && gridHeaderColNames[i].field === 'name') || gridHeaderColNames[i].field === 'filterPath') {\n                    if (this.parent.breadcrumbbarModule.searchObj.element.value === '' && !this.parent.isFiltered) {\n                        if (this.element.clientWidth <= 500) {\n                            gridHeaderColGroup.children[i].setAttribute('style', 'width: 120px');\n                            gridContentColGroup.children[i].setAttribute('style', 'width: 120px');\n                        }\n                        else if (this.element.clientWidth > 500) {\n                            gridHeaderColGroup.children[i].setAttribute('style', 'width: auto');\n                            gridContentColGroup.children[i].setAttribute('style', 'width: auto');\n                        }\n                    }\n                    else {\n                        if (this.element.clientWidth <= 680) {\n                            if (gridHeaderColNames[i].field === 'name') {\n                                gridHeaderColGroup.children[i].setAttribute('style', 'width: 120px');\n                                gridContentColGroup.children[i].setAttribute('style', 'width: 120px');\n                            }\n                            else {\n                                gridHeaderColGroup.children[i].setAttribute('style', 'width: 180px');\n                                gridContentColGroup.children[i].setAttribute('style', 'width: 180px');\n                            }\n                        }\n                        else if (this.element.clientWidth > 680) {\n                            gridHeaderColGroup.children[i].setAttribute('style', 'width: auto');\n                            gridContentColGroup.children[i].setAttribute('style', 'width: auto');\n                        }\n                    }\n                }\n            }\n        }\n    };\n    DetailsView.prototype.onDetailsResizeHandler = function () {\n        this.onDetailsResize();\n        if (this.parent.view === 'Details' && !this.parent.isMobile && !isNOU(this.gridObj)) {\n            this.adjustHeight();\n        }\n    };\n    DetailsView.prototype.createDragObj = function () {\n        var _this = this;\n        if (!this.parent.isMobile && this.gridObj) {\n            if (this.parent.allowDragAndDrop) {\n                if (this.dragObj) {\n                    this.dragObj.destroy();\n                }\n                this.dragObj = new Draggable(this.gridObj.element, {\n                    cursorAt: this.parent.dragCursorPosition,\n                    distance: 5,\n                    enableTailMode: true,\n                    dragArea: this.parent.element,\n                    dragTarget: '.' + CLS.ROW,\n                    drag: draggingHandler.bind(this, this.parent),\n                    dragStart: function (args) {\n                        dragStartHandler(_this.parent, args, _this.dragObj);\n                    },\n                    dragStop: dragStopHandler.bind(this, this.parent),\n                    enableAutoScroll: true,\n                    helper: this.dragHelper.bind(this)\n                });\n            }\n            else if (!this.parent.allowDragAndDrop && this.dragObj) {\n                this.dragObj.destroy();\n            }\n        }\n    };\n    DetailsView.prototype.onDropInit = function (args) {\n        if (this.parent.targetModule === this.getModuleName()) {\n            /* istanbul ignore next */\n            // eslint-disable-next-line\n            var cwdData = getValue(this.parent.pathId[this.parent.pathId.length - 1], this.parent.feParent);\n            if (!args.target.closest('tr')) {\n                this.parent.dropPath = this.parent.path;\n                this.parent.dropData = cwdData;\n            }\n            else {\n                // eslint-disable-next-line\n                var info = null;\n                // eslint-disable-next-line\n                info = this.gridObj.getRowInfo(args.target).rowData;\n                this.parent.dropPath = info.isFile ? this.parent.path : getFullPath(this.parent, info, this.parent.path);\n                this.parent.dropData = info.isFile ? cwdData : info;\n            }\n        }\n    };\n    DetailsView.prototype.oncutCopyInit = function () {\n        if (this.parent.activeModule === this.getModuleName()) {\n            this.parent.activeRecords = this.gridObj.getSelectedRecords();\n            this.parent.activeElements = this.gridObj.getSelectedRows();\n        }\n    };\n    DetailsView.prototype.onpasteEnd = function (args) {\n        if (this.parent.view === 'Details') {\n            this.isPasteOperation = true;\n            if (this.parent.path === this.parent.destinationPath || this.parent.path === getDirectoryPath(this.parent, args)) {\n                this.onPathChanged(args);\n            }\n        }\n    };\n    DetailsView.prototype.onDropPath = function (args) {\n        if (this.parent.view === 'Details') {\n            this.isPasteOperation = true;\n            this.onPathChanged(args);\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} - returns modules name.\n     * @private\n     */\n    DetailsView.prototype.getModuleName = function () {\n        return 'detailsview';\n    };\n    DetailsView.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n        if (this.gridObj) {\n            this.unWireEvents();\n            this.gridObj.destroy();\n        }\n    };\n    DetailsView.prototype.updateType = function (item) {\n        var folder = select('.' + CLS.FOLDER, item);\n        this.parent.isFile = isNOU(folder) ? true : false;\n    };\n    /* istanbul ignore next */\n    DetailsView.prototype.onSelection = function (action, args) {\n        var eventArgs = {\n            action: action, fileDetails: args.data, isInteracted: this.interaction, cancel: false, target: args.target\n        };\n        this.parent.trigger('fileSelection', eventArgs);\n        args.cancel = eventArgs.cancel;\n    };\n    /* istanbul ignore next */\n    DetailsView.prototype.onSelected = function (args) {\n        this.parent.activeModule = 'detailsview';\n        if (!this.parent.isLayoutChange || this.parent.isFiltered) {\n            this.selectedRecords();\n        }\n        this.parent.notify(events.selectionChanged, {});\n        if (this.gridObj.getSelectedRowIndexes().length === 1) {\n            this.firstItemIndex = this.gridObj.selectedRowIndex;\n        }\n        this.gridObj.element.setAttribute('tabindex', '-1');\n        this.triggerSelect('select', args);\n        var item = this.gridObj.getRowByIndex(this.gridObj.selectedRowIndex);\n        this.updateType(item);\n        if (!isNOU(item) && !isNOU(item.querySelector('.e-checkselect'))) {\n            if (this.gridObj.getSelectedRowIndexes().length !== 1) {\n                var lastItemIndex = this.gridObj.getSelectedRowIndexes()[this.gridObj.getSelectedRowIndexes().length - 2];\n                var lastItem = this.gridObj.getRowByIndex(lastItemIndex);\n                lastItem.querySelector('.e-checkselect').setAttribute('tabindex', '-1');\n            }\n            item.querySelector('.e-rowcell.e-fe-checkbox').removeAttribute('tabindex');\n        }\n        if (!isNOU(this.gridObj) && !isNOU(this.gridObj.element.querySelector('.e-checkselectall'))) {\n            this.gridObj.element.querySelector('.e-checkselectall').setAttribute('tabindex', '-1');\n        }\n        var rows = this.gridObj.getSelectedRowIndexes();\n        if (!this.parent.allowMultiSelection) {\n            for (var i = 0; i < rows.length; i++) {\n                if (rows[i] === this.gridObj.selectedRowIndex) {\n                    this.gridObj.getRowByIndex(rows[i]).setAttribute('tabindex', '0');\n                }\n                else {\n                    this.gridObj.getRowByIndex(rows[i]).removeAttribute('tabindex');\n                }\n            }\n        }\n        var len = rows.length;\n        if (len > 0) {\n            // eslint-disable-next-line\n            var data = this.gridObj.getRowsObject()[rows[len - 1]].data;\n            this.parent.currentItemText = getValue('name', data);\n        }\n        var indexes = getValue('rowIndexes', args);\n        var multiSelect = getValue('enableSelectMultiTouch', this.gridObj.selectionModule);\n        if (this.parent.isDevice && isNOU(indexes) && args.target && !multiSelect && !args.target.closest('.e-headercell')) {\n            this.parent.isFile = getValue('isFile', args.data);\n            if (!this.parent.isFile) {\n                this.openContent(args.data);\n            }\n        }\n        this.parent.visitedItem = args.row;\n        if (this.parent.allowMultiSelection && !isNOU(item) && !isNOU(item.querySelector('.e-checkselect'))) {\n            var checkItem = item.querySelector('.e-checkselect');\n            checkItem.focus();\n        }\n        this.addFocus(this.gridObj.selectedRowIndex);\n        if (!this.parent.isLayoutChange) {\n            this.isInteracted = true;\n        }\n    };\n    /* istanbul ignore next */\n    DetailsView.prototype.onPathColumn = function () {\n        if (this.parent.view === 'Details' && !isNOU(this.gridObj)) {\n            if (this.parent.breadcrumbbarModule.searchObj.element.value === '' && !this.parent.isFiltered) {\n                this.removePathColumn(false);\n            }\n        }\n    };\n    DetailsView.prototype.selectedRecords = function () {\n        this.parent.setProperties({ selectedItems: [] }, true);\n        // eslint-disable-next-line\n        var selectedRecords = this.gridSelectNodes();\n        var selectSize = 0;\n        while (selectSize < selectedRecords.length) {\n            var record = selectedRecords[selectSize];\n            var name_3 = getItemName(this.parent, record);\n            this.parent.selectedItems.push(name_3);\n            selectSize++;\n        }\n        this.parent.setProperties({ selectedItems: this.parent.selectedItems }, true);\n    };\n    DetailsView.prototype.onDeSelection = function (args) {\n        /* istanbul ignore next */\n        if (!this.parent.allowMultiSelection && isNOU(args.data)) {\n            this.gridObj.getRowByIndex(args.rowIndex).removeAttribute('tabindex');\n        }\n        else if (this.gridObj.getSelectedRowIndexes().length > 1) {\n            var lastItemIndex = this.gridObj.getSelectedRowIndexes()[this.gridObj.getSelectedRowIndexes().length - 2];\n            this.gridObj.getRowByIndex(lastItemIndex).querySelector('.e-checkselect').removeAttribute('tabindex');\n        }\n        if (this.gridObj.selectedRowIndex === -1) {\n            this.gridObj.element.setAttribute('tabindex', '0');\n        }\n        if (!this.isInteracted) {\n            this.isInteracted = true;\n            return;\n        }\n        this.selectedRecords();\n        if (this.parent.selectedItems.length === 0) {\n            setValue('enableSelectMultiTouch', false, this.gridObj.selectionModule);\n            removeClass([this.parent.element], CLS.MULTI_SELECT);\n        }\n        this.parent.notify(events.selectionChanged, {});\n        this.triggerSelect('unselect', args);\n        this.parent.visitedItem = null;\n    };\n    DetailsView.prototype.triggerSelect = function (action, args) {\n        var eventArgs = { action: action, fileDetails: args.data, isInteracted: this.interaction };\n        this.parent.trigger('fileSelect', eventArgs);\n        this.interaction = true;\n    };\n    DetailsView.prototype.wireEvents = function () {\n        this.wireClickEvent(true);\n        this.keyboardModule = new KeyboardEvents(this.gridObj.element, {\n            keyAction: this.keyupHandler.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keyup'\n        });\n        this.keyboardDownModule = new KeyboardEvents(this.element, {\n            keyAction: this.keydownHandler.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n        EventHandler.add(this.gridObj.element, 'blur', this.removeFocus, this);\n    };\n    DetailsView.prototype.unWireEvents = function () {\n        this.wireClickEvent(false);\n        this.keyboardModule.destroy();\n        this.keyboardDownModule.destroy();\n        EventHandler.remove(this.gridObj.element, 'blur', this.removeFocus);\n    };\n    DetailsView.prototype.wireClickEvent = function (toBind) {\n        if (toBind) {\n            // eslint-disable-next-line\n            var proxy_1 = this;\n            var ele = this.gridObj.getContent();\n            this.clickObj = new Touch(ele, {\n                tap: function (eve) {\n                    if (eve.tapCount === 1 && eve.originalEvent.target.classList.contains('e-content')) {\n                        proxy_1.onClearAllInit();\n                    }\n                },\n                tapHold: function (e) {\n                    if (proxy_1.parent.isDevice) {\n                        e.originalEvent.preventDefault();\n                        if (proxy_1.parent.allowMultiSelection) {\n                            setValue('enableSelectMultiTouch', proxy_1.parent.allowMultiSelection, proxy_1.gridObj.selectionModule);\n                            addClass([proxy_1.parent.element], CLS.MULTI_SELECT);\n                        }\n                        var target = e.originalEvent.target;\n                        if (target) {\n                            var row = closest(target, '.' + CLS.ROW);\n                            var index = proxy_1.gridObj.getRows().indexOf(row);\n                            proxy_1.gridObj.selectRow(index);\n                        }\n                    }\n                }\n            });\n        }\n        else {\n            if (this.clickObj) {\n                this.clickObj.destroy();\n            }\n        }\n    };\n    /* istanbul ignore next */\n    DetailsView.prototype.removeSelection = function () {\n        removeClass([this.parent.element], CLS.MULTI_SELECT);\n        this.gridObj.clearSelection();\n        this.parent.setProperties({ selectedItems: [] }, true);\n        this.parent.notify(events.selectionChanged, {});\n        if (this.gridObj.selectedRowIndex === -1) {\n            this.startIndex = null;\n        }\n        this.isInteracted = true;\n    };\n    DetailsView.prototype.removeFocus = function () {\n        this.addFocus(null);\n    };\n    DetailsView.prototype.getFocusedItemIndex = function () {\n        return (!isNOU(this.getFocusedItem())) ?\n            parseInt(this.getFocusedItem().getAttribute('aria-rowindex'), 10) : null;\n    };\n    /* istanbul ignore next */\n    // eslint:disable-next-line\n    DetailsView.prototype.keydownHandler = function (e) {\n        if (!this.isRendered) {\n            return;\n        }\n        switch (e.action) {\n            case 'end':\n            case 'home':\n            case 'space':\n            case 'ctrlSpace':\n            case 'shiftSpace':\n            case 'csSpace':\n            case 'ctrlA':\n            case 'enter':\n            case 'altEnter':\n            case 'ctrlEnd':\n            case 'shiftEnd':\n            case 'csEnd':\n            case 'ctrlHome':\n            case 'shiftHome':\n            case 'csHome':\n            case 'ctrlDown':\n            case 'shiftDown':\n            case 'csDown':\n            case 'ctrlLeft':\n            case 'shiftLeft':\n            case 'csLeft':\n            case 'esc':\n            case 'del':\n            case 'shiftdel':\n            case 'ctrlC':\n            case 'ctrlV':\n            case 'ctrlX':\n            case 'f2':\n            case 'moveDown':\n            case 'moveUp':\n                e.preventDefault();\n                break;\n            default:\n                break;\n        }\n    };\n    /* istanbul ignore next */\n    // eslint:disable-next-line\n    DetailsView.prototype.keyupHandler = function (e) {\n        if (!this.isRendered) {\n            return;\n        }\n        e.preventDefault();\n        var action = e.action;\n        // eslint-disable-next-line\n        var gridItems = getSortedData(this.parent, this.gridObj.dataSource);\n        var gridLength = gridItems.length;\n        var focItem = this.getFocusedItem();\n        var focIndex = this.getFocusedItemIndex();\n        var selIndex = this.gridObj.selectedRowIndex;\n        var selRowIndeces = this.gridObj.getSelectedRowIndexes();\n        // eslint-disable-next-line\n        var rowData;\n        var firstItem;\n        var lastItem;\n        switch (action) {\n            case 'altEnter':\n                GetDetails(this.parent, this.parent.selectedItems, this.parent.path, 'details');\n                break;\n            case 'esc':\n                removeActive(this.parent);\n                break;\n            case 'del':\n            case 'shiftdel':\n                this.performDelete();\n                break;\n            case 'enter':\n                if (this.gridObj.selectedRowIndex === -1) {\n                    break;\n                }\n                rowData = this.gridObj.getRowsObject()[this.gridObj.selectedRowIndex].data;\n                if (rowData) {\n                    // eslint-disable-next-line\n                    var data = JSON.parse(JSON.stringify(rowData));\n                    this.openContent(data);\n                }\n                break;\n            case 'ctrlC':\n                copyFiles(this.parent);\n                break;\n            case 'ctrlV':\n                this.parent.folderPath = '';\n                pasteHandler(this.parent);\n                break;\n            case 'ctrlX':\n                cutFiles(this.parent);\n                break;\n            case 'ctrlD':\n                this.doDownload();\n                break;\n            case 'f2':\n                this.performRename();\n                break;\n            case 'ctrlA':\n                if (!isNOU(gridItems[0]) && this.parent.allowMultiSelection) {\n                    var cnTable = this.gridObj.getContent().querySelector('.e-content');\n                    var crtSrlPos = cnTable.scrollTop;\n                    var crtFocusIndex = this.gridObj.selectedRowIndex;\n                    this.gridObj.selectionModule.selectRowsByRange(0, gridItems.length - 1);\n                    cnTable.scrollTop = crtSrlPos;\n                    if (crtFocusIndex !== -1) {\n                        this.addFocus(crtFocusIndex);\n                    }\n                }\n                break;\n            case 'ctrlHome':\n            case 'tab':\n                if (!isNOU(gridItems[0])) {\n                    if (!this.parent.allowMultiSelection && e.action === 'ctrlHome') {\n                        this.gridObj.selectRow(0);\n                    }\n                    else if (this.gridObj.selectedRowIndex !== -1 && e.action === 'tab') {\n                        return;\n                    }\n                    else {\n                        this.addFocus(0);\n                    }\n                }\n                break;\n            case 'ctrlEnd':\n                if (!isNOU(gridItems[0])) {\n                    if (!this.parent.allowMultiSelection) {\n                        this.gridObj.selectRow(gridLength - 1);\n                    }\n                    else {\n                        this.addFocus(gridLength - 1);\n                    }\n                }\n                break;\n            case 'shiftHome':\n            case 'shiftEnd':\n            case 'csHome':\n            case 'csEnd':\n                if (!this.parent.allowMultiSelection) {\n                    this.gridObj.selectRow((e.action === 'shiftHome' || e.action === 'csHome') ? 0 : gridItems.length - 1);\n                }\n                else {\n                    if (!isNOU(gridItems[0])) {\n                        if (!isNOU(selIndex) && selIndex !== -1) {\n                            this.checkRowsKey(gridItems, selIndex, null, e);\n                        }\n                        else {\n                            if (e.action === 'csHome' || e.action === 'shiftHome') {\n                                this.gridObj.selectRow(0);\n                            }\n                            else {\n                                this.gridObj.selectionModule.selectRowsByRange(0, gridItems.length - 1);\n                            }\n                        }\n                    }\n                }\n                break;\n            case 'space':\n            case 'csSpace':\n            case 'shiftSpace':\n            case 'ctrlSpace':\n                this.spaceSelection(selRowIndeces, focIndex, selIndex, e);\n                break;\n            case 'csUp':\n            case 'csDown':\n            case 'shiftUp':\n            case 'shiftDown':\n                this.shiftMoveMethod(gridItems, selIndex, focIndex, selRowIndeces, e);\n                break;\n            case 'ctrlUp':\n            case 'ctrlDown':\n                if (!this.parent.allowMultiSelection) {\n                    this.moveFunction(gridItems, e, selIndex);\n                }\n                else {\n                    this.ctrlMoveFunction(gridItems, e, selIndex);\n                }\n                break;\n            case 'home':\n                firstItem = [getValue(this.parent.hasId ? 'id' : 'name', gridItems[0])];\n                this.parent.setProperties({ selectedItems: firstItem }, true);\n                this.selectRecords(firstItem);\n                break;\n            case 'moveUp':\n            case 'moveDown':\n                this.moveFunction(gridItems, e, selIndex);\n                break;\n            case 'end':\n                lastItem = [getValue(this.parent.hasId ? 'id' : 'name', gridItems[gridLength - 1])];\n                this.parent.setProperties({ selectedItems: lastItem }, true);\n                this.selectRecords(lastItem);\n                break;\n        }\n    };\n    // eslint-disable-next-line\n    DetailsView.prototype.gridSelectNodes = function () {\n        return this.gridObj.getSelectedRecords();\n    };\n    DetailsView.prototype.doDownload = function () {\n        if (this.parent.selectedItems.length !== 0) {\n            this.parent.itemData = this.gridObj.getSelectedRecords();\n            // eslint-disable-next-line\n            var items = this.parent.itemData;\n            for (var i = 0; i < items.length; i++) {\n                if (!hasDownloadAccess(items[i])) {\n                    createDeniedDialog(this.parent, items[i], events.permissionDownload);\n                    return;\n                }\n            }\n            Download(this.parent, this.parent.path, this.parent.selectedItems);\n        }\n    };\n    DetailsView.prototype.performDelete = function () {\n        if (this.parent.selectedItems && this.parent.selectedItems.length > 0) {\n            this.parent.itemData = this.gridObj.getSelectedRecords();\n            // eslint-disable-next-line\n            var items = this.parent.itemData;\n            for (var i = 0; i < items.length; i++) {\n                if (!hasEditAccess(items[i])) {\n                    createDeniedDialog(this.parent, items[i], events.permissionEdit);\n                    return;\n                }\n            }\n            createDialog(this.parent, 'Delete');\n        }\n    };\n    DetailsView.prototype.performRename = function () {\n        if (this.parent.selectedItems.length === 1) {\n            this.updateRenameData();\n            doRename(this.parent);\n        }\n    };\n    DetailsView.prototype.updateRenameData = function () {\n        // eslint-disable-next-line\n        var data = this.gridSelectNodes()[0];\n        updateRenamingData(this.parent, data);\n    };\n    // eslint-disable-next-line\n    DetailsView.prototype.shiftMoveMethod = function (gridItems, selIndex, focIndex, selRowIndeces, e) {\n        if (!this.parent.allowMultiSelection) {\n            this.moveFunction(gridItems, e, selIndex);\n        }\n        else {\n            if (selIndex === -1 && (e.action === 'csUp' || e.action === 'csDown')) {\n                this.ctrlMoveFunction(gridItems, e, selIndex);\n            }\n            else if (selIndex !== -1 && focIndex !== selIndex &&\n                !((e.action === 'csUp' || e.action === 'csDown') && this.isSelected(selRowIndeces, focIndex))) {\n                this.shiftSelectFocusItem(selIndex, focIndex, selRowIndeces, e);\n            }\n            else {\n                this.shiftSelectedItem(selIndex, selRowIndeces, gridItems, e);\n            }\n        }\n    };\n    // eslint-disable-next-line\n    DetailsView.prototype.moveFunction = function (selectedItems, e, rowIndex) {\n        if (!isNOU(this.getFocusedItem()) && this.parent.allowMultiSelection) {\n            if (e.action === 'moveDown') {\n                this.gridObj.selectRow(this.getFocusedItemIndex() + 1);\n            }\n            else {\n                this.gridObj.selectRow(this.getFocusedItemIndex() - 1);\n            }\n        }\n        else if (!isNOU(rowIndex) && rowIndex !== -1) {\n            if (e.action === 'moveDown' || e.action === 'ctrlDown' || e.action === 'shiftDown' || e.action === 'csDown') {\n                this.gridObj.selectRow(rowIndex + ((rowIndex !== selectedItems.length - 1) ? 1 : 0));\n            }\n            else {\n                this.gridObj.selectRow(rowIndex - ((rowIndex !== 0) ? 1 : 0));\n            }\n        }\n        else {\n            if (!isNOU(selectedItems[0])) {\n                this.gridObj.selectRow(0);\n            }\n        }\n    };\n    DetailsView.prototype.spaceSelection = function (selRowIndeces, focIndex, selIndex, e) {\n        if (!this.isSelected(selRowIndeces, focIndex) && selIndex !== -1 && (e.action === 'shiftSpace' || e.action === 'csSpace')) {\n            if (focIndex < selIndex) {\n                this.gridObj.selectionModule.selectRowsByRange(focIndex, selIndex);\n            }\n            else {\n                this.gridObj.selectionModule.selectRowsByRange(selIndex, focIndex);\n            }\n        }\n        else if (!isNOU(this.getFocusedItem()) && focIndex !== selIndex) {\n            selRowIndeces.push(this.getFocusedItemIndex());\n            this.gridObj.selectRows(selRowIndeces);\n        }\n        else if (selIndex !== -1 && e.action === 'ctrlSpace' && this.parent.allowMultiSelection) {\n            var lItem = selIndex;\n            selRowIndeces.pop();\n            this.gridObj.selectRows(selRowIndeces);\n            this.addFocus(lItem);\n        }\n        else if (e.action === 'shiftSpace') {\n            this.gridObj.selectRow(selIndex);\n        }\n    };\n    // eslint-disable-next-line\n    DetailsView.prototype.ctrlMoveFunction = function (items, e, rowIndex) {\n        var nextItem;\n        if (!isNOU(this.getFocusedItem())) {\n            var nextIndex = this.getFocusedItemIndex();\n            nextItem = (e.action === 'ctrlDown' || e.action === 'csDown') ?\n                nextIndex + ((nextIndex < items.length - 1) ? 1 : 0) : nextIndex - ((nextIndex < 1) ? 0 : 1);\n        }\n        else if (!isNOU(rowIndex) && rowIndex !== -1) {\n            nextItem = (e.action === 'ctrlDown' || e.action === 'csDown') ?\n                rowIndex + ((rowIndex < items.length) ? 1 : 0) : rowIndex - ((rowIndex < 1) ? 0 : 1);\n        }\n        else {\n            if (!isNOU(items[0])) {\n                nextItem = 0;\n            }\n        }\n        this.addFocus(nextItem);\n    };\n    // eslint-disable-next-line\n    DetailsView.prototype.checkRowsKey = function (items, indexValue, focIndex, e) {\n        if (this.gridObj.checkAllRows === 'Uncheck' || this.gridObj.checkAllRows === 'Intermediate') {\n            if (e.action !== 'csHome' && e.action !== 'csEnd') {\n                if (isNOU(this.startIndex) && this.firstItemIndex !== indexValue) {\n                    this.firstItemIndex = indexValue;\n                }\n                if (e.action === 'shiftEnd') {\n                    this.gridObj.selectionModule.selectRowsByRange(this.firstItemIndex, items.length - 1);\n                }\n                else {\n                    this.gridObj.selectionModule.selectRowsByRange(0, this.firstItemIndex);\n                }\n                this.startIndex = indexValue;\n            }\n            else {\n                if (e.action === 'csEnd') {\n                    this.gridObj.\n                        selectRows(this.InnerItems(isNOU(indexValue) ? 0 : indexValue, isNOU(focIndex) ? items.length - 1 : focIndex, e));\n                }\n                else {\n                    if (isNOU(indexValue)) {\n                        this.gridObj.selectRow(0);\n                    }\n                    else {\n                        this.gridObj.selectRows(this.InnerItems(isNOU(focIndex) ? 0 : focIndex, indexValue, e));\n                    }\n                }\n            }\n        }\n        else {\n            this.gridObj.selectionModule.selectRow(((e.action === 'shiftHome' || e.action === 'csHome') ? 0 : items.length - 1));\n        }\n    };\n    DetailsView.prototype.InnerItems = function (fItem, lItem, e) {\n        var itemArr = this.gridObj.getSelectedRowIndexes();\n        if (e.action === 'csEnd') {\n            for (var i = fItem + 1; i <= lItem; i++) {\n                itemArr.push(i);\n            }\n        }\n        else {\n            for (var i = lItem - 1; fItem <= i; i--) {\n                itemArr.push(i);\n            }\n        }\n        return itemArr;\n    };\n    DetailsView.prototype.shiftSelectFocusItem = function (selIndex, fIndex, selRowIndexes, e) {\n        var lItem = fIndex + ((e.action === 'shiftDown' || e.action === 'csDown') ? 1 : -1);\n        var fItem = isNOU(this.startIndex) ? selIndex : selRowIndexes[0];\n        if (fItem === lItem) {\n            this.gridObj.selectRow(fItem);\n        }\n        else {\n            if (fItem < lItem) {\n                if (e.action === 'shiftDown' || e.action === 'csDown') {\n                    this.gridObj.selectionModule.selectRowsByRange(fItem, lItem);\n                }\n                else {\n                    this.gridObj.selectionModule.selectRowsByRange(lItem, fItem);\n                }\n            }\n            else if (e.action === 'shiftDown' || e.action === 'csDown') {\n                this.gridObj.selectionModule.selectRowsByRange(lItem, fItem);\n            }\n            else {\n                this.gridObj.selectionModule.selectRowsByRange(fItem, lItem);\n            }\n        }\n        this.startIndex = this.gridObj.selectedRowIndex;\n    };\n    DetailsView.prototype.addFocus = function (item) {\n        var fItem = this.getFocusedItem();\n        var itemElement = this.gridObj.getRowByIndex(item);\n        if (fItem) {\n            fItem.removeAttribute('tabindex');\n            removeClass([fItem], [CLS.FOCUS, CLS.FOCUSED]);\n        }\n        if (!isNOU(itemElement)) {\n            this.gridObj.element.setAttribute('tabindex', '-1');\n            itemElement.setAttribute('tabindex', '0');\n            itemElement.focus();\n            addClass([itemElement], [CLS.FOCUS, CLS.FOCUSED]);\n        }\n    };\n    DetailsView.prototype.getFocusedItem = function () {\n        return select('.' + CLS.FOCUSED, this.element);\n    };\n    DetailsView.prototype.isSelected = function (selRowIndexes, focIndex) {\n        var check = false;\n        for (var i = 0; i <= selRowIndexes.length - 1; i++) {\n            if (selRowIndexes[i] === focIndex) {\n                check = true;\n                break;\n            }\n        }\n        return check;\n    };\n    // eslint-disable-next-line\n    DetailsView.prototype.shiftSelectedItem = function (selIndex, selRowIndexes, gridItems, e) {\n        if (selIndex === -1) {\n            this.gridObj.selectRow(0);\n        }\n        else {\n            if (isNOU(this.startIndex) && e.shiftKey) {\n                this.startIndex = this.gridObj.selectedRowIndex;\n                this.gridObj.selectRows([selIndex, (e.action === 'shiftDown' || e.action === 'csDown') ?\n                        (selIndex + ((selIndex !== gridItems.length - 1) ? 1 : 0)) : (selIndex - ((selIndex !== 0) ? 1 : 0))]);\n            }\n            else {\n                if (e.action === 'shiftDown' || e.action === 'shiftUp') {\n                    if (e.action === 'shiftDown' && selRowIndexes.indexOf(selIndex + 1) === -1) {\n                        if (selIndex !== gridItems.length - 1) {\n                            selRowIndexes.push(selIndex + 1);\n                        }\n                    }\n                    else if (e.action === 'shiftUp' && selRowIndexes.indexOf(selIndex - 1) === -1) {\n                        if (selIndex !== 0) {\n                            selRowIndexes.push(selIndex - 1);\n                        }\n                    }\n                    else {\n                        selRowIndexes.pop();\n                    }\n                    this.gridObj.selectRows(selRowIndexes);\n                }\n                else {\n                    if (e.action === 'csDown') {\n                        if (!this.isSelected(selRowIndexes, this.getFocusedItemIndex() + 1)) {\n                            selRowIndexes.push((this.getFocusedItemIndex() + 1));\n                            this.gridObj.selectRows(selRowIndexes);\n                        }\n                        else {\n                            this.addFocus(this.getFocusedItemIndex() + 1);\n                        }\n                    }\n                    else if (!this.isSelected(selRowIndexes, this.getFocusedItemIndex() - 1)) {\n                        selRowIndexes.push((this.getFocusedItemIndex() - 1));\n                        this.gridObj.selectRows(selRowIndexes);\n                    }\n                    else {\n                        this.addFocus(this.getFocusedItemIndex() - 1);\n                    }\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    DetailsView.prototype.onMethodCall = function (e) {\n        if (this.parent.view !== 'Details') {\n            return;\n        }\n        var action = getValue('action', e);\n        switch (action) {\n            case 'deleteFiles':\n                this.deleteFiles(getValue('ids', e));\n                break;\n            case 'downloadFiles':\n                this.downloadFiles(getValue('ids', e));\n                break;\n            case 'openFile':\n                this.openFile(getValue('id', e));\n                break;\n            case 'createFolder':\n                this.interaction = false;\n                break;\n            case 'renameFile':\n                this.interaction = false;\n                this.renameFile(getValue('id', e), getValue('newName', e));\n                break;\n            case 'selectAll':\n                this.interaction = false;\n                this.onSelectAllInit();\n                break;\n            case 'clearSelection':\n                this.interaction = false;\n                this.onClearAllInit();\n                break;\n        }\n    };\n    // eslint-disable-next-line\n    DetailsView.prototype.getRecords = function (nodes) {\n        // eslint-disable-next-line\n        var gridRecords = this.gridObj.getCurrentViewRecords();\n        // eslint-disable-next-line\n        var records = [];\n        var hasFilter = (this.parent.breadcrumbbarModule.searchObj.element.value !== '' || this.parent.isFiltered) ? true : false;\n        var filter = this.parent.hasId ? 'id' : 'name';\n        if (this.parent.hasId || !hasFilter) {\n            for (var i = 0, len = gridRecords.length; i < len; i++) {\n                if (nodes.indexOf(getValue(filter, gridRecords[i])) !== -1) {\n                    records.push(gridRecords[i]);\n                }\n            }\n        }\n        else {\n            for (var i = 0, len = gridRecords.length; i < len; i++) {\n                var name_4 = getValue('filterPath', gridRecords[i]) + getValue('name', gridRecords[i]);\n                if (nodes.indexOf(name_4) !== -1) {\n                    records.push(gridRecords[i]);\n                }\n            }\n        }\n        return records;\n    };\n    DetailsView.prototype.deleteFiles = function (ids) {\n        this.parent.activeModule = 'detailsview';\n        if (isNOU(ids)) {\n            this.performDelete();\n            return;\n        }\n        // eslint-disable-next-line\n        var records = this.getRecords(ids);\n        if (records.length === 0) {\n            return;\n        }\n        // eslint-disable-next-line\n        var data = [];\n        var newIds = [];\n        for (var i = 0; i < records.length; i++) {\n            data[i] = records[i];\n            newIds[i] = getItemName(this.parent, data[i]);\n        }\n        doDeleteFiles(this.parent, data, newIds);\n    };\n    DetailsView.prototype.downloadFiles = function (ids) {\n        if (isNOU(ids)) {\n            this.doDownload();\n            return;\n        }\n        // eslint-disable-next-line\n        var dRecords = this.getRecords(ids);\n        if (dRecords.length === 0) {\n            return;\n        }\n        // eslint-disable-next-line\n        var data = [];\n        var newIds = [];\n        for (var i = 0; i < dRecords.length; i++) {\n            data[i] = dRecords[i];\n            newIds[i] = getItemName(this.parent, data[i]);\n        }\n        doDownloadFiles(this.parent, data, newIds);\n    };\n    DetailsView.prototype.openFile = function (id) {\n        if (isNOU(id)) {\n            return;\n        }\n        // eslint-disable-next-line\n        var records = this.getRecords([id]);\n        if (records.length > 0) {\n            this.openContent(records[0]);\n        }\n    };\n    DetailsView.prototype.renameFile = function (id, name) {\n        this.parent.activeModule = 'detailsview';\n        if (isNOU(id)) {\n            this.performRename();\n            return;\n        }\n        // eslint-disable-next-line\n        var records = this.getRecords([id]);\n        if (records.length > 0) {\n            updateRenamingData(this.parent, records[0]);\n            if (!isNOU(name)) {\n                if (hasEditAccess(this.parent.itemData[0])) {\n                    rename(this.parent, this.parent.path, name);\n                }\n                else {\n                    createDeniedDialog(this.parent, this.parent.itemData[0], events.permissionEdit);\n                }\n            }\n            else {\n                doRename(this.parent);\n            }\n        }\n    };\n    return DetailsView;\n}());\nexport { DetailsView };\n"]},"metadata":{},"sourceType":"module"}