{"ast":null,"code":"import { Browser } from '@syncfusion/ej2-base';\nimport { extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { closest, classList } from '@syncfusion/ej2-base';\nimport { ResponsiveDialogAction } from '../base/enum';\nimport { setCssInGridPopUp, getActualPropFromColl, isActionPrevent, iterateExtend, parentsUntil } from '../base/util';\nimport { addRemoveEventListener } from '../base/util';\nimport * as events from '../base/constant';\nimport { AriaService } from '../services/aria-service';\nimport * as literals from '../base/string-literals';\n/**\n *\n * The `Sort` module is used to handle sorting action.\n */\n\nvar Sort =\n/** @class */\nfunction () {\n  /**\n   * Constructor for Grid sorting module\n   *\n   * @param {IGrid} parent - specifies the IGrid\n   * @param {SortSettings} sortSettings - specifies the SortSettings\n   * @param {string[]} sortedColumns - specifies the string\n   * @param {ServiceLocator} locator - specifies the ServiceLocator\n   * @hidden\n   */\n  function Sort(parent, sortSettings, sortedColumns, locator) {\n    this.contentRefresh = true;\n    this.isModelChanged = true;\n    this.aria = new AriaService();\n    this.currentTarget = null;\n    this.parent = parent;\n    this.sortSettings = sortSettings;\n    this.sortedColumns = sortedColumns;\n    this.serviceLocator = locator;\n    this.focus = locator.getService('focus');\n    this.addEventListener();\n    this.setFullScreenDialog();\n  }\n  /**\n   * The function used to update sortSettings\n   *\n   * @returns {void}\n   * @hidden\n   */\n\n\n  Sort.prototype.updateModel = function () {\n    var sortedColumn = {\n      field: this.columnName,\n      direction: this.direction\n    };\n    var index;\n    var gCols = this.parent.groupSettings.columns;\n    var flag = false;\n\n    if (!this.isMultiSort) {\n      if (!gCols.length) {\n        this.sortSettings.columns = [sortedColumn];\n      } else {\n        var sortedCols = [];\n\n        for (var i = 0, len = gCols.length; i < len; i++) {\n          index = this.getSortedColsIndexByField(gCols[i], sortedCols);\n\n          if (this.columnName === gCols[i]) {\n            flag = true;\n            sortedCols.push(sortedColumn);\n          } else {\n            var sCol = this.getSortColumnFromField(gCols[i]);\n            sortedCols.push({\n              field: sCol.field,\n              direction: sCol.direction,\n              isFromGroup: sCol.isFromGroup\n            });\n          }\n        }\n\n        if (!flag) {\n          sortedCols.push(sortedColumn);\n        }\n\n        this.sortSettings.columns = sortedCols;\n      }\n    } else {\n      index = this.getSortedColsIndexByField(this.columnName);\n\n      if (index > -1) {\n        this.sortSettings.columns.splice(index, 1);\n      }\n\n      this.sortSettings.columns.push(sortedColumn); // eslint-disable-next-line no-self-assign\n\n      this.sortSettings.columns = this.sortSettings.columns;\n    }\n\n    this.parent.dataBind();\n    this.lastSortedCol = this.columnName;\n  };\n  /**\n   * The function used to trigger onActionComplete\n   *\n   * @param {NotifyArgs} e - specifies the NotifyArgs\n   * @returns {void}\n   * @hidden\n   */\n\n\n  Sort.prototype.onActionComplete = function (e) {\n    var args = !this.isRemove ? {\n      columnName: this.columnName,\n      direction: this.direction,\n      requestType: 'sorting',\n      type: events.actionComplete\n    } : {\n      requestType: 'sorting',\n      type: events.actionComplete\n    };\n    this.isRemove = false;\n    this.parent.trigger(events.actionComplete, extend(e, args));\n  };\n  /**\n   * Sorts a column with the given options.\n   *\n   * @param {string} columnName - Defines the column name to sort.\n   * @param {SortDirection} direction - Defines the direction of sorting field.\n   * @param {boolean} isMultiSort - Specifies whether the previously sorted columns are to be maintained.\n   * @returns {void}\n   */\n\n\n  Sort.prototype.sortColumn = function (columnName, direction, isMultiSort) {\n    var gObj = this.parent;\n\n    if (this.parent.getColumnByField(columnName).allowSorting === false || this.parent.isContextMenuOpen()) {\n      this.parent.log('action_disabled_column', {\n        moduleName: this.getModuleName(),\n        columnName: columnName\n      });\n      return;\n    }\n\n    if (!gObj.allowMultiSorting) {\n      isMultiSort = gObj.allowMultiSorting;\n    }\n\n    if (this.isActionPrevent()) {\n      gObj.notify(events.preventBatch, {\n        instance: this,\n        handler: this.sortColumn,\n        arg1: columnName,\n        arg2: direction,\n        arg3: isMultiSort\n      });\n      return;\n    }\n\n    this.backupSettings();\n    this.columnName = columnName;\n    this.direction = direction;\n    this.isMultiSort = isMultiSort;\n    this.removeSortIcons();\n    this.updateSortedCols(columnName, isMultiSort);\n    this.updateModel();\n  };\n\n  Sort.prototype.setFullScreenDialog = function () {\n    if (this.serviceLocator) {\n      this.serviceLocator.registerAdaptiveService(this, this.parent.enableAdaptiveUI, ResponsiveDialogAction.isSort);\n    }\n  };\n\n  Sort.prototype.backupSettings = function () {\n    this.lastSortedCols = iterateExtend(this.sortSettings.columns);\n    this.lastCols = this.sortedColumns;\n  };\n\n  Sort.prototype.restoreSettings = function () {\n    this.isModelChanged = false;\n    this.isMultiSort = true;\n    this.parent.setProperties({\n      sortSettings: {\n        columns: this.lastSortedCols\n      }\n    }, true); //this.parent.sortSettings.columns =  this.lastSortedCols;\n\n    this.sortedColumns = this.lastCols;\n    this.isModelChanged = true;\n  };\n\n  Sort.prototype.updateSortedCols = function (columnName, isMultiSort) {\n    if (!isMultiSort) {\n      if (this.parent.allowGrouping) {\n        for (var i = 0, len = this.sortedColumns.length; i < len; i++) {\n          if (this.parent.groupSettings.columns.indexOf(this.sortedColumns[i]) < 0) {\n            this.sortedColumns.splice(i, 1);\n            len--;\n            i--;\n          }\n        }\n      } else {\n        this.sortedColumns.splice(0, this.sortedColumns.length);\n      }\n    }\n\n    if (this.sortedColumns.indexOf(columnName) < 0) {\n      this.sortedColumns.push(columnName);\n    }\n  };\n  /**\n   * @param {NotifyArgs} e - specifies the NotifyArgs\n   * @returns {void}\n   * @hidden\n   */\n\n\n  Sort.prototype.onPropertyChanged = function (e) {\n    if (e.module !== this.getModuleName()) {\n      return;\n    }\n\n    if (this.contentRefresh) {\n      var args = this.sortSettings.columns.length ? {\n        columnName: this.columnName,\n        direction: this.direction,\n        requestType: 'sorting',\n        type: events.actionBegin,\n        target: this.currentTarget,\n        cancel: false\n      } : {\n        requestType: 'sorting',\n        type: events.actionBegin,\n        cancel: false,\n        target: this.currentTarget\n      };\n      this.parent.notify(events.modelChanged, args);\n    }\n\n    this.refreshSortSettings();\n    this.removeSortIcons();\n    this.addSortIcons();\n  };\n\n  Sort.prototype.refreshSortSettings = function () {\n    this.sortedColumns.length = 0;\n    var sortColumns = this.sortSettings.columns;\n\n    for (var i = 0; i < sortColumns.length; i++) {\n      if (!sortColumns[i].isFromGroup) {\n        this.sortedColumns.push(sortColumns[i].field);\n      }\n    }\n  };\n  /**\n   * Clears all the sorted columns of the Grid.\n   *\n   * @returns {void}\n   */\n\n\n  Sort.prototype.clearSorting = function () {\n    var cols = getActualPropFromColl(this.sortSettings.columns);\n\n    if (this.isActionPrevent()) {\n      this.parent.notify(events.preventBatch, {\n        instance: this,\n        handler: this.clearSorting\n      });\n      return;\n    }\n\n    for (var i = 0, len = cols.length; i < len; i++) {\n      this.removeSortColumn(cols[i].field);\n    }\n  };\n\n  Sort.prototype.isActionPrevent = function () {\n    return isActionPrevent(this.parent);\n  };\n  /**\n   * Remove sorted column by field name.\n   *\n   * @param {string} field - Defines the column field name to remove sort.\n   * @returns {void}\n   * @hidden\n   */\n\n\n  Sort.prototype.removeSortColumn = function (field) {\n    var gObj = this.parent;\n    var cols = this.sortSettings.columns;\n\n    if (cols.length === 0 && this.sortedColumns.indexOf(field) < 0) {\n      return;\n    }\n\n    if (this.isActionPrevent()) {\n      this.parent.notify(events.preventBatch, {\n        instance: this,\n        handler: this.removeSortColumn,\n        arg1: field\n      });\n      return;\n    }\n\n    this.backupSettings();\n    this.removeSortIcons();\n    var args = {\n      requestType: 'sorting',\n      type: events.actionBegin,\n      target: this.currentTarget\n    };\n\n    for (var i = 0, len = cols.length; i < len; i++) {\n      if (cols[i].field === field) {\n        if (gObj.allowGrouping && gObj.groupSettings.columns.indexOf(cols[i].field) > -1) {\n          continue;\n        }\n\n        this.sortedColumns.splice(this.sortedColumns.indexOf(cols[i].field), 1);\n        cols.splice(i, 1);\n        this.isRemove = true;\n\n        if (this.isModelChanged) {\n          this.parent.notify(events.modelChanged, args);\n        }\n\n        break;\n      }\n    }\n\n    if (!args.cancel) {\n      this.addSortIcons();\n    }\n  };\n\n  Sort.prototype.getSortedColsIndexByField = function (field, sortedColumns) {\n    var cols = sortedColumns ? sortedColumns : this.sortSettings.columns;\n\n    for (var i = 0, len = cols.length; i < len; i++) {\n      if (cols[i].field === field) {\n        return i;\n      }\n    }\n\n    return -1;\n  };\n  /**\n   * For internal use only - Get the module name.\n   *\n   * @returns {string} returns the module name\n   * @private\n   */\n\n\n  Sort.prototype.getModuleName = function () {\n    return 'sort';\n  };\n\n  Sort.prototype.initialEnd = function () {\n    this.parent.off(events.contentReady, this.initialEnd);\n\n    if (this.parent.getColumns().length && this.sortSettings.columns.length) {\n      var gObj = this.parent;\n      this.contentRefresh = false;\n      this.isMultiSort = this.sortSettings.columns.length > 1;\n\n      for (var _i = 0, _a = gObj.sortSettings.columns.slice(); _i < _a.length; _i++) {\n        var col = _a[_i];\n\n        if (this.sortedColumns.indexOf(col.field) > -1) {\n          this.sortColumn(col.field, col.direction, true);\n        }\n      }\n\n      this.isMultiSort = false;\n      this.contentRefresh = true;\n    }\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n\n\n  Sort.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.evtHandlers = [{\n      event: events.setFullScreenDialog,\n      handler: this.setFullScreenDialog\n    }, {\n      event: events.contentReady,\n      handler: this.initialEnd\n    }, {\n      event: events.sortComplete,\n      handler: this.onActionComplete\n    }, {\n      event: events.inBoundModelChanged,\n      handler: this.onPropertyChanged\n    }, {\n      event: events.click,\n      handler: this.clickHandler\n    }, {\n      event: events.headerRefreshed,\n      handler: this.refreshSortIcons\n    }, {\n      event: events.keyPressed,\n      handler: this.keyPressed\n    }, {\n      event: events.cancelBegin,\n      handler: this.cancelBeginEvent\n    }, {\n      event: events.destroy,\n      handler: this.destroy\n    }];\n    addRemoveEventListener(this.parent, this.evtHandlers, true, this);\n  };\n  /**\n   * @returns {void}\n   * @hidden\n   */\n\n\n  Sort.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    addRemoveEventListener(this.parent, this.evtHandlers, false);\n  };\n  /**\n   * To destroy the sorting\n   *\n   * @returns {void}\n   * @hidden\n   */\n\n\n  Sort.prototype.destroy = function () {\n    this.isModelChanged = false;\n    var gridElement = this.parent.element;\n\n    if (!gridElement || !gridElement.querySelector('.' + literals.gridHeader) && !gridElement.querySelector('.' + literals.gridContent)) {\n      return;\n    }\n\n    if (this.parent.element.querySelector('.e-gridpopup').getElementsByClassName('e-sortdirect').length) {\n      this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n    } // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    if (!this.parent.refreshing && (this.parent.isDestroyed || !this.parent.allowSorting)) {\n      this.clearSorting();\n    }\n\n    this.isModelChanged = true;\n    this.removeEventListener();\n  };\n\n  Sort.prototype.cancelBeginEvent = function (e) {\n    if (e.requestType === 'sorting') {\n      this.restoreSettings();\n      this.refreshSortIcons();\n      this.isMultiSort = true;\n    }\n  };\n\n  Sort.prototype.clickHandler = function (e) {\n    var gObj = this.parent;\n    this.currentTarget = null;\n    this.popUpClickHandler(e);\n    var target = closest(e.target, '.e-headercell');\n\n    if (target && !e.target.classList.contains('e-grptogglebtn') && !target.classList.contains('e-resized') && !e.target.classList.contains('e-rhandler') && !e.target.classList.contains('e-columnmenu') && !e.target.classList.contains('e-filtermenudiv') && !parentsUntil(e.target, 'e-stackedheadercell') && !(gObj.allowSelection && gObj.selectionSettings.allowColumnSelection && e.target.classList.contains('e-headercell'))) {\n      var gObj_1 = this.parent;\n      var colObj = gObj_1.getColumnByUid(target.querySelector('.e-headercelldiv').getAttribute('e-mappinguid'));\n\n      if (colObj.type !== 'checkbox') {\n        this.initiateSort(target, e, colObj);\n\n        if (Browser.isDevice) {\n          this.showPopUp(e);\n        }\n      }\n    }\n\n    if (target) {\n      target.classList.remove('e-resized');\n    }\n\n    if (parentsUntil(e.target, 'e-excel-ascending') || parentsUntil(e.target, 'e-excel-descending')) {\n      var colUid = closest(e.target, '.e-filter-popup').getAttribute('uid');\n      var direction = isNullOrUndefined(parentsUntil(e.target, 'e-excel-descending')) ? 'Ascending' : 'Descending';\n      this.sortColumn(gObj.getColumnByUid(colUid).field, direction, false);\n    }\n  };\n\n  Sort.prototype.keyPressed = function (e) {\n    var ele = e.target;\n\n    if (!this.parent.isEdit && (e.action === 'enter' || e.action === 'ctrlEnter' || e.action === 'shiftEnter') && closest(ele, '.e-headercell')) {\n      var target = this.focus.getFocusedElement();\n\n      if (isNullOrUndefined(target) || !target.classList.contains('e-headercell') || !target.querySelector('.e-headercelldiv')) {\n        return;\n      }\n\n      var col = this.parent.getColumnByUid(target.querySelector('.e-headercelldiv').getAttribute('e-mappinguid'));\n      this.initiateSort(target, e, col);\n    }\n  };\n\n  Sort.prototype.initiateSort = function (target, e, column) {\n    var gObj = this.parent;\n    var field = column.field;\n    this.currentTarget = e.target;\n    var direction = !target.getElementsByClassName('e-ascending').length ? 'Ascending' : 'Descending';\n    this.isMultiSort = e.ctrlKey || this.enableSortMultiTouch || navigator.userAgent.indexOf('Mac OS') !== -1 && e.metaKey;\n\n    if (e.shiftKey || this.sortSettings.allowUnsort && target.getElementsByClassName('e-descending').length && !(gObj.groupSettings.columns.indexOf(field) > -1)) {\n      this.removeSortColumn(field);\n    } else {\n      this.sortColumn(field, direction, this.isMultiSort);\n    }\n  };\n\n  Sort.prototype.showPopUp = function (e) {\n    var target = closest(e.target, '.e-headercell');\n\n    if (this.parent.allowMultiSorting && (!isNullOrUndefined(target) || this.parent.isContextMenuOpen())) {\n      setCssInGridPopUp(this.parent.element.querySelector('.e-gridpopup'), e, 'e-sortdirect e-icons e-icon-sortdirect' + (this.sortedColumns.length > 1 ? ' e-spanclicked' : ''));\n    }\n  };\n\n  Sort.prototype.popUpClickHandler = function (e) {\n    var target = e.target;\n\n    if (closest(target, '.e-headercell') || e.target.classList.contains(literals.rowCell) || closest(target, '.e-gridpopup')) {\n      if (target.classList.contains('e-sortdirect')) {\n        if (!target.classList.contains('e-spanclicked')) {\n          target.classList.add('e-spanclicked');\n          this.enableSortMultiTouch = true;\n        } else {\n          target.classList.remove('e-spanclicked');\n          this.enableSortMultiTouch = false;\n          this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n      }\n    } else {\n      this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n    }\n  };\n\n  Sort.prototype.addSortIcons = function () {\n    var gObj = this.parent;\n    var header;\n    var filterElement;\n    var cols = this.sortSettings.columns;\n    var fieldNames = this.parent.getColumns().map(function (c) {\n      return c.field;\n    });\n\n    for (var i = 0, len = cols.length; i < len; i++) {\n      header = gObj.getColumnHeaderByField(cols[i].field);\n\n      if (fieldNames.indexOf(cols[i].field) === -1 || isNullOrUndefined(header)) {\n        continue;\n      }\n\n      this.aria.setSort(header, cols[i].direction.toLowerCase());\n\n      if (this.isMultiSort && cols.length > 1) {\n        header.querySelector('.e-headercelldiv').insertBefore(this.parent.createElement('span', {\n          className: 'e-sortnumber',\n          innerHTML: (i + 1).toString()\n        }), header.querySelector('.e-headertext'));\n      }\n\n      filterElement = header.querySelector('.e-sortfilterdiv');\n\n      if (cols[i].direction === 'Ascending') {\n        classList(filterElement, ['e-ascending', 'e-icon-ascending'], []);\n      } else {\n        classList(filterElement, ['e-descending', 'e-icon-descending'], []);\n      }\n    }\n  };\n\n  Sort.prototype.removeSortIcons = function (position) {\n    var gObj = this.parent;\n    var header;\n    var cols = this.sortSettings.columns;\n    var fieldNames = this.parent.getColumns().map(function (c) {\n      return c.field;\n    });\n\n    for (var i = position ? position : 0, len = !isNullOrUndefined(position) ? position + 1 : cols.length; i < len; i++) {\n      header = gObj.getColumnHeaderByField(cols[i].field);\n\n      if (isNullOrUndefined(header) || gObj.allowGrouping && gObj.groupSettings.columns.indexOf(cols[i].field) > -1 && !header.querySelector('.e-sortfilterdiv')) {\n        continue;\n      }\n\n      if (fieldNames.indexOf(cols[i].field) === -1) {\n        continue;\n      }\n\n      this.aria.setSort(header, 'none');\n      classList(header.querySelector('.e-sortfilterdiv'), [], ['e-descending', 'e-icon-descending', 'e-ascending', 'e-icon-ascending']);\n\n      if (header.querySelector('.e-sortnumber')) {\n        header.querySelector('.e-headercelldiv').removeChild(header.querySelector('.e-sortnumber'));\n      }\n    }\n  };\n\n  Sort.prototype.getSortColumnFromField = function (field) {\n    for (var i = 0, len = this.sortSettings.columns.length; i < len; i++) {\n      if (this.sortSettings.columns[i].field === field) {\n        return this.sortSettings.columns[i];\n      }\n    }\n\n    return false;\n  };\n\n  Sort.prototype.updateAriaAttr = function () {\n    var fieldNames = this.parent.getColumns().map(function (c) {\n      return c.field;\n    });\n\n    for (var _i = 0, _a = this.sortedColumns; _i < _a.length; _i++) {\n      var col = _a[_i];\n\n      if (fieldNames.indexOf(col) === -1) {\n        continue;\n      }\n\n      var header = this.parent.getColumnHeaderByField(col);\n      this.aria.setSort(header, this.getSortColumnFromField(col).direction);\n    }\n  };\n\n  Sort.prototype.refreshSortIcons = function (params) {\n    if (params === void 0) {\n      params = {\n        args: {\n          isFrozen: false\n        }\n      };\n    }\n\n    if (!params.args.isFrozen) {\n      this.removeSortIcons();\n      this.isMultiSort = true;\n      this.removeSortIcons();\n      this.addSortIcons();\n      this.isMultiSort = false;\n      this.updateAriaAttr();\n    }\n  };\n  /**\n   * To show the responsive custom sort dialog\n   *\n   * @param {boolean} enable - specifes dialog open\n   * @returns {void}\n   * @hidden\n   */\n\n\n  Sort.prototype.showCustomSort = function (enable) {\n    this.responsiveDialogRenderer.isCustomDialog = enable;\n    this.responsiveDialogRenderer.showResponsiveDialog();\n  };\n\n  return Sort;\n}();\n\nexport { Sort };","map":{"version":3,"sources":["/Users/yasaman/Documents/moj_adminpanel/adminpanel/node_modules/@syncfusion/ej2-grids/src/grid/actions/sort.js"],"names":["Browser","extend","isNullOrUndefined","closest","classList","ResponsiveDialogAction","setCssInGridPopUp","getActualPropFromColl","isActionPrevent","iterateExtend","parentsUntil","addRemoveEventListener","events","AriaService","literals","Sort","parent","sortSettings","sortedColumns","locator","contentRefresh","isModelChanged","aria","currentTarget","serviceLocator","focus","getService","addEventListener","setFullScreenDialog","prototype","updateModel","sortedColumn","field","columnName","direction","index","gCols","groupSettings","columns","flag","isMultiSort","length","sortedCols","i","len","getSortedColsIndexByField","push","sCol","getSortColumnFromField","isFromGroup","splice","dataBind","lastSortedCol","onActionComplete","e","args","isRemove","requestType","type","actionComplete","trigger","sortColumn","gObj","getColumnByField","allowSorting","isContextMenuOpen","log","moduleName","getModuleName","allowMultiSorting","notify","preventBatch","instance","handler","arg1","arg2","arg3","backupSettings","removeSortIcons","updateSortedCols","registerAdaptiveService","enableAdaptiveUI","isSort","lastSortedCols","lastCols","restoreSettings","setProperties","allowGrouping","indexOf","onPropertyChanged","module","actionBegin","target","cancel","modelChanged","refreshSortSettings","addSortIcons","sortColumns","clearSorting","cols","removeSortColumn","initialEnd","off","contentReady","getColumns","_i","_a","slice","col","isDestroyed","evtHandlers","event","sortComplete","inBoundModelChanged","click","clickHandler","headerRefreshed","refreshSortIcons","keyPressed","cancelBegin","cancelBeginEvent","destroy","removeEventListener","gridElement","element","querySelector","gridHeader","gridContent","getElementsByClassName","style","display","refreshing","popUpClickHandler","contains","allowSelection","selectionSettings","allowColumnSelection","gObj_1","colObj","getColumnByUid","getAttribute","initiateSort","isDevice","showPopUp","remove","colUid","ele","isEdit","action","getFocusedElement","column","ctrlKey","enableSortMultiTouch","navigator","userAgent","metaKey","shiftKey","allowUnsort","rowCell","add","header","filterElement","fieldNames","map","c","getColumnHeaderByField","setSort","toLowerCase","insertBefore","createElement","className","innerHTML","toString","position","removeChild","updateAriaAttr","params","isFrozen","showCustomSort","enable","responsiveDialogRenderer","isCustomDialog","showResponsiveDialog"],"mappings":"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","sourcesContent":["import { Browser } from '@syncfusion/ej2-base';\nimport { extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { closest, classList } from '@syncfusion/ej2-base';\nimport { ResponsiveDialogAction } from '../base/enum';\nimport { setCssInGridPopUp, getActualPropFromColl, isActionPrevent, iterateExtend, parentsUntil } from '../base/util';\nimport { addRemoveEventListener } from '../base/util';\nimport * as events from '../base/constant';\nimport { AriaService } from '../services/aria-service';\nimport * as literals from '../base/string-literals';\n/**\n *\n * The `Sort` module is used to handle sorting action.\n */\nvar Sort = /** @class */ (function () {\n    /**\n     * Constructor for Grid sorting module\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @param {SortSettings} sortSettings - specifies the SortSettings\n     * @param {string[]} sortedColumns - specifies the string\n     * @param {ServiceLocator} locator - specifies the ServiceLocator\n     * @hidden\n     */\n    function Sort(parent, sortSettings, sortedColumns, locator) {\n        this.contentRefresh = true;\n        this.isModelChanged = true;\n        this.aria = new AriaService();\n        this.currentTarget = null;\n        this.parent = parent;\n        this.sortSettings = sortSettings;\n        this.sortedColumns = sortedColumns;\n        this.serviceLocator = locator;\n        this.focus = locator.getService('focus');\n        this.addEventListener();\n        this.setFullScreenDialog();\n    }\n    /**\n     * The function used to update sortSettings\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Sort.prototype.updateModel = function () {\n        var sortedColumn = { field: this.columnName, direction: this.direction };\n        var index;\n        var gCols = this.parent.groupSettings.columns;\n        var flag = false;\n        if (!this.isMultiSort) {\n            if (!gCols.length) {\n                this.sortSettings.columns = [sortedColumn];\n            }\n            else {\n                var sortedCols = [];\n                for (var i = 0, len = gCols.length; i < len; i++) {\n                    index = this.getSortedColsIndexByField(gCols[i], sortedCols);\n                    if (this.columnName === gCols[i]) {\n                        flag = true;\n                        sortedCols.push(sortedColumn);\n                    }\n                    else {\n                        var sCol = this.getSortColumnFromField(gCols[i]);\n                        sortedCols.push({ field: sCol.field, direction: sCol.direction, isFromGroup: sCol.isFromGroup });\n                    }\n                }\n                if (!flag) {\n                    sortedCols.push(sortedColumn);\n                }\n                this.sortSettings.columns = sortedCols;\n            }\n        }\n        else {\n            index = this.getSortedColsIndexByField(this.columnName);\n            if (index > -1) {\n                this.sortSettings.columns.splice(index, 1);\n            }\n            this.sortSettings.columns.push(sortedColumn);\n            // eslint-disable-next-line no-self-assign\n            this.sortSettings.columns = this.sortSettings.columns;\n        }\n        this.parent.dataBind();\n        this.lastSortedCol = this.columnName;\n    };\n    /**\n     * The function used to trigger onActionComplete\n     *\n     * @param {NotifyArgs} e - specifies the NotifyArgs\n     * @returns {void}\n     * @hidden\n     */\n    Sort.prototype.onActionComplete = function (e) {\n        var args = !this.isRemove ? {\n            columnName: this.columnName, direction: this.direction, requestType: 'sorting', type: events.actionComplete\n        } : { requestType: 'sorting', type: events.actionComplete };\n        this.isRemove = false;\n        this.parent.trigger(events.actionComplete, extend(e, args));\n    };\n    /**\n     * Sorts a column with the given options.\n     *\n     * @param {string} columnName - Defines the column name to sort.\n     * @param {SortDirection} direction - Defines the direction of sorting field.\n     * @param {boolean} isMultiSort - Specifies whether the previously sorted columns are to be maintained.\n     * @returns {void}\n     */\n    Sort.prototype.sortColumn = function (columnName, direction, isMultiSort) {\n        var gObj = this.parent;\n        if (this.parent.getColumnByField(columnName).allowSorting === false || this.parent.isContextMenuOpen()) {\n            this.parent.log('action_disabled_column', { moduleName: this.getModuleName(), columnName: columnName });\n            return;\n        }\n        if (!gObj.allowMultiSorting) {\n            isMultiSort = gObj.allowMultiSorting;\n        }\n        if (this.isActionPrevent()) {\n            gObj.notify(events.preventBatch, {\n                instance: this, handler: this.sortColumn,\n                arg1: columnName, arg2: direction, arg3: isMultiSort\n            });\n            return;\n        }\n        this.backupSettings();\n        this.columnName = columnName;\n        this.direction = direction;\n        this.isMultiSort = isMultiSort;\n        this.removeSortIcons();\n        this.updateSortedCols(columnName, isMultiSort);\n        this.updateModel();\n    };\n    Sort.prototype.setFullScreenDialog = function () {\n        if (this.serviceLocator) {\n            this.serviceLocator.registerAdaptiveService(this, this.parent.enableAdaptiveUI, ResponsiveDialogAction.isSort);\n        }\n    };\n    Sort.prototype.backupSettings = function () {\n        this.lastSortedCols = iterateExtend(this.sortSettings.columns);\n        this.lastCols = this.sortedColumns;\n    };\n    Sort.prototype.restoreSettings = function () {\n        this.isModelChanged = false;\n        this.isMultiSort = true;\n        this.parent.setProperties({ sortSettings: { columns: this.lastSortedCols } }, true);\n        //this.parent.sortSettings.columns =  this.lastSortedCols;\n        this.sortedColumns = this.lastCols;\n        this.isModelChanged = true;\n    };\n    Sort.prototype.updateSortedCols = function (columnName, isMultiSort) {\n        if (!isMultiSort) {\n            if (this.parent.allowGrouping) {\n                for (var i = 0, len = this.sortedColumns.length; i < len; i++) {\n                    if (this.parent.groupSettings.columns.indexOf(this.sortedColumns[i]) < 0) {\n                        this.sortedColumns.splice(i, 1);\n                        len--;\n                        i--;\n                    }\n                }\n            }\n            else {\n                this.sortedColumns.splice(0, this.sortedColumns.length);\n            }\n        }\n        if (this.sortedColumns.indexOf(columnName) < 0) {\n            this.sortedColumns.push(columnName);\n        }\n    };\n    /**\n     * @param {NotifyArgs} e - specifies the NotifyArgs\n     * @returns {void}\n     * @hidden\n     */\n    Sort.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        if (this.contentRefresh) {\n            var args = this.sortSettings.columns.length ? {\n                columnName: this.columnName, direction: this.direction, requestType: 'sorting',\n                type: events.actionBegin, target: this.currentTarget, cancel: false\n            } : {\n                requestType: 'sorting', type: events.actionBegin, cancel: false,\n                target: this.currentTarget\n            };\n            this.parent.notify(events.modelChanged, args);\n        }\n        this.refreshSortSettings();\n        this.removeSortIcons();\n        this.addSortIcons();\n    };\n    Sort.prototype.refreshSortSettings = function () {\n        this.sortedColumns.length = 0;\n        var sortColumns = this.sortSettings.columns;\n        for (var i = 0; i < sortColumns.length; i++) {\n            if (!sortColumns[i].isFromGroup) {\n                this.sortedColumns.push(sortColumns[i].field);\n            }\n        }\n    };\n    /**\n     * Clears all the sorted columns of the Grid.\n     *\n     * @returns {void}\n     */\n    Sort.prototype.clearSorting = function () {\n        var cols = getActualPropFromColl(this.sortSettings.columns);\n        if (this.isActionPrevent()) {\n            this.parent.notify(events.preventBatch, { instance: this, handler: this.clearSorting });\n            return;\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            this.removeSortColumn(cols[i].field);\n        }\n    };\n    Sort.prototype.isActionPrevent = function () {\n        return isActionPrevent(this.parent);\n    };\n    /**\n     * Remove sorted column by field name.\n     *\n     * @param {string} field - Defines the column field name to remove sort.\n     * @returns {void}\n     * @hidden\n     */\n    Sort.prototype.removeSortColumn = function (field) {\n        var gObj = this.parent;\n        var cols = this.sortSettings.columns;\n        if (cols.length === 0 && this.sortedColumns.indexOf(field) < 0) {\n            return;\n        }\n        if (this.isActionPrevent()) {\n            this.parent.notify(events.preventBatch, { instance: this, handler: this.removeSortColumn, arg1: field });\n            return;\n        }\n        this.backupSettings();\n        this.removeSortIcons();\n        var args = { requestType: 'sorting', type: events.actionBegin, target: this.currentTarget };\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].field === field) {\n                if (gObj.allowGrouping && gObj.groupSettings.columns.indexOf(cols[i].field) > -1) {\n                    continue;\n                }\n                this.sortedColumns.splice(this.sortedColumns.indexOf(cols[i].field), 1);\n                cols.splice(i, 1);\n                this.isRemove = true;\n                if (this.isModelChanged) {\n                    this.parent.notify(events.modelChanged, args);\n                }\n                break;\n            }\n        }\n        if (!args.cancel) {\n            this.addSortIcons();\n        }\n    };\n    Sort.prototype.getSortedColsIndexByField = function (field, sortedColumns) {\n        var cols = sortedColumns ? sortedColumns : this.sortSettings.columns;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].field === field) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} returns the module name\n     * @private\n     */\n    Sort.prototype.getModuleName = function () {\n        return 'sort';\n    };\n    Sort.prototype.initialEnd = function () {\n        this.parent.off(events.contentReady, this.initialEnd);\n        if (this.parent.getColumns().length && this.sortSettings.columns.length) {\n            var gObj = this.parent;\n            this.contentRefresh = false;\n            this.isMultiSort = this.sortSettings.columns.length > 1;\n            for (var _i = 0, _a = gObj.sortSettings.columns.slice(); _i < _a.length; _i++) {\n                var col = _a[_i];\n                if (this.sortedColumns.indexOf(col.field) > -1) {\n                    this.sortColumn(col.field, col.direction, true);\n                }\n            }\n            this.isMultiSort = false;\n            this.contentRefresh = true;\n        }\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Sort.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.evtHandlers = [{ event: events.setFullScreenDialog, handler: this.setFullScreenDialog },\n            { event: events.contentReady, handler: this.initialEnd },\n            { event: events.sortComplete, handler: this.onActionComplete },\n            { event: events.inBoundModelChanged, handler: this.onPropertyChanged },\n            { event: events.click, handler: this.clickHandler },\n            { event: events.headerRefreshed, handler: this.refreshSortIcons },\n            { event: events.keyPressed, handler: this.keyPressed },\n            { event: events.cancelBegin, handler: this.cancelBeginEvent },\n            { event: events.destroy, handler: this.destroy }];\n        addRemoveEventListener(this.parent, this.evtHandlers, true, this);\n    };\n    /**\n     * @returns {void}\n     * @hidden\n     */\n    Sort.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        addRemoveEventListener(this.parent, this.evtHandlers, false);\n    };\n    /**\n     * To destroy the sorting\n     *\n     * @returns {void}\n     * @hidden\n     */\n    Sort.prototype.destroy = function () {\n        this.isModelChanged = false;\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.' + literals.gridHeader) && !gridElement.querySelector('.' + literals.gridContent))) {\n            return;\n        }\n        if (this.parent.element.querySelector('.e-gridpopup').getElementsByClassName('e-sortdirect').length) {\n            this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (!this.parent.refreshing && (this.parent.isDestroyed || !this.parent.allowSorting)) {\n            this.clearSorting();\n        }\n        this.isModelChanged = true;\n        this.removeEventListener();\n    };\n    Sort.prototype.cancelBeginEvent = function (e) {\n        if (e.requestType === 'sorting') {\n            this.restoreSettings();\n            this.refreshSortIcons();\n            this.isMultiSort = true;\n        }\n    };\n    Sort.prototype.clickHandler = function (e) {\n        var gObj = this.parent;\n        this.currentTarget = null;\n        this.popUpClickHandler(e);\n        var target = closest(e.target, '.e-headercell');\n        if (target && !e.target.classList.contains('e-grptogglebtn') &&\n            !(target.classList.contains('e-resized')) &&\n            !e.target.classList.contains('e-rhandler') &&\n            !e.target.classList.contains('e-columnmenu') &&\n            !e.target.classList.contains('e-filtermenudiv') &&\n            !parentsUntil(e.target, 'e-stackedheadercell') &&\n            !(gObj.allowSelection && gObj.selectionSettings.allowColumnSelection &&\n                e.target.classList.contains('e-headercell'))) {\n            var gObj_1 = this.parent;\n            var colObj = gObj_1.getColumnByUid(target.querySelector('.e-headercelldiv').getAttribute('e-mappinguid'));\n            if (colObj.type !== 'checkbox') {\n                this.initiateSort(target, e, colObj);\n                if (Browser.isDevice) {\n                    this.showPopUp(e);\n                }\n            }\n        }\n        if (target) {\n            target.classList.remove('e-resized');\n        }\n        if (parentsUntil(e.target, 'e-excel-ascending') ||\n            parentsUntil(e.target, 'e-excel-descending')) {\n            var colUid = closest(e.target, '.e-filter-popup').getAttribute('uid');\n            var direction = isNullOrUndefined(parentsUntil(e.target, 'e-excel-descending')) ?\n                'Ascending' : 'Descending';\n            this.sortColumn(gObj.getColumnByUid(colUid).field, direction, false);\n        }\n    };\n    Sort.prototype.keyPressed = function (e) {\n        var ele = e.target;\n        if (!this.parent.isEdit && (e.action === 'enter' || e.action === 'ctrlEnter' || e.action === 'shiftEnter')\n            && closest(ele, '.e-headercell')) {\n            var target = this.focus.getFocusedElement();\n            if (isNullOrUndefined(target) || !target.classList.contains('e-headercell')\n                || !target.querySelector('.e-headercelldiv')) {\n                return;\n            }\n            var col = this.parent.getColumnByUid(target.querySelector('.e-headercelldiv').getAttribute('e-mappinguid'));\n            this.initiateSort(target, e, col);\n        }\n    };\n    Sort.prototype.initiateSort = function (target, e, column) {\n        var gObj = this.parent;\n        var field = column.field;\n        this.currentTarget = e.target;\n        var direction = !target.getElementsByClassName('e-ascending').length ? 'Ascending' :\n            'Descending';\n        this.isMultiSort = e.ctrlKey || this.enableSortMultiTouch ||\n            (navigator.userAgent.indexOf('Mac OS') !== -1 && e.metaKey);\n        if (e.shiftKey || (this.sortSettings.allowUnsort && target.getElementsByClassName('e-descending').length)\n            && !(gObj.groupSettings.columns.indexOf(field) > -1)) {\n            this.removeSortColumn(field);\n        }\n        else {\n            this.sortColumn(field, direction, this.isMultiSort);\n        }\n    };\n    Sort.prototype.showPopUp = function (e) {\n        var target = closest(e.target, '.e-headercell');\n        if (this.parent.allowMultiSorting && (!isNullOrUndefined(target) || this.parent.isContextMenuOpen())) {\n            setCssInGridPopUp(this.parent.element.querySelector('.e-gridpopup'), e, 'e-sortdirect e-icons e-icon-sortdirect' + (this.sortedColumns.length > 1 ? ' e-spanclicked' : ''));\n        }\n    };\n    Sort.prototype.popUpClickHandler = function (e) {\n        var target = e.target;\n        if (closest(target, '.e-headercell') || e.target.classList.contains(literals.rowCell) ||\n            closest(target, '.e-gridpopup')) {\n            if (target.classList.contains('e-sortdirect')) {\n                if (!target.classList.contains('e-spanclicked')) {\n                    target.classList.add('e-spanclicked');\n                    this.enableSortMultiTouch = true;\n                }\n                else {\n                    target.classList.remove('e-spanclicked');\n                    this.enableSortMultiTouch = false;\n                    this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n                }\n            }\n        }\n        else {\n            this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n    };\n    Sort.prototype.addSortIcons = function () {\n        var gObj = this.parent;\n        var header;\n        var filterElement;\n        var cols = this.sortSettings.columns;\n        var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n        for (var i = 0, len = cols.length; i < len; i++) {\n            header = gObj.getColumnHeaderByField(cols[i].field);\n            if (fieldNames.indexOf(cols[i].field) === -1 || isNullOrUndefined(header)) {\n                continue;\n            }\n            this.aria.setSort(header, (cols[i].direction).toLowerCase());\n            if (this.isMultiSort && cols.length > 1) {\n                header.querySelector('.e-headercelldiv').insertBefore(this.parent.createElement('span', { className: 'e-sortnumber', innerHTML: (i + 1).toString() }), header.querySelector('.e-headertext'));\n            }\n            filterElement = header.querySelector('.e-sortfilterdiv');\n            if (cols[i].direction === 'Ascending') {\n                classList(filterElement, ['e-ascending', 'e-icon-ascending'], []);\n            }\n            else {\n                classList(filterElement, ['e-descending', 'e-icon-descending'], []);\n            }\n        }\n    };\n    Sort.prototype.removeSortIcons = function (position) {\n        var gObj = this.parent;\n        var header;\n        var cols = this.sortSettings.columns;\n        var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n        for (var i = position ? position : 0, len = !isNullOrUndefined(position) ? position + 1 : cols.length; i < len; i++) {\n            header = gObj.getColumnHeaderByField(cols[i].field);\n            if (isNullOrUndefined(header) || (gObj.allowGrouping && gObj.groupSettings.columns.indexOf(cols[i].field) > -1 &&\n                !header.querySelector('.e-sortfilterdiv'))) {\n                continue;\n            }\n            if (fieldNames.indexOf(cols[i].field) === -1) {\n                continue;\n            }\n            this.aria.setSort(header, 'none');\n            classList(header.querySelector('.e-sortfilterdiv'), [], ['e-descending', 'e-icon-descending', 'e-ascending', 'e-icon-ascending']);\n            if (header.querySelector('.e-sortnumber')) {\n                header.querySelector('.e-headercelldiv').removeChild(header.querySelector('.e-sortnumber'));\n            }\n        }\n    };\n    Sort.prototype.getSortColumnFromField = function (field) {\n        for (var i = 0, len = this.sortSettings.columns.length; i < len; i++) {\n            if (this.sortSettings.columns[i].field === field) {\n                return this.sortSettings.columns[i];\n            }\n        }\n        return false;\n    };\n    Sort.prototype.updateAriaAttr = function () {\n        var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n        for (var _i = 0, _a = this.sortedColumns; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (fieldNames.indexOf(col) === -1) {\n                continue;\n            }\n            var header = this.parent.getColumnHeaderByField(col);\n            this.aria.setSort(header, this.getSortColumnFromField(col).direction);\n        }\n    };\n    Sort.prototype.refreshSortIcons = function (params) {\n        if (params === void 0) { params = { args: { isFrozen: false } }; }\n        if (!params.args.isFrozen) {\n            this.removeSortIcons();\n            this.isMultiSort = true;\n            this.removeSortIcons();\n            this.addSortIcons();\n            this.isMultiSort = false;\n            this.updateAriaAttr();\n        }\n    };\n    /**\n     * To show the responsive custom sort dialog\n     *\n     * @param {boolean} enable - specifes dialog open\n     * @returns {void}\n     * @hidden\n     */\n    Sort.prototype.showCustomSort = function (enable) {\n        this.responsiveDialogRenderer.isCustomDialog = enable;\n        this.responsiveDialogRenderer.showResponsiveDialog();\n    };\n    return Sort;\n}());\nexport { Sort };\n"]},"metadata":{},"sourceType":"module"}