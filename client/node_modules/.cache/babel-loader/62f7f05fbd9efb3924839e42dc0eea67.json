{"ast":null,"code":"import * as CONSTANT from './../base/constant';\n/**\n * Link internal component\n *\n * @hidden\n\n */\n\nvar ClearFormat =\n/** @class */\nfunction () {\n  /**\n   * Constructor for creating the clear format plugin\n   *\n   * @param {MarkdownParser} parent - specifies the parent element\n   * @hidden\n    */\n  function ClearFormat(parent) {\n    this.parent = parent;\n    this.selection = this.parent.markdownSelection;\n    this.addEventListener();\n  }\n\n  ClearFormat.prototype.addEventListener = function () {\n    this.parent.observer.on(CONSTANT.CLEAR_COMMAND, this.clear, this);\n  };\n\n  ClearFormat.prototype.replaceRegex = function (data) {\n    /* eslint-disable */\n    return data.replace(/\\*/ig, '\\\\*').replace(/\\&/ig, '\\\\&').replace(/\\-/ig, '\\\\-').replace(/\\^/ig, '\\\\^').replace(/\\$/ig, '\\\\$').replace(/\\./ig, '\\\\.').replace(/\\|/ig, '\\\\|').replace(/\\?/ig, '\\\\?').replace(/\\+/ig, '\\\\+').replace(/\\-/ig, '\\\\-').replace(/\\&/ig, '\\\\&');\n    /* eslint-enable */\n  };\n\n  ClearFormat.prototype.clearSelectionTags = function (text) {\n    var data = this.parent.selectionTags;\n    var keys = Object.keys(data);\n\n    for (var num = 0; num < keys.length; num++) {\n      var key = keys[num]; // eslint-disable-next-line\n\n      if (data.hasOwnProperty(key) && data[key] !== '') {\n        var expString = this.replaceRegex(data[key]);\n        var regExp = void 0;\n        var startExp = data[key].length;\n        var endExp = data[key] === '<sup>' || data[key] === '<sub>' ? data[key].length + 1 : data[key].length;\n\n        if (data[key] === '<sup>') {\n          // eslint-disable-next-line\n          regExp = new RegExp('<sup>(.*?)<\\/sup>', 'ig');\n        } else if (data[key] === '<sub>') {\n          // eslint-disable-next-line\n          regExp = new RegExp('<sub>(.*?)<\\/sub>', 'ig');\n        } else {\n          regExp = new RegExp(expString + '(.*?)' + expString, 'ig');\n        }\n\n        var val = text.match(regExp);\n\n        for (var index = 0; val && index < val.length && val[index] !== ''; index++) {\n          text = text.replace(val[index], val[index].substr(startExp, val[index].length - endExp - startExp));\n        }\n      }\n    }\n\n    return text;\n  };\n\n  ClearFormat.prototype.clearFormatTags = function (text) {\n    var lines = text.split('\\n');\n    return this.clearFormatLines(lines);\n  };\n\n  ClearFormat.prototype.clearFormatLines = function (lines) {\n    var tags = [this.parent.formatTags, this.parent.listTags];\n    var str = '';\n\n    for (var len = 0; len < lines.length; len++) {\n      for (var num = 0; num < tags.length; num++) {\n        var data = tags[num];\n        var keys = Object.keys(data);\n\n        for (var index = 0; index < keys.length; index++) {\n          var key = keys[index]; // eslint-disable-next-line\n\n          if (data.hasOwnProperty(key) && data[key] !== '') {\n            if (lines[len].indexOf(data[key]) === 0) {\n              lines[len] = lines[len].replace(data[key], '');\n              lines[len] = this.clearFormatLines([lines[len]]);\n            }\n          }\n        }\n      }\n\n      str = str + lines[len] + (len !== lines.length - 1 ? '\\n' : '');\n    }\n\n    return str;\n  };\n\n  ClearFormat.prototype.clear = function (e) {\n    var textArea = this.parent.element;\n    textArea.focus();\n    var start = textArea.selectionStart;\n    var end = textArea.selectionEnd;\n    var text = this.selection.getSelectedText(textArea);\n    text = this.clearSelectionTags(text);\n    text = this.clearFormatTags(text);\n    textArea.value = textArea.value.substr(0, start) + text + textArea.value.substr(end, textArea.value.length);\n    this.parent.markdownSelection.setSelection(textArea, start, start + text.length);\n    this.restore(textArea, start, start + text.length, e);\n  };\n\n  ClearFormat.prototype.restore = function (textArea, start, end, event) {\n    this.selection.save(start, end);\n    this.selection.restore(textArea);\n\n    if (event && event.callBack) {\n      event.callBack({\n        requestType: event.subCommand,\n        selectedText: this.selection.getSelectedText(textArea),\n        editorMode: 'Markdown',\n        event: event.event\n      });\n    }\n  };\n\n  return ClearFormat;\n}();\n\nexport { ClearFormat };","map":{"version":3,"sources":["/Users/yasaman/Documents/moj_adminpanel/adminpanel/node_modules/@syncfusion/ej2-richtexteditor/src/markdown-parser/plugin/clearformat.js"],"names":["CONSTANT","ClearFormat","parent","selection","markdownSelection","addEventListener","prototype","observer","on","CLEAR_COMMAND","clear","replaceRegex","data","replace","clearSelectionTags","text","selectionTags","keys","Object","num","length","key","hasOwnProperty","expString","regExp","startExp","endExp","RegExp","val","match","index","substr","clearFormatTags","lines","split","clearFormatLines","tags","formatTags","listTags","str","len","indexOf","e","textArea","element","focus","start","selectionStart","end","selectionEnd","getSelectedText","value","setSelection","restore","event","save","callBack","requestType","subCommand","selectedText","editorMode"],"mappings":"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","sourcesContent":["import * as CONSTANT from './../base/constant';\n/**\n * Link internal component\n *\n * @hidden\n\n */\nvar ClearFormat = /** @class */ (function () {\n    /**\n     * Constructor for creating the clear format plugin\n     *\n     * @param {MarkdownParser} parent - specifies the parent element\n     * @hidden\n\n     */\n    function ClearFormat(parent) {\n        this.parent = parent;\n        this.selection = this.parent.markdownSelection;\n        this.addEventListener();\n    }\n    ClearFormat.prototype.addEventListener = function () {\n        this.parent.observer.on(CONSTANT.CLEAR_COMMAND, this.clear, this);\n    };\n    ClearFormat.prototype.replaceRegex = function (data) {\n        /* eslint-disable */\n        return data.replace(/\\*/ig, '\\\\*').replace(/\\&/ig, '\\\\&')\n            .replace(/\\-/ig, '\\\\-').replace(/\\^/ig, '\\\\^')\n            .replace(/\\$/ig, '\\\\$').replace(/\\./ig, '\\\\.')\n            .replace(/\\|/ig, '\\\\|').replace(/\\?/ig, '\\\\?')\n            .replace(/\\+/ig, '\\\\+').replace(/\\-/ig, '\\\\-')\n            .replace(/\\&/ig, '\\\\&');\n        /* eslint-enable */\n    };\n    ClearFormat.prototype.clearSelectionTags = function (text) {\n        var data = this.parent.selectionTags;\n        var keys = Object.keys(data);\n        for (var num = 0; num < keys.length; num++) {\n            var key = keys[num];\n            // eslint-disable-next-line\n            if (data.hasOwnProperty(key) && data[key] !== '') {\n                var expString = this.replaceRegex(data[key]);\n                var regExp = void 0;\n                var startExp = data[key].length;\n                var endExp = (data[key] === '<sup>' || data[key] === '<sub>') ? data[key].length + 1 : data[key].length;\n                if (data[key] === '<sup>') {\n                    // eslint-disable-next-line\n                    regExp = new RegExp('<sup>(.*?)<\\/sup>', 'ig');\n                }\n                else if (data[key] === '<sub>') {\n                    // eslint-disable-next-line\n                    regExp = new RegExp('<sub>(.*?)<\\/sub>', 'ig');\n                }\n                else {\n                    regExp = new RegExp(expString + '(.*?)' + expString, 'ig');\n                }\n                var val = text.match(regExp);\n                for (var index = 0; val && index < val.length && val[index] !== ''; index++) {\n                    text = text.replace(val[index], val[index].substr(startExp, val[index].length - endExp - startExp));\n                }\n            }\n        }\n        return text;\n    };\n    ClearFormat.prototype.clearFormatTags = function (text) {\n        var lines = text.split('\\n');\n        return this.clearFormatLines(lines);\n    };\n    ClearFormat.prototype.clearFormatLines = function (lines) {\n        var tags = [this.parent.formatTags, this.parent.listTags];\n        var str = '';\n        for (var len = 0; len < lines.length; len++) {\n            for (var num = 0; num < tags.length; num++) {\n                var data = tags[num];\n                var keys = Object.keys(data);\n                for (var index = 0; index < keys.length; index++) {\n                    var key = keys[index];\n                    // eslint-disable-next-line\n                    if (data.hasOwnProperty(key) && data[key] !== '') {\n                        if (lines[len].indexOf(data[key]) === 0) {\n                            lines[len] = lines[len].replace(data[key], '');\n                            lines[len] = this.clearFormatLines([lines[len]]);\n                        }\n                    }\n                }\n            }\n            str = str + lines[len] + ((len !== lines.length - 1) ? '\\n' : '');\n        }\n        return str;\n    };\n    ClearFormat.prototype.clear = function (e) {\n        var textArea = this.parent.element;\n        textArea.focus();\n        var start = textArea.selectionStart;\n        var end = textArea.selectionEnd;\n        var text = this.selection.getSelectedText(textArea);\n        text = this.clearSelectionTags(text);\n        text = this.clearFormatTags(text);\n        textArea.value = textArea.value.substr(0, start)\n            + text + textArea.value.substr(end, textArea.value.length);\n        this.parent.markdownSelection.setSelection(textArea, start, start + text.length);\n        this.restore(textArea, start, start + text.length, e);\n    };\n    ClearFormat.prototype.restore = function (textArea, start, end, event) {\n        this.selection.save(start, end);\n        this.selection.restore(textArea);\n        if (event && event.callBack) {\n            event.callBack({\n                requestType: event.subCommand,\n                selectedText: this.selection.getSelectedText(textArea),\n                editorMode: 'Markdown',\n                event: event.event\n            });\n        }\n    };\n    return ClearFormat;\n}());\nexport { ClearFormat };\n"]},"metadata":{},"sourceType":"module"}