{"ast":null,"code":"import { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, closest as getClosest, remove } from '@syncfusion/ej2-base';\nimport { classList } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { RowRenderer } from './row-renderer';\nimport { Cell } from '../models/cell';\nimport { Row } from '../models/row';\nimport * as events from '../base/constant';\nimport { Draggable, Droppable } from '@syncfusion/ej2-base';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { parentsUntil, wrap, measureColumnDepth, appendChildren } from '../base/util';\nimport * as literals from '../base/string-literals'; // eslint-disable-next-line valid-jsdoc\n\n/**\n * Content module is used to render grid content\n *\n * @hidden\n */\n\nvar HeaderRender =\n/** @class */\nfunction () {\n  /**\n   * Constructor for header renderer module\n   *\n   * @param {IGrid} parent - specifies the IGrid\n   * @param {ServiceLocator} serviceLocator - specifies the serviceLocator\n   */\n  function HeaderRender(parent, serviceLocator) {\n    var _this = this;\n\n    this.frzIdx = 0;\n    this.notfrzIdx = 0;\n    this.isFirstCol = false;\n    this.isReplaceDragEle = true; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n    this.helper = function (e) {\n      var gObj = _this.parent;\n      var target = _this.draggable.currentStateTarget;\n      var parentEle = parentsUntil(target, 'e-headercell');\n\n      if (!(gObj.allowReordering || gObj.allowGrouping) || !isNullOrUndefined(parentEle) && parentEle.getElementsByClassName('e-checkselectall').length > 0) {\n        return false;\n      }\n\n      var visualElement = _this.parent.createElement('div', {\n        className: 'e-cloneproperties e-dragclone e-headerclone'\n      });\n\n      var element = target.classList.contains('e-headercell') ? target : parentEle;\n\n      if (!element || !gObj.allowReordering && element.classList.contains('e-stackedheadercell')) {\n        return false;\n      }\n\n      var height = element.offsetHeight;\n      var headercelldiv = element.querySelector('.e-headercelldiv') || element.querySelector('.e-stackedheadercelldiv');\n      var col;\n\n      if (headercelldiv) {\n        if (element.querySelector('.e-stackedheadercelldiv')) {\n          col = gObj.getStackedHeaderColumnByHeaderText(headercelldiv.innerText.trim(), gObj.columns);\n        } else {\n          col = gObj.getColumnByUid(headercelldiv.getAttribute('e-mappinguid'));\n        }\n\n        _this.column = col;\n\n        if (_this.column.lockColumn) {\n          return false;\n        }\n\n        visualElement.setAttribute('e-mappinguid', _this.column.uid);\n      }\n\n      if (col && !isNullOrUndefined(col.headerTemplate)) {\n        if (!isNullOrUndefined(col.headerTemplate)) {\n          var colIndex = gObj.getColumnIndexByField(col.field);\n          var result = col.getHeaderTemplate()(extend({\n            'index': colIndex\n          }, col), gObj, 'headerTemplate');\n          appendChildren(visualElement, result);\n        } else {\n          visualElement.innerHTML = col.headerTemplate;\n        }\n      } else {\n        visualElement.innerHTML = headercelldiv ? col.headerText : element.firstElementChild.innerHTML;\n      }\n\n      visualElement.style.width = element.offsetWidth + 'px';\n      visualElement.style.height = element.offsetHeight + 'px';\n      visualElement.style.lineHeight = (height - 6).toString() + 'px';\n      gObj.element.appendChild(visualElement);\n      return visualElement;\n    };\n\n    this.dragStart = function (e) {\n      var gObj = _this.parent;\n      gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n      gObj.notify(events.columnDragStart, {\n        target: _this.draggable.currentStateTarget,\n        column: _this.column,\n        event: e.event\n      });\n    };\n\n    this.drag = function (e) {\n      var gObj = _this.parent;\n      var target = e.target;\n\n      if (target) {\n        var closest = getClosest(target, '.e-grid');\n\n        var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n\n        if (!closest || closest.getAttribute('id') !== gObj.element.getAttribute('id')) {\n          classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n\n          if (gObj.allowReordering) {\n            gObj.element.querySelector('.e-reorderuparrow').style.display = 'none';\n            gObj.element.querySelector('.e-reorderdownarrow').style.display = 'none';\n          }\n\n          if (!gObj.groupSettings.allowReordering) {\n            return;\n          }\n        }\n\n        gObj.notify(events.columnDrag, {\n          target: e.target,\n          column: _this.column,\n          event: e.event\n        });\n      }\n    };\n\n    this.dragStop = function (e) {\n      var gObj = _this.parent;\n      var cancel;\n      gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n\n      if (!parentsUntil(e.target, 'e-headercell') && !parentsUntil(e.target, 'e-groupdroparea') || !gObj.allowReordering && parentsUntil(e.target, 'e-headercell') || !e.helper.getAttribute('e-mappinguid') && parentsUntil(e.target, 'e-groupdroparea')) {\n        remove(e.helper);\n        cancel = true;\n      }\n\n      gObj.notify(events.columnDragStop, {\n        target: e.target,\n        event: e.event,\n        column: _this.column,\n        cancel: cancel\n      });\n    };\n\n    this.drop = function (e) {\n      var gObj = _this.parent;\n      var uid = e.droppedElement.getAttribute('e-mappinguid');\n      var closest = getClosest(e.target, '.e-grid');\n      remove(e.droppedElement);\n\n      if (closest && closest.getAttribute('id') !== gObj.element.getAttribute('id') || !(gObj.allowReordering || gObj.allowGrouping)) {\n        return;\n      }\n\n      gObj.notify(events.headerDrop, {\n        target: e.target,\n        uid: uid,\n        droppedElement: e.droppedElement\n      });\n    };\n\n    this.parent = parent;\n    this.serviceLocator = serviceLocator;\n    this.ariaService = this.serviceLocator.getService('ariaService');\n    this.widthService = this.serviceLocator.getService('widthService');\n\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    if (!this.parent.enableColumnVirtualization && !this.parent.getFrozenLeftColumnsCount() && !this.parent.getFrozenRightColumnsCount()) {\n      this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n    }\n\n    this.parent.on(events.columnPositionChanged, this.colPosRefresh, this);\n    this.parent.on(events.initialEnd, this.renderCustomToolbar, this);\n\n    if (this.parent.rowRenderingMode === 'Vertical') {\n      this.parent.on(events.uiUpdate, this.updateCustomResponsiveToolbar, this);\n    }\n  }\n  /**\n   * The function is used to render grid header div\n   *\n   * @returns {void}\n   */\n\n\n  HeaderRender.prototype.renderPanel = function () {\n    var div = this.parent.element.querySelector('.' + literals.gridHeader);\n    var isRendered = div != null;\n    div = isRendered ? div : this.parent.createElement('div', {\n      className: 'e-gridheader'\n    });\n    var innerDiv = isRendered ? div.querySelector('.' + literals.headerContent) : this.parent.createElement('div', {\n      className: literals.headerContent\n    });\n    this.toggleStackClass(div);\n    div.appendChild(innerDiv);\n    this.setPanel(div);\n\n    if (!isRendered) {\n      this.parent.element.appendChild(div);\n    }\n  };\n  /**\n   * The function is used to render grid header div\n   *\n   * @returns {void}\n   */\n\n\n  HeaderRender.prototype.renderTable = function () {\n    var headerDiv = this.getPanel();\n    headerDiv.appendChild(this.createHeaderTable());\n    this.setTable(headerDiv.querySelector('.' + literals.table));\n\n    if (!this.parent.getFrozenColumns() && !this.parent.getFrozenRightColumnsCount() && !this.parent.getFrozenLeftColumnsCount()) {\n      this.initializeHeaderDrag();\n      this.initializeHeaderDrop();\n    }\n\n    this.parent.notify(events.headerRefreshed, {\n      rows: this.rows,\n      args: {\n        isFrozen: this.parent.isFrozenGrid()\n      }\n    });\n  };\n  /**\n   * Get the header content div element of grid\n   *\n   * @returns {Element} returns the element\n   */\n\n\n  HeaderRender.prototype.getPanel = function () {\n    return this.headerPanel;\n  };\n  /**\n   * Set the header content div element of grid\n   *\n   * @param  {Element} panel - specifies the panel element\n   * @returns {void}\n   */\n\n\n  HeaderRender.prototype.setPanel = function (panel) {\n    this.headerPanel = panel;\n  };\n  /**\n   * Get the header table element of grid\n   *\n   * @returns {Element} returns the element\n   */\n\n\n  HeaderRender.prototype.getTable = function () {\n    return this.headerTable;\n  };\n  /**\n   * Set the header table element of grid\n   *\n   * @param  {Element} table - specifies the table element\n   * @returns {void}\n   */\n\n\n  HeaderRender.prototype.setTable = function (table) {\n    this.headerTable = table;\n  };\n  /**\n   * Get the header colgroup element\n   *\n   * @returns {Element} returns the element\n   */\n\n\n  HeaderRender.prototype.getColGroup = function () {\n    return this.colgroup;\n  };\n  /**\n   * Set the header colgroup element\n   *\n   * @param {Element} colGroup - specifies the colgroup\n   * @returns {Element} returns the element\n   */\n\n\n  HeaderRender.prototype.setColGroup = function (colGroup) {\n    return this.colgroup = colGroup;\n  };\n  /**\n   * Get the header row element collection.\n   *\n   * @returns {Element[]} returns the element\n   */\n\n\n  HeaderRender.prototype.getRows = function () {\n    var table = this.getTable();\n    return table.tHead.rows;\n  };\n  /**\n   * The function is used to create header table elements\n   *\n   * @returns {Element} returns the element\n   * @hidden\n   */\n\n\n  HeaderRender.prototype.createHeaderTable = function () {\n    var table = this.createTable();\n    var innerDiv = this.getPanel().querySelector('.' + literals.headerContent);\n    innerDiv.appendChild(table);\n    return innerDiv;\n  };\n  /**\n   * The function is used to create header table elements\n   *\n   * @param {Element} tableEle - specifies the table Element\n   * @param {freezeTable} tableName - specifies the table name\n   * @returns {Element} returns the element\n   * @hidden\n   */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  HeaderRender.prototype.createHeader = function (tableEle, tableName) {\n    if (tableEle === void 0) {\n      tableEle = null;\n    }\n\n    var gObj = this.parent;\n    var isFrozen = gObj.isFrozenGrid();\n\n    if (this.getTable() && !isFrozen) {\n      remove(this.getTable());\n    }\n\n    var table = this.parent.createElement('table', {\n      className: literals.table,\n      attrs: {\n        cellspacing: '0.25px',\n        role: 'grid'\n      }\n    });\n    var tblName = tableName ? tableName : gObj.getFrozenLeftCount() ? 'frozen-left' : 'frozen-right';\n    var findHeaderRow = this.createHeaderContent(tblName);\n    var thead = findHeaderRow.thead;\n    var tbody = this.parent.createElement(literals.tbody, {\n      className: this.parent.frozenRows ? '' : 'e-hide'\n    });\n    this.caption = this.parent.createElement('caption', {\n      innerHTML: this.parent.element.id + '_header_table',\n      className: 'e-hide'\n    });\n    var colGroup = this.parent.createElement(literals.colGroup);\n    var rowBody = this.parent.createElement('tr');\n    var bodyCell;\n    var rows = this.rows = findHeaderRow.rows;\n\n    for (var i = 0, len = rows.length; i < len; i++) {\n      for (var j = 0, len_1 = rows[i].cells.length; j < len_1; j++) {\n        bodyCell = this.parent.createElement('td');\n        rowBody.appendChild(bodyCell);\n      }\n    }\n\n    if (gObj.allowFiltering || gObj.allowSorting || gObj.allowGrouping) {\n      table.classList.add('e-sortfilter');\n    }\n\n    this.updateColGroup(colGroup);\n    tbody.appendChild(rowBody);\n    table.appendChild(this.setColGroup(colGroup));\n    table.appendChild(thead);\n    table.appendChild(tbody);\n    table.appendChild(this.caption);\n    this.ariaService.setOptions(table, {\n      colcount: gObj.getColumns().length.toString()\n    });\n    return table;\n  };\n  /**\n   * @param {Element} tableEle - specifies the column\n   * @returns {Element} returns the element\n   * @hidden\n   */\n\n\n  HeaderRender.prototype.createTable = function (tableEle) {\n    if (tableEle === void 0) {\n      tableEle = null;\n    }\n\n    return this.createHeader(tableEle);\n  };\n\n  HeaderRender.prototype.createHeaderContent = function (tableName) {\n    var gObj = this.parent;\n    var index = 1;\n    var frozenMode = gObj.getFrozenMode();\n    var columns = gObj.getColumns();\n    var thead = this.parent.createElement('thead');\n    var colHeader = this.parent.createElement('tr', {\n      className: 'e-columnheader'\n    });\n    var rowRenderer = new RowRenderer(this.serviceLocator, CellType.Header, gObj);\n    rowRenderer.element = colHeader;\n    var rows = [];\n    var headerRow;\n    this.colDepth = measureColumnDepth(gObj.columns);\n\n    for (var i = 0, len = this.colDepth; i < len; i++) {\n      rows[i] = this.generateRow(i);\n      rows[i].cells = [];\n    }\n\n    if (frozenMode !== 'Right') {\n      rows = this.ensureColumns(rows);\n    }\n\n    rows = this.getHeaderCells(rows, tableName);\n\n    if (frozenMode === 'Right') {\n      index = 0;\n      rows = this.ensureColumns(rows);\n    }\n\n    var frzCols = this.parent.getFrozenColumns();\n\n    if (this.parent.isRowDragable() && this.parent.isFrozenGrid() && rows[0].cells[index]) {\n      var colFreezeMode = rows[0].cells[index].column.getFreezeTableName();\n\n      if (colFreezeMode === 'movable' || frozenMode === literals.leftRight && colFreezeMode === literals.frozenRight) {\n        if (frozenMode === 'Right') {\n          rows[0].cells.pop();\n        } else {\n          rows[0].cells.shift();\n        }\n      } else if (!frzCols && colFreezeMode === literals.frozenLeft) {\n        rows[0].cells[0].column.freeze = colFreezeMode === literals.frozenLeft ? 'Left' : 'Right';\n      } else if (frozenMode === 'Right' && colFreezeMode === literals.frozenRight) {\n        rows[0].cells[rows[0].cells.length - 1].column.freeze = 'Right';\n      }\n    }\n\n    for (var i = 0, len = this.colDepth; i < len; i++) {\n      headerRow = rowRenderer.render(rows[i], columns);\n\n      if (this.parent.rowHeight && headerRow.querySelector('.e-headercell')) {\n        headerRow.style.height = this.parent.rowHeight + 'px';\n      }\n\n      thead.appendChild(headerRow);\n    }\n\n    var findHeaderRow = {\n      thead: thead,\n      rows: rows\n    };\n    return findHeaderRow;\n  };\n\n  HeaderRender.prototype.updateColGroup = function (colGroup) {\n    var cols = this.parent.getColumns();\n    var col;\n    var indexes = this.parent.getColumnIndexesInView();\n\n    if (this.parent.enableColumnVirtualization && this.parent.getFrozenColumns() && this.parent.contentModule.isXaxis()) {\n      cols = extend([], this.parent.getColumns());\n      cols.splice(0, this.parent.getFrozenColumns());\n    }\n\n    colGroup.id = this.parent.element.id + literals.colGroup;\n\n    if (this.parent.allowGrouping) {\n      for (var i = 0, len = this.parent.groupSettings.columns.length; i < len; i++) {\n        if (this.parent.enableColumnVirtualization && indexes.indexOf(i) === -1) {\n          continue;\n        }\n\n        col = this.parent.createElement('col', {\n          className: 'e-group-intent'\n        });\n        colGroup.appendChild(col);\n      }\n    }\n\n    if (this.parent.detailTemplate || this.parent.childGrid) {\n      col = this.parent.createElement('col', {\n        className: 'e-detail-intent'\n      });\n      colGroup.appendChild(col);\n    }\n\n    if (this.parent.isRowDragable() && this.parent.getFrozenMode() !== 'Right') {\n      col = this.parent.createElement('col', {\n        className: 'e-drag-intent'\n      });\n      colGroup.appendChild(col);\n    }\n\n    for (var i = 0, len = cols.length; i < len; i++) {\n      col = this.parent.createElement('col');\n\n      if (cols[i].visible === false) {\n        setStyleAttribute(col, {\n          'display': 'none'\n        });\n      }\n\n      colGroup.appendChild(col);\n    }\n\n    if (this.parent.isRowDragable() && this.parent.getFrozenMode() === 'Right') {\n      col = this.parent.createElement('col', {\n        className: 'e-drag-intent'\n      });\n      colGroup.appendChild(col);\n    }\n\n    return colGroup;\n  };\n\n  HeaderRender.prototype.ensureColumns = function (rows) {\n    //TODO: generate dummy column for group, detail, stacked row here; ensureColumns here\n    var gObj = this.parent;\n    var indexes = this.parent.getColumnIndexesInView();\n\n    for (var i = 0, len = rows.length; i < len; i++) {\n      if (gObj.allowGrouping) {\n        for (var c = 0, len_2 = gObj.groupSettings.columns.length; c < len_2; c++) {\n          if (this.parent.enableColumnVirtualization && indexes.indexOf(c) === -1) {\n            continue;\n          }\n\n          rows[i].cells.push(this.generateCell({}, CellType.HeaderIndent));\n        }\n      }\n\n      if (gObj.detailTemplate || gObj.childGrid) {\n        var args = {};\n        this.parent.notify(events.detailIndentCellInfo, args);\n        rows[i].cells.push(this.generateCell(args, CellType.DetailHeader));\n      }\n\n      if (gObj.isRowDragable()) {\n        rows[i].cells.push(this.generateCell({}, CellType.RowDragHIcon));\n      }\n    }\n\n    return rows;\n  };\n\n  HeaderRender.prototype.getHeaderCells = function (rows, tableName) {\n    var thead = this.parent.getHeaderTable() && this.parent.getHeaderTable().querySelector('thead');\n    var cols = this.parent.enableColumnVirtualization ? this.parent.getColumns(this.parent.enablePersistence) : this.parent.columns;\n    this.frzIdx = 0;\n    this.notfrzIdx = 0;\n\n    if (this.parent.lockcolPositionCount) {\n      for (var i = 0; i < cols.length; i++) {\n        this.lockColsRendered = false;\n        rows = this.appendCells(cols[i], rows, 0, i === 0, false, i === cols.length - 1, thead, tableName);\n      }\n    }\n\n    for (var i = 0, len = cols.length; i < len; i++) {\n      this.notfrzIdx = 0;\n      this.lockColsRendered = true;\n      rows = this.appendCells(cols[i], rows, 0, i === 0, false, i === len - 1, thead, tableName);\n    }\n\n    return rows;\n  };\n\n  HeaderRender.prototype.appendCells = function (cols, rows, index, isFirstObj, isFirstCol, isLastCol, isMovable, tableName) {\n    var lastCol = isLastCol ? 'e-lastcell' : '';\n    var isFrozen = this.parent.isFrozenGrid();\n    var isLockColumn = !this.parent.lockcolPositionCount || cols.lockColumn && !this.lockColsRendered || !cols.lockColumn && this.lockColsRendered;\n    var isFrozenLockColumn = !this.parent.lockcolPositionCount || cols.lockColumn && !this.lockColsRendered || !cols.lockColumn && this.lockColsRendered;\n    var scrollbar = this.parent.getContent().querySelector('.e-movablescrollbar');\n    var left;\n\n    if (isFrozen && scrollbar && this.parent.enableColumnVirtualization) {\n      left = scrollbar.scrollLeft;\n    }\n\n    if (!cols.columns) {\n      if (left && left > 0 && this.parent.contentModule.isXaxis() && this.parent.inViewIndexes[0] !== 0 && cols.getFreezeTableName() === 'movable') {\n        rows[index].cells.push(this.generateCell(cols, CellType.Header, this.colDepth - index, (isFirstObj ? '' : isFirstCol ? 'e-firstcell' : '') + lastCol, index, this.parent.getColumnIndexByUid(cols.uid)));\n      } else {\n        if (!isFrozen && isLockColumn || isFrozen && cols.getFreezeTableName() === tableName && isFrozenLockColumn) {\n          rows[index].cells.push(this.generateCell(cols, CellType.Header, this.colDepth - index, (isFirstObj ? '' : isFirstCol ? 'e-firstcell' : '') + lastCol, index, this.parent.getColumnIndexByUid(cols.uid)));\n        }\n      }\n\n      if (this.parent.lockcolPositionCount) {\n        if (this.frzIdx + this.notfrzIdx < this.parent.frozenColumns && (cols.lockColumn && !this.lockColsRendered || !cols.lockColumn && this.lockColsRendered)) {\n          this.frzIdx++;\n        } else {\n          this.notfrzIdx++;\n        }\n      } else {\n        this.frzIdx++;\n      }\n    } else {\n      this.isFirstCol = false;\n      var colSpan = this.getCellCnt(cols, 0);\n\n      if (colSpan) {\n        var stackedLockColsCount = this.getStackedLockColsCount(cols, 0);\n        var isStackedLockColumn = this.parent.lockcolPositionCount === 0 || !this.lockColsRendered && stackedLockColsCount !== 0 || this.lockColsRendered && colSpan - stackedLockColsCount !== 0;\n        var isFrozenStack = isFrozen && this.ensureStackedFrozen(cols.columns, tableName, false);\n\n        if (!isFrozen && isStackedLockColumn || isFrozenStack) {\n          rows[index].cells.push(new Cell({\n            cellType: CellType.StackedHeader,\n            column: cols,\n            colSpan: this.getColSpan(colSpan, stackedLockColsCount, cols.columns, tableName, isFrozen)\n          }));\n        }\n      }\n\n      if (this.parent.lockcolPositionCount && !this.lockColsRendered) {\n        for (var i = 0; i < cols.columns.length; i++) {\n          rows = this.appendCells(cols.columns[i], rows, index + 1, isFirstObj, i === 0, i === cols.columns.length - 1 && isLastCol, isMovable, tableName);\n        }\n      }\n\n      if (this.lockColsRendered) {\n        for (var i = 0, len = cols.columns.length; i < len; i++) {\n          var isFirstCol_1 = this.isFirstCol = cols.columns[i].visible && !this.isFirstCol && len !== 1;\n          var isLaststackedCol = i === len - 1;\n          rows = this.appendCells(cols.columns[i], rows, index + 1, isFirstObj, isFirstCol_1, isLaststackedCol && isLastCol, isMovable, tableName);\n        }\n      }\n    }\n\n    return rows;\n  };\n\n  HeaderRender.prototype.ensureStackedFrozen = function (columns, tableName, isTrue) {\n    var length = columns.length;\n\n    for (var i = 0; i < length; i++) {\n      if (columns[i].columns) {\n        isTrue = this.ensureStackedFrozen(columns[i].columns, tableName, isTrue);\n      } else if (columns[i].getFreezeTableName() === tableName) {\n        isTrue = true;\n        break;\n      }\n    }\n\n    return isTrue;\n  };\n\n  HeaderRender.prototype.getStackedLockColsCount = function (col, lockColsCount) {\n    if (col.columns) {\n      for (var i = 0; i < col.columns.length; i++) {\n        lockColsCount = this.getStackedLockColsCount(col.columns[i], lockColsCount);\n      }\n    } else if (col.lockColumn) {\n      lockColsCount++;\n    }\n\n    return lockColsCount;\n  };\n\n  HeaderRender.prototype.getColSpan = function (colSpan, stackedLockColsCount, columns, tableName, isFrozen) {\n    if (isFrozen) {\n      colSpan = this.getFrozenColSpan(columns, tableName, 0);\n    } else if (this.parent.lockcolPositionCount) {\n      colSpan = !this.lockColsRendered ? stackedLockColsCount : colSpan - stackedLockColsCount;\n    }\n\n    return colSpan;\n  };\n\n  HeaderRender.prototype.getFrozenColSpan = function (columns, tableName, count) {\n    var length = columns.length;\n\n    for (var i = 0; i < length; i++) {\n      if (columns[i].columns) {\n        count = this.getFrozenColSpan(columns[i].columns, tableName, count);\n      } else if (columns[i].getFreezeTableName() === tableName && columns[i].visible) {\n        count++;\n      }\n    }\n\n    return count;\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  HeaderRender.prototype.generateRow = function (index) {\n    return new Row({});\n  };\n\n  HeaderRender.prototype.generateCell = function (column, cellType, rowSpan, className, rowIndex, colIndex) {\n    var opt = {\n      'visible': column.visible,\n      'isDataCell': false,\n      'isTemplate': !isNullOrUndefined(column.headerTemplate),\n      'rowID': '',\n      'column': column,\n      'cellType': cellType,\n      'rowSpan': rowSpan,\n      'className': className,\n      'index': rowIndex,\n      'colIndex': colIndex\n    };\n\n    if (!opt.rowSpan || opt.rowSpan < 2) {\n      delete opt.rowSpan;\n    }\n\n    return new Cell(opt);\n  };\n  /**\n   * Function to hide header table column based on visible property\n   *\n   * @param {Column[]} columns - specifies the column\n   * @returns {void}\n   */\n\n\n  HeaderRender.prototype.setVisible = function (columns) {\n    var gObj = this.parent;\n    var displayVal;\n    var idx;\n    var frzCols = gObj.getFrozenColumns();\n\n    for (var c = 0, clen = columns.length; c < clen; c++) {\n      var column = columns[c];\n      idx = gObj.getNormalizedColumnIndex(column.uid);\n      displayVal = column.visible ? '' : 'none';\n\n      if (frzCols) {\n        var normalizedfrzCols = this.parent.isRowDragable() ? frzCols + 1 : frzCols;\n\n        if (idx < normalizedfrzCols) {\n          setStyleAttribute(this.getColGroup().children[idx], {\n            'display': displayVal\n          });\n        } else {\n          var mTblColGrp = gObj.getHeaderContent().querySelector('.' + literals.movableHeader).querySelector(literals.colGroup);\n          setStyleAttribute(mTblColGrp.children[idx - normalizedfrzCols], {\n            'display': displayVal\n          });\n        }\n      } else {\n        setStyleAttribute(this.getColGroup().children[idx], {\n          'display': displayVal\n        });\n      }\n    }\n\n    this.refreshUI();\n  };\n\n  HeaderRender.prototype.colPosRefresh = function () {\n    this.refreshUI();\n  };\n  /**\n   * Refresh the header of the Grid.\n   *\n   * @returns {void}\n   */\n\n\n  HeaderRender.prototype.refreshUI = function () {\n    var frzCols = this.parent.isFrozenGrid();\n    var isVFTable = this.parent.enableColumnVirtualization && frzCols;\n    var headerDiv = this.getPanel();\n    this.toggleStackClass(headerDiv);\n    var table = this.freezeReorder ? this.headerPanel.querySelector('.' + literals.movableHeader).querySelector('.' + literals.table) : this.getTable();\n    var tableName = this.parent.isFrozenGrid() ? this.parent.getFrozenLeftCount() ? 'frozen-left' : 'frozen-right' : undefined;\n\n    if (isVFTable) {\n      table = this.parent.contentModule.getVirtualFreezeHeader();\n      tableName = this.parent.contentModule.isXaxis() ? 'movable' : tableName;\n    }\n\n    if (table) {\n      remove(table);\n      table.removeChild(table.firstChild);\n      table.removeChild(table.childNodes[0]);\n      var colGroup = this.parent.createElement(literals.colGroup);\n      var findHeaderRow = this.createHeaderContent(tableName);\n      this.rows = findHeaderRow.rows;\n      table.insertBefore(findHeaderRow.thead, table.firstChild);\n      this.updateColGroup(colGroup);\n      table.insertBefore(this.setColGroup(colGroup), table.firstChild);\n\n      if (!isVFTable) {\n        this.setTable(table);\n      }\n\n      this.appendContent(table);\n      this.parent.notify(events.colGroupRefresh, {});\n      this.widthService.setWidthToColumns();\n      this.parent.updateDefaultCursor();\n\n      if (!frzCols || this.parent.enableColumnVirtualization && frzCols) {\n        this.initializeHeaderDrag();\n      }\n\n      var rows = [].slice.call(headerDiv.querySelectorAll('tr.e-columnheader'));\n\n      for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n        var row = rows_1[_i];\n        var gCells = [].slice.call(row.getElementsByClassName('e-grouptopleftcell'));\n\n        if (gCells.length) {\n          gCells[gCells.length - 1].classList.add('e-lastgrouptopleftcell');\n        }\n      }\n\n      if (!frzCols) {\n        this.parent.notify(events.headerRefreshed, {\n          rows: this.rows,\n          args: {\n            isFrozen: frzCols\n          }\n        });\n      }\n\n      if (this.parent.enableColumnVirtualization && parentsUntil(table, literals.movableHeader)) {\n        this.parent.notify(events.headerRefreshed, {\n          rows: this.rows,\n          args: {\n            isFrozen: false,\n            isXaxis: true\n          }\n        });\n      }\n\n      if (this.parent.allowTextWrap && this.parent.textWrapSettings.wrapMode === 'Header') {\n        wrap(rows, true);\n      }\n    }\n  };\n\n  HeaderRender.prototype.toggleStackClass = function (div) {\n    var column = this.parent.columns;\n    var stackedHdr = column.some(function (column) {\n      return !isNullOrUndefined(column.columns);\n    });\n\n    if (stackedHdr) {\n      div.classList.add('e-stackedheader');\n    } else {\n      div.classList.remove('e-stackedheader');\n    }\n  };\n\n  HeaderRender.prototype.appendContent = function (table) {\n    this.getPanel().querySelector('.' + literals.headerContent).appendChild(table);\n  };\n\n  HeaderRender.prototype.getCellCnt = function (col, cnt) {\n    if (col.columns) {\n      for (var i = 0, len = col.columns.length; i < len; i++) {\n        cnt = this.getCellCnt(col.columns[i], cnt);\n      }\n    } else {\n      if (col.visible) {\n        cnt++;\n      }\n    }\n\n    return cnt;\n  };\n\n  HeaderRender.prototype.initializeHeaderDrag = function () {\n    var gObj = this.parent;\n\n    if (!(this.parent.allowReordering || this.parent.allowGrouping && this.parent.groupSettings.showDropArea)) {\n      return;\n    }\n\n    this.draggable = new Draggable(gObj.getHeaderContent(), {\n      dragTarget: '.e-headercell',\n      distance: 5,\n      helper: this.helper,\n      dragStart: this.dragStart,\n      drag: this.drag,\n      dragStop: this.dragStop,\n      abort: '.e-rhandler',\n      isReplaceDragEle: this.isReplaceDragEle\n    });\n  };\n\n  HeaderRender.prototype.initializeHeaderDrop = function () {\n    var gObj = this.parent; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n    var drop = new Droppable(gObj.getHeaderContent(), {\n      accept: '.e-dragclone',\n      drop: this.drop\n    });\n  };\n\n  HeaderRender.prototype.renderCustomToolbar = function () {\n    var _this = this;\n\n    var gObj = this.parent;\n\n    if (gObj.rowRenderingMode === 'Vertical' && !gObj.toolbar && (gObj.allowSorting || gObj.allowFiltering && gObj.filterSettings.type !== 'FilterBar')) {\n      var div = gObj.createElement('div', {\n        className: 'e-res-toolbar e-toolbar'\n      });\n      var toolbarItems = gObj.createElement('div', {\n        className: 'e-toolbar-items'\n      });\n      var toolbarLeft = gObj.createElement('div', {\n        className: 'e-toolbar-left'\n      });\n      var count = this.parent.allowFiltering && this.parent.allowSorting ? 2 : 1;\n\n      for (var i = 0; i < count; i++) {\n        var toolbarItem = gObj.createElement('div', {\n          className: 'e-toolbar-item e-gridresponsiveicons e-icons e-tbtn-align'\n        });\n        var cls = count === 1 ? this.parent.allowSorting ? 'sort' : 'filter' : i === 1 ? 'sort' : 'filter';\n        var button = gObj.createElement('button', {\n          className: 'e-tbar-btn e-control e-btn e-lib e-icon-btn'\n        });\n        var span = gObj.createElement('span', {\n          className: 'e-btn-icon e-res' + cls + '-icon e-icons'\n        });\n        button.appendChild(span);\n        var btnObj = new Button({});\n        btnObj.appendTo(button);\n\n        button.onclick = function (e) {\n          if (e.target.classList.contains('e-ressort-btn') || e.target.classList.contains('e-ressort-icon')) {\n            _this.parent.showResponsiveCustomSort();\n          } else {\n            _this.parent.showResponsiveCustomFilter();\n          }\n        };\n\n        toolbarItem.appendChild(button);\n        toolbarLeft.appendChild(toolbarItem);\n      }\n\n      toolbarItems.appendChild(toolbarLeft);\n      div.appendChild(toolbarItems);\n      gObj.element.insertBefore(div, this.parent.element.querySelector('.' + literals.gridHeader));\n    } else {\n      if (gObj.enableAdaptiveUI && !gObj.toolbar) {\n        gObj.getContent().classList.add('e-responsive-header');\n      }\n    }\n  };\n\n  HeaderRender.prototype.updateCustomResponsiveToolbar = function (args) {\n    var resToolbar = this.parent.element.querySelector('.e-responsive-toolbar');\n\n    if (args.module === 'toolbar') {\n      if (resToolbar) {\n        remove(resToolbar);\n      } else {\n        this.renderCustomToolbar();\n      }\n    }\n  };\n\n  return HeaderRender;\n}();\n\nexport { HeaderRender };","map":{"version":3,"sources":["/Users/yasaman/Documents/moj_adminpanel/adminpanel/node_modules/@syncfusion/ej2-grids/src/grid/renderer/header-renderer.js"],"names":["isNullOrUndefined","extend","setStyleAttribute","closest","getClosest","remove","classList","CellType","RowRenderer","Cell","Row","events","Draggable","Droppable","Button","parentsUntil","wrap","measureColumnDepth","appendChildren","literals","HeaderRender","parent","serviceLocator","_this","frzIdx","notfrzIdx","isFirstCol","isReplaceDragEle","helper","e","gObj","target","draggable","currentStateTarget","parentEle","allowReordering","allowGrouping","getElementsByClassName","length","visualElement","createElement","className","element","contains","height","offsetHeight","headercelldiv","querySelector","col","getStackedHeaderColumnByHeaderText","innerText","trim","columns","getColumnByUid","getAttribute","column","lockColumn","setAttribute","uid","headerTemplate","colIndex","getColumnIndexByField","field","result","getHeaderTemplate","innerHTML","headerText","firstElementChild","style","width","offsetWidth","lineHeight","toString","appendChild","dragStart","display","notify","columnDragStart","event","drag","cloneElement","groupSettings","columnDrag","dragStop","cancel","columnDragStop","drop","droppedElement","headerDrop","ariaService","getService","widthService","isDestroyed","enableColumnVirtualization","getFrozenLeftColumnsCount","getFrozenRightColumnsCount","on","columnVisibilityChanged","setVisible","columnPositionChanged","colPosRefresh","initialEnd","renderCustomToolbar","rowRenderingMode","uiUpdate","updateCustomResponsiveToolbar","prototype","renderPanel","div","gridHeader","isRendered","innerDiv","headerContent","toggleStackClass","setPanel","renderTable","headerDiv","getPanel","createHeaderTable","setTable","table","getFrozenColumns","initializeHeaderDrag","initializeHeaderDrop","headerRefreshed","rows","args","isFrozen","isFrozenGrid","headerPanel","panel","getTable","headerTable","getColGroup","colgroup","setColGroup","colGroup","getRows","tHead","createTable","createHeader","tableEle","tableName","attrs","cellspacing","role","tblName","getFrozenLeftCount","findHeaderRow","createHeaderContent","thead","tbody","frozenRows","caption","id","rowBody","bodyCell","i","len","j","len_1","cells","allowFiltering","allowSorting","add","updateColGroup","setOptions","colcount","getColumns","index","frozenMode","getFrozenMode","colHeader","rowRenderer","Header","headerRow","colDepth","generateRow","ensureColumns","getHeaderCells","frzCols","isRowDragable","colFreezeMode","getFreezeTableName","leftRight","frozenRight","pop","shift","frozenLeft","freeze","render","rowHeight","cols","indexes","getColumnIndexesInView","contentModule","isXaxis","splice","indexOf","detailTemplate","childGrid","visible","c","len_2","push","generateCell","HeaderIndent","detailIndentCellInfo","DetailHeader","RowDragHIcon","getHeaderTable","enablePersistence","lockcolPositionCount","lockColsRendered","appendCells","isFirstObj","isLastCol","isMovable","lastCol","isLockColumn","isFrozenLockColumn","scrollbar","getContent","left","scrollLeft","inViewIndexes","getColumnIndexByUid","frozenColumns","colSpan","getCellCnt","stackedLockColsCount","getStackedLockColsCount","isStackedLockColumn","isFrozenStack","ensureStackedFrozen","cellType","StackedHeader","getColSpan","isFirstCol_1","isLaststackedCol","isTrue","lockColsCount","getFrozenColSpan","count","rowSpan","rowIndex","opt","displayVal","idx","clen","getNormalizedColumnIndex","normalizedfrzCols","children","mTblColGrp","getHeaderContent","movableHeader","refreshUI","isVFTable","freezeReorder","undefined","getVirtualFreezeHeader","removeChild","firstChild","childNodes","insertBefore","appendContent","colGroupRefresh","setWidthToColumns","updateDefaultCursor","slice","call","querySelectorAll","_i","rows_1","row","gCells","allowTextWrap","textWrapSettings","wrapMode","stackedHdr","some","cnt","showDropArea","dragTarget","distance","abort","accept","toolbar","filterSettings","type","toolbarItems","toolbarLeft","toolbarItem","cls","button","span","btnObj","appendTo","onclick","showResponsiveCustomSort","showResponsiveCustomFilter","enableAdaptiveUI","resToolbar","module"],"mappings":"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","sourcesContent":["import { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, closest as getClosest, remove } from '@syncfusion/ej2-base';\nimport { classList } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { RowRenderer } from './row-renderer';\nimport { Cell } from '../models/cell';\nimport { Row } from '../models/row';\nimport * as events from '../base/constant';\nimport { Draggable, Droppable } from '@syncfusion/ej2-base';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { parentsUntil, wrap, measureColumnDepth, appendChildren } from '../base/util';\nimport * as literals from '../base/string-literals';\n// eslint-disable-next-line valid-jsdoc\n/**\n * Content module is used to render grid content\n *\n * @hidden\n */\nvar HeaderRender = /** @class */ (function () {\n    /**\n     * Constructor for header renderer module\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     * @param {ServiceLocator} serviceLocator - specifies the serviceLocator\n     */\n    function HeaderRender(parent, serviceLocator) {\n        var _this = this;\n        this.frzIdx = 0;\n        this.notfrzIdx = 0;\n        this.isFirstCol = false;\n        this.isReplaceDragEle = true;\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        this.helper = function (e) {\n            var gObj = _this.parent;\n            var target = _this.draggable.currentStateTarget;\n            var parentEle = parentsUntil(target, 'e-headercell');\n            if (!(gObj.allowReordering || gObj.allowGrouping) || (!isNullOrUndefined(parentEle)\n                && parentEle.getElementsByClassName('e-checkselectall').length > 0)) {\n                return false;\n            }\n            var visualElement = _this.parent.createElement('div', { className: 'e-cloneproperties e-dragclone e-headerclone' });\n            var element = target.classList.contains('e-headercell') ? target : parentEle;\n            if (!element || (!gObj.allowReordering && element.classList.contains('e-stackedheadercell'))) {\n                return false;\n            }\n            var height = element.offsetHeight;\n            var headercelldiv = element.querySelector('.e-headercelldiv') || element.querySelector('.e-stackedheadercelldiv');\n            var col;\n            if (headercelldiv) {\n                if (element.querySelector('.e-stackedheadercelldiv')) {\n                    col = gObj.getStackedHeaderColumnByHeaderText(headercelldiv.innerText.trim(), gObj.columns);\n                }\n                else {\n                    col = gObj.getColumnByUid(headercelldiv.getAttribute('e-mappinguid'));\n                }\n                _this.column = col;\n                if (_this.column.lockColumn) {\n                    return false;\n                }\n                visualElement.setAttribute('e-mappinguid', _this.column.uid);\n            }\n            if (col && !isNullOrUndefined(col.headerTemplate)) {\n                if (!isNullOrUndefined(col.headerTemplate)) {\n                    var colIndex = gObj.getColumnIndexByField(col.field);\n                    var result = col.getHeaderTemplate()(extend({ 'index': colIndex }, col), gObj, 'headerTemplate');\n                    appendChildren(visualElement, result);\n                }\n                else {\n                    visualElement.innerHTML = col.headerTemplate;\n                }\n            }\n            else {\n                visualElement.innerHTML = headercelldiv ?\n                    col.headerText : element.firstElementChild.innerHTML;\n            }\n            visualElement.style.width = element.offsetWidth + 'px';\n            visualElement.style.height = element.offsetHeight + 'px';\n            visualElement.style.lineHeight = (height - 6).toString() + 'px';\n            gObj.element.appendChild(visualElement);\n            return visualElement;\n        };\n        this.dragStart = function (e) {\n            var gObj = _this.parent;\n            gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n            gObj.notify(events.columnDragStart, { target: _this.draggable.currentStateTarget, column: _this.column, event: e.event });\n        };\n        this.drag = function (e) {\n            var gObj = _this.parent;\n            var target = e.target;\n            if (target) {\n                var closest = getClosest(target, '.e-grid');\n                var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n                if (!closest || closest.getAttribute('id') !== gObj.element.getAttribute('id')) {\n                    classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n                    if (gObj.allowReordering) {\n                        gObj.element.querySelector('.e-reorderuparrow').style.display = 'none';\n                        gObj.element.querySelector('.e-reorderdownarrow').style.display = 'none';\n                    }\n                    if (!gObj.groupSettings.allowReordering) {\n                        return;\n                    }\n                }\n                gObj.notify(events.columnDrag, { target: e.target, column: _this.column, event: e.event });\n            }\n        };\n        this.dragStop = function (e) {\n            var gObj = _this.parent;\n            var cancel;\n            gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n            if ((!parentsUntil(e.target, 'e-headercell') && !parentsUntil(e.target, 'e-groupdroparea')) ||\n                (!gObj.allowReordering && parentsUntil(e.target, 'e-headercell')) ||\n                (!e.helper.getAttribute('e-mappinguid') && parentsUntil(e.target, 'e-groupdroparea'))) {\n                remove(e.helper);\n                cancel = true;\n            }\n            gObj.notify(events.columnDragStop, { target: e.target, event: e.event, column: _this.column, cancel: cancel });\n        };\n        this.drop = function (e) {\n            var gObj = _this.parent;\n            var uid = e.droppedElement.getAttribute('e-mappinguid');\n            var closest = getClosest(e.target, '.e-grid');\n            remove(e.droppedElement);\n            if (closest && closest.getAttribute('id') !== gObj.element.getAttribute('id') ||\n                !(gObj.allowReordering || gObj.allowGrouping)) {\n                return;\n            }\n            gObj.notify(events.headerDrop, { target: e.target, uid: uid, droppedElement: e.droppedElement });\n        };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.ariaService = this.serviceLocator.getService('ariaService');\n        this.widthService = this.serviceLocator.getService('widthService');\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (!this.parent.enableColumnVirtualization\n            && !this.parent.getFrozenLeftColumnsCount() && !this.parent.getFrozenRightColumnsCount()) {\n            this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n        }\n        this.parent.on(events.columnPositionChanged, this.colPosRefresh, this);\n        this.parent.on(events.initialEnd, this.renderCustomToolbar, this);\n        if (this.parent.rowRenderingMode === 'Vertical') {\n            this.parent.on(events.uiUpdate, this.updateCustomResponsiveToolbar, this);\n        }\n    }\n    /**\n     * The function is used to render grid header div\n     *\n     * @returns {void}\n     */\n    HeaderRender.prototype.renderPanel = function () {\n        var div = this.parent.element.querySelector('.' + literals.gridHeader);\n        var isRendered = (div != null);\n        div = isRendered ? div : this.parent.createElement('div', { className: 'e-gridheader' });\n        var innerDiv = isRendered ? div.querySelector('.' + literals.headerContent) :\n            this.parent.createElement('div', { className: literals.headerContent });\n        this.toggleStackClass(div);\n        div.appendChild(innerDiv);\n        this.setPanel(div);\n        if (!isRendered) {\n            this.parent.element.appendChild(div);\n        }\n    };\n    /**\n     * The function is used to render grid header div\n     *\n     * @returns {void}\n     */\n    HeaderRender.prototype.renderTable = function () {\n        var headerDiv = this.getPanel();\n        headerDiv.appendChild(this.createHeaderTable());\n        this.setTable(headerDiv.querySelector('.' + literals.table));\n        if (!this.parent.getFrozenColumns() && !this.parent.getFrozenRightColumnsCount() && !this.parent.getFrozenLeftColumnsCount()) {\n            this.initializeHeaderDrag();\n            this.initializeHeaderDrop();\n        }\n        this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: this.parent.isFrozenGrid() } });\n    };\n    /**\n     * Get the header content div element of grid\n     *\n     * @returns {Element} returns the element\n     */\n    HeaderRender.prototype.getPanel = function () {\n        return this.headerPanel;\n    };\n    /**\n     * Set the header content div element of grid\n     *\n     * @param  {Element} panel - specifies the panel element\n     * @returns {void}\n     */\n    HeaderRender.prototype.setPanel = function (panel) {\n        this.headerPanel = panel;\n    };\n    /**\n     * Get the header table element of grid\n     *\n     * @returns {Element} returns the element\n     */\n    HeaderRender.prototype.getTable = function () {\n        return this.headerTable;\n    };\n    /**\n     * Set the header table element of grid\n     *\n     * @param  {Element} table - specifies the table element\n     * @returns {void}\n     */\n    HeaderRender.prototype.setTable = function (table) {\n        this.headerTable = table;\n    };\n    /**\n     * Get the header colgroup element\n     *\n     * @returns {Element} returns the element\n     */\n    HeaderRender.prototype.getColGroup = function () {\n        return this.colgroup;\n    };\n    /**\n     * Set the header colgroup element\n     *\n     * @param {Element} colGroup - specifies the colgroup\n     * @returns {Element} returns the element\n     */\n    HeaderRender.prototype.setColGroup = function (colGroup) {\n        return this.colgroup = colGroup;\n    };\n    /**\n     * Get the header row element collection.\n     *\n     * @returns {Element[]} returns the element\n     */\n    HeaderRender.prototype.getRows = function () {\n        var table = this.getTable();\n        return table.tHead.rows;\n    };\n    /**\n     * The function is used to create header table elements\n     *\n     * @returns {Element} returns the element\n     * @hidden\n     */\n    HeaderRender.prototype.createHeaderTable = function () {\n        var table = this.createTable();\n        var innerDiv = this.getPanel().querySelector('.' + literals.headerContent);\n        innerDiv.appendChild(table);\n        return innerDiv;\n    };\n    /**\n     * The function is used to create header table elements\n     *\n     * @param {Element} tableEle - specifies the table Element\n     * @param {freezeTable} tableName - specifies the table name\n     * @returns {Element} returns the element\n     * @hidden\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    HeaderRender.prototype.createHeader = function (tableEle, tableName) {\n        if (tableEle === void 0) { tableEle = null; }\n        var gObj = this.parent;\n        var isFrozen = gObj.isFrozenGrid();\n        if (this.getTable() && !isFrozen) {\n            remove(this.getTable());\n        }\n        var table = this.parent.createElement('table', { className: literals.table, attrs: { cellspacing: '0.25px', role: 'grid' } });\n        var tblName = tableName ? tableName : gObj.getFrozenLeftCount() ? 'frozen-left' : 'frozen-right';\n        var findHeaderRow = this.createHeaderContent(tblName);\n        var thead = findHeaderRow.thead;\n        var tbody = this.parent.createElement(literals.tbody, { className: this.parent.frozenRows ? '' : 'e-hide' });\n        this.caption = this.parent.createElement('caption', { innerHTML: this.parent.element.id + '_header_table', className: 'e-hide' });\n        var colGroup = this.parent.createElement(literals.colGroup);\n        var rowBody = this.parent.createElement('tr');\n        var bodyCell;\n        var rows = this.rows = findHeaderRow.rows;\n        for (var i = 0, len = rows.length; i < len; i++) {\n            for (var j = 0, len_1 = rows[i].cells.length; j < len_1; j++) {\n                bodyCell = this.parent.createElement('td');\n                rowBody.appendChild(bodyCell);\n            }\n        }\n        if (gObj.allowFiltering || gObj.allowSorting || gObj.allowGrouping) {\n            table.classList.add('e-sortfilter');\n        }\n        this.updateColGroup(colGroup);\n        tbody.appendChild(rowBody);\n        table.appendChild(this.setColGroup(colGroup));\n        table.appendChild(thead);\n        table.appendChild(tbody);\n        table.appendChild(this.caption);\n        this.ariaService.setOptions(table, { colcount: gObj.getColumns().length.toString() });\n        return table;\n    };\n    /**\n     * @param {Element} tableEle - specifies the column\n     * @returns {Element} returns the element\n     * @hidden\n     */\n    HeaderRender.prototype.createTable = function (tableEle) {\n        if (tableEle === void 0) { tableEle = null; }\n        return this.createHeader(tableEle);\n    };\n    HeaderRender.prototype.createHeaderContent = function (tableName) {\n        var gObj = this.parent;\n        var index = 1;\n        var frozenMode = gObj.getFrozenMode();\n        var columns = gObj.getColumns();\n        var thead = this.parent.createElement('thead');\n        var colHeader = this.parent.createElement('tr', { className: 'e-columnheader' });\n        var rowRenderer = new RowRenderer(this.serviceLocator, CellType.Header, gObj);\n        rowRenderer.element = colHeader;\n        var rows = [];\n        var headerRow;\n        this.colDepth = measureColumnDepth(gObj.columns);\n        for (var i = 0, len = this.colDepth; i < len; i++) {\n            rows[i] = this.generateRow(i);\n            rows[i].cells = [];\n        }\n        if (frozenMode !== 'Right') {\n            rows = this.ensureColumns(rows);\n        }\n        rows = this.getHeaderCells(rows, tableName);\n        if (frozenMode === 'Right') {\n            index = 0;\n            rows = this.ensureColumns(rows);\n        }\n        var frzCols = this.parent.getFrozenColumns();\n        if (this.parent.isRowDragable() && this.parent.isFrozenGrid() && rows[0].cells[index]) {\n            var colFreezeMode = rows[0].cells[index].column.getFreezeTableName();\n            if (colFreezeMode === 'movable' || (frozenMode === literals.leftRight && colFreezeMode === literals.frozenRight)) {\n                if (frozenMode === 'Right') {\n                    rows[0].cells.pop();\n                }\n                else {\n                    rows[0].cells.shift();\n                }\n            }\n            else if (!frzCols && colFreezeMode === literals.frozenLeft) {\n                rows[0].cells[0].column.freeze = colFreezeMode === literals.frozenLeft ? 'Left' : 'Right';\n            }\n            else if (frozenMode === 'Right' && colFreezeMode === literals.frozenRight) {\n                rows[0].cells[rows[0].cells.length - 1].column.freeze = 'Right';\n            }\n        }\n        for (var i = 0, len = this.colDepth; i < len; i++) {\n            headerRow = rowRenderer.render(rows[i], columns);\n            if (this.parent.rowHeight && headerRow.querySelector('.e-headercell')) {\n                headerRow.style.height = this.parent.rowHeight + 'px';\n            }\n            thead.appendChild(headerRow);\n        }\n        var findHeaderRow = {\n            thead: thead,\n            rows: rows\n        };\n        return findHeaderRow;\n    };\n    HeaderRender.prototype.updateColGroup = function (colGroup) {\n        var cols = this.parent.getColumns();\n        var col;\n        var indexes = this.parent.getColumnIndexesInView();\n        if (this.parent.enableColumnVirtualization && this.parent.getFrozenColumns()\n            && this.parent.contentModule.isXaxis()) {\n            cols = extend([], this.parent.getColumns());\n            cols.splice(0, this.parent.getFrozenColumns());\n        }\n        colGroup.id = this.parent.element.id + literals.colGroup;\n        if (this.parent.allowGrouping) {\n            for (var i = 0, len = this.parent.groupSettings.columns.length; i < len; i++) {\n                if (this.parent.enableColumnVirtualization && indexes.indexOf(i) === -1) {\n                    continue;\n                }\n                col = this.parent.createElement('col', { className: 'e-group-intent' });\n                colGroup.appendChild(col);\n            }\n        }\n        if (this.parent.detailTemplate || this.parent.childGrid) {\n            col = this.parent.createElement('col', { className: 'e-detail-intent' });\n            colGroup.appendChild(col);\n        }\n        if (this.parent.isRowDragable() && this.parent.getFrozenMode() !== 'Right') {\n            col = this.parent.createElement('col', { className: 'e-drag-intent' });\n            colGroup.appendChild(col);\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            col = this.parent.createElement('col');\n            if (cols[i].visible === false) {\n                setStyleAttribute(col, { 'display': 'none' });\n            }\n            colGroup.appendChild(col);\n        }\n        if (this.parent.isRowDragable() && this.parent.getFrozenMode() === 'Right') {\n            col = this.parent.createElement('col', { className: 'e-drag-intent' });\n            colGroup.appendChild(col);\n        }\n        return colGroup;\n    };\n    HeaderRender.prototype.ensureColumns = function (rows) {\n        //TODO: generate dummy column for group, detail, stacked row here; ensureColumns here\n        var gObj = this.parent;\n        var indexes = this.parent.getColumnIndexesInView();\n        for (var i = 0, len = rows.length; i < len; i++) {\n            if (gObj.allowGrouping) {\n                for (var c = 0, len_2 = gObj.groupSettings.columns.length; c < len_2; c++) {\n                    if (this.parent.enableColumnVirtualization && indexes.indexOf(c) === -1) {\n                        continue;\n                    }\n                    rows[i].cells.push(this.generateCell({}, CellType.HeaderIndent));\n                }\n            }\n            if (gObj.detailTemplate || gObj.childGrid) {\n                var args = {};\n                this.parent.notify(events.detailIndentCellInfo, args);\n                rows[i].cells.push(this.generateCell(args, CellType.DetailHeader));\n            }\n            if (gObj.isRowDragable()) {\n                rows[i].cells.push(this.generateCell({}, CellType.RowDragHIcon));\n            }\n        }\n        return rows;\n    };\n    HeaderRender.prototype.getHeaderCells = function (rows, tableName) {\n        var thead = this.parent.getHeaderTable() && this.parent.getHeaderTable().querySelector('thead');\n        var cols = this.parent.enableColumnVirtualization ?\n            this.parent.getColumns(this.parent.enablePersistence) : this.parent.columns;\n        this.frzIdx = 0;\n        this.notfrzIdx = 0;\n        if (this.parent.lockcolPositionCount) {\n            for (var i = 0; i < cols.length; i++) {\n                this.lockColsRendered = false;\n                rows = this.appendCells(cols[i], rows, 0, i === 0, false, i === (cols.length - 1), thead, tableName);\n            }\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            this.notfrzIdx = 0;\n            this.lockColsRendered = true;\n            rows = this.appendCells(cols[i], rows, 0, i === 0, false, i === (len - 1), thead, tableName);\n        }\n        return rows;\n    };\n    HeaderRender.prototype.appendCells = function (cols, rows, index, isFirstObj, isFirstCol, isLastCol, isMovable, tableName) {\n        var lastCol = isLastCol ? 'e-lastcell' : '';\n        var isFrozen = this.parent.isFrozenGrid();\n        var isLockColumn = !this.parent.lockcolPositionCount\n            || (cols.lockColumn && !this.lockColsRendered) || (!cols.lockColumn && this.lockColsRendered);\n        var isFrozenLockColumn = !this.parent.lockcolPositionCount || (cols.lockColumn && !this.lockColsRendered)\n            || (!cols.lockColumn && this.lockColsRendered);\n        var scrollbar = this.parent.getContent().querySelector('.e-movablescrollbar');\n        var left;\n        if (isFrozen && scrollbar && this.parent.enableColumnVirtualization) {\n            left = scrollbar.scrollLeft;\n        }\n        if (!cols.columns) {\n            if (left && left > 0 && this.parent.contentModule.isXaxis()\n                && this.parent.inViewIndexes[0] !== 0 && cols.getFreezeTableName() === 'movable') {\n                rows[index].cells.push(this.generateCell(cols, CellType.Header, this.colDepth - index, (isFirstObj ? '' : (isFirstCol ? 'e-firstcell' : '')) + lastCol, index, this.parent.getColumnIndexByUid(cols.uid)));\n            }\n            else {\n                if ((!isFrozen && isLockColumn) || (isFrozen && cols.getFreezeTableName() === tableName && isFrozenLockColumn)) {\n                    rows[index].cells.push(this.generateCell(cols, CellType.Header, this.colDepth - index, (isFirstObj ? '' : (isFirstCol ? 'e-firstcell' : '')) + lastCol, index, this.parent.getColumnIndexByUid(cols.uid)));\n                }\n            }\n            if (this.parent.lockcolPositionCount) {\n                if ((this.frzIdx + this.notfrzIdx < this.parent.frozenColumns) &&\n                    ((cols.lockColumn && !this.lockColsRendered) || (!cols.lockColumn && this.lockColsRendered))) {\n                    this.frzIdx++;\n                }\n                else {\n                    this.notfrzIdx++;\n                }\n            }\n            else {\n                this.frzIdx++;\n            }\n        }\n        else {\n            this.isFirstCol = false;\n            var colSpan = this.getCellCnt(cols, 0);\n            if (colSpan) {\n                var stackedLockColsCount = this.getStackedLockColsCount(cols, 0);\n                var isStackedLockColumn = this.parent.lockcolPositionCount === 0\n                    || (!this.lockColsRendered && stackedLockColsCount !== 0)\n                    || (this.lockColsRendered && (colSpan - stackedLockColsCount) !== 0);\n                var isFrozenStack = isFrozen && this.ensureStackedFrozen(cols.columns, tableName, false);\n                if ((!isFrozen && isStackedLockColumn) || isFrozenStack) {\n                    rows[index].cells.push(new Cell({\n                        cellType: CellType.StackedHeader, column: cols,\n                        colSpan: this.getColSpan(colSpan, stackedLockColsCount, cols.columns, tableName, isFrozen)\n                    }));\n                }\n            }\n            if (this.parent.lockcolPositionCount && !this.lockColsRendered) {\n                for (var i = 0; i < cols.columns.length; i++) {\n                    rows = this.appendCells(cols.columns[i], rows, index + 1, isFirstObj, i === 0, i === (cols.columns.length - 1) && isLastCol, isMovable, tableName);\n                }\n            }\n            if (this.lockColsRendered) {\n                for (var i = 0, len = cols.columns.length; i < len; i++) {\n                    var isFirstCol_1 = this.isFirstCol = cols.columns[i].visible && !this.isFirstCol && len !== 1;\n                    var isLaststackedCol = i === (len - 1);\n                    rows = this.appendCells(cols.columns[i], rows, index + 1, isFirstObj, isFirstCol_1, isLaststackedCol && isLastCol, isMovable, tableName);\n                }\n            }\n        }\n        return rows;\n    };\n    HeaderRender.prototype.ensureStackedFrozen = function (columns, tableName, isTrue) {\n        var length = columns.length;\n        for (var i = 0; i < length; i++) {\n            if (columns[i].columns) {\n                isTrue = this.ensureStackedFrozen(columns[i].columns, tableName, isTrue);\n            }\n            else if (columns[i].getFreezeTableName() === tableName) {\n                isTrue = true;\n                break;\n            }\n        }\n        return isTrue;\n    };\n    HeaderRender.prototype.getStackedLockColsCount = function (col, lockColsCount) {\n        if (col.columns) {\n            for (var i = 0; i < col.columns.length; i++) {\n                lockColsCount = this.getStackedLockColsCount(col.columns[i], lockColsCount);\n            }\n        }\n        else if (col.lockColumn) {\n            lockColsCount++;\n        }\n        return lockColsCount;\n    };\n    HeaderRender.prototype.getColSpan = function (colSpan, stackedLockColsCount, columns, tableName, isFrozen) {\n        if (isFrozen) {\n            colSpan = this.getFrozenColSpan(columns, tableName, 0);\n        }\n        else if (this.parent.lockcolPositionCount) {\n            colSpan = !this.lockColsRendered ? stackedLockColsCount : colSpan - stackedLockColsCount;\n        }\n        return colSpan;\n    };\n    HeaderRender.prototype.getFrozenColSpan = function (columns, tableName, count) {\n        var length = columns.length;\n        for (var i = 0; i < length; i++) {\n            if (columns[i].columns) {\n                count = this.getFrozenColSpan(columns[i].columns, tableName, count);\n            }\n            else if (columns[i].getFreezeTableName() === tableName && columns[i].visible) {\n                count++;\n            }\n        }\n        return count;\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    HeaderRender.prototype.generateRow = function (index) {\n        return new Row({});\n    };\n    HeaderRender.prototype.generateCell = function (column, cellType, rowSpan, className, rowIndex, colIndex) {\n        var opt = {\n            'visible': column.visible,\n            'isDataCell': false,\n            'isTemplate': !isNullOrUndefined(column.headerTemplate),\n            'rowID': '',\n            'column': column,\n            'cellType': cellType,\n            'rowSpan': rowSpan,\n            'className': className,\n            'index': rowIndex,\n            'colIndex': colIndex\n        };\n        if (!opt.rowSpan || opt.rowSpan < 2) {\n            delete opt.rowSpan;\n        }\n        return new Cell(opt);\n    };\n    /**\n     * Function to hide header table column based on visible property\n     *\n     * @param {Column[]} columns - specifies the column\n     * @returns {void}\n     */\n    HeaderRender.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        var displayVal;\n        var idx;\n        var frzCols = gObj.getFrozenColumns();\n        for (var c = 0, clen = columns.length; c < clen; c++) {\n            var column = columns[c];\n            idx = gObj.getNormalizedColumnIndex(column.uid);\n            displayVal = column.visible ? '' : 'none';\n            if (frzCols) {\n                var normalizedfrzCols = this.parent.isRowDragable() ? frzCols + 1 : frzCols;\n                if (idx < normalizedfrzCols) {\n                    setStyleAttribute(this.getColGroup().children[idx], { 'display': displayVal });\n                }\n                else {\n                    var mTblColGrp = gObj.getHeaderContent().querySelector('.' + literals.movableHeader).querySelector(literals.colGroup);\n                    setStyleAttribute(mTblColGrp.children[idx - normalizedfrzCols], { 'display': displayVal });\n                }\n            }\n            else {\n                setStyleAttribute(this.getColGroup().children[idx], { 'display': displayVal });\n            }\n        }\n        this.refreshUI();\n    };\n    HeaderRender.prototype.colPosRefresh = function () {\n        this.refreshUI();\n    };\n    /**\n     * Refresh the header of the Grid.\n     *\n     * @returns {void}\n     */\n    HeaderRender.prototype.refreshUI = function () {\n        var frzCols = this.parent.isFrozenGrid();\n        var isVFTable = this.parent.enableColumnVirtualization && frzCols;\n        var headerDiv = this.getPanel();\n        this.toggleStackClass(headerDiv);\n        var table = this.freezeReorder ? this.headerPanel.querySelector('.' + literals.movableHeader).querySelector('.' + literals.table)\n            : this.getTable();\n        var tableName = this.parent.isFrozenGrid() ? this.parent.getFrozenLeftCount() ? 'frozen-left'\n            : 'frozen-right' : undefined;\n        if (isVFTable) {\n            table = this.parent.contentModule.getVirtualFreezeHeader();\n            tableName = this.parent.contentModule.isXaxis() ? 'movable' : tableName;\n        }\n        if (table) {\n            remove(table);\n            table.removeChild(table.firstChild);\n            table.removeChild(table.childNodes[0]);\n            var colGroup = this.parent.createElement(literals.colGroup);\n            var findHeaderRow = this.createHeaderContent(tableName);\n            this.rows = findHeaderRow.rows;\n            table.insertBefore(findHeaderRow.thead, table.firstChild);\n            this.updateColGroup(colGroup);\n            table.insertBefore(this.setColGroup(colGroup), table.firstChild);\n            if (!isVFTable) {\n                this.setTable(table);\n            }\n            this.appendContent(table);\n            this.parent.notify(events.colGroupRefresh, {});\n            this.widthService.setWidthToColumns();\n            this.parent.updateDefaultCursor();\n            if (!frzCols || (this.parent.enableColumnVirtualization && frzCols)) {\n                this.initializeHeaderDrag();\n            }\n            var rows = [].slice.call(headerDiv.querySelectorAll('tr.e-columnheader'));\n            for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n                var row = rows_1[_i];\n                var gCells = [].slice.call(row.getElementsByClassName('e-grouptopleftcell'));\n                if (gCells.length) {\n                    gCells[gCells.length - 1].classList.add('e-lastgrouptopleftcell');\n                }\n            }\n            if (!frzCols) {\n                this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: frzCols } });\n            }\n            if (this.parent.enableColumnVirtualization && parentsUntil(table, literals.movableHeader)) {\n                this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: false, isXaxis: true } });\n            }\n            if (this.parent.allowTextWrap && this.parent.textWrapSettings.wrapMode === 'Header') {\n                wrap(rows, true);\n            }\n        }\n    };\n    HeaderRender.prototype.toggleStackClass = function (div) {\n        var column = this.parent.columns;\n        var stackedHdr = column.some(function (column) { return !isNullOrUndefined(column.columns); });\n        if (stackedHdr) {\n            div.classList.add('e-stackedheader');\n        }\n        else {\n            div.classList.remove('e-stackedheader');\n        }\n    };\n    HeaderRender.prototype.appendContent = function (table) {\n        this.getPanel().querySelector('.' + literals.headerContent).appendChild(table);\n    };\n    HeaderRender.prototype.getCellCnt = function (col, cnt) {\n        if (col.columns) {\n            for (var i = 0, len = col.columns.length; i < len; i++) {\n                cnt = this.getCellCnt(col.columns[i], cnt);\n            }\n        }\n        else {\n            if (col.visible) {\n                cnt++;\n            }\n        }\n        return cnt;\n    };\n    HeaderRender.prototype.initializeHeaderDrag = function () {\n        var gObj = this.parent;\n        if (!(this.parent.allowReordering || (this.parent.allowGrouping && this.parent.groupSettings.showDropArea))) {\n            return;\n        }\n        this.draggable = new Draggable(gObj.getHeaderContent(), {\n            dragTarget: '.e-headercell',\n            distance: 5,\n            helper: this.helper,\n            dragStart: this.dragStart,\n            drag: this.drag,\n            dragStop: this.dragStop,\n            abort: '.e-rhandler',\n            isReplaceDragEle: this.isReplaceDragEle\n        });\n    };\n    HeaderRender.prototype.initializeHeaderDrop = function () {\n        var gObj = this.parent;\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        var drop = new Droppable(gObj.getHeaderContent(), {\n            accept: '.e-dragclone',\n            drop: this.drop\n        });\n    };\n    HeaderRender.prototype.renderCustomToolbar = function () {\n        var _this = this;\n        var gObj = this.parent;\n        if (gObj.rowRenderingMode === 'Vertical' && !gObj.toolbar\n            && (gObj.allowSorting || (gObj.allowFiltering && gObj.filterSettings.type !== 'FilterBar'))) {\n            var div = gObj.createElement('div', { className: 'e-res-toolbar e-toolbar' });\n            var toolbarItems = gObj.createElement('div', { className: 'e-toolbar-items' });\n            var toolbarLeft = gObj.createElement('div', { className: 'e-toolbar-left' });\n            var count = this.parent.allowFiltering && this.parent.allowSorting ? 2 : 1;\n            for (var i = 0; i < count; i++) {\n                var toolbarItem = gObj.createElement('div', { className: 'e-toolbar-item e-gridresponsiveicons e-icons e-tbtn-align' });\n                var cls = count === 1 ? this.parent.allowSorting ? 'sort'\n                    : 'filter' : i === 1 ? 'sort' : 'filter';\n                var button = gObj.createElement('button', { className: 'e-tbar-btn e-control e-btn e-lib e-icon-btn' });\n                var span = gObj.createElement('span', { className: 'e-btn-icon e-res' + cls + '-icon e-icons' });\n                button.appendChild(span);\n                var btnObj = new Button({});\n                btnObj.appendTo(button);\n                button.onclick = function (e) {\n                    if (e.target.classList.contains('e-ressort-btn')\n                        || e.target.classList.contains('e-ressort-icon')) {\n                        _this.parent.showResponsiveCustomSort();\n                    }\n                    else {\n                        _this.parent.showResponsiveCustomFilter();\n                    }\n                };\n                toolbarItem.appendChild(button);\n                toolbarLeft.appendChild(toolbarItem);\n            }\n            toolbarItems.appendChild(toolbarLeft);\n            div.appendChild(toolbarItems);\n            gObj.element.insertBefore(div, this.parent.element.querySelector('.' + literals.gridHeader));\n        }\n        else {\n            if (gObj.enableAdaptiveUI && !gObj.toolbar) {\n                gObj.getContent().classList.add('e-responsive-header');\n            }\n        }\n    };\n    HeaderRender.prototype.updateCustomResponsiveToolbar = function (args) {\n        var resToolbar = this.parent.element.querySelector('.e-responsive-toolbar');\n        if (args.module === 'toolbar') {\n            if (resToolbar) {\n                remove(resToolbar);\n            }\n            else {\n                this.renderCustomToolbar();\n            }\n        }\n    };\n    return HeaderRender;\n}());\nexport { HeaderRender };\n"]},"metadata":{},"sourceType":"module"}