{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { isNullOrUndefined, remove } from '@syncfusion/ej2-base';\nimport { formatUnit } from '@syncfusion/ej2-base';\nimport { Browser } from '@syncfusion/ej2-base';\nimport { colGroupRefresh, columnWidthChanged, scroll, columnVisibilityChanged, refreshFooterRenderer } from '../base/constant';\nimport { ContentRender } from './content-renderer';\nimport { RowRenderer } from './row-renderer';\nimport { SummaryModelGenerator } from '../services/summary-model-generator';\nimport { renderMovable, calculateAggregate, iterateExtend, addRemoveEventListener } from '../base/util';\nimport { DataUtil } from '@syncfusion/ej2-data';\nimport * as literals from '../base/string-literals';\n/**\n * Footer module is used to render grid content\n *\n * @hidden\n */\n\nvar FooterRenderer =\n/** @class */\nfunction (_super) {\n  __extends(FooterRenderer, _super);\n\n  function FooterRenderer(gridModule, serviceLocator) {\n    var _this = _super.call(this, gridModule, serviceLocator) || this;\n\n    _this.aggregates = {};\n    _this.parent = gridModule;\n    _this.locator = serviceLocator;\n    _this.modelGenerator = new SummaryModelGenerator(_this.parent);\n\n    _this.addEventListener();\n\n    return _this;\n  }\n  /**\n   * The function is used to render grid footer div\n   *\n   * @returns {void}\n   */\n\n\n  FooterRenderer.prototype.renderPanel = function () {\n    var div = this.parent.createElement('div', {\n      className: literals.gridFooter\n    });\n    var innerDiv = this.parent.createElement('div', {\n      className: 'e-summarycontent'\n    });\n    var movableContent = innerDiv;\n\n    if (this.parent.isFrozenGrid()) {\n      var fDiv = this.parent.createElement('div', {\n        className: 'e-frozenfootercontent e-frozen-left-footercontent'\n      });\n      var mDiv = this.parent.createElement('div', {\n        className: 'e-movablefootercontent'\n      });\n      var frDiv = this.parent.createElement('div', {\n        className: 'e-frozenfootercontent e-frozen-right-footercontent'\n      });\n\n      if (this.parent.getFrozenColumns() || this.parent.getFrozenLeftColumnsCount()) {\n        innerDiv.appendChild(fDiv);\n        this.frozenContent = fDiv;\n      }\n\n      innerDiv.appendChild(mDiv);\n      this.movableContent = mDiv;\n      movableContent = mDiv;\n\n      if (this.parent.getFrozenRightColumnsCount()) {\n        innerDiv.appendChild(frDiv);\n        this.frozenRightContent = frDiv;\n      }\n    }\n\n    if (Browser.isDevice) {\n      movableContent.style.overflowX = 'scroll';\n    }\n\n    div.appendChild(innerDiv);\n    this.setPanel(div);\n\n    if (this.parent.getPager() != null) {\n      this.parent.element.insertBefore(div, this.parent.getPager());\n    } else {\n      this.parent.element.appendChild(div);\n    }\n  };\n  /**\n   * The function is used to render grid footer table\n   *\n   * @returns {void}\n   */\n\n\n  FooterRenderer.prototype.renderTable = function () {\n    var frzCols = this.parent.getFrozenColumns() || this.parent.getFrozenLeftColumnsCount();\n    var innerDiv = this.createContentTable('_footer_table');\n    var table = innerDiv.querySelector('.' + literals.table);\n    var tFoot = this.parent.createElement('tfoot');\n    table.appendChild(tFoot);\n\n    if (this.parent.isFrozenGrid()) {\n      var freezeTable = table.cloneNode(true);\n      var frTable = table.cloneNode(true);\n\n      if (frzCols) {\n        this.frozenContent.appendChild(freezeTable);\n        this.freezeTable = freezeTable;\n      }\n\n      if (this.parent.getFrozenRightColumnsCount()) {\n        remove(frTable.querySelector(literals.colGroup));\n        var hdr = this.parent.getHeaderContent().querySelector('.e-frozen-right-header');\n        var frCol = hdr.querySelector(literals.colGroup).cloneNode(true);\n        frTable.insertBefore(frCol, frTable.querySelector(literals.tbody));\n        this.frozenRightContent.appendChild(frTable);\n        this.frTable = frTable;\n      }\n\n      this.movableContent.appendChild(table);\n      remove(table.querySelector(literals.colGroup));\n      var colGroup = this.parent.getHeaderContent().querySelector('.' + literals.movableHeader).querySelector(literals.colGroup).cloneNode(true);\n      table.insertBefore(colGroup, table.querySelector(literals.tbody));\n      this.setColGroup(colGroup);\n    }\n\n    this.setTable(table);\n  };\n\n  FooterRenderer.prototype.renderSummaryContent = function (e, table, cStart, cEnd) {\n    var input = this.parent.dataSource instanceof Array ? this.parent.dataSource : this.parent.currentViewData;\n    var summaries = this.modelGenerator.getData();\n    var dummies = isNullOrUndefined(cStart) ? this.modelGenerator.getColumns() : this.modelGenerator.getColumns(cStart, cEnd); // eslint-disable-next-line max-len\n\n    var rows = isNullOrUndefined(cStart) ? this.modelGenerator.generateRows(input, e || this.aggregates) : this.modelGenerator.generateRows(input, e || this.aggregates, cStart, cEnd);\n    var fragment = document.createDocumentFragment();\n    var rowrenderer = new RowRenderer(this.locator, null, this.parent);\n    rowrenderer.element = this.parent.createElement('TR', {\n      className: 'e-summaryrow'\n    });\n\n    for (var srow = 0, len = summaries.length; srow < len; srow++) {\n      var row = rows[srow];\n\n      if (!row) {\n        continue;\n      }\n\n      var tr = rowrenderer.render(row, dummies);\n      fragment.appendChild(tr);\n    }\n\n    table.tFoot.appendChild(fragment);\n    this.aggregates = !isNullOrUndefined(e) ? e : this.aggregates;\n  };\n\n  FooterRenderer.prototype.refresh = function (e) {\n    var frzCols = this.parent.getFrozenColumns() || this.parent.getFrozenLeftColumnsCount();\n    var movable = this.parent.getMovableColumnsCount();\n    var right = this.parent.getFrozenRightColumnsCount();\n\n    if (this.parent.isFrozenGrid()) {\n      remove(this.getPanel());\n      this.renderPanel();\n      this.renderTable();\n\n      if (frzCols) {\n        this.freezeTable.tFoot.innerHTML = '';\n        this.renderSummaryContent(e, this.freezeTable, 0, frzCols);\n      }\n    }\n\n    this.getTable().tFoot.innerHTML = '';\n    this.renderSummaryContent(e, this.getTable(), frzCols, right ? frzCols + movable : undefined);\n\n    if (this.parent.getFrozenRightColumnsCount()) {\n      this.frTable.tFoot.innerHTML = '';\n      this.renderSummaryContent(e, this.frTable, frzCols + movable, frzCols + movable + right);\n      var movableLastCell = [].slice.call(this.getTable().getElementsByClassName('e-lastsummarycell'));\n\n      if (movableLastCell.length) {\n        for (var i = 0; i < movableLastCell.length; i++) {\n          movableLastCell[i].style.borderRight = '0px';\n        }\n      }\n    } // check freeze content have no row case\n\n\n    if (this.parent.isFrozenGrid()) {\n      var movableCnt = [].slice.call(this.parent.element.querySelector('.e-movablefootercontent').getElementsByClassName('e-summaryrow'));\n      var frozenCnt = void 0;\n\n      if (frzCols) {\n        frozenCnt = [].slice.call(this.parent.element.querySelector('.e-frozen-left-footercontent').getElementsByClassName('e-summaryrow'));\n        this.refreshHeight(frozenCnt, movableCnt);\n        var frozenDiv = this.frozenContent;\n\n        if (!frozenDiv.offsetHeight) {\n          frozenDiv.style.height = this.getTable().offsetHeight + 'px';\n        }\n      }\n\n      if (right) {\n        var frCnt = [].slice.call(this.parent.element.querySelector('.e-frozen-right-footercontent').getElementsByClassName('e-summaryrow'));\n        this.refreshHeight(frCnt, movableCnt);\n\n        if (frozenCnt) {\n          this.refreshHeight(frCnt, frozenCnt);\n        }\n\n        var frDiv = this.frTable;\n\n        if (!frDiv.offsetHeight) {\n          frDiv.style.height = this.getTable().offsetHeight + 'px';\n        }\n      }\n\n      if (this.parent.allowResizing) {\n        this.updateFooterTableWidth(this.getTable());\n      }\n    }\n\n    this.onScroll();\n  };\n\n  FooterRenderer.prototype.refreshHeight = function (frozenCnt, movableCnt) {\n    for (var i = 0; i < frozenCnt.length; i++) {\n      var frozenHeight = frozenCnt[i].getBoundingClientRect().height;\n      var movableHeight = movableCnt[i].getBoundingClientRect().height;\n\n      if (frozenHeight < movableHeight) {\n        frozenCnt[i].classList.remove('e-hide');\n        frozenCnt[i].style.height = movableHeight + 'px';\n      } else if (frozenHeight > movableHeight) {\n        movableCnt[i].classList.remove('e-hide');\n        movableCnt[i].style.height = frozenHeight + 'px';\n      }\n    }\n  };\n\n  FooterRenderer.prototype.refreshCol = function () {\n    // frozen table\n    var mheaderCol;\n    var fheaderCol = mheaderCol = this.parent.element.querySelector('.' + literals.gridHeader).querySelector(literals.colGroup).cloneNode(true);\n\n    if (this.parent.getFrozenColumns()) {\n      // eslint-disable-next-line max-len\n      var isXaxis = this.parent.enableColumnVirtualization && this.parent.contentModule.isXaxis();\n\n      if (isXaxis) {\n        mheaderCol = this.parent.getMovableVirtualHeader().querySelector(literals.colGroup).cloneNode(true);\n      } else {\n        mheaderCol = renderMovable(fheaderCol, this.parent.getFrozenColumns(), this.parent);\n        this.freezeTable.replaceChild(fheaderCol, this.freezeTable.querySelector(literals.colGroup));\n      }\n    }\n\n    this.getTable().replaceChild(mheaderCol, this.getColGroup());\n    this.setColGroup(mheaderCol);\n  };\n\n  FooterRenderer.prototype.onWidthChange = function (args) {\n    this.getColFromIndex(args.index).style.width = formatUnit(args.width);\n\n    if (this.parent.allowResizing && args.module === 'resize') {\n      this.updateFooterTableWidth(this.getTable());\n    }\n  };\n\n  FooterRenderer.prototype.onScroll = function (e) {\n    if (e === void 0) {\n      e = {\n        left: this.parent.isFrozenGrid() ? this.parent.getContent().querySelector('.' + literals.movableContent).scrollLeft : this.parent.getContent().firstChild.scrollLeft\n      };\n    }\n\n    this.getTable().parentElement.scrollLeft = e.left;\n  };\n\n  FooterRenderer.prototype.getColFromIndex = function (index) {\n    var left = this.parent.getVisibleFrozenLeftCount() || this.parent.getFrozenColumns();\n    var movable = this.parent.getVisibleMovableCount();\n    var right = this.parent.getVisibleFrozenRightCount();\n    var isDrag = this.parent.isRowDragable() && !(this.parent.getFrozenMode() === 'Right') ? 1 : 0;\n\n    if (left && index < left + isDrag) {\n      return this.freezeTable.querySelector(literals.colGroup).children[index];\n    } else if (right && index >= left + movable + isDrag) {\n      return this.frTable.querySelector(literals.colGroup).children[index - (left ? left + movable + isDrag : left + movable)];\n    }\n\n    return this.getColGroup().children[index - (left ? left + isDrag : left)];\n  };\n\n  FooterRenderer.prototype.columnVisibilityChanged = function () {\n    this.refresh();\n  };\n\n  FooterRenderer.prototype.addEventListener = function () {\n    this.evtHandlers = [{\n      event: colGroupRefresh,\n      handler: this.refreshCol\n    }, {\n      event: columnWidthChanged,\n      handler: this.onWidthChange\n    }, {\n      event: scroll,\n      handler: this.onScroll\n    }, {\n      event: columnVisibilityChanged,\n      handler: this.columnVisibilityChanged\n    }, {\n      event: refreshFooterRenderer,\n      handler: this.refreshFooterRenderer\n    }];\n    addRemoveEventListener(this.parent, this.evtHandlers, true, this);\n  };\n\n  FooterRenderer.prototype.removeEventListener = function () {\n    addRemoveEventListener(this.parent, this.evtHandlers, false);\n  };\n\n  FooterRenderer.prototype.updateFooterTableWidth = function (tFoot) {\n    var tHead = this.parent.getHeaderTable();\n\n    if (tHead && tFoot) {\n      tFoot.style.width = tHead.style.width;\n    }\n  };\n\n  FooterRenderer.prototype.refreshFooterRenderer = function (editedData) {\n    var aggregates = this.onAggregates(editedData);\n    this.refresh(aggregates);\n  };\n\n  FooterRenderer.prototype.getIndexByKey = function (data, ds) {\n    var key = this.parent.getPrimaryKeyFieldNames()[0];\n\n    for (var i = 0; i < ds.length; i++) {\n      if (ds[i][key] === data[key]) {\n        return i;\n      }\n    }\n\n    return -1;\n  };\n\n  FooterRenderer.prototype.onAggregates = function (editedData) {\n    editedData = editedData instanceof Array ? editedData : [];\n    var field = this.parent.getPrimaryKeyFieldNames()[0];\n    var dataSource = [];\n    var isModified = false;\n    var batchChanges = {};\n    var gridData = 'dataSource';\n    var isFiltered = false;\n\n    if (!this.parent.renderModule.data.isRemote() && this.parent.allowFiltering && this.parent.filterSettings.columns.length) {\n      isFiltered = true;\n    }\n\n    var currentViewData = this.parent.dataSource instanceof Array ? isFiltered ? this.parent.getFilteredRecords() : this.parent.dataSource : this.parent.dataSource[gridData].json.length ? this.parent.dataSource[gridData].json : this.parent.getCurrentViewRecords();\n\n    if (this.parent.editModule) {\n      batchChanges = this.parent.editModule.getBatchChanges();\n    }\n\n    if (Object.keys(batchChanges).length) {\n      for (var i = 0; i < currentViewData.length; i++) {\n        isModified = false; // eslint-disable-next-line max-len\n\n        if (batchChanges[literals.changedRecords].length && this.getIndexByKey(currentViewData[i], batchChanges[literals.changedRecords]) > -1) {\n          isModified = true; // eslint-disable-next-line max-len\n\n          dataSource.push(batchChanges[literals.changedRecords][this.getIndexByKey(currentViewData[i], batchChanges[literals.changedRecords])]);\n        } // eslint-disable-next-line max-len\n\n\n        if (batchChanges[literals.deletedRecords].length && this.getIndexByKey(currentViewData[i], batchChanges[literals.deletedRecords]) > -1) {\n          isModified = true;\n        } else if (!isModified) {\n          dataSource.push(currentViewData[i]);\n        }\n      }\n\n      if (batchChanges[literals.addedRecords].length) {\n        for (var i = 0; i < batchChanges[literals.addedRecords].length; i++) {\n          dataSource.push(batchChanges[literals.addedRecords][i]);\n        }\n      }\n    } else {\n      if (editedData.length) {\n        var data = iterateExtend(currentViewData);\n        dataSource = data.map(function (item) {\n          var idVal = DataUtil.getObject(field, item);\n          var value;\n          var hasVal = editedData.some(function (cItem) {\n            value = cItem;\n            return idVal === DataUtil.getObject(field, cItem);\n          });\n          return hasVal ? value : item;\n        });\n      } else {\n        dataSource = currentViewData;\n      }\n    }\n\n    var eData = editedData;\n\n    if (eData.type && eData.type === 'cancel') {\n      dataSource = currentViewData;\n    }\n\n    var aggregate = {};\n    var agrVal;\n    var aggregateRows = this.parent.aggregates;\n\n    for (var i = 0; i < aggregateRows.length; i++) {\n      for (var j = 0; j < aggregateRows[i].columns.length; j++) {\n        var data = [];\n        var type = aggregateRows[i].columns[j].type.toString();\n        data = dataSource;\n        agrVal = calculateAggregate(type, data, aggregateRows[i].columns[j], this.parent);\n        aggregate[aggregateRows[i].columns[j].field + ' - ' + type.toLowerCase()] = agrVal;\n      }\n    }\n\n    var result = {\n      result: dataSource,\n      count: dataSource.length,\n      aggregates: aggregate\n    };\n    return result;\n  };\n\n  return FooterRenderer;\n}(ContentRender);\n\nexport { FooterRenderer };","map":{"version":3,"sources":["/Users/yasaman/Documents/moj_adminpanel/adminpanel/node_modules/@syncfusion/ej2-grids/src/grid/renderer/footer-renderer.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","isNullOrUndefined","remove","formatUnit","Browser","colGroupRefresh","columnWidthChanged","scroll","columnVisibilityChanged","refreshFooterRenderer","ContentRender","RowRenderer","SummaryModelGenerator","renderMovable","calculateAggregate","iterateExtend","addRemoveEventListener","DataUtil","literals","FooterRenderer","_super","gridModule","serviceLocator","_this","call","aggregates","parent","locator","modelGenerator","addEventListener","renderPanel","div","createElement","className","gridFooter","innerDiv","movableContent","isFrozenGrid","fDiv","mDiv","frDiv","getFrozenColumns","getFrozenLeftColumnsCount","appendChild","frozenContent","getFrozenRightColumnsCount","frozenRightContent","isDevice","style","overflowX","setPanel","getPager","element","insertBefore","renderTable","frzCols","createContentTable","table","querySelector","tFoot","freezeTable","cloneNode","frTable","colGroup","hdr","getHeaderContent","frCol","tbody","movableHeader","setColGroup","setTable","renderSummaryContent","e","cStart","cEnd","input","dataSource","currentViewData","summaries","getData","dummies","getColumns","rows","generateRows","fragment","document","createDocumentFragment","rowrenderer","srow","len","length","row","tr","render","refresh","movable","getMovableColumnsCount","right","getPanel","innerHTML","getTable","undefined","movableLastCell","slice","getElementsByClassName","i","borderRight","movableCnt","frozenCnt","refreshHeight","frozenDiv","offsetHeight","height","frCnt","allowResizing","updateFooterTableWidth","onScroll","frozenHeight","getBoundingClientRect","movableHeight","classList","refreshCol","mheaderCol","fheaderCol","gridHeader","isXaxis","enableColumnVirtualization","contentModule","getMovableVirtualHeader","replaceChild","getColGroup","onWidthChange","args","getColFromIndex","index","width","module","left","getContent","scrollLeft","firstChild","parentElement","getVisibleFrozenLeftCount","getVisibleMovableCount","getVisibleFrozenRightCount","isDrag","isRowDragable","getFrozenMode","children","evtHandlers","event","handler","removeEventListener","tHead","getHeaderTable","editedData","onAggregates","getIndexByKey","data","ds","key","getPrimaryKeyFieldNames","field","isModified","batchChanges","gridData","isFiltered","renderModule","isRemote","allowFiltering","filterSettings","columns","getFilteredRecords","json","getCurrentViewRecords","editModule","getBatchChanges","keys","changedRecords","push","deletedRecords","addedRecords","map","item","idVal","getObject","value","hasVal","some","cItem","eData","type","aggregate","agrVal","aggregateRows","j","toString","toLowerCase","result","count"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, remove } from '@syncfusion/ej2-base';\nimport { formatUnit } from '@syncfusion/ej2-base';\nimport { Browser } from '@syncfusion/ej2-base';\nimport { colGroupRefresh, columnWidthChanged, scroll, columnVisibilityChanged, refreshFooterRenderer } from '../base/constant';\nimport { ContentRender } from './content-renderer';\nimport { RowRenderer } from './row-renderer';\nimport { SummaryModelGenerator } from '../services/summary-model-generator';\nimport { renderMovable, calculateAggregate, iterateExtend, addRemoveEventListener } from '../base/util';\nimport { DataUtil } from '@syncfusion/ej2-data';\nimport * as literals from '../base/string-literals';\n/**\n * Footer module is used to render grid content\n *\n * @hidden\n */\nvar FooterRenderer = /** @class */ (function (_super) {\n    __extends(FooterRenderer, _super);\n    function FooterRenderer(gridModule, serviceLocator) {\n        var _this = _super.call(this, gridModule, serviceLocator) || this;\n        _this.aggregates = {};\n        _this.parent = gridModule;\n        _this.locator = serviceLocator;\n        _this.modelGenerator = new SummaryModelGenerator(_this.parent);\n        _this.addEventListener();\n        return _this;\n    }\n    /**\n     * The function is used to render grid footer div\n     *\n     * @returns {void}\n     */\n    FooterRenderer.prototype.renderPanel = function () {\n        var div = this.parent.createElement('div', { className: literals.gridFooter });\n        var innerDiv = this.parent.createElement('div', { className: 'e-summarycontent' });\n        var movableContent = innerDiv;\n        if (this.parent.isFrozenGrid()) {\n            var fDiv = this.parent.createElement('div', { className: 'e-frozenfootercontent e-frozen-left-footercontent' });\n            var mDiv = this.parent.createElement('div', { className: 'e-movablefootercontent' });\n            var frDiv = this.parent.createElement('div', { className: 'e-frozenfootercontent e-frozen-right-footercontent' });\n            if (this.parent.getFrozenColumns() || this.parent.getFrozenLeftColumnsCount()) {\n                innerDiv.appendChild(fDiv);\n                this.frozenContent = fDiv;\n            }\n            innerDiv.appendChild(mDiv);\n            this.movableContent = mDiv;\n            movableContent = mDiv;\n            if (this.parent.getFrozenRightColumnsCount()) {\n                innerDiv.appendChild(frDiv);\n                this.frozenRightContent = frDiv;\n            }\n        }\n        if (Browser.isDevice) {\n            movableContent.style.overflowX = 'scroll';\n        }\n        div.appendChild(innerDiv);\n        this.setPanel(div);\n        if (this.parent.getPager() != null) {\n            this.parent.element.insertBefore(div, this.parent.getPager());\n        }\n        else {\n            this.parent.element.appendChild(div);\n        }\n    };\n    /**\n     * The function is used to render grid footer table\n     *\n     * @returns {void}\n     */\n    FooterRenderer.prototype.renderTable = function () {\n        var frzCols = this.parent.getFrozenColumns() || this.parent.getFrozenLeftColumnsCount();\n        var innerDiv = this.createContentTable('_footer_table');\n        var table = innerDiv.querySelector('.' + literals.table);\n        var tFoot = this.parent.createElement('tfoot');\n        table.appendChild(tFoot);\n        if (this.parent.isFrozenGrid()) {\n            var freezeTable = table.cloneNode(true);\n            var frTable = table.cloneNode(true);\n            if (frzCols) {\n                this.frozenContent.appendChild(freezeTable);\n                this.freezeTable = freezeTable;\n            }\n            if (this.parent.getFrozenRightColumnsCount()) {\n                remove(frTable.querySelector(literals.colGroup));\n                var hdr = this.parent.getHeaderContent().querySelector('.e-frozen-right-header');\n                var frCol = (hdr.querySelector(literals.colGroup).cloneNode(true));\n                frTable.insertBefore(frCol, frTable.querySelector(literals.tbody));\n                this.frozenRightContent.appendChild(frTable);\n                this.frTable = frTable;\n            }\n            this.movableContent.appendChild(table);\n            remove(table.querySelector(literals.colGroup));\n            var colGroup = ((this.parent.getHeaderContent().querySelector('.' + literals.movableHeader).querySelector(literals.colGroup)).cloneNode(true));\n            table.insertBefore(colGroup, table.querySelector(literals.tbody));\n            this.setColGroup(colGroup);\n        }\n        this.setTable(table);\n    };\n    FooterRenderer.prototype.renderSummaryContent = function (e, table, cStart, cEnd) {\n        var input = this.parent.dataSource instanceof Array ? this.parent.dataSource : this.parent.currentViewData;\n        var summaries = this.modelGenerator.getData();\n        var dummies = isNullOrUndefined(cStart) ? this.modelGenerator.getColumns() :\n            this.modelGenerator.getColumns(cStart, cEnd);\n        // eslint-disable-next-line max-len\n        var rows = isNullOrUndefined(cStart) ? this.modelGenerator.generateRows(input, e || this.aggregates) :\n            this.modelGenerator.generateRows(input, e || this.aggregates, cStart, cEnd);\n        var fragment = document.createDocumentFragment();\n        var rowrenderer = new RowRenderer(this.locator, null, this.parent);\n        rowrenderer.element = this.parent.createElement('TR', { className: 'e-summaryrow' });\n        for (var srow = 0, len = summaries.length; srow < len; srow++) {\n            var row = rows[srow];\n            if (!row) {\n                continue;\n            }\n            var tr = rowrenderer.render(row, dummies);\n            fragment.appendChild(tr);\n        }\n        table.tFoot.appendChild(fragment);\n        this.aggregates = !isNullOrUndefined(e) ? e : this.aggregates;\n    };\n    FooterRenderer.prototype.refresh = function (e) {\n        var frzCols = this.parent.getFrozenColumns() || this.parent.getFrozenLeftColumnsCount();\n        var movable = this.parent.getMovableColumnsCount();\n        var right = this.parent.getFrozenRightColumnsCount();\n        if (this.parent.isFrozenGrid()) {\n            remove(this.getPanel());\n            this.renderPanel();\n            this.renderTable();\n            if (frzCols) {\n                this.freezeTable.tFoot.innerHTML = '';\n                this.renderSummaryContent(e, this.freezeTable, 0, frzCols);\n            }\n        }\n        this.getTable().tFoot.innerHTML = '';\n        this.renderSummaryContent(e, this.getTable(), frzCols, right ? frzCols + movable : undefined);\n        if (this.parent.getFrozenRightColumnsCount()) {\n            this.frTable.tFoot.innerHTML = '';\n            this.renderSummaryContent(e, this.frTable, frzCols + movable, frzCols + movable + right);\n            var movableLastCell = [].slice.call(this.getTable().getElementsByClassName('e-lastsummarycell'));\n            if (movableLastCell.length) {\n                for (var i = 0; i < movableLastCell.length; i++) {\n                    movableLastCell[i].style.borderRight = '0px';\n                }\n            }\n        }\n        // check freeze content have no row case\n        if (this.parent.isFrozenGrid()) {\n            var movableCnt = [].slice.call(this.parent.element.querySelector('.e-movablefootercontent')\n                .getElementsByClassName('e-summaryrow'));\n            var frozenCnt = void 0;\n            if (frzCols) {\n                frozenCnt = [].slice.call(this.parent.element.querySelector('.e-frozen-left-footercontent')\n                    .getElementsByClassName('e-summaryrow'));\n                this.refreshHeight(frozenCnt, movableCnt);\n                var frozenDiv = this.frozenContent;\n                if (!frozenDiv.offsetHeight) {\n                    frozenDiv.style.height = this.getTable().offsetHeight + 'px';\n                }\n            }\n            if (right) {\n                var frCnt = [].slice.call(this.parent.element.querySelector('.e-frozen-right-footercontent')\n                    .getElementsByClassName('e-summaryrow'));\n                this.refreshHeight(frCnt, movableCnt);\n                if (frozenCnt) {\n                    this.refreshHeight(frCnt, frozenCnt);\n                }\n                var frDiv = this.frTable;\n                if (!frDiv.offsetHeight) {\n                    frDiv.style.height = this.getTable().offsetHeight + 'px';\n                }\n            }\n            if (this.parent.allowResizing) {\n                this.updateFooterTableWidth(this.getTable());\n            }\n        }\n        this.onScroll();\n    };\n    FooterRenderer.prototype.refreshHeight = function (frozenCnt, movableCnt) {\n        for (var i = 0; i < frozenCnt.length; i++) {\n            var frozenHeight = frozenCnt[i].getBoundingClientRect().height;\n            var movableHeight = movableCnt[i].getBoundingClientRect().height;\n            if (frozenHeight < movableHeight) {\n                frozenCnt[i].classList.remove('e-hide');\n                frozenCnt[i].style.height = movableHeight + 'px';\n            }\n            else if (frozenHeight > movableHeight) {\n                movableCnt[i].classList.remove('e-hide');\n                movableCnt[i].style.height = frozenHeight + 'px';\n            }\n        }\n    };\n    FooterRenderer.prototype.refreshCol = function () {\n        // frozen table\n        var mheaderCol;\n        var fheaderCol = mheaderCol = this.parent.element.querySelector('.' + literals.gridHeader).querySelector(literals.colGroup).cloneNode(true);\n        if (this.parent.getFrozenColumns()) {\n            // eslint-disable-next-line max-len\n            var isXaxis = this.parent.enableColumnVirtualization && this.parent.contentModule.isXaxis();\n            if (isXaxis) {\n                mheaderCol = this.parent.getMovableVirtualHeader().querySelector(literals.colGroup).cloneNode(true);\n            }\n            else {\n                mheaderCol = renderMovable(fheaderCol, this.parent.getFrozenColumns(), this.parent);\n                this.freezeTable.replaceChild(fheaderCol, this.freezeTable.querySelector(literals.colGroup));\n            }\n        }\n        this.getTable().replaceChild(mheaderCol, this.getColGroup());\n        this.setColGroup(mheaderCol);\n    };\n    FooterRenderer.prototype.onWidthChange = function (args) {\n        this.getColFromIndex(args.index).style.width = formatUnit(args.width);\n        if (this.parent.allowResizing && args.module === 'resize') {\n            this.updateFooterTableWidth(this.getTable());\n        }\n    };\n    FooterRenderer.prototype.onScroll = function (e) {\n        if (e === void 0) { e = {\n            left: this.parent.isFrozenGrid() ? this.parent.getContent().querySelector('.' + literals.movableContent).scrollLeft :\n                this.parent.getContent().firstChild.scrollLeft\n        }; }\n        this.getTable().parentElement.scrollLeft = e.left;\n    };\n    FooterRenderer.prototype.getColFromIndex = function (index) {\n        var left = this.parent.getVisibleFrozenLeftCount() || this.parent.getFrozenColumns();\n        var movable = this.parent.getVisibleMovableCount();\n        var right = this.parent.getVisibleFrozenRightCount();\n        var isDrag = this.parent.isRowDragable() && !(this.parent.getFrozenMode() === 'Right') ? 1 : 0;\n        if (left && index < (left + isDrag)) {\n            return this.freezeTable.querySelector(literals.colGroup).children[index];\n        }\n        else if (right && (index >= (left + movable + isDrag))) {\n            return this.frTable.querySelector(literals.colGroup).children[index - (left ? (left + movable + isDrag) :\n                (left + movable))];\n        }\n        return this.getColGroup().children[index - (left ? (left + isDrag) : left)];\n    };\n    FooterRenderer.prototype.columnVisibilityChanged = function () {\n        this.refresh();\n    };\n    FooterRenderer.prototype.addEventListener = function () {\n        this.evtHandlers = [{ event: colGroupRefresh, handler: this.refreshCol },\n            { event: columnWidthChanged, handler: this.onWidthChange },\n            { event: scroll, handler: this.onScroll },\n            { event: columnVisibilityChanged, handler: this.columnVisibilityChanged },\n            { event: refreshFooterRenderer, handler: this.refreshFooterRenderer }];\n        addRemoveEventListener(this.parent, this.evtHandlers, true, this);\n    };\n    FooterRenderer.prototype.removeEventListener = function () {\n        addRemoveEventListener(this.parent, this.evtHandlers, false);\n    };\n    FooterRenderer.prototype.updateFooterTableWidth = function (tFoot) {\n        var tHead = this.parent.getHeaderTable();\n        if (tHead && tFoot) {\n            tFoot.style.width = tHead.style.width;\n        }\n    };\n    FooterRenderer.prototype.refreshFooterRenderer = function (editedData) {\n        var aggregates = this.onAggregates(editedData);\n        this.refresh(aggregates);\n    };\n    FooterRenderer.prototype.getIndexByKey = function (data, ds) {\n        var key = this.parent.getPrimaryKeyFieldNames()[0];\n        for (var i = 0; i < ds.length; i++) {\n            if (ds[i][key] === data[key]) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    FooterRenderer.prototype.onAggregates = function (editedData) {\n        editedData = editedData instanceof Array ? editedData : [];\n        var field = this.parent.getPrimaryKeyFieldNames()[0];\n        var dataSource = [];\n        var isModified = false;\n        var batchChanges = {};\n        var gridData = 'dataSource';\n        var isFiltered = false;\n        if (!this.parent.renderModule.data.isRemote() && this.parent.allowFiltering && this.parent.filterSettings.columns.length) {\n            isFiltered = true;\n        }\n        var currentViewData = this.parent.dataSource instanceof Array ?\n            (isFiltered ? this.parent.getFilteredRecords() : this.parent.dataSource) : (this.parent.dataSource[gridData].json.length ?\n            this.parent.dataSource[gridData].json : this.parent.getCurrentViewRecords());\n        if (this.parent.editModule) {\n            batchChanges = this.parent.editModule.getBatchChanges();\n        }\n        if (Object.keys(batchChanges).length) {\n            for (var i = 0; i < currentViewData.length; i++) {\n                isModified = false;\n                // eslint-disable-next-line max-len\n                if (batchChanges[literals.changedRecords].length && this.getIndexByKey(currentViewData[i], batchChanges[literals.changedRecords]) > -1) {\n                    isModified = true;\n                    // eslint-disable-next-line max-len\n                    dataSource.push(batchChanges[literals.changedRecords][this.getIndexByKey(currentViewData[i], batchChanges[literals.changedRecords])]);\n                }\n                // eslint-disable-next-line max-len\n                if (batchChanges[literals.deletedRecords].length && this.getIndexByKey(currentViewData[i], batchChanges[literals.deletedRecords]) > -1) {\n                    isModified = true;\n                }\n                else if (!isModified) {\n                    dataSource.push(currentViewData[i]);\n                }\n            }\n            if (batchChanges[literals.addedRecords].length) {\n                for (var i = 0; i < batchChanges[literals.addedRecords].length; i++) {\n                    dataSource.push(batchChanges[literals.addedRecords][i]);\n                }\n            }\n        }\n        else {\n            if (editedData.length) {\n                var data = iterateExtend(currentViewData);\n                dataSource = data.map(function (item) {\n                    var idVal = DataUtil.getObject(field, item);\n                    var value;\n                    var hasVal = editedData.some(function (cItem) {\n                        value = cItem;\n                        return idVal === DataUtil.getObject(field, cItem);\n                    });\n                    return hasVal ? value : item;\n                });\n            }\n            else {\n                dataSource = currentViewData;\n            }\n        }\n        var eData = editedData;\n        if ((eData.type && eData.type === 'cancel')) {\n            dataSource = currentViewData;\n        }\n        var aggregate = {};\n        var agrVal;\n        var aggregateRows = this.parent.aggregates;\n        for (var i = 0; i < aggregateRows.length; i++) {\n            for (var j = 0; j < aggregateRows[i].columns.length; j++) {\n                var data = [];\n                var type = aggregateRows[i].columns[j].type.toString();\n                data = dataSource;\n                agrVal = calculateAggregate(type, data, aggregateRows[i].columns[j], this.parent);\n                aggregate[aggregateRows[i].columns[j].field + ' - ' + type.toLowerCase()] = agrVal;\n            }\n        }\n        var result = {\n            result: dataSource,\n            count: dataSource.length,\n            aggregates: aggregate\n        };\n        return result;\n    };\n    return FooterRenderer;\n}(ContentRender));\nexport { FooterRenderer };\n"]},"metadata":{},"sourceType":"module"}