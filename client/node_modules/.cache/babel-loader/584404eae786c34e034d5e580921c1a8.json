{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { Row } from '../models/row';\nimport { Column } from '../models/column';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { calculateAggregate, getUid } from '../base/util';\nimport { CellType } from '../base/enum';\nimport { Cell } from '../models/cell';\n/**\n * Summary row model generator\n *\n * @hidden\n */\n\nvar SummaryModelGenerator =\n/** @class */\nfunction () {\n  /**\n   * Constructor for Summary row model generator\n   *\n   * @param {IGrid} parent - specifies the IGrid\n   */\n  function SummaryModelGenerator(parent) {\n    this.parent = parent;\n  }\n\n  SummaryModelGenerator.prototype.getData = function () {\n    var _this = this;\n\n    var rows = [];\n    var row = this.parent.aggregates.slice();\n\n    for (var i = 0; i < row.length; i++) {\n      var columns = row[i].columns.filter(function (column) {\n        return !(column.footerTemplate || column.groupFooterTemplate || column.groupCaptionTemplate) || _this.columnSelector(column);\n      });\n\n      if (columns.length) {\n        rows.push({\n          columns: columns\n        });\n      }\n    }\n\n    return rows;\n  };\n\n  SummaryModelGenerator.prototype.columnSelector = function (column) {\n    return column.footerTemplate !== undefined;\n  };\n\n  SummaryModelGenerator.prototype.getColumns = function (start, end) {\n    var columns = [];\n\n    if (this.parent.allowGrouping) {\n      for (var i = 0; i < this.parent.groupSettings.columns.length; i++) {\n        columns.push(new Column({}));\n      }\n    }\n\n    if (this.parent.detailTemplate || !isNullOrUndefined(this.parent.childGrid)) {\n      columns.push(new Column({}));\n    }\n\n    if (this.parent.isRowDragable() && !start) {\n      columns.push(new Column({}));\n    }\n\n    columns.push.apply(columns, this.parent.getColumns());\n    end = end && !start ? end + this.parent.getIndentCount() : end;\n    return isNullOrUndefined(start) ? columns : columns.slice(start, end);\n  };\n\n  SummaryModelGenerator.prototype.generateRows = function (input, args, start, end, columns) {\n    if (input.length === 0) {\n      if (args === undefined || !args.count) {\n        return [];\n      }\n    }\n\n    var data = this.buildSummaryData(input, args);\n    var rows = [];\n    var row = this.getData();\n\n    for (var i = 0; i < row.length; i++) {\n      rows.push(this.getGeneratedRow(row[i], data[i], args ? args.level : undefined, start, end, args ? args.parentUid : undefined, columns));\n    }\n\n    return rows;\n  };\n\n  SummaryModelGenerator.prototype.getGeneratedRow = function (summaryRow, data, raw, start, end, parentUid, columns) {\n    var tmp = [];\n    var indents = this.getIndentByLevel();\n    var isDetailGridAlone = !isNullOrUndefined(this.parent.childGrid);\n    var indentLength = !start ? this.parent.getIndentCount() : 0;\n\n    if (this.parent.isRowDragable() && !start) {\n      indents = ['e-indentcelltop'];\n    }\n\n    var values = columns ? columns : this.getColumns(start, end);\n\n    for (var i = 0; i < values.length; i++) {\n      tmp.push(this.getGeneratedCell(values[i], summaryRow, i >= indentLength ? this.getCellType() : i < this.parent.groupSettings.columns.length ? CellType.Indent : CellType.DetailFooterIntent, indents[i], isDetailGridAlone));\n    }\n\n    var row = new Row({\n      data: data,\n      attributes: {\n        class: 'e-summaryrow'\n      }\n    });\n    row.cells = tmp;\n    row.uid = getUid('grid-row');\n    row.parentUid = parentUid;\n    row.visible = tmp.some(function (cell) {\n      return cell.isDataCell && cell.visible;\n    });\n    return row;\n  };\n\n  SummaryModelGenerator.prototype.getGeneratedCell = function (column, summaryRow, cellType, indent, isDetailGridAlone) {\n    //Get the summary column by display\n    var sColumn = summaryRow.columns.filter(function (scolumn) {\n      return scolumn.columnName === column.field;\n    })[0];\n    var attrs = {\n      'style': {\n        'textAlign': column.textAlign\n      },\n      'e-mappinguid': column.uid,\n      index: column.index\n    };\n\n    if (indent) {\n      attrs.class = indent;\n    }\n\n    if (isNullOrUndefined(indent) && isDetailGridAlone) {\n      attrs.class = 'e-detailindentcelltop';\n    }\n\n    var opt = {\n      'visible': column.visible,\n      'isDataCell': !isNullOrUndefined(sColumn),\n      'isTemplate': sColumn && !isNullOrUndefined(sColumn.footerTemplate || sColumn.groupFooterTemplate || sColumn.groupCaptionTemplate),\n      'column': sColumn || {},\n      'attributes': attrs,\n      'cellType': cellType\n    };\n    opt.column.headerText = column.headerText;\n    return new Cell(opt);\n  };\n\n  SummaryModelGenerator.prototype.buildSummaryData = function (data, args) {\n    var dummy = [];\n    var summaryRows = this.getData();\n    var single = {};\n\n    for (var i = 0; i < summaryRows.length; i++) {\n      single = {};\n      var column = summaryRows[i].columns;\n\n      for (var j = 0; j < column.length; j++) {\n        single = this.setTemplate(column[j], args && args.aggregates ? args : data, single);\n      }\n\n      dummy.push(single);\n    }\n\n    return dummy;\n  };\n\n  SummaryModelGenerator.prototype.getIndentByLevel = function () {\n    return this.parent.groupSettings.columns.map(function () {\n      return 'e-indentcelltop';\n    });\n  };\n\n  SummaryModelGenerator.prototype.setTemplate = function (column, data, single) {\n    var types = column.type;\n    var helper = {};\n\n    var formatFn = column.getFormatter() || function () {\n      return function (a) {\n        return a;\n      };\n    }();\n\n    var group = data;\n\n    if (!(types instanceof Array)) {\n      types = [column.type];\n    }\n\n    for (var i = 0; i < types.length; i++) {\n      var key = column.field + ' - ' + types[i].toLowerCase();\n      var disp = column.columnName;\n      var val = types[i] !== 'Custom' && group.aggregates && key in group.aggregates ? group.aggregates[key] : calculateAggregate(types[i], group.aggregates ? group : data, column, this.parent);\n      single[disp] = single[disp] || {};\n      single[disp][key] = val;\n      single[disp][types[i]] = !isNullOrUndefined(val) ? formatFn(val) : ' ';\n\n      if (group.field) {\n        single[disp].field = group.field;\n        single[disp].key = group.key;\n      }\n    }\n\n    helper.format = column.getFormatter();\n    column.setTemplate(helper);\n    return single;\n  };\n\n  SummaryModelGenerator.prototype.getCellType = function () {\n    return CellType.Summary;\n  };\n\n  return SummaryModelGenerator;\n}();\n\nexport { SummaryModelGenerator };\n\nvar GroupSummaryModelGenerator =\n/** @class */\nfunction (_super) {\n  __extends(GroupSummaryModelGenerator, _super);\n\n  function GroupSummaryModelGenerator() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  GroupSummaryModelGenerator.prototype.columnSelector = function (column) {\n    return column.groupFooterTemplate !== undefined;\n  };\n\n  GroupSummaryModelGenerator.prototype.getIndentByLevel = function (level) {\n    if (level === void 0) {\n      level = this.parent.groupSettings.columns.length;\n    }\n\n    return this.parent.groupSettings.columns.map(function (v, indx) {\n      return indx <= level - 1 ? '' : 'e-indentcelltop';\n    });\n  };\n\n  GroupSummaryModelGenerator.prototype.getCellType = function () {\n    return CellType.GroupSummary;\n  };\n\n  return GroupSummaryModelGenerator;\n}(SummaryModelGenerator);\n\nexport { GroupSummaryModelGenerator };\n\nvar CaptionSummaryModelGenerator =\n/** @class */\nfunction (_super) {\n  __extends(CaptionSummaryModelGenerator, _super);\n\n  function CaptionSummaryModelGenerator() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  CaptionSummaryModelGenerator.prototype.columnSelector = function (column) {\n    return column.groupCaptionTemplate !== undefined;\n  };\n\n  CaptionSummaryModelGenerator.prototype.getData = function () {\n    var initVal = {\n      columns: []\n    };\n    return [_super.prototype.getData.call(this).reduce(function (prev, cur) {\n      prev.columns = prev.columns.concat(cur.columns);\n      return prev;\n    }, initVal)];\n  };\n\n  CaptionSummaryModelGenerator.prototype.isEmpty = function () {\n    return (this.getData()[0].columns || []).length === 0;\n  };\n\n  CaptionSummaryModelGenerator.prototype.getCellType = function () {\n    return CellType.CaptionSummary;\n  };\n\n  return CaptionSummaryModelGenerator;\n}(SummaryModelGenerator);\n\nexport { CaptionSummaryModelGenerator };","map":{"version":3,"sources":["/Users/yasaman/Documents/moj_adminpanel/adminpanel/node_modules/@syncfusion/ej2-grids/src/grid/services/summary-model-generator.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","Row","Column","isNullOrUndefined","calculateAggregate","getUid","CellType","Cell","SummaryModelGenerator","parent","getData","_this","rows","row","aggregates","slice","i","length","columns","filter","column","footerTemplate","groupFooterTemplate","groupCaptionTemplate","columnSelector","push","undefined","getColumns","start","end","allowGrouping","groupSettings","detailTemplate","childGrid","isRowDragable","apply","getIndentCount","generateRows","input","args","count","data","buildSummaryData","getGeneratedRow","level","parentUid","summaryRow","raw","tmp","indents","getIndentByLevel","isDetailGridAlone","indentLength","values","getGeneratedCell","getCellType","Indent","DetailFooterIntent","attributes","class","cells","uid","visible","some","cell","isDataCell","cellType","indent","sColumn","scolumn","columnName","field","attrs","textAlign","index","opt","headerText","dummy","summaryRows","single","j","setTemplate","map","types","type","helper","formatFn","getFormatter","a","group","key","toLowerCase","disp","val","format","Summary","GroupSummaryModelGenerator","_super","arguments","v","indx","GroupSummary","CaptionSummaryModelGenerator","initVal","call","reduce","prev","cur","concat","isEmpty","CaptionSummary"],"mappings":"AAAA,IAAIA,SAAS,GAAI,QAAQ,KAAKA,SAAd,IAA6B,YAAY;AACrD,MAAIC,aAAa,GAAG,UAAUC,CAAV,EAAaC,CAAb,EAAgB;AAChCF,IAAAA,aAAa,GAAGG,MAAM,CAACC,cAAP,IACX;AAAEC,MAAAA,SAAS,EAAE;AAAb,iBAA6BC,KAA7B,IAAsC,UAAUL,CAAV,EAAaC,CAAb,EAAgB;AAAED,MAAAA,CAAC,CAACI,SAAF,GAAcH,CAAd;AAAkB,KAD/D,IAEZ,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AAAE,WAAK,IAAIK,CAAT,IAAcL,CAAd,EAAiB,IAAIA,CAAC,CAACM,cAAF,CAAiBD,CAAjB,CAAJ,EAAyBN,CAAC,CAACM,CAAD,CAAD,GAAOL,CAAC,CAACK,CAAD,CAAR;AAAc,KAF9E;;AAGA,WAAOP,aAAa,CAACC,CAAD,EAAIC,CAAJ,CAApB;AACH,GALD;;AAMA,SAAO,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AACnBF,IAAAA,aAAa,CAACC,CAAD,EAAIC,CAAJ,CAAb;;AACA,aAASO,EAAT,GAAc;AAAE,WAAKC,WAAL,GAAmBT,CAAnB;AAAuB;;AACvCA,IAAAA,CAAC,CAACU,SAAF,GAAcT,CAAC,KAAK,IAAN,GAAaC,MAAM,CAACS,MAAP,CAAcV,CAAd,CAAb,IAAiCO,EAAE,CAACE,SAAH,GAAeT,CAAC,CAACS,SAAjB,EAA4B,IAAIF,EAAJ,EAA7D,CAAd;AACH,GAJD;AAKH,CAZ2C,EAA5C;;AAaA,SAASI,GAAT,QAAoB,eAApB;AACA,SAASC,MAAT,QAAuB,kBAAvB;AACA,SAASC,iBAAT,QAAkC,sBAAlC;AACA,SAASC,kBAAT,EAA6BC,MAA7B,QAA2C,cAA3C;AACA,SAASC,QAAT,QAAyB,cAAzB;AACA,SAASC,IAAT,QAAqB,gBAArB;AACA;AACA;AACA;AACA;AACA;;AACA,IAAIC,qBAAqB;AAAG;AAAe,YAAY;AACnD;AACJ;AACA;AACA;AACA;AACI,WAASA,qBAAT,CAA+BC,MAA/B,EAAuC;AACnC,SAAKA,MAAL,GAAcA,MAAd;AACH;;AACDD,EAAAA,qBAAqB,CAACT,SAAtB,CAAgCW,OAAhC,GAA0C,YAAY;AAClD,QAAIC,KAAK,GAAG,IAAZ;;AACA,QAAIC,IAAI,GAAG,EAAX;AACA,QAAIC,GAAG,GAAG,KAAKJ,MAAL,CAAYK,UAAZ,CAAuBC,KAAvB,EAAV;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,GAAG,CAACI,MAAxB,EAAgCD,CAAC,EAAjC,EAAqC;AACjC,UAAIE,OAAO,GAAGL,GAAG,CAACG,CAAD,CAAH,CAAOE,OAAP,CAAeC,MAAf,CAAsB,UAAUC,MAAV,EAAkB;AAClD,eAAO,EAAEA,MAAM,CAACC,cAAP,IAAyBD,MAAM,CAACE,mBAAhC,IAAuDF,MAAM,CAACG,oBAAhE,KACAZ,KAAK,CAACa,cAAN,CAAqBJ,MAArB,CADP;AAEH,OAHa,CAAd;;AAIA,UAAIF,OAAO,CAACD,MAAZ,EAAoB;AAChBL,QAAAA,IAAI,CAACa,IAAL,CAAU;AAAEP,UAAAA,OAAO,EAAEA;AAAX,SAAV;AACH;AACJ;;AACD,WAAON,IAAP;AACH,GAdD;;AAeAJ,EAAAA,qBAAqB,CAACT,SAAtB,CAAgCyB,cAAhC,GAAiD,UAAUJ,MAAV,EAAkB;AAC/D,WAAOA,MAAM,CAACC,cAAP,KAA0BK,SAAjC;AACH,GAFD;;AAGAlB,EAAAA,qBAAqB,CAACT,SAAtB,CAAgC4B,UAAhC,GAA6C,UAAUC,KAAV,EAAiBC,GAAjB,EAAsB;AAC/D,QAAIX,OAAO,GAAG,EAAd;;AACA,QAAI,KAAKT,MAAL,CAAYqB,aAAhB,EAA+B;AAC3B,WAAK,IAAId,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKP,MAAL,CAAYsB,aAAZ,CAA0Bb,OAA1B,CAAkCD,MAAtD,EAA8DD,CAAC,EAA/D,EAAmE;AAC/DE,QAAAA,OAAO,CAACO,IAAR,CAAa,IAAIvB,MAAJ,CAAW,EAAX,CAAb;AACH;AACJ;;AACD,QAAI,KAAKO,MAAL,CAAYuB,cAAZ,IAA8B,CAAC7B,iBAAiB,CAAC,KAAKM,MAAL,CAAYwB,SAAb,CAApD,EAA6E;AACzEf,MAAAA,OAAO,CAACO,IAAR,CAAa,IAAIvB,MAAJ,CAAW,EAAX,CAAb;AACH;;AACD,QAAI,KAAKO,MAAL,CAAYyB,aAAZ,MAA+B,CAACN,KAApC,EAA2C;AACvCV,MAAAA,OAAO,CAACO,IAAR,CAAa,IAAIvB,MAAJ,CAAW,EAAX,CAAb;AACH;;AACDgB,IAAAA,OAAO,CAACO,IAAR,CAAaU,KAAb,CAAmBjB,OAAnB,EAA4B,KAAKT,MAAL,CAAYkB,UAAZ,EAA5B;AACAE,IAAAA,GAAG,GAAGA,GAAG,IAAI,CAACD,KAAR,GAAgBC,GAAG,GAAG,KAAKpB,MAAL,CAAY2B,cAAZ,EAAtB,GAAqDP,GAA3D;AACA,WAAO1B,iBAAiB,CAACyB,KAAD,CAAjB,GAA2BV,OAA3B,GAAqCA,OAAO,CAACH,KAAR,CAAca,KAAd,EAAqBC,GAArB,CAA5C;AACH,GAhBD;;AAiBArB,EAAAA,qBAAqB,CAACT,SAAtB,CAAgCsC,YAAhC,GAA+C,UAAUC,KAAV,EAAiBC,IAAjB,EAAuBX,KAAvB,EAA8BC,GAA9B,EAAmCX,OAAnC,EAA4C;AACvF,QAAIoB,KAAK,CAACrB,MAAN,KAAiB,CAArB,EAAwB;AACpB,UAAIsB,IAAI,KAAKb,SAAT,IAAsB,CAACa,IAAI,CAACC,KAAhC,EAAuC;AACnC,eAAO,EAAP;AACH;AACJ;;AACD,QAAIC,IAAI,GAAG,KAAKC,gBAAL,CAAsBJ,KAAtB,EAA6BC,IAA7B,CAAX;AACA,QAAI3B,IAAI,GAAG,EAAX;AACA,QAAIC,GAAG,GAAG,KAAKH,OAAL,EAAV;;AACA,SAAK,IAAIM,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,GAAG,CAACI,MAAxB,EAAgCD,CAAC,EAAjC,EAAqC;AACjCJ,MAAAA,IAAI,CAACa,IAAL,CAAU,KAAKkB,eAAL,CAAqB9B,GAAG,CAACG,CAAD,CAAxB,EAA6ByB,IAAI,CAACzB,CAAD,CAAjC,EAAsCuB,IAAI,GAAGA,IAAI,CAACK,KAAR,GAAgBlB,SAA1D,EAAqEE,KAArE,EAA4EC,GAA5E,EAAiFU,IAAI,GAAGA,IAAI,CAACM,SAAR,GAAoBnB,SAAzG,EAAoHR,OAApH,CAAV;AACH;;AACD,WAAON,IAAP;AACH,GAbD;;AAcAJ,EAAAA,qBAAqB,CAACT,SAAtB,CAAgC4C,eAAhC,GAAkD,UAAUG,UAAV,EAAsBL,IAAtB,EAA4BM,GAA5B,EAAiCnB,KAAjC,EAAwCC,GAAxC,EAA6CgB,SAA7C,EAAwD3B,OAAxD,EAAiE;AAC/G,QAAI8B,GAAG,GAAG,EAAV;AACA,QAAIC,OAAO,GAAG,KAAKC,gBAAL,EAAd;AACA,QAAIC,iBAAiB,GAAG,CAAChD,iBAAiB,CAAC,KAAKM,MAAL,CAAYwB,SAAb,CAA1C;AACA,QAAImB,YAAY,GAAG,CAACxB,KAAD,GAAS,KAAKnB,MAAL,CAAY2B,cAAZ,EAAT,GAAwC,CAA3D;;AACA,QAAI,KAAK3B,MAAL,CAAYyB,aAAZ,MAA+B,CAACN,KAApC,EAA2C;AACvCqB,MAAAA,OAAO,GAAG,CAAC,iBAAD,CAAV;AACH;;AACD,QAAII,MAAM,GAAGnC,OAAO,GAAGA,OAAH,GAAa,KAAKS,UAAL,CAAgBC,KAAhB,EAAuBC,GAAvB,CAAjC;;AACA,SAAK,IAAIb,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqC,MAAM,CAACpC,MAA3B,EAAmCD,CAAC,EAApC,EAAwC;AACpCgC,MAAAA,GAAG,CAACvB,IAAJ,CAAS,KAAK6B,gBAAL,CAAsBD,MAAM,CAACrC,CAAD,CAA5B,EAAiC8B,UAAjC,EAA6C9B,CAAC,IAAIoC,YAAL,GAAoB,KAAKG,WAAL,EAApB,GAClDvC,CAAC,GAAG,KAAKP,MAAL,CAAYsB,aAAZ,CAA0Bb,OAA1B,CAAkCD,MAAtC,GAA+CX,QAAQ,CAACkD,MAAxD,GAAiElD,QAAQ,CAACmD,kBADrE,EACyFR,OAAO,CAACjC,CAAD,CADhG,EACqGmC,iBADrG,CAAT;AAEH;;AACD,QAAItC,GAAG,GAAG,IAAIZ,GAAJ,CAAQ;AAAEwC,MAAAA,IAAI,EAAEA,IAAR;AAAciB,MAAAA,UAAU,EAAE;AAAEC,QAAAA,KAAK,EAAE;AAAT;AAA1B,KAAR,CAAV;AACA9C,IAAAA,GAAG,CAAC+C,KAAJ,GAAYZ,GAAZ;AACAnC,IAAAA,GAAG,CAACgD,GAAJ,GAAUxD,MAAM,CAAC,UAAD,CAAhB;AACAQ,IAAAA,GAAG,CAACgC,SAAJ,GAAgBA,SAAhB;AACAhC,IAAAA,GAAG,CAACiD,OAAJ,GAAcd,GAAG,CAACe,IAAJ,CAAS,UAAUC,IAAV,EAAgB;AAAE,aAAOA,IAAI,CAACC,UAAL,IAAmBD,IAAI,CAACF,OAA/B;AAAyC,KAApE,CAAd;AACA,WAAOjD,GAAP;AACH,GAnBD;;AAoBAL,EAAAA,qBAAqB,CAACT,SAAtB,CAAgCuD,gBAAhC,GAAmD,UAAUlC,MAAV,EAAkB0B,UAAlB,EAA8BoB,QAA9B,EAAwCC,MAAxC,EAAgDhB,iBAAhD,EAAmE;AAClH;AACA,QAAIiB,OAAO,GAAGtB,UAAU,CAAC5B,OAAX,CAAmBC,MAAnB,CAA0B,UAAUkD,OAAV,EAAmB;AAAE,aAAOA,OAAO,CAACC,UAAR,KAAuBlD,MAAM,CAACmD,KAArC;AAA6C,KAA5F,EAA8F,CAA9F,CAAd;AACA,QAAIC,KAAK,GAAG;AACR,eAAS;AAAE,qBAAapD,MAAM,CAACqD;AAAtB,OADD;AAER,sBAAgBrD,MAAM,CAACyC,GAFf;AAEoBa,MAAAA,KAAK,EAAEtD,MAAM,CAACsD;AAFlC,KAAZ;;AAIA,QAAIP,MAAJ,EAAY;AACRK,MAAAA,KAAK,CAACb,KAAN,GAAcQ,MAAd;AACH;;AACD,QAAIhE,iBAAiB,CAACgE,MAAD,CAAjB,IAA6BhB,iBAAjC,EAAoD;AAChDqB,MAAAA,KAAK,CAACb,KAAN,GAAc,uBAAd;AACH;;AACD,QAAIgB,GAAG,GAAG;AACN,iBAAWvD,MAAM,CAAC0C,OADZ;AAEN,oBAAc,CAAC3D,iBAAiB,CAACiE,OAAD,CAF1B;AAGN,oBAAcA,OAAO,IAAI,CAACjE,iBAAiB,CAACiE,OAAO,CAAC/C,cAAR,IACrC+C,OAAO,CAAC9C,mBAD6B,IACN8C,OAAO,CAAC7C,oBADH,CAHrC;AAKN,gBAAU6C,OAAO,IAAI,EALf;AAMN,oBAAcI,KANR;AAON,kBAAYN;AAPN,KAAV;AASAS,IAAAA,GAAG,CAACvD,MAAJ,CAAWwD,UAAX,GAAwBxD,MAAM,CAACwD,UAA/B;AACA,WAAO,IAAIrE,IAAJ,CAASoE,GAAT,CAAP;AACH,GAxBD;;AAyBAnE,EAAAA,qBAAqB,CAACT,SAAtB,CAAgC2C,gBAAhC,GAAmD,UAAUD,IAAV,EAAgBF,IAAhB,EAAsB;AACrE,QAAIsC,KAAK,GAAG,EAAZ;AACA,QAAIC,WAAW,GAAG,KAAKpE,OAAL,EAAlB;AACA,QAAIqE,MAAM,GAAG,EAAb;;AACA,SAAK,IAAI/D,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8D,WAAW,CAAC7D,MAAhC,EAAwCD,CAAC,EAAzC,EAA6C;AACzC+D,MAAAA,MAAM,GAAG,EAAT;AACA,UAAI3D,MAAM,GAAG0D,WAAW,CAAC9D,CAAD,CAAX,CAAeE,OAA5B;;AACA,WAAK,IAAI8D,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG5D,MAAM,CAACH,MAA3B,EAAmC+D,CAAC,EAApC,EAAwC;AACpCD,QAAAA,MAAM,GAAG,KAAKE,WAAL,CAAiB7D,MAAM,CAAC4D,CAAD,CAAvB,EAA6BzC,IAAI,IAAIA,IAAI,CAACzB,UAAd,GAA4ByB,IAA5B,GAAmCE,IAA/D,EAAqEsC,MAArE,CAAT;AACH;;AACDF,MAAAA,KAAK,CAACpD,IAAN,CAAWsD,MAAX;AACH;;AACD,WAAOF,KAAP;AACH,GAbD;;AAcArE,EAAAA,qBAAqB,CAACT,SAAtB,CAAgCmD,gBAAhC,GAAmD,YAAY;AAC3D,WAAO,KAAKzC,MAAL,CAAYsB,aAAZ,CAA0Bb,OAA1B,CAAkCgE,GAAlC,CAAsC,YAAY;AAAE,aAAO,iBAAP;AAA2B,KAA/E,CAAP;AACH,GAFD;;AAGA1E,EAAAA,qBAAqB,CAACT,SAAtB,CAAgCkF,WAAhC,GAA8C,UAAU7D,MAAV,EAAkBqB,IAAlB,EAAwBsC,MAAxB,EAAgC;AAC1E,QAAII,KAAK,GAAG/D,MAAM,CAACgE,IAAnB;AACA,QAAIC,MAAM,GAAG,EAAb;;AACA,QAAIC,QAAQ,GAAGlE,MAAM,CAACmE,YAAP,MAA0B,YAAY;AAAE,aAAO,UAAUC,CAAV,EAAa;AAAE,eAAOA,CAAP;AAAW,OAAjC;AAAoC,KAAnD,EAAxC;;AACA,QAAIC,KAAK,GAAGhD,IAAZ;;AACA,QAAI,EAAE0C,KAAK,YAAYzF,KAAnB,CAAJ,EAA+B;AAC3ByF,MAAAA,KAAK,GAAG,CAAC/D,MAAM,CAACgE,IAAR,CAAR;AACH;;AACD,SAAK,IAAIpE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGmE,KAAK,CAAClE,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AACnC,UAAI0E,GAAG,GAAGtE,MAAM,CAACmD,KAAP,GAAe,KAAf,GAAuBY,KAAK,CAACnE,CAAD,CAAL,CAAS2E,WAAT,EAAjC;AACA,UAAIC,IAAI,GAAGxE,MAAM,CAACkD,UAAlB;AACA,UAAIuB,GAAG,GAAGV,KAAK,CAACnE,CAAD,CAAL,KAAa,QAAb,IAAyByE,KAAK,CAAC3E,UAA/B,IAA6C4E,GAAG,IAAID,KAAK,CAAC3E,UAA1D,GAAuE2E,KAAK,CAAC3E,UAAN,CAAiB4E,GAAjB,CAAvE,GACNtF,kBAAkB,CAAC+E,KAAK,CAACnE,CAAD,CAAN,EAAWyE,KAAK,CAAC3E,UAAN,GAAmB2E,KAAnB,GAA2BhD,IAAtC,EAA4CrB,MAA5C,EAAoD,KAAKX,MAAzD,CADtB;AAEAsE,MAAAA,MAAM,CAACa,IAAD,CAAN,GAAeb,MAAM,CAACa,IAAD,CAAN,IAAgB,EAA/B;AACAb,MAAAA,MAAM,CAACa,IAAD,CAAN,CAAaF,GAAb,IAAoBG,GAApB;AACAd,MAAAA,MAAM,CAACa,IAAD,CAAN,CAAaT,KAAK,CAACnE,CAAD,CAAlB,IAAyB,CAACb,iBAAiB,CAAC0F,GAAD,CAAlB,GAA0BP,QAAQ,CAACO,GAAD,CAAlC,GAA0C,GAAnE;;AACA,UAAIJ,KAAK,CAAClB,KAAV,EAAiB;AACbQ,QAAAA,MAAM,CAACa,IAAD,CAAN,CAAarB,KAAb,GAAqBkB,KAAK,CAAClB,KAA3B;AACAQ,QAAAA,MAAM,CAACa,IAAD,CAAN,CAAaF,GAAb,GAAmBD,KAAK,CAACC,GAAzB;AACH;AACJ;;AACDL,IAAAA,MAAM,CAACS,MAAP,GAAgB1E,MAAM,CAACmE,YAAP,EAAhB;AACAnE,IAAAA,MAAM,CAAC6D,WAAP,CAAmBI,MAAnB;AACA,WAAON,MAAP;AACH,GAxBD;;AAyBAvE,EAAAA,qBAAqB,CAACT,SAAtB,CAAgCwD,WAAhC,GAA8C,YAAY;AACtD,WAAOjD,QAAQ,CAACyF,OAAhB;AACH,GAFD;;AAGA,SAAOvF,qBAAP;AACH,CArJ0C,EAA3C;;AAsJA,SAASA,qBAAT;;AACA,IAAIwF,0BAA0B;AAAG;AAAe,UAAUC,MAAV,EAAkB;AAC9D9G,EAAAA,SAAS,CAAC6G,0BAAD,EAA6BC,MAA7B,CAAT;;AACA,WAASD,0BAAT,GAAsC;AAClC,WAAOC,MAAM,KAAK,IAAX,IAAmBA,MAAM,CAAC9D,KAAP,CAAa,IAAb,EAAmB+D,SAAnB,CAAnB,IAAoD,IAA3D;AACH;;AACDF,EAAAA,0BAA0B,CAACjG,SAA3B,CAAqCyB,cAArC,GAAsD,UAAUJ,MAAV,EAAkB;AACpE,WAAOA,MAAM,CAACE,mBAAP,KAA+BI,SAAtC;AACH,GAFD;;AAGAsE,EAAAA,0BAA0B,CAACjG,SAA3B,CAAqCmD,gBAArC,GAAwD,UAAUN,KAAV,EAAiB;AACrE,QAAIA,KAAK,KAAK,KAAK,CAAnB,EAAsB;AAAEA,MAAAA,KAAK,GAAG,KAAKnC,MAAL,CAAYsB,aAAZ,CAA0Bb,OAA1B,CAAkCD,MAA1C;AAAmD;;AAC3E,WAAO,KAAKR,MAAL,CAAYsB,aAAZ,CAA0Bb,OAA1B,CAAkCgE,GAAlC,CAAsC,UAAUiB,CAAV,EAAaC,IAAb,EAAmB;AAAE,aAAOA,IAAI,IAAIxD,KAAK,GAAG,CAAhB,GAAoB,EAApB,GAAyB,iBAAhC;AAAoD,KAA/G,CAAP;AACH,GAHD;;AAIAoD,EAAAA,0BAA0B,CAACjG,SAA3B,CAAqCwD,WAArC,GAAmD,YAAY;AAC3D,WAAOjD,QAAQ,CAAC+F,YAAhB;AACH,GAFD;;AAGA,SAAOL,0BAAP;AACH,CAhB+C,CAgB9CxF,qBAhB8C,CAAhD;;AAiBA,SAASwF,0BAAT;;AACA,IAAIM,4BAA4B;AAAG;AAAe,UAAUL,MAAV,EAAkB;AAChE9G,EAAAA,SAAS,CAACmH,4BAAD,EAA+BL,MAA/B,CAAT;;AACA,WAASK,4BAAT,GAAwC;AACpC,WAAOL,MAAM,KAAK,IAAX,IAAmBA,MAAM,CAAC9D,KAAP,CAAa,IAAb,EAAmB+D,SAAnB,CAAnB,IAAoD,IAA3D;AACH;;AACDI,EAAAA,4BAA4B,CAACvG,SAA7B,CAAuCyB,cAAvC,GAAwD,UAAUJ,MAAV,EAAkB;AACtE,WAAOA,MAAM,CAACG,oBAAP,KAAgCG,SAAvC;AACH,GAFD;;AAGA4E,EAAAA,4BAA4B,CAACvG,SAA7B,CAAuCW,OAAvC,GAAiD,YAAY;AACzD,QAAI6F,OAAO,GAAG;AAAErF,MAAAA,OAAO,EAAE;AAAX,KAAd;AACA,WAAO,CAAC+E,MAAM,CAAClG,SAAP,CAAiBW,OAAjB,CAAyB8F,IAAzB,CAA8B,IAA9B,EAAoCC,MAApC,CAA2C,UAAUC,IAAV,EAAgBC,GAAhB,EAAqB;AAChED,MAAAA,IAAI,CAACxF,OAAL,GAAewF,IAAI,CAACxF,OAAL,CAAa0F,MAAb,CAAoBD,GAAG,CAACzF,OAAxB,CAAf;AACA,aAAOwF,IAAP;AACH,KAHG,EAGDH,OAHC,CAAD,CAAP;AAIH,GAND;;AAOAD,EAAAA,4BAA4B,CAACvG,SAA7B,CAAuC8G,OAAvC,GAAiD,YAAY;AACzD,WAAO,CAAC,KAAKnG,OAAL,GAAe,CAAf,EAAkBQ,OAAlB,IAA6B,EAA9B,EAAkCD,MAAlC,KAA6C,CAApD;AACH,GAFD;;AAGAqF,EAAAA,4BAA4B,CAACvG,SAA7B,CAAuCwD,WAAvC,GAAqD,YAAY;AAC7D,WAAOjD,QAAQ,CAACwG,cAAhB;AACH,GAFD;;AAGA,SAAOR,4BAAP;AACH,CAtBiD,CAsBhD9F,qBAtBgD,CAAlD;;AAuBA,SAAS8F,4BAAT","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Row } from '../models/row';\nimport { Column } from '../models/column';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { calculateAggregate, getUid } from '../base/util';\nimport { CellType } from '../base/enum';\nimport { Cell } from '../models/cell';\n/**\n * Summary row model generator\n *\n * @hidden\n */\nvar SummaryModelGenerator = /** @class */ (function () {\n    /**\n     * Constructor for Summary row model generator\n     *\n     * @param {IGrid} parent - specifies the IGrid\n     */\n    function SummaryModelGenerator(parent) {\n        this.parent = parent;\n    }\n    SummaryModelGenerator.prototype.getData = function () {\n        var _this = this;\n        var rows = [];\n        var row = this.parent.aggregates.slice();\n        for (var i = 0; i < row.length; i++) {\n            var columns = row[i].columns.filter(function (column) {\n                return !(column.footerTemplate || column.groupFooterTemplate || column.groupCaptionTemplate)\n                    || _this.columnSelector(column);\n            });\n            if (columns.length) {\n                rows.push({ columns: columns });\n            }\n        }\n        return rows;\n    };\n    SummaryModelGenerator.prototype.columnSelector = function (column) {\n        return column.footerTemplate !== undefined;\n    };\n    SummaryModelGenerator.prototype.getColumns = function (start, end) {\n        var columns = [];\n        if (this.parent.allowGrouping) {\n            for (var i = 0; i < this.parent.groupSettings.columns.length; i++) {\n                columns.push(new Column({}));\n            }\n        }\n        if (this.parent.detailTemplate || !isNullOrUndefined(this.parent.childGrid)) {\n            columns.push(new Column({}));\n        }\n        if (this.parent.isRowDragable() && !start) {\n            columns.push(new Column({}));\n        }\n        columns.push.apply(columns, this.parent.getColumns());\n        end = end && !start ? end + this.parent.getIndentCount() : end;\n        return isNullOrUndefined(start) ? columns : columns.slice(start, end);\n    };\n    SummaryModelGenerator.prototype.generateRows = function (input, args, start, end, columns) {\n        if (input.length === 0) {\n            if (args === undefined || !args.count) {\n                return [];\n            }\n        }\n        var data = this.buildSummaryData(input, args);\n        var rows = [];\n        var row = this.getData();\n        for (var i = 0; i < row.length; i++) {\n            rows.push(this.getGeneratedRow(row[i], data[i], args ? args.level : undefined, start, end, args ? args.parentUid : undefined, columns));\n        }\n        return rows;\n    };\n    SummaryModelGenerator.prototype.getGeneratedRow = function (summaryRow, data, raw, start, end, parentUid, columns) {\n        var tmp = [];\n        var indents = this.getIndentByLevel();\n        var isDetailGridAlone = !isNullOrUndefined(this.parent.childGrid);\n        var indentLength = !start ? this.parent.getIndentCount() : 0;\n        if (this.parent.isRowDragable() && !start) {\n            indents = ['e-indentcelltop'];\n        }\n        var values = columns ? columns : this.getColumns(start, end);\n        for (var i = 0; i < values.length; i++) {\n            tmp.push(this.getGeneratedCell(values[i], summaryRow, i >= indentLength ? this.getCellType() :\n                i < this.parent.groupSettings.columns.length ? CellType.Indent : CellType.DetailFooterIntent, indents[i], isDetailGridAlone));\n        }\n        var row = new Row({ data: data, attributes: { class: 'e-summaryrow' } });\n        row.cells = tmp;\n        row.uid = getUid('grid-row');\n        row.parentUid = parentUid;\n        row.visible = tmp.some(function (cell) { return cell.isDataCell && cell.visible; });\n        return row;\n    };\n    SummaryModelGenerator.prototype.getGeneratedCell = function (column, summaryRow, cellType, indent, isDetailGridAlone) {\n        //Get the summary column by display\n        var sColumn = summaryRow.columns.filter(function (scolumn) { return scolumn.columnName === column.field; })[0];\n        var attrs = {\n            'style': { 'textAlign': column.textAlign },\n            'e-mappinguid': column.uid, index: column.index\n        };\n        if (indent) {\n            attrs.class = indent;\n        }\n        if (isNullOrUndefined(indent) && isDetailGridAlone) {\n            attrs.class = 'e-detailindentcelltop';\n        }\n        var opt = {\n            'visible': column.visible,\n            'isDataCell': !isNullOrUndefined(sColumn),\n            'isTemplate': sColumn && !isNullOrUndefined(sColumn.footerTemplate\n                || sColumn.groupFooterTemplate || sColumn.groupCaptionTemplate),\n            'column': sColumn || {},\n            'attributes': attrs,\n            'cellType': cellType\n        };\n        opt.column.headerText = column.headerText;\n        return new Cell(opt);\n    };\n    SummaryModelGenerator.prototype.buildSummaryData = function (data, args) {\n        var dummy = [];\n        var summaryRows = this.getData();\n        var single = {};\n        for (var i = 0; i < summaryRows.length; i++) {\n            single = {};\n            var column = summaryRows[i].columns;\n            for (var j = 0; j < column.length; j++) {\n                single = this.setTemplate(column[j], (args && args.aggregates) ? args : data, single);\n            }\n            dummy.push(single);\n        }\n        return dummy;\n    };\n    SummaryModelGenerator.prototype.getIndentByLevel = function () {\n        return this.parent.groupSettings.columns.map(function () { return 'e-indentcelltop'; });\n    };\n    SummaryModelGenerator.prototype.setTemplate = function (column, data, single) {\n        var types = column.type;\n        var helper = {};\n        var formatFn = column.getFormatter() || (function () { return function (a) { return a; }; })();\n        var group = data;\n        if (!(types instanceof Array)) {\n            types = [column.type];\n        }\n        for (var i = 0; i < types.length; i++) {\n            var key = column.field + ' - ' + types[i].toLowerCase();\n            var disp = column.columnName;\n            var val = types[i] !== 'Custom' && group.aggregates && key in group.aggregates ? group.aggregates[key] :\n                calculateAggregate(types[i], group.aggregates ? group : data, column, this.parent);\n            single[disp] = single[disp] || {};\n            single[disp][key] = val;\n            single[disp][types[i]] = !isNullOrUndefined(val) ? formatFn(val) : ' ';\n            if (group.field) {\n                single[disp].field = group.field;\n                single[disp].key = group.key;\n            }\n        }\n        helper.format = column.getFormatter();\n        column.setTemplate(helper);\n        return single;\n    };\n    SummaryModelGenerator.prototype.getCellType = function () {\n        return CellType.Summary;\n    };\n    return SummaryModelGenerator;\n}());\nexport { SummaryModelGenerator };\nvar GroupSummaryModelGenerator = /** @class */ (function (_super) {\n    __extends(GroupSummaryModelGenerator, _super);\n    function GroupSummaryModelGenerator() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    GroupSummaryModelGenerator.prototype.columnSelector = function (column) {\n        return column.groupFooterTemplate !== undefined;\n    };\n    GroupSummaryModelGenerator.prototype.getIndentByLevel = function (level) {\n        if (level === void 0) { level = this.parent.groupSettings.columns.length; }\n        return this.parent.groupSettings.columns.map(function (v, indx) { return indx <= level - 1 ? '' : 'e-indentcelltop'; });\n    };\n    GroupSummaryModelGenerator.prototype.getCellType = function () {\n        return CellType.GroupSummary;\n    };\n    return GroupSummaryModelGenerator;\n}(SummaryModelGenerator));\nexport { GroupSummaryModelGenerator };\nvar CaptionSummaryModelGenerator = /** @class */ (function (_super) {\n    __extends(CaptionSummaryModelGenerator, _super);\n    function CaptionSummaryModelGenerator() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CaptionSummaryModelGenerator.prototype.columnSelector = function (column) {\n        return column.groupCaptionTemplate !== undefined;\n    };\n    CaptionSummaryModelGenerator.prototype.getData = function () {\n        var initVal = { columns: [] };\n        return [_super.prototype.getData.call(this).reduce(function (prev, cur) {\n                prev.columns = prev.columns.concat(cur.columns);\n                return prev;\n            }, initVal)];\n    };\n    CaptionSummaryModelGenerator.prototype.isEmpty = function () {\n        return (this.getData()[0].columns || []).length === 0;\n    };\n    CaptionSummaryModelGenerator.prototype.getCellType = function () {\n        return CellType.CaptionSummary;\n    };\n    return CaptionSummaryModelGenerator;\n}(SummaryModelGenerator));\nexport { CaptionSummaryModelGenerator };\n"]},"metadata":{},"sourceType":"module"}