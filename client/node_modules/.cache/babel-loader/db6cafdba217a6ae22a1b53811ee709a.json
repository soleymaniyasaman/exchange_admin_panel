{"ast":null,"code":"import _slicedToArray from\"/Users/yasaman/Documents/moj_adminpanel/adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{Link,useParams}from\"react-router-dom\";import{Field,Formik,Form}from\"formik\";import{Grid,CircularProgress,Button,Checkbox,FormControlLabel,Divider}from'@material-ui/core';import{NotificationImportant}from'@material-ui/icons';import{useFetchApi}from'../../utils/hooks';import{IAM_APP,REPLY_TICKET,TICKET_DETAIL,USERS_LIST}from'../../utils/constants';import{timeToStr,UrlQuery}from'../../utils/utils';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MessageBox=function MessageBox(props){var _props$writer,_props$writer2,_props$writer2$items,_props$item2,_props$item3;var border=props.isAdmin?\"20px 0 20px 20px\":\"0 20px 20px 20px\";var direction=props.isAdmin?\"row\":\"row-reverse\";return/*#__PURE__*/_jsx(Grid,{container:true,spacing:3,direction:direction,justify:\"space-between\",className:\"px-3 pb-2\",children:/*#__PURE__*/_jsx(Grid,{item:true,md:5,children:/*#__PURE__*/_jsxs(\"div\",{className:\"border border-light px-3 py-2 text-white\",style:{borderRadius:border,backgroundColor:\"#181C1F\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:((_props$writer=props.writer)===null||_props$writer===void 0?void 0:_props$writer.items)?(_props$writer2=props.writer)===null||_props$writer2===void 0?void 0:(_props$writer2$items=_props$writer2.items)===null||_props$writer2$items===void 0?void 0:_props$writer2$items.map(function(item){var _props$item,_props$item$user;return item.id===((_props$item=props.item)===null||_props$item===void 0?void 0:(_props$item$user=_props$item.user)===null||_props$item$user===void 0?void 0:_props$item$user.id)?\"\".concat(item.credentials.first_name,\" \").concat(item.credentials.last_name):null;}):props.writer}),/*#__PURE__*/_jsx(\"span\",{children:timeToStr((_props$item2=props.item)===null||_props$item2===void 0?void 0:_props$item2.created_at,\"HH:mm  -   jYYYY/jMM/jDD\")})]}),/*#__PURE__*/_jsx(\"p\",{className:\"py-1 px-2\",children:(_props$item3=props.item)===null||_props$item3===void 0?void 0:_props$item3.body})]})})});};function TicketDetail(props){var _user$items,_ticket$category,_ticketsReply$items;var _useParams=useParams(),id=_useParams.id;var _useFetchApi=useFetchApi(undefined,[]),_useFetchApi2=_slicedToArray(_useFetchApi,2),_useFetchApi2$=_useFetchApi2[0],user=_useFetchApi2$.data,userLoading=_useFetchApi2$.isLoading,doFetch=_useFetchApi2[1];var _useFetchApi3=useFetchApi(undefined,{}),_useFetchApi4=_slicedToArray(_useFetchApi3,2),_useFetchApi4$=_useFetchApi4[0],ticket=_useFetchApi4$.data,ticketLoading=_useFetchApi4$.isLoading,getTicket=_useFetchApi4[1];var _useFetchApi5=useFetchApi(undefined,[]),_useFetchApi6=_slicedToArray(_useFetchApi5,2),_useFetchApi6$=_useFetchApi6[0],ticketsReply=_useFetchApi6$.data,ticketsReplyLoading=_useFetchApi6$.isLoading,getTicketsReply=_useFetchApi6[1];var _useFetchApi7=useFetchApi(undefined,{}),_useFetchApi8=_slicedToArray(_useFetchApi7,2),_useFetchApi8$=_useFetchApi8[0],newReply=_useFetchApi8$.data,newReplyLoading=_useFetchApi8$.isLoading,hasError=_useFetchApi8$.hasError,createReply=_useFetchApi8[1];React.useEffect(function(){if(id){doFetch(\"GET\",IAM_APP,UrlQuery(USERS_LIST));getTicket(\"GET\",IAM_APP,TICKET_DETAIL(id));getTicketsReply(\"GET\",IAM_APP,REPLY_TICKET(id));}},[]);React.useEffect(function(){if(!newReplyLoading&&Object.keys(newReply).length){getTicketsReply(\"GET\",IAM_APP,REPLY_TICKET(id));}},[newReplyLoading]);var handleSubmit=function handleSubmit(values){var payload={\"body\":values===null||values===void 0?void 0:values.body,\"media_id\":ticket===null||ticket===void 0?void 0:ticket.media_id};if(values.body!==''){createReply(\"POST\",IAM_APP,REPLY_TICKET(id),payload);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"content mt-5 p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex w-25\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/assets/drawer/Polygon.svg\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"font_title_name me-1\",children:[user===null||user===void 0?void 0:(_user$items=user.items)===null||_user$items===void 0?void 0:_user$items.map(function(item){var _ticket$user;return item.id===(ticket===null||ticket===void 0?void 0:(_ticket$user=ticket.user)===null||_ticket$user===void 0?void 0:_ticket$user.id)?\"\".concat(item.credentials.first_name,\" \").concat(item.credentials.last_name):null;}),\" / \",ticket===null||ticket===void 0?void 0:(_ticket$category=ticket.category)===null||_ticket$category===void 0?void 0:_ticket$category.title]})]}),/*#__PURE__*/_jsxs(Link,{className:\"text-decoration-none\",style:{color:\"#10D078\"},to:'/tickets',children:[\"\\u0628\\u0627\\u0632\\u06AF\\u0634\\u062A \\u0628\\u0647 \\u0644\\u06CC\\u0633\\u062A \\u062A\\u06CC\\u06A9\\u062A\\u200C\\u0647\\u0627 \",\"->\",\" \"]})]}),console.log(\"ticket data\",ticketsReply,ticket),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[!ticketLoading&&Boolean(Object.keys(ticket))&&/*#__PURE__*/_jsx(MessageBox,{item:ticket,writer:user,isAdmin:false}),!ticketsReplyLoading&&Boolean(ticketsReply===null||ticketsReply===void 0?void 0:(_ticketsReply$items=ticketsReply.items)===null||_ticketsReply$items===void 0?void 0:_ticketsReply$items.length)&&// ticketsReply.items.map( (item, index) => <MessageBox key={index} item={item} isAdmin={ item?.user?.id !== ticket?.user?.id } /> )\nticketsReply.items.map(function(item,index){return/*#__PURE__*/_jsx(MessageBox,{writer:item.id,item:item,isAdmin:true},index);})]}),/*#__PURE__*/_jsx(Divider,{className:\"my-3\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:/*#__PURE__*/_jsx(Formik,{initialValues:{body:''},enableReinitialize:true// validate={this.validate}\n,onSubmit:function onSubmit(values){return handleSubmit(values);},children:/*#__PURE__*/_jsx(Form,{children:/*#__PURE__*/_jsxs(\"div\",{style:{flexGrow:1},children:[/*#__PURE__*/_jsx(Grid,{container:true,spacing:3,justify:\"space-between\",className:\"p-3\",children:/*#__PURE__*/_jsx(Grid,{item:true,md:true,children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column w-100\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-end text-white fs-6 mb-2 ms-4\",style:{minWidth:\"90px\"},htmlFor:\"amount\",children:\"\\u0645\\u062A\\u0646 \\u067E\\u0627\\u0633\\u062E\"}),/*#__PURE__*/_jsx(Field,{as:\"textarea\",name:\"body\",placeholder:\"\",required:true,className:\"form-control bg_input input_text\"})]})})}),/*#__PURE__*/_jsx(Grid,{container:true,spacing:3,justify:\"space-between\",className:\"p-3\",children:/*#__PURE__*/_jsx(Grid,{item:true,md:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"my-4 ms-5 ps-2 d-flex justify-content-end\",children:/*#__PURE__*/_jsxs(Button,{disabled:newReplyLoading,variant:\"contained\",type:\"submit\",color:\"primary\",children:[\"\\u0627\\u0631\\u0633\\u0627\\u0644 \\u067E\\u0627\\u0633\\u062E\",newReplyLoading&&/*#__PURE__*/_jsx(CircularProgress,{size:24,className:\"position-absolute\"})]})})]})})})})]});}export default TicketDetail;","map":{"version":3,"sources":["/Users/yasaman/Documents/moj_adminpanel/adminpanel/src/components/tickets/ticketDetail.js"],"names":["React","Link","useParams","Field","Formik","Form","Grid","CircularProgress","Button","Checkbox","FormControlLabel","Divider","NotificationImportant","useFetchApi","IAM_APP","REPLY_TICKET","TICKET_DETAIL","USERS_LIST","timeToStr","UrlQuery","MessageBox","props","border","isAdmin","direction","borderRadius","backgroundColor","writer","items","map","item","id","user","credentials","first_name","last_name","created_at","body","TicketDetail","undefined","data","userLoading","isLoading","doFetch","ticket","ticketLoading","getTicket","ticketsReply","ticketsReplyLoading","getTicketsReply","newReply","newReplyLoading","hasError","createReply","useEffect","Object","keys","length","handleSubmit","values","payload","media_id","category","title","color","console","log","Boolean","index","flexGrow","minWidth"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Link, useParams } from \"react-router-dom\";\nimport { Field, Formik, Form } from \"formik\";\nimport { Grid, CircularProgress, Button, Checkbox, FormControlLabel, Divider } from '@material-ui/core';\nimport {NotificationImportant} from '@material-ui/icons';\nimport { useFetchApi } from '../../utils/hooks';\nimport { IAM_APP, REPLY_TICKET, TICKET_DETAIL , USERS_LIST} from '../../utils/constants';\nimport { timeToStr, UrlQuery } from '../../utils/utils';\n\n\nconst MessageBox = (props) => {\n    let border = props.isAdmin ? \"20px 0 20px 20px\" : \"0 20px 20px 20px\";\n    let direction = props.isAdmin ? \"row\" : \"row-reverse\"\n    return (\n        <Grid container spacing={3} direction={direction} justify=\"space-between\" className=\"px-3 pb-2\">\n            <Grid item md={5}>\n                <div className=\"border border-light px-3 py-2 text-white\" style={{borderRadius: border, backgroundColor: \"#181C1F\"}}>\n                    <div className=\"d-flex justify-content-between\">\n                        <span>{props.writer?.items?props.writer?.items?.map(item => item.id === props.item?.user?.id ? `${item.credentials.first_name} ${item.credentials.last_name}` : null):props.writer}</span>\n                        <span>{ timeToStr(props.item?.created_at, \"HH:mm  -   jYYYY/jMM/jDD\") }</span>\n                    </div>\n                    <p className=\"py-1 px-2\">\n                        {props.item?.body}\n                    </p>\n                </div>\n            </Grid>\n        </Grid>\n    )\n}\n\n\nfunction TicketDetail(props) {\n\n    const {id} = useParams();\n    \n    const [{ data: user, isLoading: userLoading },doFetch] = useFetchApi(undefined, [])\n    const [{ data: ticket, isLoading: ticketLoading }, getTicket] = useFetchApi(undefined, {})\n    const [{ data: ticketsReply, isLoading: ticketsReplyLoading }, getTicketsReply] = useFetchApi(undefined, [])\n    const [{ data: newReply, isLoading: newReplyLoading, hasError }, createReply] = useFetchApi(undefined, {})\n\n    React.useEffect( () => {\n        if (id){\n            doFetch(\"GET\", IAM_APP, UrlQuery(USERS_LIST))\n            getTicket(\"GET\", IAM_APP, TICKET_DETAIL(id))\n            getTicketsReply(\"GET\", IAM_APP, REPLY_TICKET(id))\n        }\n    }, [])\n\n    React.useEffect( () => {\n        if (!newReplyLoading && Object.keys(newReply).length){\n            getTicketsReply(\"GET\", IAM_APP, REPLY_TICKET(id))\n        }\n    }, [newReplyLoading])\n\n    const handleSubmit = (values) => {\n        const payload = {\n            \"body\": values?.body,\n            \"media_id\": ticket?.media_id\n          \n        }\n        if (values.body !== ''){\n            createReply(\"POST\", IAM_APP, REPLY_TICKET(id), payload)\n        }\n    }\n\n    return (\n        <div className=\"content mt-5 p-4\">\n            <div className=\"d-flex justify-content-between\">\n                <div className=\"d-flex w-25\">\n                    <img src=\"/assets/drawer/Polygon.svg\" />\n                    <p className=\"font_title_name me-1\">{user?.items?.map(item => item.id === ticket?.user?.id ? `${item.credentials.first_name} ${item.credentials.last_name}` : null)} / {ticket?.category?.title}</p>\n                </div>\n                <Link className=\"text-decoration-none\" style={{color: \"#10D078\"}} to={'/tickets'} >بازگشت به لیست تیکت‌ها {`->`} </Link>\n            </div>\n            {console.log(\"ticket data\",ticketsReply,ticket)}\n            <div className=\"mt-4\">\n                { !ticketLoading && Boolean(Object.keys(ticket)) && <MessageBox item={ticket} writer={user} isAdmin={false}/>}\n                {\n                    !ticketsReplyLoading && Boolean(ticketsReply?.items?.length) &&\n                    // ticketsReply.items.map( (item, index) => <MessageBox key={index} item={item} isAdmin={ item?.user?.id !== ticket?.user?.id } /> )\n                        ticketsReply.items.map( (item, index) => <MessageBox key={index} writer={item.id} item={item} isAdmin={ true} /> )\n                }\n            </div>\n            <Divider className=\"my-3\" />\n            <div className=\"mt-4\">\n                <Formik\n                    initialValues={{ body: '' }}\n                    enableReinitialize={true}\n                    // validate={this.validate}\n                    onSubmit={ values => handleSubmit(values) }\n                >\n                    <Form>\n                        <div style={{flexGrow: 1}} >\n                            <Grid container spacing={3} justify=\"space-between\" className=\"p-3\">\n                                <Grid item md>\n                                    <div className=\"d-flex flex-column w-100\">\n                                        <label className=\"text-end text-white fs-6 mb-2 ms-4\" style={{minWidth: \"90px\"}} htmlFor=\"amount\">متن پاسخ</label>\n                                        <Field\n                                            as=\"textarea\"\n                                            name=\"body\"\n                                            placeholder=\"\"\n                                            required\n                                            className=\"form-control bg_input input_text\"\n                                        />\n                                    </div>\n                                </Grid>\n                            </Grid>\n                            <Grid container spacing={3} justify=\"space-between\" className=\"p-3\">\n                                <Grid item md>\n                                    {/* <div className=\"d-flex w-100\">\n                                        <input\n                                            accept=\"image/*\"\n                                            className=\"d-none\"\n                                            id=\"contained-button-file\"\n                                            multiple\n                                            type=\"file\"\n                                        />\n                                        <label htmlFor=\"contained-button-file\">\n                                            <Button variant=\"contained\" color=\"secondary\" component=\"span\">\n                                                انتخاب فایل ضمیمه\n                                            </Button>\n                                        </label>\n                                    </div>\n                                    <div className=\"mt-2 text-white\" style={{fontSize: \"0.8rem\"}} > <span><NotificationImportant size=\"small\" className=\"text-danger\" /></span> فرمت های مجاز فایل ضمیمه شامل jpg , png , zip, rar, pdf می باشند</div> */}\n                                </Grid>\n                            </Grid>\n                            {/* { Boolean(hasError) && <p className=\"text-danger\">{hasError}</p> } */}\n                            <div className=\"my-4 ms-5 ps-2 d-flex justify-content-end\">\n                                <Button disabled={newReplyLoading} variant=\"contained\" type=\"submit\" color=\"primary\" >\n                                    ارسال پاسخ\n                                    { newReplyLoading && <CircularProgress size={24} className=\"position-absolute\" />}\n                                </Button>\n                            </div>\n                        </div>\n                    </Form>\n                </Formik>\n            </div>\n        </div>\n    )\n}\n\nexport default TicketDetail\n"]},"metadata":{},"sourceType":"module"}