{"ast":null,"code":"import { isNullOrUndefined, closest, extend } from '@syncfusion/ej2-base';\nimport { InlineEditRender } from './inline-edit-renderer';\nimport { BatchEditRender } from './batch-edit-renderer';\nimport { DialogEditRender } from './dialog-edit-renderer';\nimport { attributes, classList, select } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { getComplexFieldID, getObject, appendChildren, parentsUntil, extendObjWithFn } from '../base/util';\nimport * as events from '../base/constant';\nimport * as literals from '../base/string-literals';\n/**\n * Edit render module is used to render grid edit row.\n *\n * @hidden\n */\n\nvar EditRender =\n/** @class */\nfunction () {\n  /**\n   * Constructor for render module\n   *\n   * @param {IGrid} parent -specifies the IGrid\n   * @param {ServiceLocator} serviceLocator - specifies the serviceLocator\n   */\n  function EditRender(parent, serviceLocator) {\n    //Internal variables\n    this.editType = {\n      'Inline': InlineEditRender,\n      'Normal': InlineEditRender,\n      'Batch': BatchEditRender,\n      'Dialog': DialogEditRender\n    };\n    this.parent = parent;\n    this.serviceLocator = serviceLocator;\n    this.renderer = new this.editType[this.parent.editSettings.mode](parent, serviceLocator);\n    this.focus = serviceLocator.getService('focus');\n  }\n\n  EditRender.prototype.addNew = function (args) {\n    this.renderer.addNew(this.getEditElements(args), args);\n    this.convertWidget(args);\n  };\n\n  EditRender.prototype.update = function (args) {\n    this.renderer.update(this.getEditElements(args), args);\n    var isCustomFormValidation = args.isCustomFormValidation;\n\n    if (!isCustomFormValidation) {\n      this.parent.notify(events.beforeStartEdit, args);\n      this.convertWidget(args);\n    }\n  };\n\n  EditRender.prototype.convertWidget = function (args) {\n    var gObj = this.parent;\n    var isFocused;\n    var cell;\n    var value;\n    var fForm;\n    var frForm;\n    var frzCols = gObj.isFrozenGrid();\n    var index = gObj.getFrozenMode() === 'Right' && gObj.editSettings.mode === 'Normal' ? 1 : 0;\n    var form = gObj.editSettings.mode === 'Dialog' ? select('#' + gObj.element.id + '_dialogEdit_wrapper .e-gridform', document) : gObj.element.getElementsByClassName('e-gridform')[index];\n    var isVirtualFrozen = frzCols && this.parent.enableColumnVirtualization && args.isScroll;\n\n    if (frzCols && gObj.editSettings.mode === 'Normal') {\n      var rowIndex = parseInt(args.row.getAttribute(literals.ariaRowIndex), 10);\n\n      if (gObj.frozenRows && (args.requestType === 'add' && gObj.editSettings.newRowPosition === 'Top' || rowIndex < gObj.frozenRows)) {\n        fForm = gObj.element.querySelector('.' + literals.movableHeader).querySelector('.e-gridform');\n\n        if (this.parent.getFrozenMode() === literals.leftRight) {\n          frForm = args.frozenRightForm;\n        }\n      } else {\n        fForm = gObj.element.querySelector('.' + literals.movableContent).querySelector('.e-gridform');\n\n        if (this.parent.getFrozenMode() === literals.leftRight) {\n          frForm = args.frozenRightForm;\n        }\n      }\n    }\n\n    var cols = gObj.editSettings.mode !== 'Batch' ? gObj.getColumns() : [gObj.getColumnByField(args.columnName)];\n\n    for (var _i = 0, cols_1 = cols; _i < cols_1.length; _i++) {\n      var col = cols_1[_i];\n\n      if (isVirtualFrozen && col.getFreezeTableName() !== 'movable') {\n        continue;\n      }\n\n      if (this.parent.editSettings.template && !isNullOrUndefined(col.field)) {\n        var cellArgs = extend({}, args);\n        cellArgs.element = form.querySelector('[name=' + getComplexFieldID(col.field) + ']');\n\n        if (isNullOrUndefined(cellArgs.element) && frzCols) {\n          cellArgs.element = fForm.querySelector('[name=' + getComplexFieldID(col.field) + ']');\n        }\n\n        if (typeof col.edit.write === 'string') {\n          getObject(col.edit.write, window)(cellArgs);\n        } else {\n          col.edit.write(cellArgs);\n        }\n\n        continue;\n      }\n\n      if (this.parent.editModule.checkColumnIsGrouped(col) || col.commands) {\n        continue;\n      } // eslint-disable-next-line\n\n\n      value = col.valueAccessor(col.field, args.rowData, col);\n\n      if (col.getFreezeTableName() === 'movable' && gObj.editSettings.mode === 'Normal') {\n        cell = fForm.querySelector('[e-mappinguid=' + col.uid + ']');\n      } else if (frForm && col.getFreezeTableName() === literals.frozenRight && gObj.editSettings.mode === 'Normal') {\n        cell = frForm.querySelector('[e-mappinguid=' + col.uid + ']');\n      } else {\n        cell = form.querySelector('[e-mappinguid=' + col.uid + ']');\n      }\n\n      var temp = col.edit.write;\n\n      if (!isNullOrUndefined(cell)) {\n        if (typeof temp === 'string') {\n          temp = getObject(temp, window);\n          temp({\n            rowData: args.rowData,\n            element: cell,\n            column: col,\n            requestType: args.requestType,\n            row: args.row,\n            foreignKeyData: col.isForeignColumn() && getObject(col.field, args.foreignKeyData)\n          });\n        } else {\n          col.edit.write({\n            rowData: args.rowData,\n            element: cell,\n            column: col,\n            requestType: args.requestType,\n            row: args.row,\n            foreignKeyData: col.isForeignColumn() && getObject(col.field, args.foreignKeyData)\n          });\n        }\n\n        if (!isFocused && !cell.getAttribute('disabled') && !parentsUntil(cell, 'e-checkbox-disabled')) {\n          this.focusElement(cell, args.type);\n          isFocused = true;\n        }\n      }\n    }\n\n    if (frzCols && !this.parent.allowTextWrap && (args.requestType === 'add' || args.requestType === 'beginEdit') && this.parent.editSettings.mode !== 'Dialog' && !isNullOrUndefined(form) && !isNullOrUndefined(fForm)) {\n      var mTdElement = fForm.querySelector('tr').children[0];\n      var fTdElement = form.querySelector('tr').children[0];\n\n      if (fTdElement.offsetHeight > mTdElement.offsetHeight) {\n        mTdElement.style.height = fTdElement.offsetHeight + 'px';\n\n        if (frForm) {\n          var frTdElement = fForm.querySelector('tr').children[0];\n          frTdElement.style.height = fTdElement.offsetHeight + 'px';\n        }\n      } else {\n        fTdElement.style.height = mTdElement.offsetHeight + 'px';\n\n        if (frForm) {\n          var frTdElement = fForm.querySelector('tr').children[0];\n          frTdElement.style.height = mTdElement.offsetHeight + 'px';\n        }\n      }\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  EditRender.prototype.focusElement = function (elem, type) {\n    var chkBox = this.parent.element.querySelector('.e-edit-checkselect');\n\n    if (!isNullOrUndefined(chkBox)) {\n      chkBox.nextElementSibling.classList.add('e-focus');\n    }\n\n    if (this.parent.editSettings.mode === 'Batch') {\n      this.focus.onClick({\n        target: closest(elem, 'td')\n      }, true);\n    } else {\n      var isFocus = this.parent.enableVirtualization && this.parent.editSettings.mode === 'Normal' ? false : true;\n\n      if (isFocus || this.parent.enableVirtualization && this.parent.editSettings.newRowPosition === 'Bottom' && parentsUntil(elem, literals.addedRow)) {\n        elem.focus();\n      } else {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        elem.focus({\n          preventScroll: true\n        });\n      }\n    }\n\n    if (elem.classList.contains('e-defaultcell')) {\n      elem.setSelectionRange(elem.value.length, elem.value.length);\n    }\n  };\n\n  EditRender.prototype.getEditElements = function (args) {\n    var gObj = this.parent;\n    var elements = {};\n    var cols = gObj.editSettings.mode !== 'Batch' ? gObj.getColumns() : [gObj.getColumnByField(args.columnName)];\n\n    if (args.isCustomFormValidation) {\n      cols = this.parent.columnModel;\n    }\n\n    if (this.parent.editSettings.template) {\n      return {};\n    }\n\n    var isVirtualFrozen = gObj.isFrozenGrid() && gObj.enableColumnVirtualization && args.isScroll;\n\n    for (var i = 0, len = cols.length; i < len; i++) {\n      var col = cols[i];\n\n      if (this.parent.editModule.checkColumnIsGrouped(col) || isVirtualFrozen && cols[i].getFreezeTableName() !== 'movable' || args.isCustomFormValidation && (col.commands || col.commandsTemplate || !col.field)) {\n        continue;\n      }\n\n      if (col.commands || col.commandsTemplate) {\n        var cellRendererFact = this.serviceLocator.getService('cellRendererFactory');\n        var model = new RowModelGenerator(this.parent);\n        var cellRenderer = cellRendererFact.getCellRenderer(CellType.CommandColumn);\n        var cells = model.generateRows(args.rowData)[0].cells;\n        var cell = cells.filter(function (cell) {\n          return cell.rowID;\n        });\n        var td = cellRenderer.render(cell[i], args.rowData, {\n          'index': args.row ? args.row.getAttribute(literals.ariaRowIndex) : 0\n        }, this.parent.enableVirtualization);\n        var div = td.firstElementChild;\n        div.setAttribute('textAlign', td.getAttribute('textAlign'));\n        elements[col.uid] = div;\n        continue;\n      }\n\n      var value = col.valueAccessor(col.field, args.rowData, col);\n      var tArgs = {\n        column: col,\n        value: value,\n        type: args.requestType,\n        data: args.rowData\n      };\n      var temp = col.edit.create;\n      var input = void 0;\n\n      if (col.editTemplate) {\n        input = this.parent.createElement('span', {\n          attrs: {\n            'e-mappinguid': col.uid\n          }\n        });\n        var tempID = this.parent.element.id + col.uid + 'editTemplate';\n        var tempData = extendObjWithFn({}, args.rowData, {\n          column: col\n        });\n        var isReactCompiler = this.parent.isReact && typeof col.editTemplate !== 'string';\n\n        if (isReactCompiler) {\n          col.getEditTemplate()(extend({\n            'index': args.rowIndex\n          }, tempData), this.parent, 'editTemplate', tempID, null, null, input);\n          this.parent.renderTemplates();\n        } else {\n          var template = col.getEditTemplate()(extend({\n            'index': args.rowIndex\n          }, tempData), this.parent, 'editTemplate', tempID);\n          appendChildren(input, template);\n        }\n      } else {\n        if (typeof temp === 'string') {\n          temp = getObject(temp, window);\n          input = temp(tArgs);\n        } else {\n          input = col.edit.create(tArgs);\n        }\n\n        if (typeof input === 'string') {\n          var div = this.parent.createElement('div');\n          div.innerHTML = input;\n          input = div.firstChild;\n        }\n\n        var isInput = input.tagName !== 'input' && input.querySelectorAll('input').length;\n        var complexFieldName = getComplexFieldID(col.field);\n        attributes(isInput ? input.querySelector('input') : input, {\n          name: complexFieldName,\n          'e-mappinguid': col.uid,\n          id: gObj.element.id + complexFieldName\n        });\n        classList(input, ['e-input', 'e-field'], []);\n\n        if (col.textAlign === 'Right') {\n          input.classList.add('e-ralign');\n        }\n\n        if ((col.isPrimaryKey || col.isIdentity) && args.requestType === 'beginEdit' || col.isIdentity && args.requestType === 'add') {\n          // already disabled in cell plugins\n          input.setAttribute('disabled', '');\n        }\n      }\n\n      elements[col.uid] = input;\n    }\n\n    return elements;\n  };\n\n  EditRender.prototype.destroy = function () {\n    this.renderer.removeEventListener();\n  };\n\n  return EditRender;\n}();\n\nexport { EditRender };","map":{"version":3,"sources":["/Users/yasaman/Documents/moj_adminpanel/adminpanel/node_modules/@syncfusion/ej2-grids/src/grid/renderer/edit-renderer.js"],"names":["isNullOrUndefined","closest","extend","InlineEditRender","BatchEditRender","DialogEditRender","attributes","classList","select","CellType","RowModelGenerator","getComplexFieldID","getObject","appendChildren","parentsUntil","extendObjWithFn","events","literals","EditRender","parent","serviceLocator","editType","renderer","editSettings","mode","focus","getService","prototype","addNew","args","getEditElements","convertWidget","update","isCustomFormValidation","notify","beforeStartEdit","gObj","isFocused","cell","value","fForm","frForm","frzCols","isFrozenGrid","index","getFrozenMode","form","element","id","document","getElementsByClassName","isVirtualFrozen","enableColumnVirtualization","isScroll","rowIndex","parseInt","row","getAttribute","ariaRowIndex","frozenRows","requestType","newRowPosition","querySelector","movableHeader","leftRight","frozenRightForm","movableContent","cols","getColumns","getColumnByField","columnName","_i","cols_1","length","col","getFreezeTableName","template","field","cellArgs","edit","write","window","editModule","checkColumnIsGrouped","commands","valueAccessor","rowData","uid","frozenRight","temp","column","foreignKeyData","isForeignColumn","focusElement","type","allowTextWrap","mTdElement","children","fTdElement","offsetHeight","style","height","frTdElement","elem","chkBox","nextElementSibling","add","onClick","target","isFocus","enableVirtualization","addedRow","preventScroll","contains","setSelectionRange","elements","columnModel","i","len","commandsTemplate","cellRendererFact","model","cellRenderer","getCellRenderer","CommandColumn","cells","generateRows","filter","rowID","td","render","div","firstElementChild","setAttribute","tArgs","data","create","input","editTemplate","createElement","attrs","tempID","tempData","isReactCompiler","isReact","getEditTemplate","renderTemplates","innerHTML","firstChild","isInput","tagName","querySelectorAll","complexFieldName","name","textAlign","isPrimaryKey","isIdentity","destroy","removeEventListener"],"mappings":"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","sourcesContent":["import { isNullOrUndefined, closest, extend } from '@syncfusion/ej2-base';\nimport { InlineEditRender } from './inline-edit-renderer';\nimport { BatchEditRender } from './batch-edit-renderer';\nimport { DialogEditRender } from './dialog-edit-renderer';\nimport { attributes, classList, select } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { getComplexFieldID, getObject, appendChildren, parentsUntil, extendObjWithFn } from '../base/util';\nimport * as events from '../base/constant';\nimport * as literals from '../base/string-literals';\n/**\n * Edit render module is used to render grid edit row.\n *\n * @hidden\n */\nvar EditRender = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     *\n     * @param {IGrid} parent -specifies the IGrid\n     * @param {ServiceLocator} serviceLocator - specifies the serviceLocator\n     */\n    function EditRender(parent, serviceLocator) {\n        //Internal variables\n        this.editType = {\n            'Inline': InlineEditRender,\n            'Normal': InlineEditRender, 'Batch': BatchEditRender, 'Dialog': DialogEditRender\n        };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.renderer = new this.editType[this.parent.editSettings.mode](parent, serviceLocator);\n        this.focus = serviceLocator.getService('focus');\n    }\n    EditRender.prototype.addNew = function (args) {\n        this.renderer.addNew(this.getEditElements(args), args);\n        this.convertWidget(args);\n    };\n    EditRender.prototype.update = function (args) {\n        this.renderer.update(this.getEditElements(args), args);\n        var isCustomFormValidation = args.isCustomFormValidation;\n        if (!isCustomFormValidation) {\n            this.parent.notify(events.beforeStartEdit, args);\n            this.convertWidget(args);\n        }\n    };\n    EditRender.prototype.convertWidget = function (args) {\n        var gObj = this.parent;\n        var isFocused;\n        var cell;\n        var value;\n        var fForm;\n        var frForm;\n        var frzCols = gObj.isFrozenGrid();\n        var index = gObj.getFrozenMode() === 'Right' && gObj.editSettings.mode === 'Normal' ? 1 : 0;\n        var form = gObj.editSettings.mode === 'Dialog' ?\n            select('#' + gObj.element.id + '_dialogEdit_wrapper .e-gridform', document) :\n            gObj.element.getElementsByClassName('e-gridform')[index];\n        var isVirtualFrozen = frzCols && this.parent.enableColumnVirtualization && args.isScroll;\n        if (frzCols && gObj.editSettings.mode === 'Normal') {\n            var rowIndex = parseInt(args.row.getAttribute(literals.ariaRowIndex), 10);\n            if (gObj.frozenRows && ((args.requestType === 'add' && gObj.editSettings.newRowPosition === 'Top')\n                || rowIndex < gObj.frozenRows)) {\n                fForm = gObj.element.querySelector('.' + literals.movableHeader).querySelector('.e-gridform');\n                if (this.parent.getFrozenMode() === literals.leftRight) {\n                    frForm = args.frozenRightForm;\n                }\n            }\n            else {\n                fForm = gObj.element.querySelector('.' + literals.movableContent).querySelector('.e-gridform');\n                if (this.parent.getFrozenMode() === literals.leftRight) {\n                    frForm = args.frozenRightForm;\n                }\n            }\n        }\n        var cols = gObj.editSettings.mode !== 'Batch' ? gObj.getColumns() : [gObj.getColumnByField(args.columnName)];\n        for (var _i = 0, cols_1 = cols; _i < cols_1.length; _i++) {\n            var col = cols_1[_i];\n            if (isVirtualFrozen && col.getFreezeTableName() !== 'movable') {\n                continue;\n            }\n            if (this.parent.editSettings.template && !isNullOrUndefined(col.field)) {\n                var cellArgs = extend({}, args);\n                cellArgs.element = form.querySelector('[name=' + getComplexFieldID(col.field) + ']');\n                if (isNullOrUndefined(cellArgs.element) && frzCols) {\n                    cellArgs.element = fForm.querySelector('[name=' + getComplexFieldID(col.field) + ']');\n                }\n                if (typeof col.edit.write === 'string') {\n                    getObject(col.edit.write, window)(cellArgs);\n                }\n                else {\n                    col.edit.write(cellArgs);\n                }\n                continue;\n            }\n            if (this.parent.editModule.checkColumnIsGrouped(col) || col.commands) {\n                continue;\n            }\n            // eslint-disable-next-line\n            value = (col.valueAccessor(col.field, args.rowData, col));\n            if (col.getFreezeTableName() === 'movable' && gObj.editSettings.mode === 'Normal') {\n                cell = fForm.querySelector('[e-mappinguid=' + col.uid + ']');\n            }\n            else if (frForm && col.getFreezeTableName() === literals.frozenRight && gObj.editSettings.mode === 'Normal') {\n                cell = frForm.querySelector('[e-mappinguid=' + col.uid + ']');\n            }\n            else {\n                cell = form.querySelector('[e-mappinguid=' + col.uid + ']');\n            }\n            var temp = col.edit.write;\n            if (!isNullOrUndefined(cell)) {\n                if (typeof temp === 'string') {\n                    temp = getObject(temp, window);\n                    temp({\n                        rowData: args.rowData, element: cell, column: col, requestType: args.requestType, row: args.row,\n                        foreignKeyData: col.isForeignColumn() && getObject(col.field, args.foreignKeyData)\n                    });\n                }\n                else {\n                    col.edit.write({\n                        rowData: args.rowData, element: cell, column: col, requestType: args.requestType, row: args.row,\n                        foreignKeyData: col.isForeignColumn() && getObject(col.field, args.foreignKeyData)\n                    });\n                }\n                if (!isFocused && !cell.getAttribute('disabled') && !parentsUntil(cell, 'e-checkbox-disabled')) {\n                    this.focusElement(cell, args.type);\n                    isFocused = true;\n                }\n            }\n        }\n        if (frzCols && !this.parent.allowTextWrap && ((args.requestType === 'add') || args.requestType === 'beginEdit')\n            && this.parent.editSettings.mode !== 'Dialog' && !isNullOrUndefined(form) && !isNullOrUndefined(fForm)) {\n            var mTdElement = (fForm.querySelector('tr').children[0]);\n            var fTdElement = (form.querySelector('tr').children[0]);\n            if (fTdElement.offsetHeight > mTdElement.offsetHeight) {\n                mTdElement.style.height = fTdElement.offsetHeight + 'px';\n                if (frForm) {\n                    var frTdElement = fForm.querySelector('tr').children[0];\n                    frTdElement.style.height = fTdElement.offsetHeight + 'px';\n                }\n            }\n            else {\n                fTdElement.style.height = mTdElement.offsetHeight + 'px';\n                if (frForm) {\n                    var frTdElement = fForm.querySelector('tr').children[0];\n                    frTdElement.style.height = mTdElement.offsetHeight + 'px';\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    EditRender.prototype.focusElement = function (elem, type) {\n        var chkBox = this.parent.element.querySelector('.e-edit-checkselect');\n        if (!isNullOrUndefined(chkBox)) {\n            chkBox.nextElementSibling.classList.add('e-focus');\n        }\n        if (this.parent.editSettings.mode === 'Batch') {\n            this.focus.onClick({ target: closest(elem, 'td') }, true);\n        }\n        else {\n            var isFocus = this.parent.enableVirtualization && this.parent.editSettings.mode === 'Normal' ? false : true;\n            if (isFocus || (this.parent.enableVirtualization && this.parent.editSettings.newRowPosition === 'Bottom'\n                && parentsUntil(elem, literals.addedRow))) {\n                elem.focus();\n            }\n            else {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                elem.focus({ preventScroll: true });\n            }\n        }\n        if (elem.classList.contains('e-defaultcell')) {\n            elem.setSelectionRange(elem.value.length, elem.value.length);\n        }\n    };\n    EditRender.prototype.getEditElements = function (args) {\n        var gObj = this.parent;\n        var elements = {};\n        var cols = gObj.editSettings.mode !== 'Batch' ? gObj.getColumns() : [gObj.getColumnByField(args.columnName)];\n        if (args.isCustomFormValidation) {\n            cols = this.parent.columnModel;\n        }\n        if (this.parent.editSettings.template) {\n            return {};\n        }\n        var isVirtualFrozen = gObj.isFrozenGrid() && gObj.enableColumnVirtualization && args.isScroll;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            var col = cols[i];\n            if (this.parent.editModule.checkColumnIsGrouped(col) || (isVirtualFrozen && cols[i].getFreezeTableName() !== 'movable')\n                || (args.isCustomFormValidation && (col.commands || col.commandsTemplate || !col.field))) {\n                continue;\n            }\n            if (col.commands || col.commandsTemplate) {\n                var cellRendererFact = this.serviceLocator.getService('cellRendererFactory');\n                var model = new RowModelGenerator(this.parent);\n                var cellRenderer = cellRendererFact.getCellRenderer(CellType.CommandColumn);\n                var cells = model.generateRows(args.rowData)[0].cells;\n                var cell = cells.filter(function (cell) { return cell.rowID; });\n                var td = cellRenderer.render(cell[i], args.rowData, { 'index': args.row ? args.row.getAttribute(literals.ariaRowIndex) : 0 }, this.parent.enableVirtualization);\n                var div = td.firstElementChild;\n                div.setAttribute('textAlign', td.getAttribute('textAlign'));\n                elements[col.uid] = div;\n                continue;\n            }\n            var value = (col.valueAccessor(col.field, args.rowData, col));\n            var tArgs = { column: col, value: value, type: args.requestType, data: args.rowData };\n            var temp = col.edit.create;\n            var input = void 0;\n            if (col.editTemplate) {\n                input = this.parent.createElement('span', { attrs: { 'e-mappinguid': col.uid } });\n                var tempID = this.parent.element.id + col.uid + 'editTemplate';\n                var tempData = extendObjWithFn({}, args.rowData, { column: col });\n                var isReactCompiler = this.parent.isReact && typeof (col.editTemplate) !== 'string';\n                if (isReactCompiler) {\n                    col.getEditTemplate()(extend({ 'index': args.rowIndex }, tempData), this.parent, 'editTemplate', tempID, null, null, input);\n                    this.parent.renderTemplates();\n                }\n                else {\n                    var template = col.getEditTemplate()(extend({ 'index': args.rowIndex }, tempData), this.parent, 'editTemplate', tempID);\n                    appendChildren(input, template);\n                }\n            }\n            else {\n                if (typeof temp === 'string') {\n                    temp = getObject(temp, window);\n                    input = temp(tArgs);\n                }\n                else {\n                    input = col.edit.create(tArgs);\n                }\n                if (typeof input === 'string') {\n                    var div = this.parent.createElement('div');\n                    div.innerHTML = input;\n                    input = div.firstChild;\n                }\n                var isInput = input.tagName !== 'input' && input.querySelectorAll('input').length;\n                var complexFieldName = getComplexFieldID(col.field);\n                attributes(isInput ? input.querySelector('input') : input, {\n                    name: complexFieldName, 'e-mappinguid': col.uid,\n                    id: gObj.element.id + complexFieldName\n                });\n                classList(input, ['e-input', 'e-field'], []);\n                if (col.textAlign === 'Right') {\n                    input.classList.add('e-ralign');\n                }\n                if ((col.isPrimaryKey || col.isIdentity) && args.requestType === 'beginEdit' ||\n                    (col.isIdentity && args.requestType === 'add')) { // already disabled in cell plugins\n                    input.setAttribute('disabled', '');\n                }\n            }\n            elements[col.uid] = input;\n        }\n        return elements;\n    };\n    EditRender.prototype.destroy = function () {\n        this.renderer.removeEventListener();\n    };\n    return EditRender;\n}());\nexport { EditRender };\n"]},"metadata":{},"sourceType":"module"}