{"ast":null,"code":"import { select, isNullOrUndefined, Browser, addClass, removeClass, EventHandler, closest, isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport { RenderType } from '../base/enum';\nimport * as events from '../base/constant';\nimport { pageYOffset, hasClass, isIDevice } from '../base/util';\nimport { BaseQuickToolbar } from './base-quick-toolbar';\nimport { PopupRenderer } from '../renderer/popup-renderer';\nimport { CLS_INLINE_POP, CLS_INLINE } from '../base/classes';\n/**\n * `Quick toolbar` module is used to handle Quick toolbar actions.\n */\n\nvar QuickToolbar =\n/** @class */\nfunction () {\n  function QuickToolbar(parent, locator) {\n    this.parent = parent;\n    this.locator = locator;\n    this.renderFactory = this.locator.getService('rendererFactory');\n    this.renderFactory.addRenderer(RenderType.Popup, new PopupRenderer(this.parent));\n    this.addEventListener();\n  }\n\n  QuickToolbar.prototype.formatItems = function (items) {\n    var formattedItems = [];\n    items.forEach(function (item) {\n      if (typeof item === 'string') {\n        switch (item.toLocaleLowerCase()) {\n          case 'open':\n            formattedItems.push('openLink');\n            break;\n\n          case 'edit':\n            formattedItems.push('editLink');\n            break;\n\n          case 'unlink':\n            formattedItems.push('removeLink');\n            break;\n\n          default:\n            formattedItems.push(item);\n            break;\n        }\n      } else {\n        formattedItems.push(item);\n      }\n    });\n    return formattedItems;\n  };\n\n  QuickToolbar.prototype.getQTBarOptions = function (popType, mode, items, type) {\n    return {\n      popupType: popType,\n      toolbarItems: items,\n      mode: mode,\n      renderType: type\n    };\n  };\n  /**\n   * createQTBar method\n   *\n   * @param {string} popupType - specifies the string value\n   * @param {string} mode - specifies the string value.\n   * @param {string} items - specifies the string.\n   * @param {RenderType} type - specifies the render type.\n   * @returns {BaseQuickToolbar} - specifies the quick toolbar\n   * @hidden\n    */\n\n\n  QuickToolbar.prototype.createQTBar = function (popupType, mode, items, type) {\n    if (items.length < 1) {\n      return null;\n    }\n\n    var qTBar = new BaseQuickToolbar(this.parent, this.locator);\n    qTBar.render(this.getQTBarOptions(popupType, mode, this.formatItems(items), type));\n    return qTBar;\n  };\n\n  QuickToolbar.prototype.initializeQuickToolbars = function () {\n    this.parent.quickToolbarModule = this;\n    this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n\n    if (this.parent.inlineMode.enable && this.parent.inlineMode.onSelection && isIDevice()) {\n      EventHandler.add(this.contentRenderer.getDocument(), 'selectionchange', this.selectionChangeHandler, this);\n    }\n  }; // eslint-disable-next-line\n\n\n  QuickToolbar.prototype.onMouseDown = function (e) {\n    this.parent.isBlur = false;\n    this.parent.isRTE = true;\n  };\n\n  QuickToolbar.prototype.keyUpQT = function (e) {\n    if (e.which == 27) {\n      this.hideQuickToolbars();\n    }\n  };\n\n  QuickToolbar.prototype.renderQuickToolbars = function () {\n    if (this.linkQTBar || this.imageQTBar || this.textQTBar || this.tableQTBar) {\n      return;\n    }\n\n    this.linkQTBar = this.createQTBar('Link', 'Scrollable', this.parent.quickToolbarSettings.link, RenderType.LinkToolbar);\n    this.renderFactory.addRenderer(RenderType.LinkToolbar, this.linkQTBar);\n    this.textQTBar = this.createQTBar('Text', 'Scrollable', this.parent.quickToolbarSettings.text, RenderType.TextToolbar);\n    this.renderFactory.addRenderer(RenderType.TextToolbar, this.textQTBar);\n    this.imageQTBar = this.createQTBar('Image', 'MultiRow', this.parent.quickToolbarSettings.image, RenderType.ImageToolbar);\n    this.renderFactory.addRenderer(RenderType.ImageToolbar, this.imageQTBar);\n    this.tableQTBar = this.createQTBar('Table', 'MultiRow', this.parent.quickToolbarSettings.table, RenderType.TableToolbar);\n    this.renderFactory.addRenderer(RenderType.TableToolbar, this.tableQTBar);\n\n    if (this.linkQTBar) {\n      EventHandler.add(this.linkQTBar.element, 'mousedown', this.onMouseDown, this);\n      EventHandler.add(this.linkQTBar.element, 'keyup', this.keyUpQT, this);\n    }\n\n    if (this.imageQTBar) {\n      EventHandler.add(this.imageQTBar.element, 'mousedown', this.onMouseDown, this);\n      EventHandler.add(this.imageQTBar.element, 'keyup', this.keyUpQT, this);\n    }\n\n    if (this.textQTBar) {\n      EventHandler.add(this.textQTBar.element, 'mousedown', this.onMouseDown, this);\n      EventHandler.add(this.textQTBar.element, 'keyup', this.keyUpQT, this);\n    }\n\n    if (this.tableQTBar) {\n      EventHandler.add(this.tableQTBar.element, 'mousedown', this.onMouseDown, this);\n      EventHandler.add(this.tableQTBar.element, 'keyup', this.keyUpQT, this);\n    }\n  };\n\n  QuickToolbar.prototype.renderInlineQuickToolbar = function () {\n    if (this.parent.inlineMode.enable && (!Browser.isDevice || isIDevice())) {\n      addClass([this.parent.element], [CLS_INLINE]);\n      this.inlineQTBar = this.createQTBar('Inline', 'MultiRow', this.parent.toolbarSettings.items, RenderType.InlineToolbar);\n      this.renderFactory.addRenderer(RenderType.InlineToolbar, this.inlineQTBar);\n      EventHandler.add(this.inlineQTBar.element, 'mousedown', this.onMouseDown, this);\n      EventHandler.add(this.inlineQTBar.element, 'keyup', this.keyUpQT, this);\n    }\n  };\n  /**\n   * Method for showing the inline quick toolbar\n   *\n   * @param {number} x -specifies the value of x.\n   * @param {number} y - specifies the y valu.\n   * @param {HTMLElement} target - specifies the target element.\n   * @returns {void}\n   * @hidden\n    */\n\n\n  QuickToolbar.prototype.showInlineQTBar = function (x, y, target) {\n    if (this.parent.readonly || target.tagName.toLowerCase() === \"img\") {\n      return;\n    }\n\n    this.inlineQTBar.showPopup(x, y, target);\n  };\n  /**\n   * Method for hidding the inline quick toolbar\n   *\n   * @returns {void}\n   * @hidden\n    */\n\n\n  QuickToolbar.prototype.hideInlineQTBar = function () {\n    if (this.inlineQTBar && !hasClass(this.inlineQTBar.element, 'e-popup-close')) {\n      this.inlineQTBar.hidePopup();\n    }\n  };\n  /**\n   * Method for hidding the quick toolbar\n   *\n   * @returns {void}\n   * @hidden\n    */\n\n\n  QuickToolbar.prototype.hideQuickToolbars = function () {\n    if (this.linkQTBar && !hasClass(this.linkQTBar.element, 'e-popup-close') && document.body.contains(this.linkQTBar.element)) {\n      this.linkQTBar.hidePopup();\n    }\n\n    if (this.textQTBar && !hasClass(this.textQTBar.element, 'e-popup-close') && document.body.contains(this.textQTBar.element)) {\n      this.textQTBar.hidePopup();\n    }\n\n    if (this.imageQTBar && !hasClass(this.imageQTBar.element, 'e-popup-close') && document.body.contains(this.imageQTBar.element)) {\n      this.imageQTBar.hidePopup();\n    }\n\n    if (this.tableQTBar && !hasClass(this.tableQTBar.element, 'e-popup-close') && document.body.contains(this.tableQTBar.element)) {\n      this.tableQTBar.hidePopup();\n    }\n\n    if (this.parent.inlineMode.enable && (!Browser.isDevice || isIDevice())) {\n      this.hideInlineQTBar();\n    }\n  };\n\n  QuickToolbar.prototype.deBounce = function (x, y, target) {\n    var _this = this;\n\n    clearTimeout(this.deBouncer);\n    this.deBouncer = window.setTimeout(function () {\n      _this.showInlineQTBar(x, y, target);\n    }, 1000);\n  };\n\n  QuickToolbar.prototype.mouseUpHandler = function (e) {\n    if (this.parent.inlineMode.enable && (!Browser.isDevice || isIDevice())) {\n      var args = e.args.touches ? e.args.changedTouches[0] : e.args;\n      var range = this.parent.getRange();\n      var target = e.args.target;\n\n      if (isNullOrUndefined(select('.' + CLS_INLINE_POP, document.body))) {\n        if (isIDevice() && e.touchData && e.touchData.prevClientX !== e.touchData.clientX && e.touchData.prevClientY !== e.touchData.clientY) {\n          return;\n        }\n\n        this.hideInlineQTBar();\n        var parentLeft = this.parent.element.getBoundingClientRect().left;\n        this.offsetX = this.parent.iframeSettings.enable ? window.pageXOffset + parentLeft + args.clientX : args.pageX;\n        this.offsetY = pageYOffset(args, this.parent.element, this.parent.iframeSettings.enable);\n\n        if (target.nodeName === 'TEXTAREA') {\n          this.showInlineQTBar(this.offsetX, this.offsetY, target);\n        } else {\n          var closestAnchor = closest(target, 'a');\n          target = closestAnchor ? closestAnchor : target;\n          var startNode = this.parent.getRange().startContainer.parentElement;\n          var endNode = this.parent.getRange().endContainer.parentElement;\n\n          if ((isNOU(closest(startNode, 'A')) || isNOU(closest(endNode, 'A'))) && (!closest(target, 'td,th') || !range.collapsed) && (target.tagName !== 'IMG' || this.parent.getRange().startOffset !== this.parent.getRange().endOffset)) {\n            if (this.parent.inlineMode.onSelection && range.collapsed) {\n              return;\n            }\n\n            this.target = target;\n            this.showInlineQTBar(this.offsetX, this.offsetY, target);\n          }\n        }\n      }\n    }\n  };\n\n  QuickToolbar.prototype.keyDownHandler = function () {\n    if (this.parent.inlineMode.enable && (!Browser.isDevice || isIDevice()) && !isNullOrUndefined(select('.' + CLS_INLINE_POP, document))) {\n      this.hideInlineQTBar();\n    }\n  };\n\n  QuickToolbar.prototype.inlineQTBarMouseDownHandler = function () {\n    if (this.parent.inlineMode.enable && (!Browser.isDevice || isIDevice()) && !isNullOrUndefined(select('.' + CLS_INLINE_POP, document))) {\n      this.hideInlineQTBar();\n    }\n  };\n\n  QuickToolbar.prototype.keyUpHandler = function (e) {\n    if (this.parent.inlineMode.enable && !Browser.isDevice) {\n      if (this.parent.inlineMode.onSelection) {\n        return;\n      }\n\n      var args = e.args;\n      this.deBounce(this.offsetX, this.offsetY, args.target);\n    }\n  };\n\n  QuickToolbar.prototype.selectionChangeHandler = function (e) {\n    var _this = this;\n\n    clearTimeout(this.deBouncer);\n    this.deBouncer = window.setTimeout(function () {\n      _this.onSelectionChange(e);\n    }, 1000);\n  };\n\n  QuickToolbar.prototype.onSelectionChange = function (e) {\n    if (!isNullOrUndefined(select('.' + CLS_INLINE_POP, document.body))) {\n      return;\n    }\n\n    var selection = this.contentRenderer.getDocument().getSelection();\n\n    if (!selection.isCollapsed) {\n      this.mouseUpHandler({\n        args: e\n      });\n    }\n  };\n  /**\n   * getInlineBaseToolbar method\n   *\n   * @returns {void}\n   * @hidden\n    */\n\n\n  QuickToolbar.prototype.getInlineBaseToolbar = function () {\n    return this.inlineQTBar && this.inlineQTBar.quickTBarObj;\n  };\n  /**\n   * Destroys the ToolBar.\n   *\n   * @function destroy\n   * @returns {void}\n   * @hidden\n    */\n\n\n  QuickToolbar.prototype.destroy = function () {\n    if (this.linkQTBar) {\n      EventHandler.remove(this.linkQTBar.element, 'mousedown', this.onMouseDown);\n      EventHandler.remove(this.linkQTBar.element, 'keyup', this.keyUpQT);\n      this.linkQTBar.destroy();\n    }\n\n    if (this.textQTBar) {\n      EventHandler.remove(this.textQTBar.element, 'mousedown', this.onMouseDown);\n      EventHandler.remove(this.textQTBar.element, 'keyup', this.keyUpQT);\n      this.textQTBar.destroy();\n    }\n\n    if (this.imageQTBar) {\n      EventHandler.remove(this.imageQTBar.element, 'mousedown', this.onMouseDown);\n      EventHandler.remove(this.imageQTBar.element, 'keyup', this.keyUpQT);\n      this.imageQTBar.destroy();\n    }\n\n    if (this.tableQTBar) {\n      EventHandler.remove(this.tableQTBar.element, 'mousedown', this.onMouseDown);\n      EventHandler.remove(this.tableQTBar.element, 'keyup', this.keyUpQT);\n      this.tableQTBar.destroy();\n    }\n\n    if (this.inlineQTBar) {\n      EventHandler.remove(this.inlineQTBar.element, 'mousedown', this.onMouseDown);\n      EventHandler.remove(this.inlineQTBar.element, 'keyup', this.keyUpQT);\n\n      if (isIDevice()) {\n        EventHandler.remove(document, 'selectionchange', this.selectionChangeHandler);\n      }\n\n      this.inlineQTBar.destroy();\n    }\n\n    this.removeEventListener();\n  };\n\n  QuickToolbar.prototype.wireInlineQTBarEvents = function () {\n    this.parent.on(events.mouseUp, this.mouseUpHandler, this);\n    this.parent.on(events.mouseDown, this.inlineQTBarMouseDownHandler, this);\n    this.parent.on(events.keyDown, this.keyDownHandler, this);\n    this.parent.on(events.keyUp, this.keyUpHandler, this);\n    this.parent.on(events.sourceCodeMouseDown, this.mouseUpHandler, this);\n    this.parent.on(events.renderInlineToolbar, this.renderInlineQuickToolbar, this);\n  };\n\n  QuickToolbar.prototype.unWireInlineQTBarEvents = function () {\n    this.parent.off(events.mouseUp, this.mouseUpHandler);\n    this.parent.off(events.mouseDown, this.inlineQTBarMouseDownHandler);\n    this.parent.off(events.keyDown, this.keyDownHandler);\n    this.parent.off(events.keyUp, this.keyUpHandler);\n    this.parent.off(events.sourceCodeMouseDown, this.mouseUpHandler);\n    this.parent.off(events.renderInlineToolbar, this.renderInlineQuickToolbar);\n  }; // eslint-disable-next-line\n\n\n  QuickToolbar.prototype.toolbarUpdated = function (args) {\n    if (this.linkQTBar && !hasClass(this.linkQTBar.element, 'e-popup-close')) {\n      this.linkQTBar.hidePopup();\n    }\n\n    if (this.imageQTBar && !hasClass(this.imageQTBar.element, 'e-popup-close')) {\n      this.imageQTBar.hidePopup();\n    }\n\n    if (this.tableQTBar && !hasClass(this.tableQTBar.element, 'e-popup-close')) {\n      this.tableQTBar.hidePopup();\n    }\n  };\n  /**\n   * addEventListener\n   *\n   * @returns {void}\n   * @hidden\n    */\n\n\n  QuickToolbar.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.on(events.initialEnd, this.initializeQuickToolbars, this);\n    this.parent.on(events.mouseDown, this.renderQuickToolbars, this);\n    this.parent.on(events.toolbarUpdated, this.toolbarUpdated, this);\n    this.parent.on(events.drop, this.renderQuickToolbars, this);\n    this.wireInlineQTBarEvents();\n    this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n\n    if (this.parent.quickToolbarSettings.actionOnScroll === 'hide') {\n      this.parent.on(events.scroll, this.hideQuickToolbars, this);\n      this.parent.on(events.contentscroll, this.hideQuickToolbars, this);\n    }\n\n    this.parent.on(events.focusChange, this.hideQuickToolbars, this);\n    this.parent.on(events.iframeMouseDown, this.onIframeMouseDown, this);\n    this.parent.on(events.destroy, this.destroy, this);\n    this.parent.on(events.keyDown, this.onKeyDown, this);\n    this.parent.on(events.rtlMode, this.setRtl, this);\n  };\n\n  QuickToolbar.prototype.onKeyDown = function (e) {\n    var args = e.args;\n\n    if (args.which === 8 || args.which === 46) {\n      if (this.imageQTBar && !hasClass(this.imageQTBar.element, 'e-popup-close')) {\n        this.imageQTBar.hidePopup();\n      }\n    }\n  };\n\n  QuickToolbar.prototype.onIframeMouseDown = function () {\n    this.hideQuickToolbars();\n    this.hideInlineQTBar();\n  };\n\n  QuickToolbar.prototype.setRtl = function (args) {\n    if (this.inlineQTBar) {\n      this.inlineQTBar.quickTBarObj.toolbarObj.setProperties({\n        enableRtl: args.enableRtl\n      });\n    }\n\n    if (this.imageQTBar) {\n      this.imageQTBar.quickTBarObj.toolbarObj.setProperties({\n        enableRtl: args.enableRtl\n      });\n    }\n\n    if (this.linkQTBar) {\n      this.imageQTBar.quickTBarObj.toolbarObj.setProperties({\n        enableRtl: args.enableRtl\n      });\n    }\n  };\n  /**\n   * removeEventListener\n   *\n   * @returns {void}\n   * @hidden\n    */\n\n\n  QuickToolbar.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.off(events.initialEnd, this.initializeQuickToolbars);\n    this.parent.off(events.mouseDown, this.renderQuickToolbars);\n    this.parent.off(events.toolbarUpdated, this.toolbarUpdated);\n    this.parent.off(events.drop, this.renderQuickToolbars);\n    this.unWireInlineQTBarEvents();\n    this.parent.off(events.modelChanged, this.onPropertyChanged);\n\n    if (this.parent.quickToolbarSettings.actionOnScroll === 'hide') {\n      this.parent.off(events.scroll, this.hideQuickToolbars);\n      this.parent.off(events.contentscroll, this.hideQuickToolbars);\n    }\n\n    this.parent.off(events.focusChange, this.hideQuickToolbars);\n    this.parent.off(events.destroy, this.destroy);\n    this.parent.off(events.iframeMouseDown, this.onIframeMouseDown);\n    this.parent.off(events.keyDown, this.onKeyDown);\n    this.parent.off(events.rtlMode, this.setRtl);\n  };\n  /**\n   * Called internally if any of the property value changed.\n   *\n   * @param {RichTextEditorModel} e - specifies the element.\n   * @returns {void}\n   * @hidden\n    */\n\n\n  QuickToolbar.prototype.onPropertyChanged = function (e) {\n    if (!isNullOrUndefined(e.newProp.quickToolbarSettings)) {\n      for (var _i = 0, _a = Object.keys(e.newProp.quickToolbarSettings); _i < _a.length; _i++) {\n        var prop = _a[_i];\n\n        switch (prop) {\n          case 'actionOnScroll':\n            if (e.newProp.quickToolbarSettings.actionOnScroll === 'none') {\n              this.parent.off(events.scroll, this.hideQuickToolbars);\n              this.parent.off(events.contentscroll, this.hideQuickToolbars);\n            } else {\n              this.parent.on(events.scroll, this.hideQuickToolbars, this);\n              this.parent.on(events.contentscroll, this.hideQuickToolbars, this);\n            }\n\n            break;\n        }\n      }\n    }\n\n    if (e.module !== this.getModuleName()) {\n      return;\n    }\n\n    if (this.inlineQTBar) {\n      removeClass([this.parent.element], [CLS_INLINE]);\n      this.unWireInlineQTBarEvents();\n      this.hideInlineQTBar();\n    }\n\n    if (this.parent.inlineMode.enable && (!Browser.isDevice || isIDevice())) {\n      addClass([this.parent.element], [CLS_INLINE]);\n      this.wireInlineQTBarEvents();\n    }\n  };\n  /**\n   * For internal use only - Get the module name.\n   *\n   * @returns {void}\n   * @hidden\n   */\n\n\n  QuickToolbar.prototype.getModuleName = function () {\n    return 'quickToolbar';\n  };\n\n  return QuickToolbar;\n}();\n\nexport { QuickToolbar };","map":{"version":3,"sources":["/Users/yasaman/Documents/moj_adminpanel/adminpanel/node_modules/@syncfusion/ej2-richtexteditor/src/rich-text-editor/actions/quick-toolbar.js"],"names":["select","isNullOrUndefined","Browser","addClass","removeClass","EventHandler","closest","isNOU","RenderType","events","pageYOffset","hasClass","isIDevice","BaseQuickToolbar","PopupRenderer","CLS_INLINE_POP","CLS_INLINE","QuickToolbar","parent","locator","renderFactory","getService","addRenderer","Popup","addEventListener","prototype","formatItems","items","formattedItems","forEach","item","toLocaleLowerCase","push","getQTBarOptions","popType","mode","type","popupType","toolbarItems","renderType","createQTBar","length","qTBar","render","initializeQuickToolbars","quickToolbarModule","contentRenderer","getRenderer","Content","inlineMode","enable","onSelection","add","getDocument","selectionChangeHandler","onMouseDown","e","isBlur","isRTE","keyUpQT","which","hideQuickToolbars","renderQuickToolbars","linkQTBar","imageQTBar","textQTBar","tableQTBar","quickToolbarSettings","link","LinkToolbar","text","TextToolbar","image","ImageToolbar","table","TableToolbar","element","renderInlineQuickToolbar","isDevice","inlineQTBar","toolbarSettings","InlineToolbar","showInlineQTBar","x","y","target","readonly","tagName","toLowerCase","showPopup","hideInlineQTBar","hidePopup","document","body","contains","deBounce","_this","clearTimeout","deBouncer","window","setTimeout","mouseUpHandler","args","touches","changedTouches","range","getRange","touchData","prevClientX","clientX","prevClientY","clientY","parentLeft","getBoundingClientRect","left","offsetX","iframeSettings","pageXOffset","pageX","offsetY","nodeName","closestAnchor","startNode","startContainer","parentElement","endNode","endContainer","collapsed","startOffset","endOffset","keyDownHandler","inlineQTBarMouseDownHandler","keyUpHandler","onSelectionChange","selection","getSelection","isCollapsed","getInlineBaseToolbar","quickTBarObj","destroy","remove","removeEventListener","wireInlineQTBarEvents","on","mouseUp","mouseDown","keyDown","keyUp","sourceCodeMouseDown","renderInlineToolbar","unWireInlineQTBarEvents","off","toolbarUpdated","isDestroyed","initialEnd","drop","modelChanged","onPropertyChanged","actionOnScroll","scroll","contentscroll","focusChange","iframeMouseDown","onIframeMouseDown","onKeyDown","rtlMode","setRtl","toolbarObj","setProperties","enableRtl","newProp","_i","_a","Object","keys","prop","module","getModuleName"],"mappings":"AAAA,SAASA,MAAT,EAAiBC,iBAAjB,EAAoCC,OAApC,EAA6CC,QAA7C,EAAuDC,WAAvD,EAAoEC,YAApE,EAAkFC,OAAlF,EAA2FL,iBAAiB,IAAIM,KAAhH,QAA6H,sBAA7H;AACA,SAASC,UAAT,QAA2B,cAA3B;AACA,OAAO,KAAKC,MAAZ,MAAwB,kBAAxB;AACA,SAASC,WAAT,EAAsBC,QAAtB,EAAgCC,SAAhC,QAAiD,cAAjD;AACA,SAASC,gBAAT,QAAiC,sBAAjC;AACA,SAASC,aAAT,QAA8B,4BAA9B;AACA,SAASC,cAAT,EAAyBC,UAAzB,QAA2C,iBAA3C;AACA;AACA;AACA;;AACA,IAAIC,YAAY;AAAG;AAAe,YAAY;AAC1C,WAASA,YAAT,CAAsBC,MAAtB,EAA8BC,OAA9B,EAAuC;AACnC,SAAKD,MAAL,GAAcA,MAAd;AACA,SAAKC,OAAL,GAAeA,OAAf;AACA,SAAKC,aAAL,GAAqB,KAAKD,OAAL,CAAaE,UAAb,CAAwB,iBAAxB,CAArB;AACA,SAAKD,aAAL,CAAmBE,WAAnB,CAA+Bd,UAAU,CAACe,KAA1C,EAAiD,IAAIT,aAAJ,CAAkB,KAAKI,MAAvB,CAAjD;AACA,SAAKM,gBAAL;AACH;;AACDP,EAAAA,YAAY,CAACQ,SAAb,CAAuBC,WAAvB,GAAqC,UAAUC,KAAV,EAAiB;AAClD,QAAIC,cAAc,GAAG,EAArB;AACAD,IAAAA,KAAK,CAACE,OAAN,CAAc,UAAUC,IAAV,EAAgB;AAC1B,UAAI,OAAOA,IAAP,KAAgB,QAApB,EAA8B;AAC1B,gBAAQA,IAAI,CAACC,iBAAL,EAAR;AACI,eAAK,MAAL;AACIH,YAAAA,cAAc,CAACI,IAAf,CAAoB,UAApB;AACA;;AACJ,eAAK,MAAL;AACIJ,YAAAA,cAAc,CAACI,IAAf,CAAoB,UAApB;AACA;;AACJ,eAAK,QAAL;AACIJ,YAAAA,cAAc,CAACI,IAAf,CAAoB,YAApB;AACA;;AACJ;AACIJ,YAAAA,cAAc,CAACI,IAAf,CAAoBF,IAApB;AACA;AAZR;AAcH,OAfD,MAgBK;AACDF,QAAAA,cAAc,CAACI,IAAf,CAAoBF,IAApB;AACH;AACJ,KApBD;AAqBA,WAAOF,cAAP;AACH,GAxBD;;AAyBAX,EAAAA,YAAY,CAACQ,SAAb,CAAuBQ,eAAvB,GAAyC,UAAUC,OAAV,EAAmBC,IAAnB,EAAyBR,KAAzB,EAAgCS,IAAhC,EAAsC;AAC3E,WAAO;AACHC,MAAAA,SAAS,EAAEH,OADR;AAEHI,MAAAA,YAAY,EAAEX,KAFX;AAGHQ,MAAAA,IAAI,EAAEA,IAHH;AAIHI,MAAAA,UAAU,EAAEH;AAJT,KAAP;AAMH,GAPD;AAQA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEInB,EAAAA,YAAY,CAACQ,SAAb,CAAuBe,WAAvB,GAAqC,UAAUH,SAAV,EAAqBF,IAArB,EAA2BR,KAA3B,EAAkCS,IAAlC,EAAwC;AACzE,QAAIT,KAAK,CAACc,MAAN,GAAe,CAAnB,EAAsB;AAClB,aAAO,IAAP;AACH;;AACD,QAAIC,KAAK,GAAG,IAAI7B,gBAAJ,CAAqB,KAAKK,MAA1B,EAAkC,KAAKC,OAAvC,CAAZ;AACAuB,IAAAA,KAAK,CAACC,MAAN,CAAa,KAAKV,eAAL,CAAqBI,SAArB,EAAgCF,IAAhC,EAAsC,KAAKT,WAAL,CAAiBC,KAAjB,CAAtC,EAA+DS,IAA/D,CAAb;AACA,WAAOM,KAAP;AACH,GAPD;;AAQAzB,EAAAA,YAAY,CAACQ,SAAb,CAAuBmB,uBAAvB,GAAiD,YAAY;AACzD,SAAK1B,MAAL,CAAY2B,kBAAZ,GAAiC,IAAjC;AACA,SAAKC,eAAL,GAAuB,KAAK1B,aAAL,CAAmB2B,WAAnB,CAA+BvC,UAAU,CAACwC,OAA1C,CAAvB;;AACA,QAAI,KAAK9B,MAAL,CAAY+B,UAAZ,CAAuBC,MAAvB,IAAiC,KAAKhC,MAAL,CAAY+B,UAAZ,CAAuBE,WAAxD,IAAuEvC,SAAS,EAApF,EAAwF;AACpFP,MAAAA,YAAY,CAAC+C,GAAb,CAAiB,KAAKN,eAAL,CAAqBO,WAArB,EAAjB,EAAqD,iBAArD,EAAwE,KAAKC,sBAA7E,EAAqG,IAArG;AACH;AACJ,GAND,CA5D0C,CAmE1C;;;AACArC,EAAAA,YAAY,CAACQ,SAAb,CAAuB8B,WAAvB,GAAqC,UAAUC,CAAV,EAAa;AAC9C,SAAKtC,MAAL,CAAYuC,MAAZ,GAAqB,KAArB;AACA,SAAKvC,MAAL,CAAYwC,KAAZ,GAAoB,IAApB;AACH,GAHD;;AAIAzC,EAAAA,YAAY,CAACQ,SAAb,CAAuBkC,OAAvB,GAAiC,UAAUH,CAAV,EAAa;AAC1C,QAAIA,CAAC,CAACI,KAAF,IAAW,EAAf,EAAmB;AACf,WAAKC,iBAAL;AACH;AACJ,GAJD;;AAKA5C,EAAAA,YAAY,CAACQ,SAAb,CAAuBqC,mBAAvB,GAA6C,YAAY;AACrD,QAAI,KAAKC,SAAL,IAAkB,KAAKC,UAAvB,IAAqC,KAAKC,SAA1C,IAAuD,KAAKC,UAAhE,EAA4E;AACxE;AACH;;AACD,SAAKH,SAAL,GAAiB,KAAKvB,WAAL,CAAiB,MAAjB,EAAyB,YAAzB,EAAuC,KAAKtB,MAAL,CAAYiD,oBAAZ,CAAiCC,IAAxE,EAA8E5D,UAAU,CAAC6D,WAAzF,CAAjB;AACA,SAAKjD,aAAL,CAAmBE,WAAnB,CAA+Bd,UAAU,CAAC6D,WAA1C,EAAuD,KAAKN,SAA5D;AACA,SAAKE,SAAL,GAAiB,KAAKzB,WAAL,CAAiB,MAAjB,EAAyB,YAAzB,EAAuC,KAAKtB,MAAL,CAAYiD,oBAAZ,CAAiCG,IAAxE,EAA8E9D,UAAU,CAAC+D,WAAzF,CAAjB;AACA,SAAKnD,aAAL,CAAmBE,WAAnB,CAA+Bd,UAAU,CAAC+D,WAA1C,EAAuD,KAAKN,SAA5D;AACA,SAAKD,UAAL,GAAkB,KAAKxB,WAAL,CAAiB,OAAjB,EAA0B,UAA1B,EAAsC,KAAKtB,MAAL,CAAYiD,oBAAZ,CAAiCK,KAAvE,EAA8EhE,UAAU,CAACiE,YAAzF,CAAlB;AACA,SAAKrD,aAAL,CAAmBE,WAAnB,CAA+Bd,UAAU,CAACiE,YAA1C,EAAwD,KAAKT,UAA7D;AACA,SAAKE,UAAL,GAAkB,KAAK1B,WAAL,CAAiB,OAAjB,EAA0B,UAA1B,EAAsC,KAAKtB,MAAL,CAAYiD,oBAAZ,CAAiCO,KAAvE,EAA8ElE,UAAU,CAACmE,YAAzF,CAAlB;AACA,SAAKvD,aAAL,CAAmBE,WAAnB,CAA+Bd,UAAU,CAACmE,YAA1C,EAAwD,KAAKT,UAA7D;;AACA,QAAI,KAAKH,SAAT,EAAoB;AAChB1D,MAAAA,YAAY,CAAC+C,GAAb,CAAiB,KAAKW,SAAL,CAAea,OAAhC,EAAyC,WAAzC,EAAsD,KAAKrB,WAA3D,EAAwE,IAAxE;AACAlD,MAAAA,YAAY,CAAC+C,GAAb,CAAiB,KAAKW,SAAL,CAAea,OAAhC,EAAyC,OAAzC,EAAkD,KAAKjB,OAAvD,EAAgE,IAAhE;AACH;;AACD,QAAI,KAAKK,UAAT,EAAqB;AACjB3D,MAAAA,YAAY,CAAC+C,GAAb,CAAiB,KAAKY,UAAL,CAAgBY,OAAjC,EAA0C,WAA1C,EAAuD,KAAKrB,WAA5D,EAAyE,IAAzE;AACAlD,MAAAA,YAAY,CAAC+C,GAAb,CAAiB,KAAKY,UAAL,CAAgBY,OAAjC,EAA0C,OAA1C,EAAmD,KAAKjB,OAAxD,EAAiE,IAAjE;AACH;;AACD,QAAI,KAAKM,SAAT,EAAoB;AAChB5D,MAAAA,YAAY,CAAC+C,GAAb,CAAiB,KAAKa,SAAL,CAAeW,OAAhC,EAAyC,WAAzC,EAAsD,KAAKrB,WAA3D,EAAwE,IAAxE;AACAlD,MAAAA,YAAY,CAAC+C,GAAb,CAAiB,KAAKa,SAAL,CAAeW,OAAhC,EAAyC,OAAzC,EAAkD,KAAKjB,OAAvD,EAAgE,IAAhE;AACH;;AACD,QAAI,KAAKO,UAAT,EAAqB;AACjB7D,MAAAA,YAAY,CAAC+C,GAAb,CAAiB,KAAKc,UAAL,CAAgBU,OAAjC,EAA0C,WAA1C,EAAuD,KAAKrB,WAA5D,EAAyE,IAAzE;AACAlD,MAAAA,YAAY,CAAC+C,GAAb,CAAiB,KAAKc,UAAL,CAAgBU,OAAjC,EAA0C,OAA1C,EAAmD,KAAKjB,OAAxD,EAAiE,IAAjE;AACH;AACJ,GA5BD;;AA6BA1C,EAAAA,YAAY,CAACQ,SAAb,CAAuBoD,wBAAvB,GAAkD,YAAY;AAC1D,QAAI,KAAK3D,MAAL,CAAY+B,UAAZ,CAAuBC,MAAvB,KAAkC,CAAChD,OAAO,CAAC4E,QAAT,IAAqBlE,SAAS,EAAhE,CAAJ,EAAyE;AACrET,MAAAA,QAAQ,CAAC,CAAC,KAAKe,MAAL,CAAY0D,OAAb,CAAD,EAAwB,CAAC5D,UAAD,CAAxB,CAAR;AACA,WAAK+D,WAAL,GAAmB,KAAKvC,WAAL,CAAiB,QAAjB,EAA2B,UAA3B,EAAuC,KAAKtB,MAAL,CAAY8D,eAAZ,CAA4BrD,KAAnE,EAA0EnB,UAAU,CAACyE,aAArF,CAAnB;AACA,WAAK7D,aAAL,CAAmBE,WAAnB,CAA+Bd,UAAU,CAACyE,aAA1C,EAAyD,KAAKF,WAA9D;AACA1E,MAAAA,YAAY,CAAC+C,GAAb,CAAiB,KAAK2B,WAAL,CAAiBH,OAAlC,EAA2C,WAA3C,EAAwD,KAAKrB,WAA7D,EAA0E,IAA1E;AACAlD,MAAAA,YAAY,CAAC+C,GAAb,CAAiB,KAAK2B,WAAL,CAAiBH,OAAlC,EAA2C,OAA3C,EAAoD,KAAKjB,OAAzD,EAAkE,IAAlE;AACH;AACJ,GARD;AASA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEI1C,EAAAA,YAAY,CAACQ,SAAb,CAAuByD,eAAvB,GAAyC,UAAUC,CAAV,EAAaC,CAAb,EAAgBC,MAAhB,EAAwB;AAC7D,QAAI,KAAKnE,MAAL,CAAYoE,QAAZ,IAAwBD,MAAM,CAACE,OAAP,CAAeC,WAAf,OAAiC,KAA7D,EAAoE;AAChE;AACH;;AACD,SAAKT,WAAL,CAAiBU,SAAjB,CAA2BN,CAA3B,EAA8BC,CAA9B,EAAiCC,MAAjC;AACH,GALD;AAMA;AACJ;AACA;AACA;AACA;AACA;;;AAEIpE,EAAAA,YAAY,CAACQ,SAAb,CAAuBiE,eAAvB,GAAyC,YAAY;AACjD,QAAI,KAAKX,WAAL,IAAoB,CAACpE,QAAQ,CAAC,KAAKoE,WAAL,CAAiBH,OAAlB,EAA2B,eAA3B,CAAjC,EAA8E;AAC1E,WAAKG,WAAL,CAAiBY,SAAjB;AACH;AACJ,GAJD;AAKA;AACJ;AACA;AACA;AACA;AACA;;;AAEI1E,EAAAA,YAAY,CAACQ,SAAb,CAAuBoC,iBAAvB,GAA2C,YAAY;AACnD,QAAI,KAAKE,SAAL,IAAkB,CAACpD,QAAQ,CAAC,KAAKoD,SAAL,CAAea,OAAhB,EAAyB,eAAzB,CAA3B,IAAwEgB,QAAQ,CAACC,IAAT,CAAcC,QAAd,CAAuB,KAAK/B,SAAL,CAAea,OAAtC,CAA5E,EAA4H;AACxH,WAAKb,SAAL,CAAe4B,SAAf;AACH;;AACD,QAAI,KAAK1B,SAAL,IAAkB,CAACtD,QAAQ,CAAC,KAAKsD,SAAL,CAAeW,OAAhB,EAAyB,eAAzB,CAA3B,IAAwEgB,QAAQ,CAACC,IAAT,CAAcC,QAAd,CAAuB,KAAK7B,SAAL,CAAeW,OAAtC,CAA5E,EAA4H;AACxH,WAAKX,SAAL,CAAe0B,SAAf;AACH;;AACD,QAAI,KAAK3B,UAAL,IAAmB,CAACrD,QAAQ,CAAC,KAAKqD,UAAL,CAAgBY,OAAjB,EAA0B,eAA1B,CAA5B,IAA0EgB,QAAQ,CAACC,IAAT,CAAcC,QAAd,CAAuB,KAAK9B,UAAL,CAAgBY,OAAvC,CAA9E,EAA+H;AAC3H,WAAKZ,UAAL,CAAgB2B,SAAhB;AACH;;AACD,QAAI,KAAKzB,UAAL,IAAmB,CAACvD,QAAQ,CAAC,KAAKuD,UAAL,CAAgBU,OAAjB,EAA0B,eAA1B,CAA5B,IAA0EgB,QAAQ,CAACC,IAAT,CAAcC,QAAd,CAAuB,KAAK5B,UAAL,CAAgBU,OAAvC,CAA9E,EAA+H;AAC3H,WAAKV,UAAL,CAAgByB,SAAhB;AACH;;AACD,QAAI,KAAKzE,MAAL,CAAY+B,UAAZ,CAAuBC,MAAvB,KAAkC,CAAChD,OAAO,CAAC4E,QAAT,IAAqBlE,SAAS,EAAhE,CAAJ,EAAyE;AACrE,WAAK8E,eAAL;AACH;AACJ,GAhBD;;AAiBAzE,EAAAA,YAAY,CAACQ,SAAb,CAAuBsE,QAAvB,GAAkC,UAAUZ,CAAV,EAAaC,CAAb,EAAgBC,MAAhB,EAAwB;AACtD,QAAIW,KAAK,GAAG,IAAZ;;AACAC,IAAAA,YAAY,CAAC,KAAKC,SAAN,CAAZ;AACA,SAAKA,SAAL,GAAiBC,MAAM,CAACC,UAAP,CAAkB,YAAY;AAC3CJ,MAAAA,KAAK,CAACd,eAAN,CAAsBC,CAAtB,EAAyBC,CAAzB,EAA4BC,MAA5B;AACH,KAFgB,EAEd,IAFc,CAAjB;AAGH,GAND;;AAOApE,EAAAA,YAAY,CAACQ,SAAb,CAAuB4E,cAAvB,GAAwC,UAAU7C,CAAV,EAAa;AACjD,QAAI,KAAKtC,MAAL,CAAY+B,UAAZ,CAAuBC,MAAvB,KAAkC,CAAChD,OAAO,CAAC4E,QAAT,IAAqBlE,SAAS,EAAhE,CAAJ,EAAyE;AACrE,UAAI0F,IAAI,GAAG9C,CAAC,CAAC8C,IAAF,CAAOC,OAAP,GACP/C,CAAC,CAAC8C,IAAF,CAAOE,cAAP,CAAsB,CAAtB,CADO,GACoBhD,CAAC,CAAC8C,IADjC;AAEA,UAAIG,KAAK,GAAG,KAAKvF,MAAL,CAAYwF,QAAZ,EAAZ;AACA,UAAIrB,MAAM,GAAG7B,CAAC,CAAC8C,IAAF,CAAOjB,MAApB;;AACA,UAAIpF,iBAAiB,CAACD,MAAM,CAAC,MAAMe,cAAP,EAAuB6E,QAAQ,CAACC,IAAhC,CAAP,CAArB,EAAoE;AAChE,YAAIjF,SAAS,MAAM4C,CAAC,CAACmD,SAAjB,IAA8BnD,CAAC,CAACmD,SAAF,CAAYC,WAAZ,KAA4BpD,CAAC,CAACmD,SAAF,CAAYE,OAAtE,IACGrD,CAAC,CAACmD,SAAF,CAAYG,WAAZ,KAA4BtD,CAAC,CAACmD,SAAF,CAAYI,OAD/C,EACwD;AACpD;AACH;;AACD,aAAKrB,eAAL;AACA,YAAIsB,UAAU,GAAG,KAAK9F,MAAL,CAAY0D,OAAZ,CAAoBqC,qBAApB,GAA4CC,IAA7D;AACA,aAAKC,OAAL,GAAe,KAAKjG,MAAL,CAAYkG,cAAZ,CAA2BlE,MAA3B,GAAoCiD,MAAM,CAACkB,WAAP,GAAqBL,UAArB,GAAkCV,IAAI,CAACO,OAA3E,GAAqFP,IAAI,CAACgB,KAAzG;AACA,aAAKC,OAAL,GAAe7G,WAAW,CAAC4F,IAAD,EAAO,KAAKpF,MAAL,CAAY0D,OAAnB,EAA4B,KAAK1D,MAAL,CAAYkG,cAAZ,CAA2BlE,MAAvD,CAA1B;;AACA,YAAImC,MAAM,CAACmC,QAAP,KAAoB,UAAxB,EAAoC;AAChC,eAAKtC,eAAL,CAAqB,KAAKiC,OAA1B,EAAmC,KAAKI,OAAxC,EAAiDlC,MAAjD;AACH,SAFD,MAGK;AACD,cAAIoC,aAAa,GAAGnH,OAAO,CAAC+E,MAAD,EAAS,GAAT,CAA3B;AACAA,UAAAA,MAAM,GAAGoC,aAAa,GAAGA,aAAH,GAAmBpC,MAAzC;AACA,cAAIqC,SAAS,GAAG,KAAKxG,MAAL,CAAYwF,QAAZ,GAAuBiB,cAAvB,CAAsCC,aAAtD;AACA,cAAIC,OAAO,GAAG,KAAK3G,MAAL,CAAYwF,QAAZ,GAAuBoB,YAAvB,CAAoCF,aAAlD;;AACA,cAAI,CAACrH,KAAK,CAACD,OAAO,CAACoH,SAAD,EAAY,GAAZ,CAAR,CAAL,IAAkCnH,KAAK,CAACD,OAAO,CAACuH,OAAD,EAAU,GAAV,CAAR,CAAxC,MAAqE,CAACvH,OAAO,CAAC+E,MAAD,EAAS,OAAT,CAAR,IAA6B,CAACoB,KAAK,CAACsB,SAAzG,MACC1C,MAAM,CAACE,OAAP,KAAmB,KAAnB,IAA4B,KAAKrE,MAAL,CAAYwF,QAAZ,GAAuBsB,WAAvB,KAAuC,KAAK9G,MAAL,CAAYwF,QAAZ,GAAuBuB,SAD3F,CAAJ,EAC2G;AACvG,gBAAI,KAAK/G,MAAL,CAAY+B,UAAZ,CAAuBE,WAAvB,IAAsCsD,KAAK,CAACsB,SAAhD,EAA2D;AACvD;AACH;;AACD,iBAAK1C,MAAL,GAAcA,MAAd;AACA,iBAAKH,eAAL,CAAqB,KAAKiC,OAA1B,EAAmC,KAAKI,OAAxC,EAAiDlC,MAAjD;AACH;AACJ;AACJ;AACJ;AACJ,GAlCD;;AAmCApE,EAAAA,YAAY,CAACQ,SAAb,CAAuByG,cAAvB,GAAwC,YAAY;AAChD,QAAK,KAAKhH,MAAL,CAAY+B,UAAZ,CAAuBC,MAAvB,KAAkC,CAAChD,OAAO,CAAC4E,QAAT,IAAqBlE,SAAS,EAAhE,CAAD,IACG,CAACX,iBAAiB,CAACD,MAAM,CAAC,MAAMe,cAAP,EAAuB6E,QAAvB,CAAP,CADzB,EACmE;AAC/D,WAAKF,eAAL;AACH;AACJ,GALD;;AAMAzE,EAAAA,YAAY,CAACQ,SAAb,CAAuB0G,2BAAvB,GAAqD,YAAY;AAC7D,QAAK,KAAKjH,MAAL,CAAY+B,UAAZ,CAAuBC,MAAvB,KAAkC,CAAChD,OAAO,CAAC4E,QAAT,IAAqBlE,SAAS,EAAhE,CAAD,IACG,CAACX,iBAAiB,CAACD,MAAM,CAAC,MAAMe,cAAP,EAAuB6E,QAAvB,CAAP,CADzB,EACmE;AAC/D,WAAKF,eAAL;AACH;AACJ,GALD;;AAMAzE,EAAAA,YAAY,CAACQ,SAAb,CAAuB2G,YAAvB,GAAsC,UAAU5E,CAAV,EAAa;AAC/C,QAAI,KAAKtC,MAAL,CAAY+B,UAAZ,CAAuBC,MAAvB,IAAiC,CAAChD,OAAO,CAAC4E,QAA9C,EAAwD;AACpD,UAAI,KAAK5D,MAAL,CAAY+B,UAAZ,CAAuBE,WAA3B,EAAwC;AACpC;AACH;;AACD,UAAImD,IAAI,GAAG9C,CAAC,CAAC8C,IAAb;AACA,WAAKP,QAAL,CAAc,KAAKoB,OAAnB,EAA4B,KAAKI,OAAjC,EAA0CjB,IAAI,CAACjB,MAA/C;AACH;AACJ,GARD;;AASApE,EAAAA,YAAY,CAACQ,SAAb,CAAuB6B,sBAAvB,GAAgD,UAAUE,CAAV,EAAa;AACzD,QAAIwC,KAAK,GAAG,IAAZ;;AACAC,IAAAA,YAAY,CAAC,KAAKC,SAAN,CAAZ;AACA,SAAKA,SAAL,GAAiBC,MAAM,CAACC,UAAP,CAAkB,YAAY;AAC3CJ,MAAAA,KAAK,CAACqC,iBAAN,CAAwB7E,CAAxB;AACH,KAFgB,EAEd,IAFc,CAAjB;AAGH,GAND;;AAOAvC,EAAAA,YAAY,CAACQ,SAAb,CAAuB4G,iBAAvB,GAA2C,UAAU7E,CAAV,EAAa;AACpD,QAAI,CAACvD,iBAAiB,CAACD,MAAM,CAAC,MAAMe,cAAP,EAAuB6E,QAAQ,CAACC,IAAhC,CAAP,CAAtB,EAAqE;AACjE;AACH;;AACD,QAAIyC,SAAS,GAAG,KAAKxF,eAAL,CAAqBO,WAArB,GAAmCkF,YAAnC,EAAhB;;AACA,QAAI,CAACD,SAAS,CAACE,WAAf,EAA4B;AACxB,WAAKnC,cAAL,CAAoB;AAAEC,QAAAA,IAAI,EAAE9C;AAAR,OAApB;AACH;AACJ,GARD;AASA;AACJ;AACA;AACA;AACA;AACA;;;AAEIvC,EAAAA,YAAY,CAACQ,SAAb,CAAuBgH,oBAAvB,GAA8C,YAAY;AACtD,WAAO,KAAK1D,WAAL,IAAoB,KAAKA,WAAL,CAAiB2D,YAA5C;AACH,GAFD;AAGA;AACJ;AACA;AACA;AACA;AACA;AACA;;;AAEIzH,EAAAA,YAAY,CAACQ,SAAb,CAAuBkH,OAAvB,GAAiC,YAAY;AACzC,QAAI,KAAK5E,SAAT,EAAoB;AAChB1D,MAAAA,YAAY,CAACuI,MAAb,CAAoB,KAAK7E,SAAL,CAAea,OAAnC,EAA4C,WAA5C,EAAyD,KAAKrB,WAA9D;AACAlD,MAAAA,YAAY,CAACuI,MAAb,CAAoB,KAAK7E,SAAL,CAAea,OAAnC,EAA4C,OAA5C,EAAqD,KAAKjB,OAA1D;AACA,WAAKI,SAAL,CAAe4E,OAAf;AACH;;AACD,QAAI,KAAK1E,SAAT,EAAoB;AAChB5D,MAAAA,YAAY,CAACuI,MAAb,CAAoB,KAAK3E,SAAL,CAAeW,OAAnC,EAA4C,WAA5C,EAAyD,KAAKrB,WAA9D;AACAlD,MAAAA,YAAY,CAACuI,MAAb,CAAoB,KAAK3E,SAAL,CAAeW,OAAnC,EAA4C,OAA5C,EAAqD,KAAKjB,OAA1D;AACA,WAAKM,SAAL,CAAe0E,OAAf;AACH;;AACD,QAAI,KAAK3E,UAAT,EAAqB;AACjB3D,MAAAA,YAAY,CAACuI,MAAb,CAAoB,KAAK5E,UAAL,CAAgBY,OAApC,EAA6C,WAA7C,EAA0D,KAAKrB,WAA/D;AACAlD,MAAAA,YAAY,CAACuI,MAAb,CAAoB,KAAK5E,UAAL,CAAgBY,OAApC,EAA6C,OAA7C,EAAsD,KAAKjB,OAA3D;AACA,WAAKK,UAAL,CAAgB2E,OAAhB;AACH;;AACD,QAAI,KAAKzE,UAAT,EAAqB;AACjB7D,MAAAA,YAAY,CAACuI,MAAb,CAAoB,KAAK1E,UAAL,CAAgBU,OAApC,EAA6C,WAA7C,EAA0D,KAAKrB,WAA/D;AACAlD,MAAAA,YAAY,CAACuI,MAAb,CAAoB,KAAK1E,UAAL,CAAgBU,OAApC,EAA6C,OAA7C,EAAsD,KAAKjB,OAA3D;AACA,WAAKO,UAAL,CAAgByE,OAAhB;AACH;;AACD,QAAI,KAAK5D,WAAT,EAAsB;AAClB1E,MAAAA,YAAY,CAACuI,MAAb,CAAoB,KAAK7D,WAAL,CAAiBH,OAArC,EAA8C,WAA9C,EAA2D,KAAKrB,WAAhE;AACAlD,MAAAA,YAAY,CAACuI,MAAb,CAAoB,KAAK7D,WAAL,CAAiBH,OAArC,EAA8C,OAA9C,EAAuD,KAAKjB,OAA5D;;AACA,UAAI/C,SAAS,EAAb,EAAiB;AACbP,QAAAA,YAAY,CAACuI,MAAb,CAAoBhD,QAApB,EAA8B,iBAA9B,EAAiD,KAAKtC,sBAAtD;AACH;;AACD,WAAKyB,WAAL,CAAiB4D,OAAjB;AACH;;AACD,SAAKE,mBAAL;AACH,GA9BD;;AA+BA5H,EAAAA,YAAY,CAACQ,SAAb,CAAuBqH,qBAAvB,GAA+C,YAAY;AACvD,SAAK5H,MAAL,CAAY6H,EAAZ,CAAetI,MAAM,CAACuI,OAAtB,EAA+B,KAAK3C,cAApC,EAAoD,IAApD;AACA,SAAKnF,MAAL,CAAY6H,EAAZ,CAAetI,MAAM,CAACwI,SAAtB,EAAiC,KAAKd,2BAAtC,EAAmE,IAAnE;AACA,SAAKjH,MAAL,CAAY6H,EAAZ,CAAetI,MAAM,CAACyI,OAAtB,EAA+B,KAAKhB,cAApC,EAAoD,IAApD;AACA,SAAKhH,MAAL,CAAY6H,EAAZ,CAAetI,MAAM,CAAC0I,KAAtB,EAA6B,KAAKf,YAAlC,EAAgD,IAAhD;AACA,SAAKlH,MAAL,CAAY6H,EAAZ,CAAetI,MAAM,CAAC2I,mBAAtB,EAA2C,KAAK/C,cAAhD,EAAgE,IAAhE;AACA,SAAKnF,MAAL,CAAY6H,EAAZ,CAAetI,MAAM,CAAC4I,mBAAtB,EAA2C,KAAKxE,wBAAhD,EAA0E,IAA1E;AACH,GAPD;;AAQA5D,EAAAA,YAAY,CAACQ,SAAb,CAAuB6H,uBAAvB,GAAiD,YAAY;AACzD,SAAKpI,MAAL,CAAYqI,GAAZ,CAAgB9I,MAAM,CAACuI,OAAvB,EAAgC,KAAK3C,cAArC;AACA,SAAKnF,MAAL,CAAYqI,GAAZ,CAAgB9I,MAAM,CAACwI,SAAvB,EAAkC,KAAKd,2BAAvC;AACA,SAAKjH,MAAL,CAAYqI,GAAZ,CAAgB9I,MAAM,CAACyI,OAAvB,EAAgC,KAAKhB,cAArC;AACA,SAAKhH,MAAL,CAAYqI,GAAZ,CAAgB9I,MAAM,CAAC0I,KAAvB,EAA8B,KAAKf,YAAnC;AACA,SAAKlH,MAAL,CAAYqI,GAAZ,CAAgB9I,MAAM,CAAC2I,mBAAvB,EAA4C,KAAK/C,cAAjD;AACA,SAAKnF,MAAL,CAAYqI,GAAZ,CAAgB9I,MAAM,CAAC4I,mBAAvB,EAA4C,KAAKxE,wBAAjD;AACH,GAPD,CA/S0C,CAuT1C;;;AACA5D,EAAAA,YAAY,CAACQ,SAAb,CAAuB+H,cAAvB,GAAwC,UAAUlD,IAAV,EAAgB;AACpD,QAAI,KAAKvC,SAAL,IAAkB,CAACpD,QAAQ,CAAC,KAAKoD,SAAL,CAAea,OAAhB,EAAyB,eAAzB,CAA/B,EAA0E;AACtE,WAAKb,SAAL,CAAe4B,SAAf;AACH;;AACD,QAAI,KAAK3B,UAAL,IAAmB,CAACrD,QAAQ,CAAC,KAAKqD,UAAL,CAAgBY,OAAjB,EAA0B,eAA1B,CAAhC,EAA4E;AACxE,WAAKZ,UAAL,CAAgB2B,SAAhB;AACH;;AACD,QAAI,KAAKzB,UAAL,IAAmB,CAACvD,QAAQ,CAAC,KAAKuD,UAAL,CAAgBU,OAAjB,EAA0B,eAA1B,CAAhC,EAA4E;AACxE,WAAKV,UAAL,CAAgByB,SAAhB;AACH;AACJ,GAVD;AAWA;AACJ;AACA;AACA;AACA;AACA;;;AAEI1E,EAAAA,YAAY,CAACQ,SAAb,CAAuBD,gBAAvB,GAA0C,YAAY;AAClD,QAAI,KAAKN,MAAL,CAAYuI,WAAhB,EAA6B;AACzB;AACH;;AACD,SAAKvI,MAAL,CAAY6H,EAAZ,CAAetI,MAAM,CAACiJ,UAAtB,EAAkC,KAAK9G,uBAAvC,EAAgE,IAAhE;AACA,SAAK1B,MAAL,CAAY6H,EAAZ,CAAetI,MAAM,CAACwI,SAAtB,EAAiC,KAAKnF,mBAAtC,EAA2D,IAA3D;AACA,SAAK5C,MAAL,CAAY6H,EAAZ,CAAetI,MAAM,CAAC+I,cAAtB,EAAsC,KAAKA,cAA3C,EAA2D,IAA3D;AACA,SAAKtI,MAAL,CAAY6H,EAAZ,CAAetI,MAAM,CAACkJ,IAAtB,EAA4B,KAAK7F,mBAAjC,EAAsD,IAAtD;AACA,SAAKgF,qBAAL;AACA,SAAK5H,MAAL,CAAY6H,EAAZ,CAAetI,MAAM,CAACmJ,YAAtB,EAAoC,KAAKC,iBAAzC,EAA4D,IAA5D;;AACA,QAAI,KAAK3I,MAAL,CAAYiD,oBAAZ,CAAiC2F,cAAjC,KAAoD,MAAxD,EAAgE;AAC5D,WAAK5I,MAAL,CAAY6H,EAAZ,CAAetI,MAAM,CAACsJ,MAAtB,EAA8B,KAAKlG,iBAAnC,EAAsD,IAAtD;AACA,WAAK3C,MAAL,CAAY6H,EAAZ,CAAetI,MAAM,CAACuJ,aAAtB,EAAqC,KAAKnG,iBAA1C,EAA6D,IAA7D;AACH;;AACD,SAAK3C,MAAL,CAAY6H,EAAZ,CAAetI,MAAM,CAACwJ,WAAtB,EAAmC,KAAKpG,iBAAxC,EAA2D,IAA3D;AACA,SAAK3C,MAAL,CAAY6H,EAAZ,CAAetI,MAAM,CAACyJ,eAAtB,EAAuC,KAAKC,iBAA5C,EAA+D,IAA/D;AACA,SAAKjJ,MAAL,CAAY6H,EAAZ,CAAetI,MAAM,CAACkI,OAAtB,EAA+B,KAAKA,OAApC,EAA6C,IAA7C;AACA,SAAKzH,MAAL,CAAY6H,EAAZ,CAAetI,MAAM,CAACyI,OAAtB,EAA+B,KAAKkB,SAApC,EAA+C,IAA/C;AACA,SAAKlJ,MAAL,CAAY6H,EAAZ,CAAetI,MAAM,CAAC4J,OAAtB,EAA+B,KAAKC,MAApC,EAA4C,IAA5C;AACH,GAnBD;;AAoBArJ,EAAAA,YAAY,CAACQ,SAAb,CAAuB2I,SAAvB,GAAmC,UAAU5G,CAAV,EAAa;AAC5C,QAAI8C,IAAI,GAAG9C,CAAC,CAAC8C,IAAb;;AACA,QAAIA,IAAI,CAAC1C,KAAL,KAAe,CAAf,IAAoB0C,IAAI,CAAC1C,KAAL,KAAe,EAAvC,EAA2C;AACvC,UAAI,KAAKI,UAAL,IAAmB,CAACrD,QAAQ,CAAC,KAAKqD,UAAL,CAAgBY,OAAjB,EAA0B,eAA1B,CAAhC,EAA4E;AACxE,aAAKZ,UAAL,CAAgB2B,SAAhB;AACH;AACJ;AACJ,GAPD;;AAQA1E,EAAAA,YAAY,CAACQ,SAAb,CAAuB0I,iBAAvB,GAA2C,YAAY;AACnD,SAAKtG,iBAAL;AACA,SAAK6B,eAAL;AACH,GAHD;;AAIAzE,EAAAA,YAAY,CAACQ,SAAb,CAAuB6I,MAAvB,GAAgC,UAAUhE,IAAV,EAAgB;AAC5C,QAAI,KAAKvB,WAAT,EAAsB;AAClB,WAAKA,WAAL,CAAiB2D,YAAjB,CAA8B6B,UAA9B,CAAyCC,aAAzC,CAAuD;AAAEC,QAAAA,SAAS,EAAEnE,IAAI,CAACmE;AAAlB,OAAvD;AACH;;AACD,QAAI,KAAKzG,UAAT,EAAqB;AACjB,WAAKA,UAAL,CAAgB0E,YAAhB,CAA6B6B,UAA7B,CAAwCC,aAAxC,CAAsD;AAAEC,QAAAA,SAAS,EAAEnE,IAAI,CAACmE;AAAlB,OAAtD;AACH;;AACD,QAAI,KAAK1G,SAAT,EAAoB;AAChB,WAAKC,UAAL,CAAgB0E,YAAhB,CAA6B6B,UAA7B,CAAwCC,aAAxC,CAAsD;AAAEC,QAAAA,SAAS,EAAEnE,IAAI,CAACmE;AAAlB,OAAtD;AACH;AACJ,GAVD;AAWA;AACJ;AACA;AACA;AACA;AACA;;;AAEIxJ,EAAAA,YAAY,CAACQ,SAAb,CAAuBoH,mBAAvB,GAA6C,YAAY;AACrD,QAAI,KAAK3H,MAAL,CAAYuI,WAAhB,EAA6B;AACzB;AACH;;AACD,SAAKvI,MAAL,CAAYqI,GAAZ,CAAgB9I,MAAM,CAACiJ,UAAvB,EAAmC,KAAK9G,uBAAxC;AACA,SAAK1B,MAAL,CAAYqI,GAAZ,CAAgB9I,MAAM,CAACwI,SAAvB,EAAkC,KAAKnF,mBAAvC;AACA,SAAK5C,MAAL,CAAYqI,GAAZ,CAAgB9I,MAAM,CAAC+I,cAAvB,EAAuC,KAAKA,cAA5C;AACA,SAAKtI,MAAL,CAAYqI,GAAZ,CAAgB9I,MAAM,CAACkJ,IAAvB,EAA6B,KAAK7F,mBAAlC;AACA,SAAKwF,uBAAL;AACA,SAAKpI,MAAL,CAAYqI,GAAZ,CAAgB9I,MAAM,CAACmJ,YAAvB,EAAqC,KAAKC,iBAA1C;;AACA,QAAI,KAAK3I,MAAL,CAAYiD,oBAAZ,CAAiC2F,cAAjC,KAAoD,MAAxD,EAAgE;AAC5D,WAAK5I,MAAL,CAAYqI,GAAZ,CAAgB9I,MAAM,CAACsJ,MAAvB,EAA+B,KAAKlG,iBAApC;AACA,WAAK3C,MAAL,CAAYqI,GAAZ,CAAgB9I,MAAM,CAACuJ,aAAvB,EAAsC,KAAKnG,iBAA3C;AACH;;AACD,SAAK3C,MAAL,CAAYqI,GAAZ,CAAgB9I,MAAM,CAACwJ,WAAvB,EAAoC,KAAKpG,iBAAzC;AACA,SAAK3C,MAAL,CAAYqI,GAAZ,CAAgB9I,MAAM,CAACkI,OAAvB,EAAgC,KAAKA,OAArC;AACA,SAAKzH,MAAL,CAAYqI,GAAZ,CAAgB9I,MAAM,CAACyJ,eAAvB,EAAwC,KAAKC,iBAA7C;AACA,SAAKjJ,MAAL,CAAYqI,GAAZ,CAAgB9I,MAAM,CAACyI,OAAvB,EAAgC,KAAKkB,SAArC;AACA,SAAKlJ,MAAL,CAAYqI,GAAZ,CAAgB9I,MAAM,CAAC4J,OAAvB,EAAgC,KAAKC,MAArC;AACH,GAnBD;AAoBA;AACJ;AACA;AACA;AACA;AACA;AACA;;;AAEIrJ,EAAAA,YAAY,CAACQ,SAAb,CAAuBoI,iBAAvB,GAA2C,UAAUrG,CAAV,EAAa;AACpD,QAAI,CAACvD,iBAAiB,CAACuD,CAAC,CAACkH,OAAF,CAAUvG,oBAAX,CAAtB,EAAwD;AACpD,WAAK,IAAIwG,EAAE,GAAG,CAAT,EAAYC,EAAE,GAAGC,MAAM,CAACC,IAAP,CAAYtH,CAAC,CAACkH,OAAF,CAAUvG,oBAAtB,CAAtB,EAAmEwG,EAAE,GAAGC,EAAE,CAACnI,MAA3E,EAAmFkI,EAAE,EAArF,EAAyF;AACrF,YAAII,IAAI,GAAGH,EAAE,CAACD,EAAD,CAAb;;AACA,gBAAQI,IAAR;AACI,eAAK,gBAAL;AACI,gBAAIvH,CAAC,CAACkH,OAAF,CAAUvG,oBAAV,CAA+B2F,cAA/B,KAAkD,MAAtD,EAA8D;AAC1D,mBAAK5I,MAAL,CAAYqI,GAAZ,CAAgB9I,MAAM,CAACsJ,MAAvB,EAA+B,KAAKlG,iBAApC;AACA,mBAAK3C,MAAL,CAAYqI,GAAZ,CAAgB9I,MAAM,CAACuJ,aAAvB,EAAsC,KAAKnG,iBAA3C;AACH,aAHD,MAIK;AACD,mBAAK3C,MAAL,CAAY6H,EAAZ,CAAetI,MAAM,CAACsJ,MAAtB,EAA8B,KAAKlG,iBAAnC,EAAsD,IAAtD;AACA,mBAAK3C,MAAL,CAAY6H,EAAZ,CAAetI,MAAM,CAACuJ,aAAtB,EAAqC,KAAKnG,iBAA1C,EAA6D,IAA7D;AACH;;AACD;AAVR;AAYH;AACJ;;AACD,QAAIL,CAAC,CAACwH,MAAF,KAAa,KAAKC,aAAL,EAAjB,EAAuC;AACnC;AACH;;AACD,QAAI,KAAKlG,WAAT,EAAsB;AAClB3E,MAAAA,WAAW,CAAC,CAAC,KAAKc,MAAL,CAAY0D,OAAb,CAAD,EAAwB,CAAC5D,UAAD,CAAxB,CAAX;AACA,WAAKsI,uBAAL;AACA,WAAK5D,eAAL;AACH;;AACD,QAAI,KAAKxE,MAAL,CAAY+B,UAAZ,CAAuBC,MAAvB,KAAkC,CAAChD,OAAO,CAAC4E,QAAT,IAAqBlE,SAAS,EAAhE,CAAJ,EAAyE;AACrET,MAAAA,QAAQ,CAAC,CAAC,KAAKe,MAAL,CAAY0D,OAAb,CAAD,EAAwB,CAAC5D,UAAD,CAAxB,CAAR;AACA,WAAK8H,qBAAL;AACH;AACJ,GA9BD;AA+BA;AACJ;AACA;AACA;AACA;AACA;;;AACI7H,EAAAA,YAAY,CAACQ,SAAb,CAAuBwJ,aAAvB,GAAuC,YAAY;AAC/C,WAAO,cAAP;AACH,GAFD;;AAGA,SAAOhK,YAAP;AACH,CAjciC,EAAlC;;AAkcA,SAASA,YAAT","sourcesContent":["import { select, isNullOrUndefined, Browser, addClass, removeClass, EventHandler, closest, isNullOrUndefined as isNOU } from '@syncfusion/ej2-base';\nimport { RenderType } from '../base/enum';\nimport * as events from '../base/constant';\nimport { pageYOffset, hasClass, isIDevice } from '../base/util';\nimport { BaseQuickToolbar } from './base-quick-toolbar';\nimport { PopupRenderer } from '../renderer/popup-renderer';\nimport { CLS_INLINE_POP, CLS_INLINE } from '../base/classes';\n/**\n * `Quick toolbar` module is used to handle Quick toolbar actions.\n */\nvar QuickToolbar = /** @class */ (function () {\n    function QuickToolbar(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.renderFactory = this.locator.getService('rendererFactory');\n        this.renderFactory.addRenderer(RenderType.Popup, new PopupRenderer(this.parent));\n        this.addEventListener();\n    }\n    QuickToolbar.prototype.formatItems = function (items) {\n        var formattedItems = [];\n        items.forEach(function (item) {\n            if (typeof item === 'string') {\n                switch (item.toLocaleLowerCase()) {\n                    case 'open':\n                        formattedItems.push('openLink');\n                        break;\n                    case 'edit':\n                        formattedItems.push('editLink');\n                        break;\n                    case 'unlink':\n                        formattedItems.push('removeLink');\n                        break;\n                    default:\n                        formattedItems.push(item);\n                        break;\n                }\n            }\n            else {\n                formattedItems.push(item);\n            }\n        });\n        return formattedItems;\n    };\n    QuickToolbar.prototype.getQTBarOptions = function (popType, mode, items, type) {\n        return {\n            popupType: popType,\n            toolbarItems: items,\n            mode: mode,\n            renderType: type\n        };\n    };\n    /**\n     * createQTBar method\n     *\n     * @param {string} popupType - specifies the string value\n     * @param {string} mode - specifies the string value.\n     * @param {string} items - specifies the string.\n     * @param {RenderType} type - specifies the render type.\n     * @returns {BaseQuickToolbar} - specifies the quick toolbar\n     * @hidden\n\n     */\n    QuickToolbar.prototype.createQTBar = function (popupType, mode, items, type) {\n        if (items.length < 1) {\n            return null;\n        }\n        var qTBar = new BaseQuickToolbar(this.parent, this.locator);\n        qTBar.render(this.getQTBarOptions(popupType, mode, this.formatItems(items), type));\n        return qTBar;\n    };\n    QuickToolbar.prototype.initializeQuickToolbars = function () {\n        this.parent.quickToolbarModule = this;\n        this.contentRenderer = this.renderFactory.getRenderer(RenderType.Content);\n        if (this.parent.inlineMode.enable && this.parent.inlineMode.onSelection && isIDevice()) {\n            EventHandler.add(this.contentRenderer.getDocument(), 'selectionchange', this.selectionChangeHandler, this);\n        }\n    };\n    // eslint-disable-next-line\n    QuickToolbar.prototype.onMouseDown = function (e) {\n        this.parent.isBlur = false;\n        this.parent.isRTE = true;\n    };\n    QuickToolbar.prototype.keyUpQT = function (e) {\n        if (e.which == 27) {\n            this.hideQuickToolbars();\n        }\n    };\n    QuickToolbar.prototype.renderQuickToolbars = function () {\n        if (this.linkQTBar || this.imageQTBar || this.textQTBar || this.tableQTBar) {\n            return;\n        }\n        this.linkQTBar = this.createQTBar('Link', 'Scrollable', this.parent.quickToolbarSettings.link, RenderType.LinkToolbar);\n        this.renderFactory.addRenderer(RenderType.LinkToolbar, this.linkQTBar);\n        this.textQTBar = this.createQTBar('Text', 'Scrollable', this.parent.quickToolbarSettings.text, RenderType.TextToolbar);\n        this.renderFactory.addRenderer(RenderType.TextToolbar, this.textQTBar);\n        this.imageQTBar = this.createQTBar('Image', 'MultiRow', this.parent.quickToolbarSettings.image, RenderType.ImageToolbar);\n        this.renderFactory.addRenderer(RenderType.ImageToolbar, this.imageQTBar);\n        this.tableQTBar = this.createQTBar('Table', 'MultiRow', this.parent.quickToolbarSettings.table, RenderType.TableToolbar);\n        this.renderFactory.addRenderer(RenderType.TableToolbar, this.tableQTBar);\n        if (this.linkQTBar) {\n            EventHandler.add(this.linkQTBar.element, 'mousedown', this.onMouseDown, this);\n            EventHandler.add(this.linkQTBar.element, 'keyup', this.keyUpQT, this);\n        }\n        if (this.imageQTBar) {\n            EventHandler.add(this.imageQTBar.element, 'mousedown', this.onMouseDown, this);\n            EventHandler.add(this.imageQTBar.element, 'keyup', this.keyUpQT, this);\n        }\n        if (this.textQTBar) {\n            EventHandler.add(this.textQTBar.element, 'mousedown', this.onMouseDown, this);\n            EventHandler.add(this.textQTBar.element, 'keyup', this.keyUpQT, this);\n        }\n        if (this.tableQTBar) {\n            EventHandler.add(this.tableQTBar.element, 'mousedown', this.onMouseDown, this);\n            EventHandler.add(this.tableQTBar.element, 'keyup', this.keyUpQT, this);\n        }\n    };\n    QuickToolbar.prototype.renderInlineQuickToolbar = function () {\n        if (this.parent.inlineMode.enable && (!Browser.isDevice || isIDevice())) {\n            addClass([this.parent.element], [CLS_INLINE]);\n            this.inlineQTBar = this.createQTBar('Inline', 'MultiRow', this.parent.toolbarSettings.items, RenderType.InlineToolbar);\n            this.renderFactory.addRenderer(RenderType.InlineToolbar, this.inlineQTBar);\n            EventHandler.add(this.inlineQTBar.element, 'mousedown', this.onMouseDown, this);\n            EventHandler.add(this.inlineQTBar.element, 'keyup', this.keyUpQT, this);\n        }\n    };\n    /**\n     * Method for showing the inline quick toolbar\n     *\n     * @param {number} x -specifies the value of x.\n     * @param {number} y - specifies the y valu.\n     * @param {HTMLElement} target - specifies the target element.\n     * @returns {void}\n     * @hidden\n\n     */\n    QuickToolbar.prototype.showInlineQTBar = function (x, y, target) {\n        if (this.parent.readonly || target.tagName.toLowerCase() === \"img\") {\n            return;\n        }\n        this.inlineQTBar.showPopup(x, y, target);\n    };\n    /**\n     * Method for hidding the inline quick toolbar\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    QuickToolbar.prototype.hideInlineQTBar = function () {\n        if (this.inlineQTBar && !hasClass(this.inlineQTBar.element, 'e-popup-close')) {\n            this.inlineQTBar.hidePopup();\n        }\n    };\n    /**\n     * Method for hidding the quick toolbar\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    QuickToolbar.prototype.hideQuickToolbars = function () {\n        if (this.linkQTBar && !hasClass(this.linkQTBar.element, 'e-popup-close') && document.body.contains(this.linkQTBar.element)) {\n            this.linkQTBar.hidePopup();\n        }\n        if (this.textQTBar && !hasClass(this.textQTBar.element, 'e-popup-close') && document.body.contains(this.textQTBar.element)) {\n            this.textQTBar.hidePopup();\n        }\n        if (this.imageQTBar && !hasClass(this.imageQTBar.element, 'e-popup-close') && document.body.contains(this.imageQTBar.element)) {\n            this.imageQTBar.hidePopup();\n        }\n        if (this.tableQTBar && !hasClass(this.tableQTBar.element, 'e-popup-close') && document.body.contains(this.tableQTBar.element)) {\n            this.tableQTBar.hidePopup();\n        }\n        if (this.parent.inlineMode.enable && (!Browser.isDevice || isIDevice())) {\n            this.hideInlineQTBar();\n        }\n    };\n    QuickToolbar.prototype.deBounce = function (x, y, target) {\n        var _this = this;\n        clearTimeout(this.deBouncer);\n        this.deBouncer = window.setTimeout(function () {\n            _this.showInlineQTBar(x, y, target);\n        }, 1000);\n    };\n    QuickToolbar.prototype.mouseUpHandler = function (e) {\n        if (this.parent.inlineMode.enable && (!Browser.isDevice || isIDevice())) {\n            var args = e.args.touches ?\n                e.args.changedTouches[0] : e.args;\n            var range = this.parent.getRange();\n            var target = e.args.target;\n            if (isNullOrUndefined(select('.' + CLS_INLINE_POP, document.body))) {\n                if (isIDevice() && e.touchData && e.touchData.prevClientX !== e.touchData.clientX\n                    && e.touchData.prevClientY !== e.touchData.clientY) {\n                    return;\n                }\n                this.hideInlineQTBar();\n                var parentLeft = this.parent.element.getBoundingClientRect().left;\n                this.offsetX = this.parent.iframeSettings.enable ? window.pageXOffset + parentLeft + args.clientX : args.pageX;\n                this.offsetY = pageYOffset(args, this.parent.element, this.parent.iframeSettings.enable);\n                if (target.nodeName === 'TEXTAREA') {\n                    this.showInlineQTBar(this.offsetX, this.offsetY, target);\n                }\n                else {\n                    var closestAnchor = closest(target, 'a');\n                    target = closestAnchor ? closestAnchor : target;\n                    var startNode = this.parent.getRange().startContainer.parentElement;\n                    var endNode = this.parent.getRange().endContainer.parentElement;\n                    if ((isNOU(closest(startNode, 'A')) || isNOU(closest(endNode, 'A'))) && (!closest(target, 'td,th') || !range.collapsed) &&\n                        (target.tagName !== 'IMG' || this.parent.getRange().startOffset !== this.parent.getRange().endOffset)) {\n                        if (this.parent.inlineMode.onSelection && range.collapsed) {\n                            return;\n                        }\n                        this.target = target;\n                        this.showInlineQTBar(this.offsetX, this.offsetY, target);\n                    }\n                }\n            }\n        }\n    };\n    QuickToolbar.prototype.keyDownHandler = function () {\n        if ((this.parent.inlineMode.enable && (!Browser.isDevice || isIDevice()))\n            && !isNullOrUndefined(select('.' + CLS_INLINE_POP, document))) {\n            this.hideInlineQTBar();\n        }\n    };\n    QuickToolbar.prototype.inlineQTBarMouseDownHandler = function () {\n        if ((this.parent.inlineMode.enable && (!Browser.isDevice || isIDevice()))\n            && !isNullOrUndefined(select('.' + CLS_INLINE_POP, document))) {\n            this.hideInlineQTBar();\n        }\n    };\n    QuickToolbar.prototype.keyUpHandler = function (e) {\n        if (this.parent.inlineMode.enable && !Browser.isDevice) {\n            if (this.parent.inlineMode.onSelection) {\n                return;\n            }\n            var args = e.args;\n            this.deBounce(this.offsetX, this.offsetY, args.target);\n        }\n    };\n    QuickToolbar.prototype.selectionChangeHandler = function (e) {\n        var _this = this;\n        clearTimeout(this.deBouncer);\n        this.deBouncer = window.setTimeout(function () {\n            _this.onSelectionChange(e);\n        }, 1000);\n    };\n    QuickToolbar.prototype.onSelectionChange = function (e) {\n        if (!isNullOrUndefined(select('.' + CLS_INLINE_POP, document.body))) {\n            return;\n        }\n        var selection = this.contentRenderer.getDocument().getSelection();\n        if (!selection.isCollapsed) {\n            this.mouseUpHandler({ args: e });\n        }\n    };\n    /**\n     * getInlineBaseToolbar method\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    QuickToolbar.prototype.getInlineBaseToolbar = function () {\n        return this.inlineQTBar && this.inlineQTBar.quickTBarObj;\n    };\n    /**\n     * Destroys the ToolBar.\n     *\n     * @function destroy\n     * @returns {void}\n     * @hidden\n\n     */\n    QuickToolbar.prototype.destroy = function () {\n        if (this.linkQTBar) {\n            EventHandler.remove(this.linkQTBar.element, 'mousedown', this.onMouseDown);\n            EventHandler.remove(this.linkQTBar.element, 'keyup', this.keyUpQT);\n            this.linkQTBar.destroy();\n        }\n        if (this.textQTBar) {\n            EventHandler.remove(this.textQTBar.element, 'mousedown', this.onMouseDown);\n            EventHandler.remove(this.textQTBar.element, 'keyup', this.keyUpQT);\n            this.textQTBar.destroy();\n        }\n        if (this.imageQTBar) {\n            EventHandler.remove(this.imageQTBar.element, 'mousedown', this.onMouseDown);\n            EventHandler.remove(this.imageQTBar.element, 'keyup', this.keyUpQT);\n            this.imageQTBar.destroy();\n        }\n        if (this.tableQTBar) {\n            EventHandler.remove(this.tableQTBar.element, 'mousedown', this.onMouseDown);\n            EventHandler.remove(this.tableQTBar.element, 'keyup', this.keyUpQT);\n            this.tableQTBar.destroy();\n        }\n        if (this.inlineQTBar) {\n            EventHandler.remove(this.inlineQTBar.element, 'mousedown', this.onMouseDown);\n            EventHandler.remove(this.inlineQTBar.element, 'keyup', this.keyUpQT);\n            if (isIDevice()) {\n                EventHandler.remove(document, 'selectionchange', this.selectionChangeHandler);\n            }\n            this.inlineQTBar.destroy();\n        }\n        this.removeEventListener();\n    };\n    QuickToolbar.prototype.wireInlineQTBarEvents = function () {\n        this.parent.on(events.mouseUp, this.mouseUpHandler, this);\n        this.parent.on(events.mouseDown, this.inlineQTBarMouseDownHandler, this);\n        this.parent.on(events.keyDown, this.keyDownHandler, this);\n        this.parent.on(events.keyUp, this.keyUpHandler, this);\n        this.parent.on(events.sourceCodeMouseDown, this.mouseUpHandler, this);\n        this.parent.on(events.renderInlineToolbar, this.renderInlineQuickToolbar, this);\n    };\n    QuickToolbar.prototype.unWireInlineQTBarEvents = function () {\n        this.parent.off(events.mouseUp, this.mouseUpHandler);\n        this.parent.off(events.mouseDown, this.inlineQTBarMouseDownHandler);\n        this.parent.off(events.keyDown, this.keyDownHandler);\n        this.parent.off(events.keyUp, this.keyUpHandler);\n        this.parent.off(events.sourceCodeMouseDown, this.mouseUpHandler);\n        this.parent.off(events.renderInlineToolbar, this.renderInlineQuickToolbar);\n    };\n    // eslint-disable-next-line\n    QuickToolbar.prototype.toolbarUpdated = function (args) {\n        if (this.linkQTBar && !hasClass(this.linkQTBar.element, 'e-popup-close')) {\n            this.linkQTBar.hidePopup();\n        }\n        if (this.imageQTBar && !hasClass(this.imageQTBar.element, 'e-popup-close')) {\n            this.imageQTBar.hidePopup();\n        }\n        if (this.tableQTBar && !hasClass(this.tableQTBar.element, 'e-popup-close')) {\n            this.tableQTBar.hidePopup();\n        }\n    };\n    /**\n     * addEventListener\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    QuickToolbar.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialEnd, this.initializeQuickToolbars, this);\n        this.parent.on(events.mouseDown, this.renderQuickToolbars, this);\n        this.parent.on(events.toolbarUpdated, this.toolbarUpdated, this);\n        this.parent.on(events.drop, this.renderQuickToolbars, this);\n        this.wireInlineQTBarEvents();\n        this.parent.on(events.modelChanged, this.onPropertyChanged, this);\n        if (this.parent.quickToolbarSettings.actionOnScroll === 'hide') {\n            this.parent.on(events.scroll, this.hideQuickToolbars, this);\n            this.parent.on(events.contentscroll, this.hideQuickToolbars, this);\n        }\n        this.parent.on(events.focusChange, this.hideQuickToolbars, this);\n        this.parent.on(events.iframeMouseDown, this.onIframeMouseDown, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.keyDown, this.onKeyDown, this);\n        this.parent.on(events.rtlMode, this.setRtl, this);\n    };\n    QuickToolbar.prototype.onKeyDown = function (e) {\n        var args = e.args;\n        if (args.which === 8 || args.which === 46) {\n            if (this.imageQTBar && !hasClass(this.imageQTBar.element, 'e-popup-close')) {\n                this.imageQTBar.hidePopup();\n            }\n        }\n    };\n    QuickToolbar.prototype.onIframeMouseDown = function () {\n        this.hideQuickToolbars();\n        this.hideInlineQTBar();\n    };\n    QuickToolbar.prototype.setRtl = function (args) {\n        if (this.inlineQTBar) {\n            this.inlineQTBar.quickTBarObj.toolbarObj.setProperties({ enableRtl: args.enableRtl });\n        }\n        if (this.imageQTBar) {\n            this.imageQTBar.quickTBarObj.toolbarObj.setProperties({ enableRtl: args.enableRtl });\n        }\n        if (this.linkQTBar) {\n            this.imageQTBar.quickTBarObj.toolbarObj.setProperties({ enableRtl: args.enableRtl });\n        }\n    };\n    /**\n     * removeEventListener\n     *\n     * @returns {void}\n     * @hidden\n\n     */\n    QuickToolbar.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.initializeQuickToolbars);\n        this.parent.off(events.mouseDown, this.renderQuickToolbars);\n        this.parent.off(events.toolbarUpdated, this.toolbarUpdated);\n        this.parent.off(events.drop, this.renderQuickToolbars);\n        this.unWireInlineQTBarEvents();\n        this.parent.off(events.modelChanged, this.onPropertyChanged);\n        if (this.parent.quickToolbarSettings.actionOnScroll === 'hide') {\n            this.parent.off(events.scroll, this.hideQuickToolbars);\n            this.parent.off(events.contentscroll, this.hideQuickToolbars);\n        }\n        this.parent.off(events.focusChange, this.hideQuickToolbars);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.iframeMouseDown, this.onIframeMouseDown);\n        this.parent.off(events.keyDown, this.onKeyDown);\n        this.parent.off(events.rtlMode, this.setRtl);\n    };\n    /**\n     * Called internally if any of the property value changed.\n     *\n     * @param {RichTextEditorModel} e - specifies the element.\n     * @returns {void}\n     * @hidden\n\n     */\n    QuickToolbar.prototype.onPropertyChanged = function (e) {\n        if (!isNullOrUndefined(e.newProp.quickToolbarSettings)) {\n            for (var _i = 0, _a = Object.keys(e.newProp.quickToolbarSettings); _i < _a.length; _i++) {\n                var prop = _a[_i];\n                switch (prop) {\n                    case 'actionOnScroll':\n                        if (e.newProp.quickToolbarSettings.actionOnScroll === 'none') {\n                            this.parent.off(events.scroll, this.hideQuickToolbars);\n                            this.parent.off(events.contentscroll, this.hideQuickToolbars);\n                        }\n                        else {\n                            this.parent.on(events.scroll, this.hideQuickToolbars, this);\n                            this.parent.on(events.contentscroll, this.hideQuickToolbars, this);\n                        }\n                        break;\n                }\n            }\n        }\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        if (this.inlineQTBar) {\n            removeClass([this.parent.element], [CLS_INLINE]);\n            this.unWireInlineQTBarEvents();\n            this.hideInlineQTBar();\n        }\n        if (this.parent.inlineMode.enable && (!Browser.isDevice || isIDevice())) {\n            addClass([this.parent.element], [CLS_INLINE]);\n            this.wireInlineQTBarEvents();\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {void}\n     * @hidden\n     */\n    QuickToolbar.prototype.getModuleName = function () {\n        return 'quickToolbar';\n    };\n    return QuickToolbar;\n}());\nexport { QuickToolbar };\n"]},"metadata":{},"sourceType":"module"}