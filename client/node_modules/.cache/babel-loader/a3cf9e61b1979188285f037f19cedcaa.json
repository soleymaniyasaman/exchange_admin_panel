{"ast":null,"code":"var _jsxFileName = \"/Users/yasaman/Documents/moj_adminpanel/adminpanel/src/components/login/index.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport \"./style.css\";\nimport { Field, Formik, Form } from \"formik\";\nimport axios from \"axios\";\nimport { Button, CircularProgress } from \"@material-ui/core\";\nimport { AUTH_REFRESH, AUTH_LOGIN } from \"../../utils/constants\"; // import { useFetchApi } from '../../utils/hooks';\n\nimport { RefreshToken, removeToken, setToken } from '../../utils/utils';\nimport { useHistory } from 'react-router-dom';\nimport { UserContext } from '../../context/provider';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction Login(props) {\n  _s();\n\n  const contextData = React.useContext(UserContext);\n  const history = useHistory();\n  const [loginLoading, setLoginLoading] = React.useState(false);\n  const [refreshLoading, setRefreshLoading] = React.useState(true);\n  const [hasError, setHasError] = React.useState('');\n\n  const setUserToken = values => {\n    setToken(values);\n    contextData.setIsLoggedIn(true);\n    setTimeout(() => history.push('/users'), 1000);\n  };\n\n  const checkUserRefreshToken = refreshToken => {\n    let payload = {\n      token: refreshToken\n    };\n    axios.post(AUTH_REFRESH, payload).then(res => res.data).then(result => {\n      if (result.status_code === 200) {\n        setUserToken(result.result);\n      }\n    }).catch(err => {\n      console.log(err);\n      setRefreshLoading(false);\n      removeToken();\n      contextData.setIsLoggedIn(false);\n    });\n  };\n\n  React.useEffect(() => {\n    let refreshToken = RefreshToken();\n\n    if (refreshToken) {\n      checkUserRefreshToken(refreshToken);\n    } else {\n      setRefreshLoading(false);\n    }\n  }, []);\n\n  const handleSubmit = values => {\n    setHasError('');\n    let payload = { ...values,\n      user_agent: window.navigator.userAgent,\n      client_host: \"local\"\n    };\n    setLoginLoading(true);\n    axios.post(AUTH_LOGIN, payload).then(res => res.data).then(result => {\n      if (result.status_code === 200) {\n        setUserToken(result.result);\n        setLoginLoading(false);\n      }\n    }).catch(err => {\n      var _err$response, _err$response$data;\n\n      setLoginLoading(false);\n\n      if ((err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.code) === 404) {\n        setHasError('کاربری با این مشخصات پیدا نشد');\n      } else {\n        setHasError('خطایی رخ داده است');\n      }\n\n      console.log(err);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-fluid\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row justify-content-center mt-5 pt-5\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-6 text-center text-success mt-5 \",\n          children: \"COMPANY LOGO\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row justify-content-center mt-1 py-5\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-6 text-center login-card p-0\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"login-header text-bold text-right\",\n            children: \"\\u0648\\u0631\\u0648\\u062F \\u0628\\u0647 \\u067E\\u0646\\u0644 \\u0627\\u062F\\u0645\\u06CC\\u0646\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pt-3 pb-5 mx-auto\",\n            children: refreshLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex my-5 py-4 flex-column justify-content-between align-items-center\",\n              children: [/*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"mt-4 text-white\",\n                children: \"...\\u062F\\u0631 \\u062D\\u0627\\u0644 \\u0627\\u0639\\u062A\\u0628\\u0627\\u0631 \\u0633\\u0646\\u062C\\u06CC\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 37\n            }, this) : /*#__PURE__*/_jsxDEV(Formik, {\n              initialValues: {\n                input: '',\n                password: ''\n              },\n              enableReinitialize: true // validate={this.validate}\n              ,\n              onSubmit: handleSubmit,\n              children: /*#__PURE__*/_jsxDEV(Form, {\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-bold font-gray-color px-5\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"mt-3 d-flex flex-column\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      className: \"text-end text-white\",\n                      htmlFor: \"input\",\n                      children: \"\\u0646\\u0627\\u0645 \\u06A9\\u0627\\u0631\\u0628\\u0631\\u06CC\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 113,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(Field, {\n                      type: \"text\",\n                      name: \"input\",\n                      placeholder: \"\",\n                      required: true,\n                      className: \"form-control bg_input input_text\",\n                      style: {\n                        borderRadius: \"15px\"\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 114,\n                      columnNumber: 53\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 112,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"mt-3 mb-2 d-flex flex-column\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      className: \"text-end text-white\",\n                      htmlFor: \"password\",\n                      children: \"\\u0631\\u0645\\u0632\\u0639\\u0628\\u0648\\u0631\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 124,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(Field, {\n                      type: \"password\",\n                      name: \"password\",\n                      required: true,\n                      placeholder: \"\",\n                      className: \"form-control bg_input input_text\",\n                      style: {\n                        borderRadius: \"15px\"\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 125,\n                      columnNumber: 53\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 123,\n                    columnNumber: 49\n                  }, this), Boolean(hasError) && /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-danger\",\n                    children: hasError\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 134,\n                    columnNumber: 72\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"mt-4 pt-3\",\n                    children: /*#__PURE__*/_jsxDEV(Button, {\n                      disabled: loginLoading,\n                      variant: \"contained\",\n                      type: \"submit\",\n                      fullWidth: true,\n                      style: {\n                        borderRadius: \"15px\"\n                      },\n                      color: \"primary\",\n                      children: [\"\\u0648\\u0631\\u0648\\u062F\", loginLoading && /*#__PURE__*/_jsxDEV(CircularProgress, {\n                        size: 24,\n                        className: \"position-absolute\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 138,\n                        columnNumber: 75\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 136,\n                      columnNumber: 53\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 135,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 111,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-100\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"back-ground-pic\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Login, \"2NZZb0eP4rJ0Nu8u+oeOy2gdPCQ=\", false, function () {\n  return [useHistory];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/Users/yasaman/Documents/moj_adminpanel/adminpanel/src/components/login/index.js"],"names":["React","Field","Formik","Form","axios","Button","CircularProgress","AUTH_REFRESH","AUTH_LOGIN","RefreshToken","removeToken","setToken","useHistory","UserContext","Login","props","contextData","useContext","history","loginLoading","setLoginLoading","useState","refreshLoading","setRefreshLoading","hasError","setHasError","setUserToken","values","setIsLoggedIn","setTimeout","push","checkUserRefreshToken","refreshToken","payload","token","post","then","res","data","result","status_code","catch","err","console","log","useEffect","handleSubmit","user_agent","window","navigator","userAgent","client_host","response","code","input","password","borderRadius","Boolean"],"mappings":"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","sourcesContent":["import React from 'react';\nimport \"./style.css\";\nimport { Field, Formik, Form } from \"formik\";\nimport axios from \"axios\";\nimport { Button, CircularProgress } from \"@material-ui/core\";\nimport { AUTH_REFRESH , AUTH_LOGIN} from \"../../utils/constants\";\n// import { useFetchApi } from '../../utils/hooks';\nimport { RefreshToken, removeToken, setToken } from '../../utils/utils';\nimport { useHistory } from 'react-router-dom';\nimport { UserContext } from '../../context/provider';\n\n\nfunction Login(props) {\n\n    const contextData = React.useContext(UserContext);\n\n    const history = useHistory();\n\n    const [loginLoading, setLoginLoading] = React.useState(false);\n    const [refreshLoading, setRefreshLoading] = React.useState(true);\n    const [hasError, setHasError] = React.useState('')\n\n    const setUserToken = (values) => {\n        setToken(values)\n        contextData.setIsLoggedIn(true)\n        setTimeout( () => history.push('/users'), 1000 )\n    }\n\n    const checkUserRefreshToken = (refreshToken) => {\n        let payload = {token : refreshToken}\n        axios.post(AUTH_REFRESH, payload)\n                .then( res => res.data)\n                .then( result => {\n                    if (result.status_code === 200){\n                        setUserToken(result.result)\n                    }\n                })\n                .catch( err => {\n                    console.log(err)\n                    setRefreshLoading(false)\n                    removeToken()\n                    contextData.setIsLoggedIn(false)\n                })\n    }\n\n    React.useEffect( () => {\n        let refreshToken = RefreshToken();\n        if (refreshToken){\n            checkUserRefreshToken(refreshToken)\n        }else {\n            setRefreshLoading(false)\n        }\n    }, [])\n\n    const handleSubmit = (values) => {\n        setHasError('')\n        let payload = {\n            ...values,\n            user_agent: window.navigator.userAgent,\n            client_host:\"local\"\n        }\n        setLoginLoading(true)\n        axios.post(AUTH_LOGIN, payload)\n            .then( res => res.data )\n            .then( result => {\n                if (result.status_code === 200){\n                    setUserToken(result.result)\n                    setLoginLoading(false)\n                }\n            })\n            .catch( err => {\n                setLoginLoading(false)\n                if (err?.response?.data?.code === 404){\n                    setHasError('کاربری با این مشخصات پیدا نشد')\n                }else{\n                    setHasError('خطایی رخ داده است')\n                }\n                console.log(err)\n            })\n    }\n\n    return (\n        <>\n            <div className=\"container-fluid\">\n                <div className=\"row justify-content-center mt-5 pt-5\">\n\n                    <div className=\"col-md-6 text-center text-success mt-5 \">\n                        COMPANY LOGO\n                    </div>\n                </div>\n                <div className=\"row justify-content-center mt-1 py-5\">\n                    <div className=\"col-md-6 text-center login-card p-0\">\n                        <div className=\"login-header text-bold text-right\">\n                            ورود به پنل ادمین\n                        </div>\n                        <div className=\"pt-3 pb-5 mx-auto\">\n                            {\n                                refreshLoading ? (\n                                    <div className=\"d-flex my-5 py-4 flex-column justify-content-between align-items-center\" >\n                                        <CircularProgress />\n                                        <span className=\"mt-4 text-white\">...در حال اعتبار سنجی</span>\n                                    </div>\n                                ) : (\n                                    <Formik\n                                        initialValues={{ input: '', password: '' }}\n                                        enableReinitialize={true}\n                                        // validate={this.validate}\n                                        onSubmit={handleSubmit}\n                                    >\n                                        <Form>\n                                            <div className=\"text-bold font-gray-color px-5\">\n                                                <div className=\"mt-3 d-flex flex-column\">\n                                                    <label className=\"text-end text-white\" htmlFor=\"input\">نام کاربری</label>\n                                                    <Field\n                                                        type=\"text\"\n                                                        name=\"input\"\n                                                        placeholder=\"\"\n                                                        required\n                                                        className=\"form-control bg_input input_text\"\n                                                        style={{borderRadius: \"15px\"}}\n                                                    />\n                                                </div>\n                                                <div className=\"mt-3 mb-2 d-flex flex-column\">\n                                                    <label className=\"text-end text-white\" htmlFor=\"password\">رمزعبور</label>\n                                                    <Field\n                                                        type=\"password\"\n                                                        name=\"password\"\n                                                        required\n                                                        placeholder=\"\"\n                                                        className=\"form-control bg_input input_text\"\n                                                        style={{borderRadius: \"15px\"}}\n                                                    />\n                                                </div>\n                                                { Boolean(hasError) && <p className=\"text-danger\">{hasError}</p> }\n                                                <div className=\"mt-4 pt-3\">\n                                                    <Button disabled={loginLoading} variant=\"contained\" type=\"submit\" fullWidth style={{borderRadius: \"15px\"}} color=\"primary\" >\n                                                        ورود\n                                                        { loginLoading && <CircularProgress size={24} className=\"position-absolute\" />}\n                                                    </Button>\n                                                </div>\n                                            </div>\n                                        </Form>\n                                    </Formik>\n                                )\n                            }\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div className=\"w-100\">\n                <div className=\"back-ground-pic\" ></div>\n            </div>\n        </>\n    )\n}\n\nexport default Login\n"]},"metadata":{},"sourceType":"module"}