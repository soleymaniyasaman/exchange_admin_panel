{"ast":null,"code":"import { Dialog } from '@syncfusion/ej2-popups';\nimport { EventHandler, remove } from '@syncfusion/ej2-base';\nimport { parentsUntil, addBiggerDialog, addRemoveEventListener } from '../base/util';\nimport * as events from '../base/constant';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { ResponsiveDialogAction } from '../base/enum';\n/**\n *\n * The `ResponsiveDialogRenderer` module is used to render the responsive dialogs.\n */\n\nvar ResponsiveDialogRenderer =\n/** @class */\nfunction () {\n  function ResponsiveDialogRenderer(parent, serviceLocator) {\n    this.sortedCols = [];\n    this.sortPredicate = [];\n    /** @hidden */\n\n    this.isCustomDialog = false;\n    this.parent = parent;\n    this.serviceLocator = serviceLocator;\n    this.addEventListener();\n  }\n\n  ResponsiveDialogRenderer.prototype.addEventListener = function () {\n    this.evtHandlers = [{\n      event: events.filterDialogClose,\n      handler: this.closeCustomDialog\n    }, {\n      event: events.refreshCustomFilterOkBtn,\n      handler: this.refreshCustomFilterOkBtn\n    }, {\n      event: events.renderResponsiveCmenu,\n      handler: this.renderResponsiveContextMenu\n    }, {\n      event: events.filterCmenuSelect,\n      handler: this.renderCustomFilterDiv\n    }, {\n      event: events.customFilterClose,\n      handler: this.customExFilterClose\n    }, {\n      event: events.refreshCustomFilterClearBtn,\n      handler: this.refreshCustomFilterClearBtn\n    }];\n    addRemoveEventListener(this.parent, this.evtHandlers, true, this);\n    this.onActionCompleteFn = this.editComplate.bind(this);\n    this.parent.addEventListener(events.actionComplete, this.onActionCompleteFn);\n  };\n\n  ResponsiveDialogRenderer.prototype.customExFilterClose = function () {\n    this.isCustomDlgRender = false;\n  };\n\n  ResponsiveDialogRenderer.prototype.renderCustomFilterDiv = function () {\n    var header = this.customResponsiveDlg.element.querySelector('.e-dlg-header-content');\n    var title = header.querySelector('.e-dlg-custom-header');\n    var closeBtn = header.querySelector('.e-dlg-closeicon-btn');\n    this.isCustomDlgRender = true;\n    this.parent.filterModule.filterModule.closeDialog();\n    this.saveBtn.element.style.display = '';\n    this.refreshCustomFilterOkBtn({\n      disabled: false\n    });\n    this.backBtn.element.style.display = 'none';\n    closeBtn.style.display = '';\n    title.innerHTML = this.parent.localeObj.getConstant('CustomFilter');\n    var content = this.customResponsiveDlg.element.querySelector('.e-dlg-content');\n    this.customExcelFilterParent = this.parent.createElement('div', {\n      className: 'e-xl-customfilterdiv e-default-filter'\n    });\n    content.appendChild(this.customExcelFilterParent);\n  };\n\n  ResponsiveDialogRenderer.prototype.renderResponsiveContextMenu = function (args) {\n    if (this.action === ResponsiveDialogAction.isFilter) {\n      var content = this.customResponsiveDlg.element.querySelector('.e-dlg-content');\n      var header = this.customResponsiveDlg.element.querySelector('.e-dlg-header-content');\n      var closeBtn = header.querySelector('.e-dlg-closeicon-btn');\n      var text = header.querySelector('.e-dlg-custom-header');\n\n      if (args.isOpen) {\n        content.firstChild.style.display = 'none';\n        content.appendChild(args.target);\n        closeBtn.style.display = 'none';\n        this.saveBtn.element.style.display = 'none';\n        this.filterClearBtn.element.style.display = 'none';\n        text.innerHTML = args.header;\n        var backBtn = this.parent.createElement('button');\n        var span = this.parent.createElement('span', {\n          className: 'e-btn-icon e-resfilterback e-icons'\n        });\n        backBtn.appendChild(span);\n        this.backBtn = new Button({\n          cssClass: 'e-res-back-btn'\n        });\n        this.backBtn.appendTo(backBtn);\n        text.parentElement.insertBefore(backBtn, text);\n      } else if (this.backBtn && !this.isCustomDlgRender) {\n        content.firstChild.style.display = '';\n        remove(this.backBtn.element);\n        closeBtn.style.display = '';\n        this.saveBtn.element.style.display = '';\n\n        if (this.isFiltered) {\n          this.filterClearBtn.element.style.display = '';\n        }\n\n        text.innerHTML = this.getHeaderTitle({\n          action: ResponsiveDialogAction.isFilter\n        }, args.col);\n      }\n    }\n  };\n\n  ResponsiveDialogRenderer.prototype.refreshCustomFilterClearBtn = function (args) {\n    if (this.filterClearBtn) {\n      this.isFiltered = args.isFiltered;\n      this.filterClearBtn.element.style.display = args.isFiltered ? '' : 'none';\n    }\n  };\n\n  ResponsiveDialogRenderer.prototype.refreshCustomFilterOkBtn = function (args) {\n    if (this.saveBtn) {\n      this.saveBtn.disabled = args.disabled;\n    }\n  };\n\n  ResponsiveDialogRenderer.prototype.renderResponsiveContent = function (col) {\n    var _this = this;\n\n    var gObj = this.parent;\n\n    if (col) {\n      this.filterParent = this.parent.createElement('div', {\n        className: 'e-mainfilterdiv e-default-filter',\n        id: col.uid + '-main-filter'\n      });\n      return this.filterParent;\n    } else {\n      var cols = gObj.getColumns();\n      this.customColumnDiv = gObj.createElement('div', {\n        className: 'columndiv',\n        styles: 'width: 100%'\n      });\n      var sortBtnParent = gObj.createElement('div', {\n        className: 'e-ressortbutton-parent'\n      });\n      var filteredCols = [];\n      var isSort = this.action === ResponsiveDialogAction.isSort;\n      var isFilter = this.action === ResponsiveDialogAction.isFilter;\n\n      if (isFilter) {\n        for (var i = 0; i < gObj.filterSettings.columns.length; i++) {\n          filteredCols.push(gObj.filterSettings.columns[i].field);\n        }\n      }\n\n      for (var i = 0; i < cols.length; i++) {\n        if (!cols[i].visible || !cols[i].allowSorting && isSort || !cols[i].allowFiltering && isFilter) {\n          continue;\n        }\n\n        var cDiv = gObj.createElement('div', {\n          className: 'e-responsivecoldiv'\n        });\n        cDiv.setAttribute('data-e-mappingname', cols[i].field);\n        cDiv.setAttribute('data-e-mappinguid', cols[i].uid);\n        var span = gObj.createElement('span', {\n          innerHTML: cols[i].headerText,\n          className: 'e-res-header-text'\n        });\n        cDiv.appendChild(span);\n        this.customColumnDiv.appendChild(cDiv);\n\n        if (isSort) {\n          var fields = this.getSortedFieldsAndDirections('field');\n          var index = fields.indexOf(cols[i].field);\n          var button = gObj.createElement('button', {\n            id: gObj.element.id + cols[i].field + 'sortbutton'\n          });\n          var clone = sortBtnParent.cloneNode();\n          clone.appendChild(button);\n          cDiv.appendChild(clone);\n          var btnObj = new Button({\n            cssClass: 'e-ressortbutton'\n          });\n          btnObj.appendTo(button);\n          button.innerHTML = index > -1 ? this.parent.sortSettings.columns[index].direction : 'None';\n\n          button.onclick = function (e) {\n            _this.sortButtonClickHandler(e.target);\n          };\n        }\n\n        if (isFilter && filteredCols.indexOf(cols[i].field) > -1) {\n          var divIcon = gObj.createElement('div', {\n            className: 'e-icons e-res-icon e-filtersetdiv'\n          });\n          var iconSpan = gObj.createElement('span', {\n            className: 'e-icons e-res-icon e-filterset'\n          });\n          iconSpan.setAttribute('colType', cols[i].type);\n          divIcon.appendChild(iconSpan);\n          cDiv.appendChild(divIcon);\n        }\n      }\n\n      EventHandler.add(this.customColumnDiv, 'click', this.customFilterColumnClickHandler, this);\n      return this.customColumnDiv;\n    }\n  };\n\n  ResponsiveDialogRenderer.prototype.getSortedFieldsAndDirections = function (name) {\n    var fields = [];\n\n    for (var i = 0; i < this.parent.sortSettings.columns.length; i++) {\n      fields.push(this.parent.sortSettings.columns[i][name]);\n    }\n\n    return fields;\n  };\n\n  ResponsiveDialogRenderer.prototype.sortButtonClickHandler = function (target) {\n    if (target) {\n      var columndiv = parentsUntil(target, 'e-responsivecoldiv');\n      var field = columndiv.getAttribute('data-e-mappingname');\n\n      if (!this.parent.allowMultiSorting) {\n        this.sortPredicate = [];\n        this.sortedCols = [];\n        this.isSortApplied = false;\n        this.resetSortButtons(target);\n      }\n\n      var txt = target.textContent;\n      var direction = txt === 'None' ? 'Ascending' : txt === 'Ascending' ? 'Descending' : 'None';\n      target.innerHTML = direction;\n      this.setSortedCols(field, direction);\n    }\n  };\n\n  ResponsiveDialogRenderer.prototype.resetSortButtons = function (target) {\n    var buttons = [].slice.call(this.customColumnDiv.getElementsByClassName('e-ressortbutton'));\n\n    for (var i = 0; i < buttons.length; i++) {\n      if (buttons[i] !== target) {\n        buttons[i].innerHTML = 'None';\n      }\n    }\n  };\n\n  ResponsiveDialogRenderer.prototype.setSortedCols = function (field, direction) {\n    var fields = this.getCurrentSortedFields();\n    var index = fields.indexOf(field);\n\n    if (this.parent.allowMultiSorting && index > -1) {\n      this.sortedCols.splice(index, 1);\n      this.sortPredicate.splice(index, 1);\n    }\n\n    this.isSortApplied = true;\n\n    if (direction !== 'None') {\n      this.sortedCols.push(field);\n      this.sortPredicate.push({\n        field: field,\n        direction: direction\n      });\n    }\n  };\n\n  ResponsiveDialogRenderer.prototype.getCurrentSortedFields = function () {\n    var fields = [];\n\n    for (var i = 0; i < this.sortedCols.length; i++) {\n      fields.push(this.sortedCols[i]);\n    }\n\n    return fields;\n  };\n\n  ResponsiveDialogRenderer.prototype.customFilterColumnClickHandler = function (e) {\n    if (this.action !== ResponsiveDialogAction.isFilter) {\n      return;\n    }\n\n    var gObj = this.parent;\n    var target = e.target;\n\n    if (gObj.filterSettings.type !== 'FilterBar') {\n      if (target.classList.contains('e-responsivecoldiv') || target.parentElement.classList.contains('e-responsivecoldiv')) {\n        var field = target.getAttribute('data-e-mappingname');\n\n        if (!field) {\n          field = target.parentElement.getAttribute('data-e-mappingname');\n        }\n\n        if (field) {\n          var col = gObj.getColumnByField(field);\n          this.isRowResponsive = true;\n          this.showResponsiveDialog(col);\n        }\n      } else if (target.classList.contains('e-filterset') || target.parentElement.classList.contains('e-filtersetdiv')) {\n        var colDiv = parentsUntil(target, 'e-responsivecoldiv');\n\n        if (colDiv) {\n          var field = colDiv.getAttribute('data-e-mappingname');\n          var col = gObj.getColumnByField(field);\n\n          if (col.filter.type === 'Menu' || !col.filter.type && gObj.filterSettings.type === 'Menu') {\n            this.isDialogClose = true;\n          }\n\n          this.parent.filterModule.filterModule.clearCustomFilter(col);\n          this.removeCustomDlgFilterEle(target);\n        }\n      }\n    }\n  };\n  /**\n   * Function to show the responsive dialog\n   *\n   * @param {Column} col - specifies the column\n   * @returns {void}\n   */\n\n\n  ResponsiveDialogRenderer.prototype.showResponsiveDialog = function (col) {\n    if (this.isCustomDialog && this.action === ResponsiveDialogAction.isFilter && !this.isRowResponsive) {\n      this.renderCustomFilterDialog();\n    } else {\n      this.filteredCol = col;\n      this.renderResponsiveDialog(col);\n\n      if (this.parent.enableAdaptiveUI && col) {\n        this.parent.filterModule.setFilterModel(col);\n        this.parent.filterModule.filterModule.openDialog(this.parent.filterModule.createOptions(col, undefined));\n      }\n\n      if (this.action === ResponsiveDialogAction.isSort) {\n        var args = {\n          cancel: false,\n          dialogObj: this.customResponsiveDlg,\n          requestType: 'beforeOpenAptiveSortDialog'\n        };\n        this.parent.trigger(events.beforeOpenAdaptiveDialog, args);\n\n        if (args.cancel) {\n          return;\n        }\n      }\n\n      this.customResponsiveDlg.show(true);\n      this.customResponsiveDlg.element.style.maxHeight = '100%';\n      this.setTopToChildDialog(this.customResponsiveDlg.element);\n    }\n  };\n\n  ResponsiveDialogRenderer.prototype.setTopToChildDialog = function (dialogEle) {\n    var child = dialogEle.querySelector('.e-dialog');\n\n    if (child) {\n      var top_1 = dialogEle.querySelector('.e-dlg-header-content').getBoundingClientRect().height;\n      child.style.top = top_1 + 'px';\n    }\n  };\n\n  ResponsiveDialogRenderer.prototype.renderCustomFilterDialog = function (col) {\n    var gObj = this.parent;\n\n    if (this.action === ResponsiveDialogAction.isFilter && gObj.filterSettings.type === 'FilterBar') {\n      return;\n    }\n\n    var outerDiv = this.parent.createElement('div', {\n      id: gObj.element.id + 'customfilter',\n      className: 'e-customfilterdiv e-responsive-dialog'\n    });\n    this.parent.element.appendChild(outerDiv);\n    this.customFilterDlg = this.getDialogOptions(col, true);\n    var args = {\n      cancel: false,\n      dialogObj: this.customFilterDlg,\n      requestType: 'beforeOpenAptiveFilterDialog'\n    };\n    this.parent.trigger(events.beforeOpenAdaptiveDialog, args);\n\n    if (args.cancel) {\n      return;\n    }\n\n    this.customFilterDlg.appendTo(outerDiv);\n    this.customFilterDlg.show(true);\n    this.customFilterDlg.element.style.maxHeight = '100%';\n  };\n\n  ResponsiveDialogRenderer.prototype.getDialogOptions = function (col, isCustomFilter, id) {\n    var options = new Dialog({\n      isModal: true,\n      showCloseIcon: true,\n      closeOnEscape: false,\n      locale: this.parent.locale,\n      target: this.parent.adaptiveDlgTarget ? this.parent.adaptiveDlgTarget : document.body,\n      visible: false,\n      enableRtl: this.parent.enableRtl,\n      content: this.renderResponsiveContent(col),\n      open: this.dialogOpen.bind(this),\n      created: this.dialogCreated.bind(this),\n      close: this.beforeDialogClose.bind(this),\n      width: '100%',\n      height: '100%',\n      animationSettings: {\n        effect: 'None'\n      }\n    });\n    var isStringTemplate = 'isStringTemplate';\n    options[isStringTemplate] = true;\n\n    if (isCustomFilter) {\n      options.header = this.renderResponsiveHeader(col, undefined, true);\n      options.cssClass = 'e-customfilter';\n    } else {\n      options.header = this.renderResponsiveHeader(col);\n      options.cssClass = this.parent.rowRenderingMode === 'Vertical' && this.action === ResponsiveDialogAction.isFilter ? 'e-res' + id + ' e-row-responsive-filter' : 'e-res' + id;\n    }\n\n    return options;\n  };\n\n  ResponsiveDialogRenderer.prototype.renderResponsiveDialog = function (col) {\n    var gObj = this.parent;\n\n    if (this.action === ResponsiveDialogAction.isFilter && gObj.filterSettings.type === 'FilterBar') {\n      return;\n    }\n\n    var id = this.action === ResponsiveDialogAction.isFilter ? 'filter' : 'sort';\n    var outerDiv = this.parent.createElement('div', {\n      id: gObj.element.id + 'responsive' + id,\n      className: 'e-res' + id + 'div e-responsive-dialog'\n    });\n    this.parent.element.appendChild(outerDiv);\n    this.customResponsiveDlg = this.getDialogOptions(col, false, id);\n    this.customResponsiveDlg.appendTo(outerDiv);\n  };\n\n  ResponsiveDialogRenderer.prototype.dialogCreated = function () {\n    addBiggerDialog(this.parent);\n  };\n\n  ResponsiveDialogRenderer.prototype.dialogOpen = function () {\n    if (this.action === ResponsiveDialogAction.isSort && this.parent.allowMultiSorting) {\n      for (var i = 0; i < this.parent.sortSettings.columns.length; i++) {\n        this.sortedCols.push(this.parent.sortSettings.columns[i].field);\n        var sortField = this.parent.sortSettings.columns[i].field;\n        var sortDirection = this.parent.sortSettings.columns[i].direction;\n        this.sortPredicate.push({\n          field: sortField,\n          direction: sortDirection\n        });\n      }\n    }\n  };\n\n  ResponsiveDialogRenderer.prototype.beforeDialogClose = function (args) {\n    this.isDialogClose = args.element && !args.element.querySelector('.e-xl-customfilterdiv') && args.element.classList.contains('e-resfilterdiv');\n\n    if (this.action === ResponsiveDialogAction.isFilter) {\n      if (args.element.classList.contains('e-resfilterdiv')) {\n        this.parent.filterModule.filterModule.closeResponsiveDialog(this.isCustomDlgRender);\n      } else if (args.element.classList.contains('e-customfilterdiv')) {\n        this.closeCustomFilter();\n      }\n    } else if (this.action === ResponsiveDialogAction.isSort) {\n      this.closeCustomDialog();\n    }\n\n    this.parent.off(events.enterKeyHandler, this.keyHandler);\n  };\n\n  ResponsiveDialogRenderer.prototype.sortColumn = function () {\n    if (!this.isSortApplied) {\n      this.closeCustomDialog();\n      return;\n    }\n\n    if (this.sortPredicate.length) {\n      this.parent.setProperties({\n        sortSettings: {\n          columns: []\n        }\n      }, true);\n    }\n\n    for (var i = 0; i < this.sortPredicate.length; i++) {\n      this.parent.sortColumn(this.sortPredicate[i].field, this.sortPredicate[i].direction, this.parent.allowMultiSorting);\n    }\n\n    if (!this.sortPredicate.length) {\n      this.parent.clearSorting();\n    }\n\n    this.closeCustomDialog();\n  };\n\n  ResponsiveDialogRenderer.prototype.getHeaderTitle = function (args, col) {\n    var gObj = this.parent;\n    var title;\n\n    if (this.action === ResponsiveDialogAction.isEdit) {\n      title = gObj.localeObj.getConstant('EditFormTitle') + args.primaryKeyValue[0];\n    } else if (this.action === ResponsiveDialogAction.isAdd) {\n      title = gObj.localeObj.getConstant('AddFormTitle');\n    } else if (this.action === ResponsiveDialogAction.isFilter) {\n      title = col ? col.headerText || col.field : gObj.localeObj.getConstant('FilterButton');\n    } else if (this.action === ResponsiveDialogAction.isSort) {\n      title = gObj.localeObj.getConstant('Sort');\n    }\n\n    return title;\n  };\n\n  ResponsiveDialogRenderer.prototype.getDialogName = function (action) {\n    var name;\n\n    if (action === ResponsiveDialogAction.isAdd || action === ResponsiveDialogAction.isEdit) {\n      name = 'dialogEdit_wrapper_title';\n    } else if (action === ResponsiveDialogAction.isFilter) {\n      name = 'responsive_filter_dialog_wrapper';\n    }\n\n    return name;\n  };\n\n  ResponsiveDialogRenderer.prototype.getButtonText = function (action) {\n    var text;\n\n    if (action === ResponsiveDialogAction.isAdd || action === ResponsiveDialogAction.isEdit) {\n      text = 'Save';\n    } else if (action === ResponsiveDialogAction.isFilter || this.action === ResponsiveDialogAction.isSort) {\n      text = 'OKButton';\n    }\n\n    return text;\n  };\n  /**\n   * Function to render the responsive header\n   *\n   * @param {Column} col - specifies the column\n   * @param {ResponsiveDialogArgs} args - specifies the responsive dialog arguments\n   * @param {boolean} isCustomFilter - specifies whether it is custom filter or not\n   * @returns {HTMLElement | string} returns the html element or string\n   */\n\n\n  ResponsiveDialogRenderer.prototype.renderResponsiveHeader = function (col, args, isCustomFilter) {\n    var _this = this;\n\n    var gObj = this.parent;\n    gObj.on(events.enterKeyHandler, this.keyHandler, this);\n    var id = gObj.element.id + this.getDialogName(this.action);\n    var header = gObj.createElement('div', {\n      className: 'e-res-custom-element'\n    });\n    var titleDiv = gObj.createElement('div', {\n      className: 'e-dlg-custom-header',\n      id: id\n    });\n    titleDiv.innerHTML = this.getHeaderTitle(args, col);\n    header.appendChild(titleDiv);\n    var saveBtn = gObj.createElement('button');\n\n    if (!isCustomFilter) {\n      this.saveBtn = new Button({\n        cssClass: 'e-primary e-flat e-res-apply-btn'\n      });\n      saveBtn.innerHTML = gObj.localeObj.getConstant(this.getButtonText(this.action));\n      this.saveBtn.appendTo(saveBtn); // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n      saveBtn.onclick = function (e) {\n        _this.dialogHdrBtnClickHandler();\n      };\n    }\n\n    var isSort = this.action === ResponsiveDialogAction.isSort;\n    var isFilter = this.action === ResponsiveDialogAction.isFilter;\n\n    if (isFilter || isSort) {\n      var id_1 = isSort ? 'sort' : 'filter';\n      var clearBtn = gObj.createElement('button');\n      this.filterClearBtn = new Button({\n        cssClass: 'e-primary e-flat e-res-' + id_1 + '-clear-btn'\n      });\n\n      if (isFilter) {\n        var span = gObj.createElement('span', {\n          className: 'e-btn-icon e-icon-filter-clear e-icons'\n        });\n        clearBtn.appendChild(span);\n      } else {\n        clearBtn.innerHTML = gObj.localeObj.getConstant('Clear');\n      }\n\n      header.appendChild(clearBtn);\n      this.filterClearBtn.appendTo(clearBtn);\n\n      clearBtn.onclick = function (e) {\n        if (parentsUntil(e.target, 'e-customfilter')) {\n          _this.parent.filterModule.clearFiltering();\n\n          _this.removeCustomDlgFilterEle();\n        } else {\n          if (isFilter) {\n            _this.filterClear();\n          } else {\n            _this.resetSortButtons();\n\n            _this.sortedCols = [];\n            _this.sortPredicate = [];\n            _this.isSortApplied = true;\n          }\n        }\n      };\n\n      header.appendChild(clearBtn);\n    }\n\n    if (!isCustomFilter) {\n      header.appendChild(saveBtn);\n    }\n\n    return header;\n  };\n\n  ResponsiveDialogRenderer.prototype.filterClear = function () {\n    this.parent.filterModule.filterModule.clearCustomFilter(this.filteredCol);\n    this.parent.filterModule.filterModule.closeResponsiveDialog();\n  };\n\n  ResponsiveDialogRenderer.prototype.dialogHdrBtnClickHandler = function () {\n    if (this.action === ResponsiveDialogAction.isEdit || this.action === ResponsiveDialogAction.isAdd) {\n      this.parent.endEdit();\n    } else if (this.action === ResponsiveDialogAction.isFilter) {\n      this.parent.filterModule.filterModule.applyCustomFilter({\n        col: this.filteredCol,\n        isCustomFilter: this.isCustomDlgRender\n      });\n    } else if (this.action === ResponsiveDialogAction.isSort) {\n      this.sortColumn();\n    }\n  };\n\n  ResponsiveDialogRenderer.prototype.closeCustomDialog = function () {\n    if (this.isCustomDlgRender) {\n      var mainfilterdiv = this.customResponsiveDlg.element.querySelector('.e-mainfilterdiv');\n      remove(mainfilterdiv);\n      return;\n    }\n\n    this.isRowResponsive = false;\n    this.isCustomDlgRender = false;\n    this.destroyCustomFilterDialog();\n  };\n\n  ResponsiveDialogRenderer.prototype.destroyCustomFilterDialog = function () {\n    if (!this.customResponsiveDlg) {\n      return;\n    }\n\n    var elem = document.getElementById(this.customResponsiveDlg.element.id);\n\n    if (this.customResponsiveDlg && !this.customResponsiveDlg.isDestroyed && elem) {\n      this.customResponsiveDlg.destroy();\n      remove(elem);\n    }\n\n    this.closeCustomFilter();\n\n    if (this.action === ResponsiveDialogAction.isSort) {\n      this.sortPredicate = [];\n      this.sortedCols = [];\n      this.isSortApplied = false;\n    }\n  };\n\n  ResponsiveDialogRenderer.prototype.closeCustomFilter = function () {\n    if (!this.isDialogClose && this.customFilterDlg) {\n      var customEle = document.getElementById(this.customFilterDlg.element.id);\n\n      if (this.customFilterDlg && !this.customFilterDlg.isDestroyed && customEle) {\n        this.customFilterDlg.destroy();\n        remove(customEle);\n      }\n    }\n\n    this.isCustomDialog = false;\n    this.isDialogClose = false;\n  };\n\n  ResponsiveDialogRenderer.prototype.removeCustomDlgFilterEle = function (target) {\n    if (target) {\n      if (target.parentElement.classList.contains('e-filtersetdiv')) {\n        remove(target.parentElement);\n      } else {\n        remove(target);\n      }\n    } else {\n      var child = this.customColumnDiv.children;\n\n      for (var i = 0; i < child.length; i++) {\n        target = child[i].querySelector('.e-filtersetdiv');\n\n        if (target) {\n          remove(target);\n          i--;\n        }\n      }\n    }\n  };\n\n  ResponsiveDialogRenderer.prototype.keyHandler = function (e) {\n    if (e.keyCode === 13 && (this.action === ResponsiveDialogAction.isFilter && e.target.classList.contains('e-searchinput') || this.action === ResponsiveDialogAction.isEdit || this.action === ResponsiveDialogAction.isAdd)) {\n      this.dialogHdrBtnClickHandler();\n    }\n  };\n\n  ResponsiveDialogRenderer.prototype.editComplate = function (args) {\n    if (args.requestType === 'save' || args.requestType === 'cancel') {\n      this.parent.off(events.enterKeyHandler, this.keyHandler);\n    }\n  };\n\n  ResponsiveDialogRenderer.prototype.removeEventListener = function () {\n    if (this.customColumnDiv) {\n      EventHandler.remove(this.customColumnDiv, 'click', this.customFilterColumnClickHandler);\n    }\n\n    addRemoveEventListener(this.parent, this.evtHandlers, true, this);\n    this.parent.removeEventListener(events.actionComplete, this.onActionCompleteFn);\n  };\n\n  return ResponsiveDialogRenderer;\n}();\n\nexport { ResponsiveDialogRenderer };","map":{"version":3,"sources":["/Users/yasaman/Documents/moj_adminpanel/adminpanel/node_modules/@syncfusion/ej2-grids/src/grid/renderer/responsive-dialog-renderer.js"],"names":["Dialog","EventHandler","remove","parentsUntil","addBiggerDialog","addRemoveEventListener","events","Button","ResponsiveDialogAction","ResponsiveDialogRenderer","parent","serviceLocator","sortedCols","sortPredicate","isCustomDialog","addEventListener","prototype","evtHandlers","event","filterDialogClose","handler","closeCustomDialog","refreshCustomFilterOkBtn","renderResponsiveCmenu","renderResponsiveContextMenu","filterCmenuSelect","renderCustomFilterDiv","customFilterClose","customExFilterClose","refreshCustomFilterClearBtn","onActionCompleteFn","editComplate","bind","actionComplete","isCustomDlgRender","header","customResponsiveDlg","element","querySelector","title","closeBtn","filterModule","closeDialog","saveBtn","style","display","disabled","backBtn","innerHTML","localeObj","getConstant","content","customExcelFilterParent","createElement","className","appendChild","args","action","isFilter","text","isOpen","firstChild","target","filterClearBtn","span","cssClass","appendTo","parentElement","insertBefore","isFiltered","getHeaderTitle","col","renderResponsiveContent","_this","gObj","filterParent","id","uid","cols","getColumns","customColumnDiv","styles","sortBtnParent","filteredCols","isSort","i","filterSettings","columns","length","push","field","visible","allowSorting","allowFiltering","cDiv","setAttribute","headerText","fields","getSortedFieldsAndDirections","index","indexOf","button","clone","cloneNode","btnObj","sortSettings","direction","onclick","e","sortButtonClickHandler","divIcon","iconSpan","type","add","customFilterColumnClickHandler","name","columndiv","getAttribute","allowMultiSorting","isSortApplied","resetSortButtons","txt","textContent","setSortedCols","buttons","slice","call","getElementsByClassName","getCurrentSortedFields","splice","classList","contains","getColumnByField","isRowResponsive","showResponsiveDialog","colDiv","filter","isDialogClose","clearCustomFilter","removeCustomDlgFilterEle","renderCustomFilterDialog","filteredCol","renderResponsiveDialog","enableAdaptiveUI","setFilterModel","openDialog","createOptions","undefined","cancel","dialogObj","requestType","trigger","beforeOpenAdaptiveDialog","show","maxHeight","setTopToChildDialog","dialogEle","child","top_1","getBoundingClientRect","height","top","outerDiv","customFilterDlg","getDialogOptions","isCustomFilter","options","isModal","showCloseIcon","closeOnEscape","locale","adaptiveDlgTarget","document","body","enableRtl","open","dialogOpen","created","dialogCreated","close","beforeDialogClose","width","animationSettings","effect","isStringTemplate","renderResponsiveHeader","rowRenderingMode","sortField","sortDirection","closeResponsiveDialog","closeCustomFilter","off","enterKeyHandler","keyHandler","sortColumn","setProperties","clearSorting","isEdit","primaryKeyValue","isAdd","getDialogName","getButtonText","on","titleDiv","dialogHdrBtnClickHandler","id_1","clearBtn","clearFiltering","filterClear","endEdit","applyCustomFilter","mainfilterdiv","destroyCustomFilterDialog","elem","getElementById","isDestroyed","destroy","customEle","children","keyCode","removeEventListener"],"mappings":"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","sourcesContent":["import { Dialog } from '@syncfusion/ej2-popups';\nimport { EventHandler, remove } from '@syncfusion/ej2-base';\nimport { parentsUntil, addBiggerDialog, addRemoveEventListener } from '../base/util';\nimport * as events from '../base/constant';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { ResponsiveDialogAction } from '../base/enum';\n/**\n *\n * The `ResponsiveDialogRenderer` module is used to render the responsive dialogs.\n */\nvar ResponsiveDialogRenderer = /** @class */ (function () {\n    function ResponsiveDialogRenderer(parent, serviceLocator) {\n        this.sortedCols = [];\n        this.sortPredicate = [];\n        /** @hidden */\n        this.isCustomDialog = false;\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    ResponsiveDialogRenderer.prototype.addEventListener = function () {\n        this.evtHandlers = [{ event: events.filterDialogClose, handler: this.closeCustomDialog },\n            { event: events.refreshCustomFilterOkBtn, handler: this.refreshCustomFilterOkBtn },\n            { event: events.renderResponsiveCmenu, handler: this.renderResponsiveContextMenu },\n            { event: events.filterCmenuSelect, handler: this.renderCustomFilterDiv },\n            { event: events.customFilterClose, handler: this.customExFilterClose },\n            { event: events.refreshCustomFilterClearBtn, handler: this.refreshCustomFilterClearBtn }];\n        addRemoveEventListener(this.parent, this.evtHandlers, true, this);\n        this.onActionCompleteFn = this.editComplate.bind(this);\n        this.parent.addEventListener(events.actionComplete, this.onActionCompleteFn);\n    };\n    ResponsiveDialogRenderer.prototype.customExFilterClose = function () {\n        this.isCustomDlgRender = false;\n    };\n    ResponsiveDialogRenderer.prototype.renderCustomFilterDiv = function () {\n        var header = this.customResponsiveDlg.element.querySelector('.e-dlg-header-content');\n        var title = header.querySelector('.e-dlg-custom-header');\n        var closeBtn = header.querySelector('.e-dlg-closeicon-btn');\n        this.isCustomDlgRender = true;\n        this.parent.filterModule.filterModule.closeDialog();\n        this.saveBtn.element.style.display = '';\n        this.refreshCustomFilterOkBtn({ disabled: false });\n        this.backBtn.element.style.display = 'none';\n        closeBtn.style.display = '';\n        title.innerHTML = this.parent.localeObj.getConstant('CustomFilter');\n        var content = this.customResponsiveDlg.element.querySelector('.e-dlg-content');\n        this.customExcelFilterParent = this.parent.createElement('div', { className: 'e-xl-customfilterdiv e-default-filter' });\n        content.appendChild(this.customExcelFilterParent);\n    };\n    ResponsiveDialogRenderer.prototype.renderResponsiveContextMenu = function (args) {\n        if (this.action === ResponsiveDialogAction.isFilter) {\n            var content = this.customResponsiveDlg.element.querySelector('.e-dlg-content');\n            var header = this.customResponsiveDlg.element.querySelector('.e-dlg-header-content');\n            var closeBtn = header.querySelector('.e-dlg-closeicon-btn');\n            var text = header.querySelector('.e-dlg-custom-header');\n            if (args.isOpen) {\n                content.firstChild.style.display = 'none';\n                content.appendChild(args.target);\n                closeBtn.style.display = 'none';\n                this.saveBtn.element.style.display = 'none';\n                this.filterClearBtn.element.style.display = 'none';\n                text.innerHTML = args.header;\n                var backBtn = this.parent.createElement('button');\n                var span = this.parent.createElement('span', { className: 'e-btn-icon e-resfilterback e-icons' });\n                backBtn.appendChild(span);\n                this.backBtn = new Button({\n                    cssClass: 'e-res-back-btn'\n                });\n                this.backBtn.appendTo(backBtn);\n                text.parentElement.insertBefore(backBtn, text);\n            }\n            else if (this.backBtn && !this.isCustomDlgRender) {\n                content.firstChild.style.display = '';\n                remove(this.backBtn.element);\n                closeBtn.style.display = '';\n                this.saveBtn.element.style.display = '';\n                if (this.isFiltered) {\n                    this.filterClearBtn.element.style.display = '';\n                }\n                text.innerHTML = this.getHeaderTitle({ action: ResponsiveDialogAction.isFilter }, args.col);\n            }\n        }\n    };\n    ResponsiveDialogRenderer.prototype.refreshCustomFilterClearBtn = function (args) {\n        if (this.filterClearBtn) {\n            this.isFiltered = args.isFiltered;\n            this.filterClearBtn.element.style.display = args.isFiltered ? '' : 'none';\n        }\n    };\n    ResponsiveDialogRenderer.prototype.refreshCustomFilterOkBtn = function (args) {\n        if (this.saveBtn) {\n            this.saveBtn.disabled = args.disabled;\n        }\n    };\n    ResponsiveDialogRenderer.prototype.renderResponsiveContent = function (col) {\n        var _this = this;\n        var gObj = this.parent;\n        if (col) {\n            this.filterParent = this.parent.createElement('div', { className: 'e-mainfilterdiv e-default-filter', id: col.uid + '-main-filter' });\n            return this.filterParent;\n        }\n        else {\n            var cols = gObj.getColumns();\n            this.customColumnDiv = gObj.createElement('div', { className: 'columndiv', styles: 'width: 100%' });\n            var sortBtnParent = gObj.createElement('div', { className: 'e-ressortbutton-parent' });\n            var filteredCols = [];\n            var isSort = this.action === ResponsiveDialogAction.isSort;\n            var isFilter = this.action === ResponsiveDialogAction.isFilter;\n            if (isFilter) {\n                for (var i = 0; i < gObj.filterSettings.columns.length; i++) {\n                    filteredCols.push(gObj.filterSettings.columns[i].field);\n                }\n            }\n            for (var i = 0; i < cols.length; i++) {\n                if (!cols[i].visible || (!cols[i].allowSorting && isSort) || (!cols[i].allowFiltering && isFilter)) {\n                    continue;\n                }\n                var cDiv = gObj.createElement('div', { className: 'e-responsivecoldiv' });\n                cDiv.setAttribute('data-e-mappingname', cols[i].field);\n                cDiv.setAttribute('data-e-mappinguid', cols[i].uid);\n                var span = gObj.createElement('span', { innerHTML: cols[i].headerText, className: 'e-res-header-text' });\n                cDiv.appendChild(span);\n                this.customColumnDiv.appendChild(cDiv);\n                if (isSort) {\n                    var fields = this.getSortedFieldsAndDirections('field');\n                    var index = fields.indexOf(cols[i].field);\n                    var button = gObj.createElement('button', { id: gObj.element.id + cols[i].field + 'sortbutton' });\n                    var clone = sortBtnParent.cloneNode();\n                    clone.appendChild(button);\n                    cDiv.appendChild(clone);\n                    var btnObj = new Button({\n                        cssClass: 'e-ressortbutton'\n                    });\n                    btnObj.appendTo(button);\n                    button.innerHTML = index > -1 ? this.parent.sortSettings.columns[index].direction : 'None';\n                    button.onclick = function (e) {\n                        _this.sortButtonClickHandler(e.target);\n                    };\n                }\n                if (isFilter && filteredCols.indexOf(cols[i].field) > -1) {\n                    var divIcon = gObj.createElement('div', { className: 'e-icons e-res-icon e-filtersetdiv' });\n                    var iconSpan = gObj.createElement('span', { className: 'e-icons e-res-icon e-filterset' });\n                    iconSpan.setAttribute('colType', cols[i].type);\n                    divIcon.appendChild(iconSpan);\n                    cDiv.appendChild(divIcon);\n                }\n            }\n            EventHandler.add(this.customColumnDiv, 'click', this.customFilterColumnClickHandler, this);\n            return this.customColumnDiv;\n        }\n    };\n    ResponsiveDialogRenderer.prototype.getSortedFieldsAndDirections = function (name) {\n        var fields = [];\n        for (var i = 0; i < this.parent.sortSettings.columns.length; i++) {\n            fields.push(this.parent.sortSettings.columns[i][name]);\n        }\n        return fields;\n    };\n    ResponsiveDialogRenderer.prototype.sortButtonClickHandler = function (target) {\n        if (target) {\n            var columndiv = parentsUntil(target, 'e-responsivecoldiv');\n            var field = columndiv.getAttribute('data-e-mappingname');\n            if (!this.parent.allowMultiSorting) {\n                this.sortPredicate = [];\n                this.sortedCols = [];\n                this.isSortApplied = false;\n                this.resetSortButtons(target);\n            }\n            var txt = target.textContent;\n            var direction = txt === 'None' ? 'Ascending' : txt === 'Ascending' ? 'Descending' : 'None';\n            target.innerHTML = direction;\n            this.setSortedCols(field, direction);\n        }\n    };\n    ResponsiveDialogRenderer.prototype.resetSortButtons = function (target) {\n        var buttons = [].slice.call(this.customColumnDiv.getElementsByClassName('e-ressortbutton'));\n        for (var i = 0; i < buttons.length; i++) {\n            if (buttons[i] !== target) {\n                buttons[i].innerHTML = 'None';\n            }\n        }\n    };\n    ResponsiveDialogRenderer.prototype.setSortedCols = function (field, direction) {\n        var fields = this.getCurrentSortedFields();\n        var index = fields.indexOf(field);\n        if (this.parent.allowMultiSorting && index > -1) {\n            this.sortedCols.splice(index, 1);\n            this.sortPredicate.splice(index, 1);\n        }\n        this.isSortApplied = true;\n        if (direction !== 'None') {\n            this.sortedCols.push(field);\n            this.sortPredicate.push({ field: field, direction: direction });\n        }\n    };\n    ResponsiveDialogRenderer.prototype.getCurrentSortedFields = function () {\n        var fields = [];\n        for (var i = 0; i < this.sortedCols.length; i++) {\n            fields.push(this.sortedCols[i]);\n        }\n        return fields;\n    };\n    ResponsiveDialogRenderer.prototype.customFilterColumnClickHandler = function (e) {\n        if (this.action !== ResponsiveDialogAction.isFilter) {\n            return;\n        }\n        var gObj = this.parent;\n        var target = e.target;\n        if (gObj.filterSettings.type !== 'FilterBar') {\n            if (target.classList.contains('e-responsivecoldiv') || target.parentElement.classList.contains('e-responsivecoldiv')) {\n                var field = target.getAttribute('data-e-mappingname');\n                if (!field) {\n                    field = target.parentElement.getAttribute('data-e-mappingname');\n                }\n                if (field) {\n                    var col = gObj.getColumnByField(field);\n                    this.isRowResponsive = true;\n                    this.showResponsiveDialog(col);\n                }\n            }\n            else if (target.classList.contains('e-filterset') || target.parentElement.classList.contains('e-filtersetdiv')) {\n                var colDiv = parentsUntil(target, 'e-responsivecoldiv');\n                if (colDiv) {\n                    var field = colDiv.getAttribute('data-e-mappingname');\n                    var col = gObj.getColumnByField(field);\n                    if (col.filter.type === 'Menu' || (!col.filter.type && gObj.filterSettings.type === 'Menu')) {\n                        this.isDialogClose = true;\n                    }\n                    this.parent.filterModule.filterModule.clearCustomFilter(col);\n                    this.removeCustomDlgFilterEle(target);\n                }\n            }\n        }\n    };\n    /**\n     * Function to show the responsive dialog\n     *\n     * @param {Column} col - specifies the column\n     * @returns {void}\n     */\n    ResponsiveDialogRenderer.prototype.showResponsiveDialog = function (col) {\n        if (this.isCustomDialog && this.action === ResponsiveDialogAction.isFilter && !this.isRowResponsive) {\n            this.renderCustomFilterDialog();\n        }\n        else {\n            this.filteredCol = col;\n            this.renderResponsiveDialog(col);\n            if (this.parent.enableAdaptiveUI && col) {\n                this.parent.filterModule.setFilterModel(col);\n                this.parent.filterModule.filterModule.openDialog(this.parent.filterModule.createOptions(col, undefined));\n            }\n            if (this.action === ResponsiveDialogAction.isSort) {\n                var args = {\n                    cancel: false, dialogObj: this.customResponsiveDlg, requestType: 'beforeOpenAptiveSortDialog'\n                };\n                this.parent.trigger(events.beforeOpenAdaptiveDialog, args);\n                if (args.cancel) {\n                    return;\n                }\n            }\n            this.customResponsiveDlg.show(true);\n            this.customResponsiveDlg.element.style.maxHeight = '100%';\n            this.setTopToChildDialog(this.customResponsiveDlg.element);\n        }\n    };\n    ResponsiveDialogRenderer.prototype.setTopToChildDialog = function (dialogEle) {\n        var child = dialogEle.querySelector('.e-dialog');\n        if (child) {\n            var top_1 = dialogEle.querySelector('.e-dlg-header-content').getBoundingClientRect().height;\n            child.style.top = top_1 + 'px';\n        }\n    };\n    ResponsiveDialogRenderer.prototype.renderCustomFilterDialog = function (col) {\n        var gObj = this.parent;\n        if (this.action === ResponsiveDialogAction.isFilter && gObj.filterSettings.type === 'FilterBar') {\n            return;\n        }\n        var outerDiv = this.parent.createElement('div', {\n            id: gObj.element.id + 'customfilter', className: 'e-customfilterdiv e-responsive-dialog'\n        });\n        this.parent.element.appendChild(outerDiv);\n        this.customFilterDlg = this.getDialogOptions(col, true);\n        var args = {\n            cancel: false, dialogObj: this.customFilterDlg, requestType: 'beforeOpenAptiveFilterDialog'\n        };\n        this.parent.trigger(events.beforeOpenAdaptiveDialog, args);\n        if (args.cancel) {\n            return;\n        }\n        this.customFilterDlg.appendTo(outerDiv);\n        this.customFilterDlg.show(true);\n        this.customFilterDlg.element.style.maxHeight = '100%';\n    };\n    ResponsiveDialogRenderer.prototype.getDialogOptions = function (col, isCustomFilter, id) {\n        var options = new Dialog({\n            isModal: true,\n            showCloseIcon: true,\n            closeOnEscape: false,\n            locale: this.parent.locale,\n            target: this.parent.adaptiveDlgTarget ? this.parent.adaptiveDlgTarget : document.body,\n            visible: false,\n            enableRtl: this.parent.enableRtl,\n            content: this.renderResponsiveContent(col),\n            open: this.dialogOpen.bind(this),\n            created: this.dialogCreated.bind(this),\n            close: this.beforeDialogClose.bind(this),\n            width: '100%',\n            height: '100%',\n            animationSettings: { effect: 'None' }\n        });\n        var isStringTemplate = 'isStringTemplate';\n        options[isStringTemplate] = true;\n        if (isCustomFilter) {\n            options.header = this.renderResponsiveHeader(col, undefined, true);\n            options.cssClass = 'e-customfilter';\n        }\n        else {\n            options.header = this.renderResponsiveHeader(col);\n            options.cssClass = this.parent.rowRenderingMode === 'Vertical' && this.action === ResponsiveDialogAction.isFilter\n                ? 'e-res' + id + ' e-row-responsive-filter' : 'e-res' + id;\n        }\n        return options;\n    };\n    ResponsiveDialogRenderer.prototype.renderResponsiveDialog = function (col) {\n        var gObj = this.parent;\n        if (this.action === ResponsiveDialogAction.isFilter && gObj.filterSettings.type === 'FilterBar') {\n            return;\n        }\n        var id = this.action === ResponsiveDialogAction.isFilter ? 'filter' : 'sort';\n        var outerDiv = this.parent.createElement('div', {\n            id: gObj.element.id + 'responsive' + id, className: 'e-res' + id + 'div e-responsive-dialog'\n        });\n        this.parent.element.appendChild(outerDiv);\n        this.customResponsiveDlg = this.getDialogOptions(col, false, id);\n        this.customResponsiveDlg.appendTo(outerDiv);\n    };\n    ResponsiveDialogRenderer.prototype.dialogCreated = function () {\n        addBiggerDialog(this.parent);\n    };\n    ResponsiveDialogRenderer.prototype.dialogOpen = function () {\n        if (this.action === ResponsiveDialogAction.isSort && this.parent.allowMultiSorting) {\n            for (var i = 0; i < this.parent.sortSettings.columns.length; i++) {\n                this.sortedCols.push(this.parent.sortSettings.columns[i].field);\n                var sortField = this.parent.sortSettings.columns[i].field;\n                var sortDirection = this.parent.sortSettings.columns[i].direction;\n                this.sortPredicate.push({ field: sortField, direction: sortDirection });\n            }\n        }\n    };\n    ResponsiveDialogRenderer.prototype.beforeDialogClose = function (args) {\n        this.isDialogClose = args.element && !args.element.querySelector('.e-xl-customfilterdiv')\n            && args.element.classList.contains('e-resfilterdiv');\n        if (this.action === ResponsiveDialogAction.isFilter) {\n            if (args.element.classList.contains('e-resfilterdiv')) {\n                this.parent.filterModule.filterModule.closeResponsiveDialog(this.isCustomDlgRender);\n            }\n            else if (args.element.classList.contains('e-customfilterdiv')) {\n                this.closeCustomFilter();\n            }\n        }\n        else if (this.action === ResponsiveDialogAction.isSort) {\n            this.closeCustomDialog();\n        }\n        this.parent.off(events.enterKeyHandler, this.keyHandler);\n    };\n    ResponsiveDialogRenderer.prototype.sortColumn = function () {\n        if (!this.isSortApplied) {\n            this.closeCustomDialog();\n            return;\n        }\n        if (this.sortPredicate.length) {\n            this.parent.setProperties({ sortSettings: { columns: [] } }, true);\n        }\n        for (var i = 0; i < this.sortPredicate.length; i++) {\n            this.parent.sortColumn(this.sortPredicate[i].field, this.sortPredicate[i].direction, this.parent.allowMultiSorting);\n        }\n        if (!this.sortPredicate.length) {\n            this.parent.clearSorting();\n        }\n        this.closeCustomDialog();\n    };\n    ResponsiveDialogRenderer.prototype.getHeaderTitle = function (args, col) {\n        var gObj = this.parent;\n        var title;\n        if (this.action === ResponsiveDialogAction.isEdit) {\n            title = gObj.localeObj.getConstant('EditFormTitle') + args.primaryKeyValue[0];\n        }\n        else if (this.action === ResponsiveDialogAction.isAdd) {\n            title = gObj.localeObj.getConstant('AddFormTitle');\n        }\n        else if (this.action === ResponsiveDialogAction.isFilter) {\n            title = col ? col.headerText || col.field : gObj.localeObj.getConstant('FilterButton');\n        }\n        else if (this.action === ResponsiveDialogAction.isSort) {\n            title = gObj.localeObj.getConstant('Sort');\n        }\n        return title;\n    };\n    ResponsiveDialogRenderer.prototype.getDialogName = function (action) {\n        var name;\n        if (action === ResponsiveDialogAction.isAdd || action === ResponsiveDialogAction.isEdit) {\n            name = 'dialogEdit_wrapper_title';\n        }\n        else if (action === ResponsiveDialogAction.isFilter) {\n            name = 'responsive_filter_dialog_wrapper';\n        }\n        return name;\n    };\n    ResponsiveDialogRenderer.prototype.getButtonText = function (action) {\n        var text;\n        if (action === ResponsiveDialogAction.isAdd || action === ResponsiveDialogAction.isEdit) {\n            text = 'Save';\n        }\n        else if (action === ResponsiveDialogAction.isFilter || this.action === ResponsiveDialogAction.isSort) {\n            text = 'OKButton';\n        }\n        return text;\n    };\n    /**\n     * Function to render the responsive header\n     *\n     * @param {Column} col - specifies the column\n     * @param {ResponsiveDialogArgs} args - specifies the responsive dialog arguments\n     * @param {boolean} isCustomFilter - specifies whether it is custom filter or not\n     * @returns {HTMLElement | string} returns the html element or string\n     */\n    ResponsiveDialogRenderer.prototype.renderResponsiveHeader = function (col, args, isCustomFilter) {\n        var _this = this;\n        var gObj = this.parent;\n        gObj.on(events.enterKeyHandler, this.keyHandler, this);\n        var id = gObj.element.id + this.getDialogName(this.action);\n        var header = gObj.createElement('div', { className: 'e-res-custom-element' });\n        var titleDiv = gObj.createElement('div', { className: 'e-dlg-custom-header', id: id });\n        titleDiv.innerHTML = this.getHeaderTitle(args, col);\n        header.appendChild(titleDiv);\n        var saveBtn = gObj.createElement('button');\n        if (!isCustomFilter) {\n            this.saveBtn = new Button({\n                cssClass: 'e-primary e-flat e-res-apply-btn'\n            });\n            saveBtn.innerHTML = gObj.localeObj.getConstant(this.getButtonText(this.action));\n            this.saveBtn.appendTo(saveBtn);\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            saveBtn.onclick = function (e) {\n                _this.dialogHdrBtnClickHandler();\n            };\n        }\n        var isSort = this.action === ResponsiveDialogAction.isSort;\n        var isFilter = this.action === ResponsiveDialogAction.isFilter;\n        if (isFilter || isSort) {\n            var id_1 = isSort ? 'sort' : 'filter';\n            var clearBtn = gObj.createElement('button');\n            this.filterClearBtn = new Button({\n                cssClass: 'e-primary e-flat e-res-' + id_1 + '-clear-btn'\n            });\n            if (isFilter) {\n                var span = gObj.createElement('span', { className: 'e-btn-icon e-icon-filter-clear e-icons' });\n                clearBtn.appendChild(span);\n            }\n            else {\n                clearBtn.innerHTML = gObj.localeObj.getConstant('Clear');\n            }\n            header.appendChild(clearBtn);\n            this.filterClearBtn.appendTo(clearBtn);\n            clearBtn.onclick = function (e) {\n                if ((parentsUntil(e.target, 'e-customfilter'))) {\n                    _this.parent.filterModule.clearFiltering();\n                    _this.removeCustomDlgFilterEle();\n                }\n                else {\n                    if (isFilter) {\n                        _this.filterClear();\n                    }\n                    else {\n                        _this.resetSortButtons();\n                        _this.sortedCols = [];\n                        _this.sortPredicate = [];\n                        _this.isSortApplied = true;\n                    }\n                }\n            };\n            header.appendChild(clearBtn);\n        }\n        if (!isCustomFilter) {\n            header.appendChild(saveBtn);\n        }\n        return header;\n    };\n    ResponsiveDialogRenderer.prototype.filterClear = function () {\n        this.parent.filterModule.filterModule.clearCustomFilter(this.filteredCol);\n        this.parent.filterModule.filterModule.closeResponsiveDialog();\n    };\n    ResponsiveDialogRenderer.prototype.dialogHdrBtnClickHandler = function () {\n        if (this.action === ResponsiveDialogAction.isEdit || this.action === ResponsiveDialogAction.isAdd) {\n            this.parent.endEdit();\n        }\n        else if (this.action === ResponsiveDialogAction.isFilter) {\n            this.parent.filterModule.filterModule.applyCustomFilter({ col: this.filteredCol, isCustomFilter: this.isCustomDlgRender });\n        }\n        else if (this.action === ResponsiveDialogAction.isSort) {\n            this.sortColumn();\n        }\n    };\n    ResponsiveDialogRenderer.prototype.closeCustomDialog = function () {\n        if (this.isCustomDlgRender) {\n            var mainfilterdiv = this.customResponsiveDlg.element.querySelector('.e-mainfilterdiv');\n            remove(mainfilterdiv);\n            return;\n        }\n        this.isRowResponsive = false;\n        this.isCustomDlgRender = false;\n        this.destroyCustomFilterDialog();\n    };\n    ResponsiveDialogRenderer.prototype.destroyCustomFilterDialog = function () {\n        if (!this.customResponsiveDlg) {\n            return;\n        }\n        var elem = document.getElementById(this.customResponsiveDlg.element.id);\n        if (this.customResponsiveDlg && !this.customResponsiveDlg.isDestroyed && elem) {\n            this.customResponsiveDlg.destroy();\n            remove(elem);\n        }\n        this.closeCustomFilter();\n        if (this.action === ResponsiveDialogAction.isSort) {\n            this.sortPredicate = [];\n            this.sortedCols = [];\n            this.isSortApplied = false;\n        }\n    };\n    ResponsiveDialogRenderer.prototype.closeCustomFilter = function () {\n        if (!this.isDialogClose && this.customFilterDlg) {\n            var customEle = document.getElementById(this.customFilterDlg.element.id);\n            if (this.customFilterDlg && !this.customFilterDlg.isDestroyed && customEle) {\n                this.customFilterDlg.destroy();\n                remove(customEle);\n            }\n        }\n        this.isCustomDialog = false;\n        this.isDialogClose = false;\n    };\n    ResponsiveDialogRenderer.prototype.removeCustomDlgFilterEle = function (target) {\n        if (target) {\n            if (target.parentElement.classList.contains('e-filtersetdiv')) {\n                remove(target.parentElement);\n            }\n            else {\n                remove(target);\n            }\n        }\n        else {\n            var child = this.customColumnDiv.children;\n            for (var i = 0; i < child.length; i++) {\n                target = child[i].querySelector('.e-filtersetdiv');\n                if (target) {\n                    remove(target);\n                    i--;\n                }\n            }\n        }\n    };\n    ResponsiveDialogRenderer.prototype.keyHandler = function (e) {\n        if (e.keyCode === 13 && ((this.action === ResponsiveDialogAction.isFilter\n            && e.target.classList.contains('e-searchinput'))\n            || (this.action === ResponsiveDialogAction.isEdit || this.action === ResponsiveDialogAction.isAdd))) {\n            this.dialogHdrBtnClickHandler();\n        }\n    };\n    ResponsiveDialogRenderer.prototype.editComplate = function (args) {\n        if (args.requestType === 'save' || args.requestType === 'cancel') {\n            this.parent.off(events.enterKeyHandler, this.keyHandler);\n        }\n    };\n    ResponsiveDialogRenderer.prototype.removeEventListener = function () {\n        if (this.customColumnDiv) {\n            EventHandler.remove(this.customColumnDiv, 'click', this.customFilterColumnClickHandler);\n        }\n        addRemoveEventListener(this.parent, this.evtHandlers, true, this);\n        this.parent.removeEventListener(events.actionComplete, this.onActionCompleteFn);\n    };\n    return ResponsiveDialogRenderer;\n}());\nexport { ResponsiveDialogRenderer };\n"]},"metadata":{},"sourceType":"module"}