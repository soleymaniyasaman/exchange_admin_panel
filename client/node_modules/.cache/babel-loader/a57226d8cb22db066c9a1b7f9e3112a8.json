{"ast":null,"code":"import _regeneratorRuntime from\"/Users/yasaman/Documents/moj_adminpanel/adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/yasaman/Documents/moj_adminpanel/adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/yasaman/Documents/moj_adminpanel/adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{ReactDOM}from\"react\";import CKEditor from\"./classicEditor\";import{IAM_APP,TERMS_AND_CONDITIONS_ITEM,TERMS_AND_CONDITIONS_UPDATE}from'../../utils/constants';import{useFetchApi}from'../../utils/hooks';import{Container,Box,Dialog,DialogTitle,DialogContent,DialogActions}from'@material-ui/core';import{Button}from'@material-ui/core';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ConfirmModal=function ConfirmModal(props){return/*#__PURE__*/_jsxs(Dialog,{maxWidth:\"xs\"//   onEntering={handleEntering}\n,\"aria-labelledby\":\"confirmation-dialog-title\",open:props.openModal,children:[/*#__PURE__*/_jsx(DialogTitle,{id:\"confirmation-dialog-title\",children:\"\\u0622\\u06CC\\u0627 \\u0627\\u0632 \\u062A\\u063A\\u06CC\\u06CC\\u0631 \\u0645\\u062A\\u0646 \\u0645\\u0637\\u0645\\u0626\\u0646 \\u0647\\u0633\\u062A\\u06CC\\u062F\\u061F\"}),/*#__PURE__*/_jsx(DialogContent,{}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{autoFocus:true,onClick:function onClick(){return props.setOpenModal(false);},variant:\"outlined\",color:\"secondary\",children:\"\\u062E\\u06CC\\u0631\"}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(){props.handleUserApprove();setTimeout(function(){props.setOpenModal(false);},2000);},variant:\"contained\",color:\"primary\",children:\"\\u0628\\u0644\\u0647\"})]})]});};var Help=function Help(){var _React$useState=React.useState(),_React$useState2=_slicedToArray(_React$useState,2),content=_React$useState2[0],setContent=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),openModal=_React$useState4[0],setOpenModal=_React$useState4[1];var _useFetchApi=useFetchApi(undefined),_useFetchApi2=_slicedToArray(_useFetchApi,2),_useFetchApi2$=_useFetchApi2[0],aboutUs=_useFetchApi2$.data,aboutUsLoading=_useFetchApi2$.isLoading,doFetch=_useFetchApi2[1];var _useFetchApi3=useFetchApi(undefined,{}),_useFetchApi4=_slicedToArray(_useFetchApi3,2),_useFetchApi4$=_useFetchApi4[0],aboutUsUpdate=_useFetchApi4$.data,aboutUsUpdateLoading=_useFetchApi4$.isLoading,getAboutUs=_useFetchApi4[1];//------ Test for race condition ------ //\nvar setContents=function setContents(){console.log(\"Setting content\",typeof content);};var onChange=function onChange(evt){setContent(evt.editor.getData());// console.log(\"onChange fired with event info: \",evt, \"and data: \",evt.editor.getData());\n// console.log(\"and data: \",evt.editor.getData());\n};// const onBlur =(evt) => {\n// }\n// const afterPaste =(evt) => {\n// }\nconsole.log(\"content\",content);function handleSave(){return _handleSave.apply(this,arguments);}function _handleSave(){_handleSave=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var payload;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"Setting content\",content);payload={\"key\":\"string\",\"value\":content,\"additional_data\":{}};getAboutUs(\"PUT\",IAM_APP,TERMS_AND_CONDITIONS_UPDATE(10),payload);case 3:case\"end\":return _context.stop();}}},_callee);}));return _handleSave.apply(this,arguments);}React.useEffect(function(){doFetch(\"GET\",IAM_APP,TERMS_AND_CONDITIONS_ITEM(10));},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsx(ConfirmModal,{openModal:openModal,setOpenModal:setOpenModal,handleUserApprove:handleSave}),/*#__PURE__*/_jsx(\"div\",{className:\" d-flex align-items-center justify-content-between w-auto mx-auto pt-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/assets/drawer/Polygon.svg\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font_title_name me-1\",style:{minWidth:\"150px\"},children:\"\\u0635\\u0641\\u062D\\u0647 \\u0631\\u0627\\u0647\\u0646\\u0645\\u0627\"})]})}),/*#__PURE__*/_jsx(CKEditor,{content:content?content:aboutUs===null||aboutUs===void 0?void 0:aboutUs.value,activeClass:\"mt-4\",events:{// blur: onBlur,\n// afterPaste: afterPaste,\nchange:onChange}}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-end mt-3 ps-5\",children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:function onClick(){setOpenModal(true);// handleSave()\n},children:\"\\u062B\\u0628\\u062A \\u0627\\u0637\\u0644\\u0627\\u0639\\u0627\\u062A\"})})]});};export default Help;","map":{"version":3,"sources":["/Users/yasaman/Documents/moj_adminpanel/adminpanel/src/components/managemant/help.js"],"names":["React","ReactDOM","CKEditor","IAM_APP","TERMS_AND_CONDITIONS_ITEM","TERMS_AND_CONDITIONS_UPDATE","useFetchApi","Container","Box","Dialog","DialogTitle","DialogContent","DialogActions","Button","ConfirmModal","props","openModal","setOpenModal","handleUserApprove","setTimeout","Help","useState","content","setContent","undefined","aboutUs","data","aboutUsLoading","isLoading","doFetch","aboutUsUpdate","aboutUsUpdateLoading","getAboutUs","setContents","console","log","onChange","evt","editor","getData","handleSave","payload","useEffect","minWidth","value","change"],"mappings":"wfAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,CAAAA,QAAP,KAAqB,iBAArB,CACA,OAASC,OAAT,CAAmBC,yBAAnB,CAA+CC,2BAA/C,KAAiF,uBAAjF,CACA,OAASC,WAAT,KAA4B,mBAA5B,CACA,OAAUC,SAAV,CAAqBC,GAArB,CAA0BC,MAA1B,CAAkCC,WAAlC,CAA+CC,aAA/C,CAA8DC,aAA9D,KAAmF,mBAAnF,CACA,OAASC,MAAT,KAAuB,mBAAvB,C,wFAGA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,KAAD,CAAW,CAE9B,mBAAO,MAAC,MAAD,EACL,QAAQ,CAAC,IACX;AAFO,CAGL,kBAAgB,2BAHX,CAIL,IAAI,CAAEA,KAAK,CAACC,SAJP,wBAMH,KAAC,WAAD,EAAa,EAAE,CAAC,2BAAhB,mKANG,cAOH,KAAC,aAAD,IAPG,cAUH,MAAC,aAAD,yBACI,KAAC,MAAD,EAAQ,SAAS,KAAjB,CAAkB,OAAO,CAAG,yBAAMD,CAAAA,KAAK,CAACE,YAAN,CAAmB,KAAnB,CAAN,EAA5B,CAA6D,OAAO,CAAC,UAArE,CAAgF,KAAK,CAAC,WAAtF,gCADJ,cAII,KAAC,MAAD,EAAQ,OAAO,CAAG,kBAAM,CACpBF,KAAK,CAACG,iBAAN,GACAC,UAAU,CAAE,UAAM,CAACJ,KAAK,CAACE,YAAN,CAAmB,KAAnB,EAA0B,CAAnC,CAAsC,IAAtC,CAAV,CACH,CAHD,CAGG,OAAO,CAAC,WAHX,CAGuB,KAAK,CAAC,SAH7B,gCAJJ,GAVG,GAAP,CAsBD,CAxBD,CA2BA,GAAMG,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,EAAM,CAEjB,oBAA8BpB,KAAK,CAACqB,QAAN,EAA9B,oDAAOC,OAAP,qBAAgBC,UAAhB,qBACA,qBAAkCvB,KAAK,CAACqB,QAAN,CAAe,KAAf,CAAlC,qDAAOL,SAAP,qBAAkBC,YAAlB,qBACA,iBAA+DX,WAAW,CAACkB,SAAD,CAA1E,8EAAeC,OAAf,gBAASC,IAAT,CAAmCC,cAAnC,gBAAwBC,SAAxB,CAAoDC,OAApD,kBACA,kBAA+EvB,WAAW,CAACkB,SAAD,CAAY,EAAZ,CAA1F,+EAAeM,aAAf,gBAASJ,IAAT,CAAyCK,oBAAzC,gBAA8BH,SAA9B,CAAiEI,UAAjE,kBAEA;AACA,GAAMC,CAAAA,WAAW,CAAE,QAAbA,CAAAA,WAAa,EAAK,CACtBC,OAAO,CAACC,GAAR,CAAY,iBAAZ,CAA8B,MAAOb,CAAAA,OAArC,EACD,CAFD,CAIA,GAAMc,CAAAA,QAAQ,CAAE,QAAVA,CAAAA,QAAU,CAACC,GAAD,CAAS,CACvBd,UAAU,CAACc,GAAG,CAACC,MAAJ,CAAWC,OAAX,EAAD,CAAV,CACA;AACA;AACD,CAJD,CAMA;AACA;AAEA;AACA;AACAL,OAAO,CAACC,GAAR,CAAY,SAAZ,CAAsBb,OAAtB,EAvBiB,QAwBFkB,CAAAA,UAxBE,wIAwBjB,+IACEN,OAAO,CAACC,GAAR,CAAY,iBAAZ,CAA8Bb,OAA9B,EAEMmB,OAHR,CAGkB,CACZ,MAAO,QADK,CAEZ,QAASnB,OAFG,CAGZ,kBAAkB,EAHN,CAHlB,CASEU,UAAU,CAAC,KAAD,CAAQ7B,OAAR,CAAiBE,2BAA2B,CAAC,EAAD,CAA5C,CAAiDoC,OAAjD,CAAV,CATF,sDAxBiB,6CAsChBzC,KAAK,CAAC0C,SAAN,CAAiB,UAAM,CACtBb,OAAO,CAAC,KAAD,CAAQ1B,OAAR,CAAiBC,yBAAyB,CAAC,EAAD,CAA1C,CAAP,CACH,CAFE,CAEA,EAFA,EAGC,mBACI,aAAK,SAAS,CAAC,SAAf,wBACA,KAAC,YAAD,EAAc,SAAS,CAAEY,SAAzB,CAAoC,YAAY,CAAEC,YAAlD,CAAgE,iBAAiB,CAAEuB,UAAnF,EADA,cAEA,YAAK,SAAS,CAAC,wEAAf,uBACA,aAAK,SAAS,CAAC,QAAf,wBACI,YAAK,GAAG,CAAC,4BAAT,EADJ,cAEI,UAAG,SAAS,CAAC,sBAAb,CAAoC,KAAK,CAAE,CAACG,QAAQ,CAAE,OAAX,CAA3C,2EAFJ,GADA,EAFA,cAQA,KAAC,QAAD,EACE,OAAO,CAAErB,OAAO,CAACA,OAAD,CAASG,OAAT,SAASA,OAAT,iBAASA,OAAO,CAAEmB,KADpC,CAEE,WAAW,CAAC,MAFd,CAIE,MAAM,CAAE,CACN;AACA;AACAC,MAAM,CAAET,QAHF,CAJV,EARA,cAkBE,YAAK,SAAS,CAAC,sCAAf,uBACA,KAAC,MAAD,EACA,OAAO,CAAC,WADR,CAEA,KAAK,CAAC,SAFN,CAGA,OAAO,CAAE,kBAAM,CACbnB,YAAY,CAAC,IAAD,CAAZ,CACA;AACC,CANH,2EADA,EAlBF,GADJ,CA+BH,CAxED,CA0EA,cAAeG,CAAAA,IAAf","sourcesContent":["import React, { ReactDOM } from \"react\";\nimport CKEditor from \"./classicEditor\";\nimport { IAM_APP , TERMS_AND_CONDITIONS_ITEM , TERMS_AND_CONDITIONS_UPDATE} from '../../utils/constants';\nimport { useFetchApi } from '../../utils/hooks';\nimport {  Container, Box, Dialog, DialogTitle, DialogContent, DialogActions } from '@material-ui/core';\nimport { Button } from '@material-ui/core';\n\n\nconst ConfirmModal = (props) => {\n\n  return <Dialog\n    maxWidth=\"xs\"\n  //   onEntering={handleEntering}\n    aria-labelledby=\"confirmation-dialog-title\"\n    open={props.openModal}\n  >\n      <DialogTitle id=\"confirmation-dialog-title\">آیا از تغییر متن مطمئن هستید؟</DialogTitle>\n      <DialogContent >\n\n      </DialogContent>\n      <DialogActions>\n          <Button autoFocus onClick={ () => props.setOpenModal(false)} variant=\"outlined\" color=\"secondary\">\n              خیر\n          </Button>\n          <Button onClick={ () => {\n              props.handleUserApprove()\n              setTimeout( () => {props.setOpenModal(false)} , 2000 )\n          }} variant=\"contained\" color=\"primary\">\n              بله\n          </Button>\n      </DialogActions>\n  </Dialog>\n}\n\n\nconst Help = () => {\n\n  const [content, setContent] = React.useState();\n  const [openModal, setOpenModal] = React.useState(false);   \n  const [{ data: aboutUs, isLoading: aboutUsLoading },doFetch] = useFetchApi(undefined)\n  const [{ data: aboutUsUpdate, isLoading: aboutUsUpdateLoading }, getAboutUs] = useFetchApi(undefined, {})\n  \n  //------ Test for race condition ------ //\n  const setContents =() =>{\n    console.log(\"Setting content\",typeof content);\n  }\n\n  const onChange =(evt) => {\n    setContent(evt.editor.getData())\n    // console.log(\"onChange fired with event info: \",evt, \"and data: \",evt.editor.getData());\n    // console.log(\"and data: \",evt.editor.getData());\n  }\n\n  // const onBlur =(evt) => {\n  // }\n\n  // const afterPaste =(evt) => {\n  // }\n  console.log(\"content\",content)\n  async function handleSave() {\n    console.log(\"Setting content\",content);\n\n    const payload = {\n        \"key\": \"string\",\n        \"value\": content,\n        \"additional_data\":{}\n      \n      }\n    getAboutUs(\"PUT\", IAM_APP, TERMS_AND_CONDITIONS_UPDATE(10),payload)\n   }\n\n\n\n   React.useEffect( () => {\n    doFetch(\"GET\", IAM_APP, TERMS_AND_CONDITIONS_ITEM(10) )\n}, [])\n    return (\n        <div className=\"content\">\n        <ConfirmModal openModal={openModal} setOpenModal={setOpenModal} handleUserApprove={handleSave} />\n        <div className=\" d-flex align-items-center justify-content-between w-auto mx-auto pt-2\">\n        <div className=\"d-flex\">\n            <img src=\"/assets/drawer/Polygon.svg\" />\n            <p className=\"font_title_name me-1\" style={{minWidth: \"150px\"}}>صفحه راهنما</p>\n        </div>\n        </div>\n        <CKEditor\n          content={content?content:aboutUs?.value}\n          activeClass=\"mt-4\"\n          \n          events={{\n            // blur: onBlur,\n            // afterPaste: afterPaste,\n            change: onChange\n          }}\n        />\n          <div className=\"d-flex justify-content-end mt-3 ps-5\">\n          <Button \n          variant=\"contained\" \n          color=\"primary\" \n          onClick={() => {\n            setOpenModal(true)\n            // handleSave()\n            }}>ثبت اطلاعات</Button>\n          </div>\n      </div>\n    );\n  \n}\n\nexport default Help;"]},"metadata":{},"sourceType":"module"}